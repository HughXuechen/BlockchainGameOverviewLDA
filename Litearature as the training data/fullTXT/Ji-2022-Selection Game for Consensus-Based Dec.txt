Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources in a Blockchain Ecosystem
Received 29 August 2022, accepted 8 October 2022, date of publication 10 October 2022, date of current version 17 October 2022.
Digital Object Identifier 10.1109/ACCESS.2022.3213648
Selection Game for Consensus-Based
Decentralized Aggregators of Distributed
Energy Resources in a Blockchain Ecosystem
ZHENYA JI 1, (Member, IEEE), HAO LI1, YUQING BAO 1, (Member, IEEE),
WEI WANG1, (Member, IEEE), XUELIANG HUANG 2, (Member, IEEE),
ZHONG CHEN 2, (Member, IEEE), ZIQI ZHANG 2, AND YE RUI3
1School of Electrical and Automatic Engineering, Nanjing Normal University, Nanjing 210046, China
2School of Electrical Engineering, Southeast University, Nanjing 210096, China
3Beijing East Zhongtong Technology Development Company Ltd., Beijing 102200, China
Corresponding author: Zhenya Ji (jizhenya@njnu.edu.cn)
This work was supported in part by the National Natural Science Foundation of China under Grant 52107100 and Grant 52077035, in part
by the Natural Science Foundation of Jiangsu Province of China under Grant BK20190710, and in part by the Key Research and
Development Program of Jiangsu Province under Grant BE2020081-4.
ABSTRACT Aggregators can be effective in organizing distributed energy resources (DERs) for smart grids
and electricity markets. The recent development of blockchain and peer-to-peer (P2P) networks provides
a new ecosystem for aggregating DERs. Initial studies have mainly used off-the-shelf consensuses, which
may struggle to balance node sizes and computational intensities. Moreover, the dynamics of DERs changing
their selection among multiple aggregators over time are rarely considered in most related literature. This
freedom of selection, which is encouraged by the electricity market, can be better activated by a blockchain.
In this study, a game-dynamic-based selection framework for multiple aggregators of DERs is proposed
in a decentralized blockchain ecosystem. First, a proof-of-dual-credibility (Po2C) protocol is established
so that DERs in such an aggregator can reach consensus. At the same time, for one DER node, both an
unavoidable objective credit and a malicious subjective credit constitute its credibility with different weights.
Then, a function with triple payoffs motivates DERs in terms of both the physical characteristics of being
power supply devices and P2P nodes, the latter including consensus winning and data propagation. Third, the
selection game of DERs among aggregators is modeled as an evolutionary game under replicator dynamics to
find equilibrium. Numerical simulations with two and four aggregators show general stability in the selection
game of DERs. Performance achieved with different consensuses and incentives are compared as well. The
framework shows its great potential to organize DERs in a decentralized but aggregated mechanism in open
electricity markets.
INDEX TERMS Aggregation, consensus protocol, distributed generator, equilibrium, game dynamics, peer-
to-peer network.
I. INTRODUCTION
A. MOTIVATIONS
Developing a smart, low-carbon power grid involves the
integration of distributed energy resources (DERs), such as
micro renewable energy generators, flexible loads, electric
The associate editor coordinating the review of this manuscript and
approving it for publication was Vitor Monteiro .
vehicles, energy storage systems, etc. [1]. The rapid diffusion
of these various and numerous DERs poses a great challenge
to power systems. Compared with traditional grid-side gener-
ators, these consumer-side DERs are much smaller in capac-
ity, more geographically dispersed, and more complex to
schedule due to different uncertainties [2]. Thus, aggregators
are widely adopted to act as an intermediary between power
system operators and DERs [3]. For instance, the Federal
108722 This work is licensed under a Creative Commons Attribution 4.0 License. For more information, see https://creativecommons.org/licenses/by/4.0/ VOLUME 10, 2022
https://orcid.org/0000-0003-3816-1494
https://orcid.org/0000-0002-6076-4892
https://orcid.org/0000-0001-9911-7871
https://orcid.org/0000-0001-7513-3981
https://orcid.org/0000-0002-2146-1733
https://orcid.org/0000-0001-6640-8955
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
Energy Regulatory Commission (FERC) in the U.S. issued
a notice that would require transmission organizations and
system operators to create rules to enable aggregated DERs
to participate in wholesale markets. An open market allows
DER individuals to select among many aggregators in which
it is willing to participate [4].
With the help of DER aggregators, the scheduling pressure
of power system operators can be shifted downstream [5].
However, aggregators themselves have to find an effective
way to organize profit-seeking DER individuals and their
volatile outputs. At the same time, competitors emerge in the
open electricity market environment. In the traditional form
of centralized organization, there must be a central unit with
which each DER has to establish interactive communication,
putting significant pressure on reliability and expandability.
In addition, the cybersecurity of centralized aggregators must
be carefully addressed [6].
Recently, blockchain-enabled ecosystems in the energy
sector, especially in smart grids, have been developed, and
they can be utilized as a decentralized and self-organized
intermediary with a guarantee of transparency and tam-
per resilience [7]. This thriving technology is envisaged as
promising to overcome the challenges of centralized systems.
At the same time, the peer-to-peer (P2P) network allows
one individual node to share sources or data directly to oth-
ers, without relying on a centralized controller [8]. That is,
DERs can organize as nodes allowing P2P communication
among any individuals. Aggregators from these DERs forms
a typical P2P network. A blockchain-enabled P2P network
can theoretically provide an equal, trusted, and open-access
environment for power trading and settlement. Thus, in such
a blockchain-enabled aggregator, a centralized organization
is no longer needed, and DERs can autonomously organize
themselves and the aggregator they select to join [9].
A growing number of studies are interested in design-
ing blockchain-enabled energy communities. Related topics
include trading energies [10], supporting P2P trades [11],
motivating prosumers [12], etc. Pilot projects, e.g., the Brook-
lynmicrogrid [13], have also been reported.Meanwhile, there
are still some questions that need to be further answered,
which constitutes the main motivations of this paper. (Q1)
Which kind of consensus should be adapted for DER peers
in a blockchain-enabled aggregator? (Q2) What properties
should be incentivized for DERs in a blockchain-enabled
aggregator? (Q3) Do DER individuals behave as they would
in an open electricity market when selecting among multiple
aggregators?
B. RELATED WORKS
Some recent works can be introduced to further depict the
three questions that are essential to establish a decentralized
aggregator of DERs above.
For an arbitrary blockchain ecosystem, one of the essential
problems is to find an appropriate consensus protocol. This
also corresponds to the first question, Q1, here. Individuals
are expected to reach an agreement, i.e., consensus, based on
specific properties. A straightforward approach is to directly
adopt an off-the-shelf protocol, e.g., the Byzantine fault toler-
ant (BFT) protocol in [10], [12] or the proof-of-work (PoW)
protocol applied in [11] and [14].
Various BFT protocols are developed to tolerate Byzantine
attacks and random failures. On the other hand, the PoW
protocol achieves consensus bymaking nodes compete to win
a puzzle-solving process [15]. The different principles result
in advantages and drawbacks for each of these two types of
protocols, and it is difficult to strike a balance between com-
plexity and intensity [16]. For a large population of DERs,
an appropriate consensus paradigm must be carefully chosen
and improved [17].
The second question, Q2, further affects the design of con-
sensus, which is closely related to Q1. While traditional cen-
tralized aggregators are generally concerned with the energy
characteristics of DERs, most studies with the blockchain
structure tend to focus on their nature as nodes. Considering
that the original PoW wastes too many resources on solving
an unnecessary hash puzzle, the puzzle-solving race can be
changed into the rank of other characteristic. In specific,
when this characteristic is a certain type of credit, a Proof-
of-Credit (PoC) consensus can be developed under the PoW
paradigm. For Internet-of-Things (IoT) devices, a credit-
based PoW consensus is proposed in [18], where the credit
is defined as their obedience to system rules. Another PoC
blockchain protocol for electronic currency transactions is
presented in [19], where the credit is defined as a special stake
that quantifies howmuch the activities of nodes are beneficial
to the whole system.
Although there are some consensuses for DERs, it is still
in the early stage of development and needs some specific
improvement. On the one hand, unlike traditional incentive
models in centralized aggregators, DERs in decentralized
P2P networks need to take on more functions in terms of
information propagation and consensus [20], which should
also be reflected. On the other hand, uncertainties in DER
outputs are inevitable, so it may not be appropriate to use only
this single dimension to evaluate their credits [21].
The third question, Q3, evolves the dynamics in which the
DERs select among multiple aggregators and corresponding
equilibrium over time. Blockchain-enabled aggregators can
better establish an open environment, which has a great posi-
tive effect on non-monopolistic electricity markets in the real
world.
Existing studies generally do not focus on the freedom of
selection for DERs. It is a general default that DERs always
participate in the same aggregator given initially and have
no freedom to change, e.g., in [22] and [23]. In another
case, there is only one aggregator, either for the traditional
centralized structure, e.g., in [24], or the P2P structure, e.g.,
in [25].
Once the aggregator-selection of DERs is considered, the
equilibrium dynamics should be studied as well. Although
there are few studies specifically on this topic, the balance
of energy production and consumption within an aggregator
VOLUME 10, 2022 108723
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
or among multiple aggregators can provide some examples.
Game dynamics are considered in [26], while equilibrium is
obtained inside one P2P trading network. By using a leading
energy sharing node, the equilibrium of the demand response
of DERs is achieved under a leader-follower game [27]. The
evolutionary game in [28] shows the solvability of curtailed
load amounts for DERs to obtain evolutionary stability.
C. CONTRIBUTIONS
This paper is motivated to fill the gaps when answering the
three inevitable questions. The main contributions of this
paper are organized as follows.
1) A novel framework is organized to aggregate DERs in
a decentralized manner with the freedom of selection.
Derived from the PoC consensus, a more comprehen-
sive proof-of-dual-credibility (Po2C) is proposed along
with its payoff mechanism. In specific, the dual cred-
ibility constitutes two inherent features of DERs as
power devices and P2P nodes, and is measured by the
uncertainties that DERs may behave.
2) To better reflect the freedom and dynamics that DERs
should have among aggregators, their aggregating pro-
cess is mathematically described as game dynamics.
Furthermore, the proportional imitation rule is used
to obtain evolutionary stability among a population
of DERs.
3) Numerical simulations verify that, in the proposed
framework, free selections of DERs among multi-
ple aggregators can be activated. This process is
independent of the distributions at previous time inter-
vals. Moreover, the prescheduled powers of aggrega-
tors and the payoffs of being power supply devices and
P2P nodes for DERs are the factors that determine the
equilibrium states of each selection.
The remainder of this paper is organized as follows.
To answer Q1 along with Q2, Section 2 presents the proposed
framework of blockchain-enabled aggregators for DERs and
formulations of the Po2C consensus protocol and the incen-
tive model. As a response to Q3, a theoretical analysis of
equilibrium for aggregator-selection dynamics by DERs is
provided in Section 3. Section 4 demonstrates the case study
and results. The conclusion is discussed in Section 5.
II. FRAMEWORK AND CONSENSUS OF
BLOCKCHAIN-ENABLED AGGREGATORS FOR DERs
This section presents how DERs can perform and select
aggregators as a blockchain ecosystem. Necessary models,
i.e., consensus and incentives for DERs, are also provided.
A. FRAMEWORK
DERs include not only distributed generators (DGs) in
the distribution networks, e.g., rooftop photovoltaic units,
microturbines, and stationary energy storage devices, but
also demand-side resources (DRs) that can adjust load pro-
files, e.g., electric vehicles, temperature-controlled loads,
dryers, etc. DERs are often equipped with advanced
controlling, metering, and communicating functionalities.
Therefore, DERs can be organized autonomously through
P2P and blockchain technologies for a decentralized
aggregator.
The P2P links can be built over nodes in a blockchain-
enabled network. The term node refers to a logical entity,
which means a physical device is allowed to be asso-
ciated with different functionalities and with multiple
networks [16]. A node can not only provide the primary func-
tionality of data propagation by maintaining routes but can
also win the leadership competition in a decentralized con-
sensus protocol. With the development of smart-grid-related
technologies, e.g., IoT devices and the edge computing infras-
tructure, DERs can behave as autonomous, distributed, and
multifunctional nodes in a blockchain ecosystem [18].
Blockchain networks were initially intended to be com-
pletely decentralized in blockchain practices. Due to the
explosion of computational capability, it is common for indi-
vidual nodes to join a so-called mining pool to increase
their chance of sharing the winning of mining competitions.
Thus, many theoretical studies and practices suggest that
individuals are free to choose and join different mining pools.
This is similar to the organization of power scheduling, e.g.,
aggregators in electricity markets. The decentralized self-
regulating ability enabled by the blockchain ecosystem can
be adapted for aggregating autonomous DERs.
Specifically, enabled by a blockchain, an aggregator of
autonomous DERs can operate as a network without any
single authority. Moreover, an arbitrary DER in one of these
aggregators can be selected to join another aggregator as
desired. The proposed framework for the DER components
in a blockchain-enabled decentralized aggregator is shown
in Figure 1. The following settings are introduced without
disrupting the equity of decentralized DERs or being incom-
patible with the rules of mainstream electricity markets.
DERs can constitute nodes in the ecosystem by adapting
their consensus. They are not only devices capable of sup-
plying power but also providing necessary functionalities.
They become a peer in the network that activates propagation,
consensus participation, etc. Codes can be implemented in
DERs to make the process fully automated and unmanned.
A P2P network is created among multiple DER nodes as
peers. To boost participation without undermining scalability,
peers communicate in a gossip manner, similar to the Bitcoin
network. Instead of communicatingwith a centralized node or
with each other, each DER selects a small number of random
peers to gossip with and does not require a full connection
as topology. In addition, one peer can act as a public bulletin
board between an external electricity market or grid and the
aggregator, exchanging information about the power supply,
electricity prices, etc. However, decisions are still decentral-
ized and made by individuals with no centralized control
node.
Once such blockchain-enabled aggregators are established,
DERs can freely choose to participate in an aggregator.
As time changes, they can also select another aggregator.
108724 VOLUME 10, 2022
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
FIGURE 1. Framework for the components and selections of DERs among blockchain-enabled decentralized aggregators.
For one time interval, a DER can select only one aggregator
to participate with its power supply sold entirely to it. Nat-
urally, each DER can be seen as a rational and profit-driven
individual to maximize its payoff. Thus, the Nash equilibrium
among aggregators can be analyzed as an evolutionary game
with stability.
B. Po2C CONSENSUS
The organization of P2P nodes is related to the consensus
adopted in a blockchain. Many consensus mechanisms have
bloomed in the past decade for different applications. A sum-
mary of the two most widely adopted consensus paradigms in
various blockchains, i.e., BFT and proof-of-concept (PoX),
is provided in Table. 1.
BFT consensus protocols, e.g., PBFT and Paxos,
are widely adopted in blockchains for government and
corporate affairs. This type of protocol may award a first-
mover advantage for adopters, e.g., PFBT applied in Hyper-
Ledger Fabric [29]. In some energy-related blockchains, e.g.,
energy trading transactions, as aforementioned, it can also
be adopted by default. However, for these BFT protocols,
a fully connected topology among consensus nodes and a
leader–peer hierarchy with three-way handshakes are neces-
sary. This leads to a communication complexity of 2(n2),
where n is the total number of nodes in a network [16].
TABLE 1. Two typical consensus paradigms in P2P networks.
In the past few years, with the advent of the Nakamoto
protocol in Bitcoin, also known as PoW, various PoX-based
protocols have rapidly emerged. In each consensus round of a
PoX-based protocol, nodes prove that they have a particular
capability, usually by competing to perform a complex but
easily verifiable task, and the winning node obtains credit.
In contrast to BFT-based protocols, P2P nodes accept the
received block proposal following the longest-chain rule after
they verify the validity of the block. Since no all-to-all mes-
saging phase in three-way handshakes is needed, a PoX-based
protocol may have a complexity of 2(n), much smaller than
the 2(n2) complexity in BFT [16].
As shown in Table 1, the BFT paradigm may not be
suitable for aggregating DERs that are widely distributed
and have a large population. The PoX-based paradigm is
a more appropriate solution but needs to overcome several
aspects. The first is the high degree of electricity depletion
and computation intensity in the traditional PoW protocol.
The second is the ability to handle subjective deceptions and
objective errors. Unlike financial applications such as virtual
currency, DERsmay suffer from unintentional and uncontrol-
lable errors and deviations in forecasts, fluctuations, etc. [30],
which are often neglected in most existing PoX-based pro-
tocols for DERs. Thus, in the PoX-based paradigm, a Po2C
consensus is organized as follows.
In PoX-based protocols, each node should prove to what
extent it can contribute and win in a consensus round, e.g., the
hash rate in cryptomining. In the proposed Po2C, the required
proof is determined by a dual credibility rate, which considers
two types of credits regarding objective and subjective uncer-
tainties. For example, prediction deviations between planned
and actual powers are inevitable for some DERs, and thus it
belongs to the objective type. As another example, as a P2P
node, a DER may randomly tamper with the message that it
propagates, at which point this uncertainty is of the subjective
type. Four typical kinds of uncertainties are categorized in
Table 2. Other types can be incorporated by adding more
sub-credits.
VOLUME 10, 2022 108725
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
TABLE 2. Typical kinds of uncertainties with sub-credits and coefficients.
Thus, for DER node i, its dual-credibility rate Civt when
selecting aggregator v at time interval t is represented as
Civt = ϕv (Cit)
T (1)
in which
ϕv =
[
ϕ
obj,1
v ϕ
obj,2
v ϕsub,1v ϕsub,2v
]
(2)
Cit =
[
Cobj,1
it Cobj,2
it Csub,1
it Csub,2
it
]
(3)
where ϕv and Cit are vectors representing coefficients and
credits, ϕobj,1v , ϕobj,1v , ϕsub,1v and ϕsub,2v are sub-coefficients in
aggregator v, Cobj,1
it and Cobj,2
it are the objective sub-credits
for DER node i at time interval t , Cobj,1
it and Cobj,2
it are the
subjective sub-credits for DER node i at time interval t .
While values of ϕv can be given, Cit are updated based on
their credits in dealing with uncertainties at each consensus
round as follows
Cobj,x
it = Cobj,x
i(t−1) + η
objε
obj,x
i(t−2) (4)
Csub,x
it =
{
Csub,x
i(t−1) + ηh
∣∣∣logCsub,x
i(t−2)
∣∣∣ if i ∈ �h at t
ηmC
sub,x
i(t−1) if i ∈ �m at t
(5)
where x refers to the index of 1 and 2 in respective sub-credit,
ηobj is a penalty factor in the objective credit, εobj,xit is the
occurring rates of prediction deviations and communication
failures for DER i at time interval t , ηh and ηm are a reward
factor and a penalty factor, respectively, and �h and �m are
the set of honest nodes and malicious nodes.
Regardless of the aggregator chosen by DER i, its values
of Cit in (4)–(5) are utilized in a tamper-evident manner by
a blockchain. The logarithmic and linear forms in (5) can
control the rate of growth or decline in subjective credits,
respectively, while the cumulative effect of historical credit
decreases over time.
C. WINNING PROBABILITY OF DERs IN Po2C
Unlike the classical PoW protocol, which runs decryption
that has great computational resource demands, the Po2C
protocol uses the dual-credibility rate to directly represent
the willingness and capability of any DER that can con-
tribute to the blockchain. After updating the quantified credits
in the last consensus round, DERs in the same blockchain
need to compete for the right of book-keeping in the next
round. The necessary processes for a PoX-based protocol,
i.e., ability proving, P2P propagating, and transaction veri-
fying, are adapted as follows.
Most BFT-based and PoX-based protocols need to find a
leader node as the first step in initiating a consensus round.
The probability for a node to win as a leader is proportional
to the ratio between its stake and the overall stakes in the
whole network in PoX-based protocols. The Po2C protocol
reduces the waste of solving the hash function in PoW by
directly quantifying each node’s dual-credibility rate, which
does not affect this probability. Thus, the probability of DER i
successfully winning as a leader in aggregator v at time
interval t , i.e., pleaderivt , can be estimated as
pleaderivt = Civt
/ Nvt∑
j=1
Cj (6)
where Nvt is the total number of DERs in aggregator v at time
interval t, and j is also a DER number.
Then, DER nodes propagate information to neighboring
nodes and hope to be confirmed. Caused by the efficiencies
of P2P networks and lags among geographically dispersed
DERs, the propagation delay is nonnegligible. Based on an
empirical fitting curve for a P2P network in the PoWprotocol,
the average propagation time is determined by the sum of
a round-trip delay and a block verification delay [24]. This
propagation delay for aggregator v at time interval t , i.e., τvt ,
can be modeled as
τvt = a
/
Nvt + b (7)
where a and b are the coefficients reflecting the round-trip
and verification properties in a P2P network, respectively.
The incidence rate at which a valid block is orphaned by
propagation delay, i.e., r(τvt ), can be modeled by a Poisson
process from a network-level probability [16]
r(τvt ) = 1− e−τvtρv (8)
where ρv is the mean of the Poisson distribution in aggrega-
tor v, whose value is fixed by the average block arrival rate in
the P2P network.
At the end of each round, the probability that DER node i
can ultimately win the consensus in aggregator v at time
interval t , i.e., pwinivt , can be derived as
pwinivt = pleaderivt [1− r(τvt )]
= Civt · e−(a/Nvt+b)ρv
/ Nvt∑
j=1
Cj (9)
D. INCENTIVES FOR DERs WITH Po2C CONSENSUS
DERs in blockchain-enabled aggregators can earn incentives
from the perspectives of both supplying energy as power
nodes and supporting transactions as consensus nodes. The
latter includes participating in consensus and in the propaga-
tion of data. The three types of incentives are described below.
1) Power supply incentives. They are used to reward
the successful supply of electricity and are similar to
108726 VOLUME 10, 2022
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
traditional aggregators. They can be modeled by a
power supply function of DERs and the probability of
being identified in the aggregator.
2) Consensus winning incentives. They are assigned for
the particular node in (8) that wins the book-keeping
right in a consensus round. They are also the only
incentives that a blockchain provides to nodes in most
PoX-based protocols. For DERs with higher dual-
credibility rates, there is also a higher chance of gaining
this type of incentive.
3) Data propagation incentives. Because most nodes can-
not be rewarded for winning, a propagation incentive
is introduced to not only encourage DERs to keep P2P
transactions active but also attract DERs to select this
aggregator. As mentioned above, the communication
complexity of a PoX-based protocol is2(n). Thus, this
type of incentive is linearly related to the DER numbers
within the aggregator.
A DER resource hopes to schedule the largest amount
of power supply as it can within the maximum limits it
can provide. Meanwhile, the aggregator is likely to have a
contract with an external power market that binds the total
amount. The aggregator can determine powers that DERs can
supply according to Po2C values. An allocation function of
the power that DER i can supply when it selects to participate
in aggregator v at time interval t is
Pivt = Pmax
it − f (v,Pit) (10)
in which
f (v,Pit) =

1 if
Nvt∑
i=1
Pivt ≤ Pmax
vt
C−1ivt
Nvt∑
j=1
C−1j
(
Pmax
vt −
Nvt∑
i=1
Pivt
)
if
Nvt∑
i=1
Pivt > Pmax
vt
(11)
where Pivt is the power that DER i can schedule to supply
when it selects aggregator v at time interval t , f (v, Pit ) is the
utility factor for DER i in aggregator v at time interval t , Pmax
it
is the predicted maximum power that DER i can supply at
time interval t , and Pmax
vt is the total amount of power that
aggregator v should supply at time interval t .
Some customized types of DERs, e.g., electric vehicles,
energy storage devices, and temperature-controlled loads, can
also be utilized in (11) with more constraints, e.g., as in [32].
Therefore, for one DER, by simultaneously being a power
provider, a consensus-winning node, and a communicating
peer, it can expect a comprehensive payoff, described as
E[R(v,Pivt )] = αvtPivt + βvλtpwinivt + γvtλtzivt (12)
in which
λtPit = αvt
Nvt∑
i=1
Pivt + βvλt + γvtλt
Nvt∑
i=1
zivt ∀v ∈ V
(13)
0 < αvt < λt ∀v ∈ V (14)
γmax
v = γvt
Nvt∑
i=1
zivt ∀v ∈ V (15)
whereR(v,Pivt ) is the payoff whenDER i selects aggregator v
and provides Pit at time interval t , λt is an external market
clearing price at time interval t , αvt is a price that rewards
power supply in aggregator v at time interval t , βv and γvt
are the given rates in the market clearing price that rewards
consensus leader winning and P2P propagation in aggrega-
tor v, respectively, γmax
v is the maximum rate to a market
clearing price that rewards all the P2P gossips, and zivt is the
number of nodes that DER i gossips to in blockchain-enabled
aggregator v at time interval t .
To focus on how DERs select among multiple aggregators
and the feasibility of changing their selections, biddings of
aggregators and locational differences in an electricity market
are not introduced. Thus, a unified external market clearing
price for all aggregators is given as known. Equation (13)
ensures that the benefits received by an aggregator from the
external electricity market are fully shared by DERs in it.
In (12)–(15), Pmax
it , λt , βv, and γmax
v are taken as parameters
instead of variables, while αvt and γvt are constrained vari-
ables. In the last term of (12), the propagation incentive is
linearly positively correlated to zivt since the complexity of
the PoX-based protocol is 2(n).
III. SELECTION GAME AMONG AGGREGATORS
This section studies how DER individuals select a specific
aggregator that they prefer. The equilibrium process of DERs
in multiple aggregators is organized as an evolutionary game
with additional evolutionary stability.
A. GAME DYNAMICS OF DERs AND AGGREGATORS
DERs seek to select one aggregator by comparing its expected
payoffs in different aggregators, and it is rational to regard
the selection with the highest payoff as better. This process
differs from the traditional noncooperative game that ana-
lyzes how players behave through static solution concepts,
in which no individual has a unilateral incentive to change
their behaviors [33]. Evolutionary game theory is suitable
for describing the dynamics in these DERs and blockchain-
enabled aggregators.
From the perspective of the evolutionary game, DERs can
be taken as one single large-populated, well-mixed species
in the aggregator. Their rates of reproduction, i.e., fitness,
are translated as payoffs that each DER individual tries to
maximize [34]. The game dynamics can model how DER
individuals change their strategy for selecting aggregators
and finally achieve stability.
The evolutionary game dynamics for DERs to select an
aggregator at time interval t can be mathematically defined
with the 4-tuple Gt =
〈
I ,V , �t , {R (v,Pit ;�t)}v∈V
〉
as
follows.
1) I= {1, 2, . . . ,i, . . . ,I } is the finite population of DER
individuals.
VOLUME 10, 2022 108727
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
2) V= {1, 2, . . . ,v, . . . ,V } is the finite set of aggregators,
which represent the strategies that are available for
DERs to select.
3) �t ≡ {(ω1t , ω2t , . . . ,ωvt , . . . ,ωVt) |
∑V
v=1 ωvt = 1,
0 ≤ ωvt ≤ 1} is the vector of population states
at time interval t , where ωvt indicates the propor-
tion of the DER population selecting aggregator v at
time interval t . Relationships of
∑V
1 Nvt = I and
ωvt = Nvt
/
I hold.
4) R (v,Pit ;�t)v∈V is the set of each DER payoff in each
aggregator with different population states, in which
each value can be calculated by (12).
The classical replicator dynamics (RD) is suitable to
interpret this proposed noncooperative aggregator selection
dynamics [35]. It describes how DER individuals, called
replicators, make rational decisions by observing and trans-
ferring to aggregators that presently provide a higher payoff.
For an arbitrary aggregator, the rate of changing the selec-
tion strategy by the population of DER individuals is called
the per capita growth rate, which can be derived from the
difference between the expected payoff and the population’s
average payoff [36]. The dynamics for the evolution of the
population states of aggregators ∀ωvt ∈ �t can be organized
as an ordinary differential equation as a replicator equation,
∀v ∈ V ,∀t:
ω̇vt = ωvt
[
R(v,Pit ;�t )− R̄(�t )
]
(16)
in which
R̄(�t ) =
∑
v∈V
[ωvtR(v,Pit ;�t )] (17)
where ω̇vt is the per capita growth rate of aggregator v at time
interval t and R̄ (�t) is the average payoff of a DER selected
at random, i.e., the mean payoff of the whole population.
The naive evolutionary logic determines that a DER indi-
vidual switches to the candidate strategy only if its payoff is
higher than the payoff of its current strategy. Thus, a more
straightforward way to interpret (16) and (17) is as follows.
1) A scenario where ω̇vt> 0: The fitness (i.e., payoff)
from selecting v is above average; then, DER individu-
als will change their selections to aggregator v, leading
to the dynamics where the ωvt for aggregator v will
increase in the population;
2) A scenario where ω̇vt< 0: Based on the same logic, the
dynamics are opposite those in Scenario I, so the ωvt
for aggregator v will decreases;
3) A scenario where ω̇vt = 0: There is no evolutionary
motivation for corresponding DERs to change their
selected aggregators.
The flowchart for the game among DERs to select aggre-
gators is shown in Figure 2. In (16), the per capita growth rate
of aggregator v is considered to be the difference between a
random interaction and the whole set of DERs if aggregator
v is selected. The average payoff in (13) is depicted by repro-
ducing selection strategies through all the aggregators, which
is determined by the payoffs and the population proportion in
each aggregator. Features of DER individuals in a blockchain
environment, i.e., autonomous, noncooperative, etc., can be
fully retained in the evolutionary dynamics in (16) and (17).
According to the theory of dynamic systems, trajectories
in (16) leave the interior of �t invariant as well as each of
it faces [37].
FIGURE 2. Flowchart for the game of DERs selecting among multiple
aggregators.
B. EQUILIBRIUM WITH EVOLUTIONARY STABILITY
The stabilization of this dynamical system is analyzed con-
sidering that the payoff of a DER depends on the selections
of other DERs. Considering all the replicator equations in
the whole DER population, an evolutionarily stable strategy
(ESS) for the replicator dynamics is reached, which means
that none of the populations will evolve. A fixed point is
defined for the ESS such that the scenario with ω̇vt= 0 for
∀v ∈ V is satisfied. It is often described as a Nash equilibrium
(NE) with additional ESS properties [38]. To obtain the NE
of this game, Gt =
〈
I ,V , �t ,R (v,Pit;�t)v∈V
〉
, there are two
necessary theorems, i.e., the theorem for NE and the theorem
for the ESS, and their definitions need to be stated [39].
Theorem for NE. The replicator equation for an evolution-
ary game satisfies the following: i) a stable fixed point is
in NE and ii) a convergent trajectory in the interior of the
strategy space evolves toward NE.
The definition of NE is as follows. A population state
�∗t =
(
ω∗1t , ω
∗
2t , . . . ,ω
∗
vt , . . . ,ω
∗
Vt
)
is the NE state of this
108728 VOLUME 10, 2022
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
evolutionary game G if the following inequality holds
(�′t −�
∗
t )
T [R(v,Pit ;�′t )− R(v,Pit ;�∗t )
]
≤ 0
∀�′t , �
∗
t ∈ �t (18)
where �
′
t represents all the feasible states for population
states and R
(
v,Pit ;�
′
t
)
and R
(
v,Pit ;�∗t
)
are the vectors for
payoffs of aggregator v in population state sets �
′
t and �
∗
t ,
respectively.
The theorem for NE is the application of the traditional folk
theorem in evolutionary game theory. NE is determined by
the fixed point of the replicator dynamics. Next, the stability
of the NE state, i.e., the ESS, is further explored with the
generalization form of evolutionary games.
Theorem for the ESS. For the whole population of DERs:
i) �∗t is an ESS if and only if R
(
v,Pit ;�∗t
)
> R (v,Pit ;�t)
for all ωvt ∈ �∗t that are sufficiently close but not equal and
ii) ESS �∗t in the interior of �t is a globally asymptotically
stable fixed point of the replicator equation.
The ESS is defined as follows. Population state �∗t =(
ω∗1t , ω
∗
2t , . . . ,ω
∗
vt , . . . ,ω
∗
Vt
)
is an ESS of this evolutionary
game G where there is a neighbor that is sufficiently close
but not equal to �∗t if
(�′t −�
∗
t )
T [R(v,Pit ;�′t )− R(v,Pit ;�∗t )
]
= 0
∀�′t , �
∗
t ∈ �t (19)
For an arbitrary aggregator v, assume that there is another
population state ω′vt that attempts to intrude upon ω∗vt by
attracting a fringe of DER individuals to switch. Based
on (19), this ω′vt could be an ESS if the following inequality
holds
R(v,Pit ;ω′vt )− R(v,Pit ;ω∗vt ) ≥ 0 (20)
where R
(
v,Pit ;ω′vt
)
and R
(
v,Pit ;ω∗vt
)
are the payoffs for
DER i with power Pit in aggregator v when aggregator v’s
population states are ω′vt and ω
∗
vt , respectively.
The implications from (18) to (20) demonstrate that the RD
ends up in NE, and not just any NE state but an ESS. Proofs
based on the Lyapunov function for these two theorems can
be found in [37], [39].
C. AGGREGATOR SELECTION PROCEDURE BY DERs
The procedure for evaluating DER aggregator selection strat-
egy evolution is given in Table 3. It begins by assuming that
each DER individual occasionally selects one aggregator at
random. By comparing this payoff with the average payoff,
each DER determines whether it needs to change the aggre-
gator it currently selects. If so, the DER switches to a certain
aggregator in the next iteration.When there are more than two
blockchain-enabled aggregators, which is very likely, a ran-
dom switch choice is less efficient. A more efficient switch
choice considering multiple simultaneous comparisons based
on a probabilistic criterion is proposed as follows
ρi,v→u,t (k) = ωut max[R(u,Pit )− R(v,Pit ), 0] (21)
where k is the iteration number, ρi,v→u,t (k) is the probability
of DER i in aggregator v switching to aggregator u for time
interval t in iteration k , and K is the maximum number of
iterations to find equilibrium.
Criterion (21) is adapted from the pairwise comparisons
for proportions, i.e., a proportional imitation rule [40], which
is widely used in population games. In particular, DER indi-
viduals imitate strategies with a higher payoff with a proba-
bility that is proportional to the expected payoff obtained by
switching to another aggregator.
The final result of evolution is that every DER individual
uses a strategy with its highest payoff. The algorithm of
this evolutionary game is solved locally by DERs, in which
the relevant parameters they obtained and the choices they
finally made are secured by the blockchain. The main advan-
tage of the blockchain environment also includes the utility
of being truthful and open records of information. General
underlying technologies for blockchains, e.g., cryptographic
data structures, datagram transfer protocols, and distributed
ledger storage, are off-the-shelf technologies and thus are not
covered here.
TABLE 3. Algorithm of the selection game.
IV. CASE STUDY
A. SETTINGS FOR CASES AND COMPARISONS
Numerical simulations are conducted to evaluate DER selec-
tion behaviors considering different credit values in Po2C and
different numbers of aggregators. Free selection is open for
DERs at every time interval in the blockchain environment
for case studies.
Two cases, i.e., I = 4,000 DERs and V = 2 aggregators
in Case A and I = 10,000 DERs and V = 4 aggregators, are
considered separately. For DERs, the initial Cobj,x
it andCsub,x
it
are both set to 1 for all DERs for t = 0 and t = −1, in which
VOLUME 10, 2022 108729
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
the latter complements the historical values [41]. The rated
power of DERs Pmax
i is set from U (5, 25) with a unit of kW,
which is a very common range for distributed photovoltaics,
electric vehicles, flexible loads, etc. [42]. The expected out-
puts of Pmax
it are then sampled from U (0.4Pmax
i , Pmax
i ). For
objective uncertainties, the probability for inevitable errors
in DER outputs and communication failures, i.e., εobj,1it and
ε
obj,2
it , is set as the normal distributions ofN (0.5Pmax
it , 22) and
N (0.02, 0.012). For subjective uncertainties, the probability
that DER i behaves maliciously, i.e., i ∈ �m at t , is assumed
to fit a gamma distribution of 0(3, 2) with a unit of % [43].
For aggregators, parameter settings are as follows.
P2P-propagation-related parameters a + b and ρv are set
to 1,000 and 2, respectively [35]. The values of Pmax
vt in
different cases will be given along with simulations. The
external market clearing price λt is shown in Table 5 [44]. The
empirical distribution of zivt fits a power-law distribution with
an exponent value of 1.2 [45]. The default parameters in each
aggregator, including penalty factors in (2) and (4)–(5) as well
as unit prices for rewards in (12), are listed in Table 6. The
rules for setting penalty factors in (2) is explained as follows.
First, from the perspective of trustiness, which is encouraged
by blockchains, the objective uncertainties are less hostile
than subjective uncertainties, so that the values of ϕobj,1v and
ϕ
obj.2
v should be both less than ϕsub.1v and ϕsub.2v . Second,
as power devices, DERs are more prone to power fluctuations
or revocations than communication failures or tampering, and
the latter two have more impact on the operation of P2P
networks, thus ϕobj.2v and ϕsub.2 v should be greater than
ϕ
obj.1
v and ϕsub.1v , respectively. Adjustments will be specified
in comparisons
TABLE 4. External market clearing prices (unit: $/mwh).
TABLE 5. Default values for other parameters in each aggregator in
Cases A and B.
Simulations are conducted by Jupyter Notebook on the
Anaconda platform with an Intel Core i7 CPU at 2.4 GHz
with 8 GB of memory. The maximum number of iterations is
set to K = 1,000.
B. EVOLUTIONARY ANALYSIS FOR AGGREGATOR
SELECTIONS
Because NE has a significant effect on the proposed frame-
work and the results for Q1 and Q2, Q3 is answered first
by verifying the theoretical analysis of the game dynamics.
In this subsection, to observe the evolution with different
parameters, the Pmax
vt values in aggregators are large, i.e.,
no curtailment is triggered in (11).
Case A with two aggregators is first observed. The initial
DER populations in each aggregator are set to (75%, 25%),
(50%, 50%), and (10%, 90%). The iteration processes of
DER populations in each aggregator at t = 1 are depicted
in Figure 3. The ESSs at t = 1 in all three simulations are
approximately 66% and 34%. This shows that the equilib-
rium results are not significantly correlated with the initial
distributions. This indicates the feasibility of launching the
proposed framework that allows free selections of DERs
among aggregators.
FIGURE 3. Iterations of population states for the two aggregators in
Case A at t = 1 with different initial populations as follows:
(a) (75%, 25%); (b) (50%, 50%); and (c) (10%, 90%).
DER selection strategies continue to evolve. Figure 4 takes
t = 9 and 10 as examples. When parameters in aggre-
gators remain unchanged, population states change from
(66%, 34%) at t = 1 in Figure 3(a) to (82%, 18%) at t = 9 in
Figure 4(a). The ESS point may change due to the accumula-
tion of credit values and the fluctuation of powers. At the very
next time interval in Figure 4(a), i.e., t = 10, the aggregator
v = 2 increases the ratios of incentives for being P2P nodes,
108730 VOLUME 10, 2022
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
i.e., βv and γmax
v . As shown in Figure 4(b), the situation
in which many DERs selecting aggregator v = 1 changes
immediately, and the ESS point becomes (43%, 57%). This is
most likely because with a limited total incentive, the larger
the number of DERs, the less incentive for propagation that
individuals can share, and the probability of winning con-
sensus decreases. Once the aggregator v = 2 with a smaller
number of DERs raises the values of βv and γmax
v , DERs are
more likely to receive an increase in the total payoff. As seen
from the slope fields in Figure 4(c) and Figure 4(d), the fact
that each DER strategy is the one whereby no individual has a
unilateral payoff to change its selection is consistent with the
theoretical analysis of NE. This shows that this framework is
able to help the free selections for DERs with an obtainable
ESS point when an electricity market requires openness.
FIGURE 4. Iterations and equilibrium for replicator dynamics in Case A
with 2 aggregators at different time intervals: (a) population states
at t = 9; (b) population states at t = 10; (c) slope fields at t = 9;
(d) slope fields at t = 10.
Case B with 4 aggregators is simulated to further test the
generality. As mentioned above, the initial population distri-
butions do not affect the NE results. Thus, initial population
states can be set as random. Figure 6 depicts the evolution
processes in DER population states and per capita growth
rates at the next time interval. Since aggregator v = 3 sets
a higher ratio of incentives for propagation, i.e., γmax
v , its
population grows and exceeds aggregator v = 2 whose other
parameters are the same, despite the lower initial distribution.
Generally, changes in per capita growth rates in Figure 6(b)
converge to zero in a process consistent with Figure 6(a).
This indicates that when the number of aggregators with
different parameters increases, the framework still obtains
feasible solutions in the proposed algorithm for the evolution-
ary game.
FIGURE 5. Evolution of DER selection strategies among aggregators in
Case B with 4 aggregators at t = 1: (a) population states and (b) per
capita growth rates.
Figure 3 to Figure 5 show that the evolution processes of
aggregators’ selection always converge before the maximum
iteration. The time consumed for the cases in this and the
following subsections are summarized in Figure 6. The solu-
tion time fluctuates between 72 s and 113 s when V = 2.
It increases to between 135 s and 164 s when V increases to 4.
Although the time consumed increases with the number of
aggregators, it is still in a reasonable range. This indicates that
the game dynamics and the proposed algorithm are suitable
for analyzing the evolutionary process of DERs for their
selections among aggregators.
FIGURE 6. Distributions of time consumed by the algorithm for the
selection game in Case A and Case B with multiple time intervals.
C. PERFORMANCE WITH DIFFERENT CONSENSUSES AND
INCENTIVES
After showing that the evolutionary processes of selec-
tion are not a barrier to the proposed framework, to
VOLUME 10, 2022 108731
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
answer Q1 and Q2, more comparisons are analyzed, focusing
on the consensus and incentives. Case A with constrained
Pmax
vt is taken as the environment for this subsection.
First, consensus protocols are compared, while the
triple-incentive payoff function and game dynamics in the
framework remain unchanged. Using different values for sub-
coefficients ϕobj,1v and ϕobj,2v in aggregator v = 1, DER
populations in the two aggregators are shown in Figure 7.
When aggregator v = 1 treats the objective and subjective
uncertainties equally, i.e., changes its Po2C with ϕobj,1v equal
to ϕsub,1v and ϕobj,1v equal to ϕsub,2v , the DERs in aggregator
v = 1 regularly decrease. When aggregator v = 1 adjusts
its ϕobj,1v and ϕobj,2v to 0, i.e., the objective uncertainties are
disregarded, DERs in aggregator v = 1 increase conversely.
To distinguish it from Po2C, this consensus that does not
measure objective uncertainties is referred as Po1C here.
By accommodating uncontrollable objective uncertainties in
a consensus, it is beneficial to attract a larger population of
DERs in one aggregator.
FIGURE 7. Population states of DERs after selections with cumulative
power limits at each time interval in Case A, while ϕ
obj,1
v=1 = 0.1 and
ϕ
obj,2
v=1 = 5 in original Po2C, ϕ
obj,1
v=1 = 1.0 and ϕ
obj,2
v=1 = 5.0 in changed
Po2C, and ϕ
obj,1
v=1 = ϕ
obj,2
v=1 = 0 in Po1C, respectively.
Corresponding to the adjustment in the consensus and the
resulting changes in DER populations in Figure 7, total power
outputs in aggregators change as well. The reduction in (11)
is only for the preschedule, and if the actual output exceeds it,
it is still retained in the cumulative measurement. Moreover,
because the impact of a power surplus can be removed by
curtailment for aggregators, the shortage affects their perfor-
mance in the external market.
The prescheduled and actual cumulative powers are shown
in Figure 8. In general, cumulative powers are largely close
to the prescheduled powers in each aggregator, regardless of
the variations in the DER population. This demonstrates the
validity of the proposed framework. The overall differences
using the original Po2C with ϕobj,1v=1 = 0.1 and ϕobj,2v=1 = 1.0 are
the smallest across aggregators and time intervals. The details
are analyzed as follows.
For aggregator v = 1 in Figure 8(a), the increase in
the power deficit is more evident with Po1C, which may
be caused by not having enough DERs to select it. Mean-
while, the fluctuation in the power differences in Figure 8(a)
improves compared to the case where ϕobj,1v=2 = 1.0 and
ϕ
obj,2
v=2 = 5.0 but is more severe than in the case where
ϕ
obj,1
v=2 = 0.1 and ϕobj,2v=2 = 5. For aggregator v = 2, as shown in
Figure 8(b), as the population of DERs grows with Po1C, the
power deficit continues to decrease, but the surplus is higher.
This may be because DERs with more objective uncertainties
prefer to choose the Po1C consensus.
FIGURE 8. Prescheduled vs. actual cumulative powers and corresponding
differences with different consensuses after selections at each time
interval in Case A for (a) aggregator v = 1 and (b) aggregator v = 2.
In addition, prescheduled cumulative powers also affect the
population states. The higher the value is, the more DERs
that choose it, e.g., for aggregator v = 1 at time interval
t = 3 and for aggregator v = 2 at time interval t = 2.
This is probably because of the lower power that will be
curtailed by (11). However, for aggregators, because external
electricity markets will evaluate their deviations, it is not
108732 VOLUME 10, 2022
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
recommended to look for a single increase in the proportion
in Figure 7 but rather to combine the differences in Figure 8.
Relationships between DER populations and cumulative
powers can be further observed by comprehensive observa-
tions in both Figure 7 and Figure 8. Comparisons within the
aggregator itself show that if one aggregator overemphasizes
the penalty for objective uncertainties, i.e., using a Po2C
with higher ϕobj,1v and ϕobj,2v for credits, an insufficient DER
population will result, instead exacerbating the bias in cumu-
lative powers. Comparisons among aggregators suggest that
when the prescheduled cumulative power of an aggregator
is limited, not all DERs select the aggregator that places
less emphasis on objective credits. This is also be the reason
why the populations in NE are not disproportionately large in
Figure 7.
FIGURE 9. Comparisons of different numbers of incentives in Case A
with 2 aggregators at time interval t = 1: (a) population states in two
aggregators and (b) differences between prescheduled and actual
cumulative powers.
Second, different incentives are removed in the payoff for
aggregator v = 1, while Po2C and game dynamics remain.
The payoff function (12) with triple incentives is replaced by
double incentives that reward both power supply and consen-
sus leader winning and a single incentive that rewards power
supply only. Figure 9 shows the corresponding population
states and differences in cumulative powers. The performance
of aggregator v = 1 shows that if the P2P propagation
incentive is discouraged, the number of DERs in it decreases,
and a shortage emerges. If the incentive for the leader to
win is further removed, greater deviations will exist in the
aggregated power outputs. In particular, they are unfavorable
shortages that cannot be curtailed in the way that power
surplus can. This indicates that considering the need for
consensus and data propagation in the blockchain ecosystem,
a comprehensive payoff function helps the organization of
aggregators.
V. CONCLUSION
This study focuses on providing a decentralized framework
for aggregating DERs, in which DER individuals can freely
and dynamically select the aggregators they participate in
and achieve dynamic equilibrium. While the blockchain
ecosystem provides necessary transparency and security, a
Po2C consensus protocol for the P2P network is proposed,
in which quantitative models are separately given for objec-
tive credits and subjective credits. The dual properties of
DERs as power nodes and information nodes are also con-
sidered in an incentive model. The game dynamics for DER
selection among multiple aggregators are studied, and then,
an algorithm using pairwise comparisons is proposed to
find equilibrium. Simulation results show that the proposed
framework effectively enables DERs to organize themselves
autonomously with evolutionary stability. The proposed con-
sensus is fully decentralized and thus does not require cen-
tralized control from aggregators.
When focusing on consensus and game dynamics, the
interaction between aggregators and electricity markets or
power grids is simplified. Moreover, most electricity markets
currently only allowDERs to change selections at the end of a
trading day, which is simplified in the simulation by allowing
them to change after each time interval. In future studies, the
bidding processes of decentralized aggregators in electricity
markets can be further modeled, and market clearing prices
as variables determined by the bilevel equilibrium can be
investigated. Along with the bidding processes, more detailed
models for uncertainties, e.g., RES production profiles, dif-
ferent load shift ratios, various failures for communications,
can be further introduced. In addition, the optimization of
parameters in the consensus for various components of DERs
is also an important issue that is worth studying in future
work.
REFERENCES
[1] P. Fatouros, I. Konstantelos, D. Papadaskalopoulos, and G. Strbac,
‘‘Stochastic dual dynamic programming for operation of DER aggrega-
tors under multi-dimensional uncertainty,’’ IEEE Trans. Sustain. Energy,
vol. 10, no. 1, pp. 459–469, Jan. 2019.
[2] X. Chen, Q. Hu, Q. Shi, X. Quan, Z. Wu, and F. Li, ‘‘Residential HVAC
aggregation based on risk-averse multi-armed bandit learning for sec-
ondary frequency regulation,’’ J. Modern Power Syst. Clean Energy, vol. 8,
no. 6, pp. 1160–1167, 2020.
[3] D. Schwabeneder, C. Corinaldesi, G. Lettner, and H. Auer, ‘‘Business
cases of aggregated flexibilities in multiple electricity markets in a Euro-
pean market design,’’ Energy Convers. Manag., vol. 230, Feb. 2021,
Art. no. 113783.
[4] E. Sorin, L. Bobo, and P. Pinson, ‘‘Consensus-based approach to peer-to-
peer electricity markets with product differentiation,’’ IEEE Trans. Power
Syst., vol. 34, no. 2, pp. 994–1004, Mar. 2019.
[5] J. Ali, S. Massucco, and F. Silvestro, ‘‘Distribution level aggregator plat-
form for DSO support—Integration of storage, demand response, and
renewables,’’ Frontiers Energy Res., vol. 7, p. 36, Apr. 2019.
[6] S.-V. Oprea, A. Bara, and A. I. Andreescu, ‘‘Two novel blockchain-based
market settlement mechanisms embedded into smart contracts for securely
trading renewable energy,’’ IEEE Access, vol. 8, pp. 212548–212556,
2020.
[7] H. Li, F. Xiao, L. Yin, and F. Wu, ‘‘Application of blockchain technology
in energy trading: A review,’’ Frontiers Energy Res., vol. 9, Apr. 2021,
Art. no. 671133.
[8] L. Ramaswamy, B. Gedik, and L. Liu, ‘‘A distributed approach to node
clustering in decentralized peer-to-peer networks,’’ IEEE Trans. Parallel
Distrib. Syst., vol. 16, no. 9, pp. 814–829, Sep. 2005.
[9] M. Andoni, V. Robu, D. Flynn, S. Abram, D. Geach, D. Jenkins,
P. McCallum, and A. Peacock, ‘‘Blockchain technology in the energy sec-
tor: A systematic review of challenges and opportunities,’’ Renew. Sustain.
Energy Rev., vol. 100, pp. 143–174, Feb. 2019.
VOLUME 10, 2022 108733
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
[10] J. Guo, X. Ding, and W. Wu, ‘‘An architecture for distributed energies
trading in byzantine-based blockchains,’’ IEEE Trans. Green Commun.
Netw., vol. 6, no. 2, pp. 1216–1230, Jun. 2022.
[11] W. Hua, J. Jiang, H. Sun, and J. Wu, ‘‘A blockchain based peer-to-peer
trading framework integrating energy and carbon markets,’’ Appl. Energy,
vol. 279, Dec. 2020, Art. no. 115539.
[12] Y. Jiang, K. Zhou, X. Lu, and S. Yang, ‘‘Electricity trading pricing among
prosumers with game theory-based model in energy blockchain environ-
ment,’’ Appl. Energy, vol. 271, Aug. 2020, Art. no. 115239.
[13] E. Mengelkamp, J. Gärttner, K. Rock, S. Kessler, L. Orsini, and
C. Weinhardt, ‘‘Designing microgrid energy markets: A case study:
The Brooklyn microgrid,’’ Appl. Energy, vol. 210, pp. 870–880, Jan. 2018.
[14] C. Dang, J. Zhang, C.-P. Kwong, and L. Li, ‘‘Demand side load manage-
ment for big industrial energy users under blockchain-based peer-to-peer
electricitymarket,’’ IEEE Trans. Smart Grid, vol. 10, no. 6, pp. 6426–6435,
Nov. 2019.
[15] U. Bodkhe, D. Mehta, S. Tanwar, P. Bhattacharya, P. K. Singh, and
W.-C. Hong, ‘‘A survey on decentralized consensus mechanisms for cyber
physical systems,’’ IEEE Access, vol. 8, pp. 54371–54401, 2020.
[16] W. Wang, D. T. Hoang, P. Hu, Z. Xiong, D. Niyato, P. Wang, Y. Wen, and
D. I. Kim, ‘‘A survey on consensus mechanisms and mining strategy man-
agement in blockchain networks,’’ IEEE Access, vol. 7, pp. 22328–22370,
2019.
[17] P. Siano, G. D. Marco, A. Rolan, and V. Loia, ‘‘A survey and evaluation of
the potentials of distributed ledger technology for peer-to-peer transactive
energy exchanges in local energy markets,’’ IEEE Syst. J., vol. 13, no. 3,
pp. 3454–3466, Sep. 2019.
[18] J. Huang, L. Kong, G. Chen, M.-Y. Wu, X. Liu, and P. Zeng, ‘‘Towards
secure industrial IoT: Blockchain system with credit-based consensus
mechanism,’’ IEEE Trans. Ind. Informat., vol. 15, no. 6, pp. 3680–3689,
Jun. 2019.
[19] X. Han, Y. Yuan, and F.-Y. Wang, ‘‘A fair blockchain based on proof of
credit,’’ IEEE Trans. Computat. Social Syst., vol. 6, no. 5, pp. 922–931,
Oct. 2019.
[20] T. AlSkaif, J. L. Crespo-Vazquez, M. Sekuloski, G. van Leeuwen,
and J. P. S. Catalao, ‘‘Blockchain-based fully peer-to-peer energy trading
strategies for residential energy systems,’’ IEEE Trans. Ind. Informat.,
vol. 18, no. 1, pp. 231–241, Jan. 2022.
[21] O. M. Adeyanju, L. N. Canha, C. A. S. Rangel, and J. C. Do Prado,
‘‘Semi-decentralized and fully decentralized multiarea economic dis-
patch considering participation of local private aggregators using meta-
heuristic method,’’ Int. J. Electr. Power Energy Syst., vol. 128, Jun. 2021,
Art. no. 106656.
[22] Z. Pei, Y. Ma, M. Wu, and J. Yang, ‘‘Study on load-participated demand
response model based on load aggregator,’’ Frontiers Energy Res., vol. 9,
p. 820, Dec. 2021.
[23] T. Morstyn, A. Teytelboym, and M. D. McCulloch, ‘‘Designing decentral-
ized markets for distribution system flexibility,’’ IEEE Trans. Power Syst.,
vol. 34, no. 3, pp. 2128–2139, May 2019.
[24] M. D. Somma, G. Graditi, and P. Siano, ‘‘Optimal bidding strategy for
a DER aggregator in the day-ahead market in the presence of demand
flexibility,’’ IEEE Trans. Ind. Electron., vol. 66, no. 2, pp. 1509–1519,
Feb. 2019.
[25] S. Cui, Y.-W. Wang, Y. Shi, and J.-W. Xiao, ‘‘An efficient peer-to-peer
energy-sharing framework for numerous community prosumers,’’ IEEE
Trans. Ind. Informat., vol. 16, no. 12, pp. 7402–7412, Dec. 2020.
[26] B. Zheng, W. Wei, Y. Chen, Q. Wu, and S. Mei, ‘‘A peer-to-peer energy
trading market embedded with residential shared energy storage units,’’
Appl. Energy, vol. 308, Feb. 2022, Art. no. 118400.
[27] L. Chen, N. Liu, C. Li, and J. Wang, ‘‘Peer-to-peer energy sharing with
social attributes: A stochastic leader–follower game approach,’’ IEEE
Trans. Ind. Informat., vol. 17, no. 4, pp. 2545–2556, Apr. 2021.
[28] O. Han, T. Ding, L. Bai, Y. He, F. Li, and M. Shahidehpour, ‘‘Evolutionary
game based demand response bidding strategy for end-users using Q-
learning and compound differential evolution,’’ IEEE Trans. Cloud Com-
put., vol. 10, no. 1, pp. 97–110, Jan. 2022.
[29] S.Wang, L. Ouyang, Y. Yuan, X. Ni, X. Han, and F.-Y.Wang, ‘‘Blockchain-
enabled smart contracts: Architecture, applications, and future trends,’’
IEEE Trans. Syst., Man, Cybern. Syst., vol. 49, no. 11, pp. 2266–2277,
Nov. 2019.
[30] Y. Zhou, J. Wu, and C. Long, ‘‘Evaluation of peer-to-peer energy sharing
mechanisms based on a multiagent simulation framework,’’ Appl. Energy,
vol. 222, pp. 993–1022, Jul. 2018.
[31] C. Decker and R. Wattenhofer, ‘‘Information propagation in the bitcoin
network,’’ in Proc. IEEE (PP), Sep. 2013, pp. 1–10.
[32] D. Xu, B. Zhou, N. Liu, Q. Wu, N. Voropai, C. Li, and E. Barakhtenko,
‘‘Peer-to-peer multienergy and communication resource trading for inter-
connected microgrids,’’ IEEE Trans. Ind. Informat., vol. 17, no. 4,
pp. 2522–2533, Apr. 2021.
[33] J. Hofbauer and W. H. Sandholm, ‘‘Stable games and their dynamics,’’
J. Econ. Theory, vol. 144, no. 4, pp. 1665–1693, 2009.
[34] P. D. Taylor and L. B. Jonker, ‘‘Evolutionary stable strategies and game
dynamics,’’Math. Biosci., vol. 40, nos. 1–2, pp. 145–156, Jul. 1978.
[35] X. Liu,W.Wang, D.Niyato, N. Zhao, and P.Wang, ‘‘Evolutionary game for
mining pool selection in blockchain networks,’’ IEEE Wireless Commun.
Lett., vol. 7, no. 6, pp. 760–763, Oct. 2018.
[36] R. Cressman, C. Ansell, and K. Binmore, Evolutionary Dynamics and
Extensive Form Games. Cambridge, MA, USA: MIT Press, 2003.
[37] J. Hofbauer and K. Sigmund, Evolutionary Games and Population Dynam-
ics. Cambridge, U.K.: Cambridge Univ. Press, 1998.
[38] J. W. Weibull, Evolutionary Game Theory. Cambridge, MA, USA: MIT
Press, 1997.
[39] R. Cressman and Y. Tao, ‘‘The replicator equation and other game dynam-
ics,’’ Proc. Nat. Acad. Sci. USA, vol. 111, pp. 10810–10817, Jul. 2014.
[40] G. Como, F. Fagnani, and L. Zino, ‘‘Imitation dynamics in population
games on community networks,’’ IEEE Trans. Control Netw. Syst., vol. 8,
no. 1, pp. 65–76, Mar. 2021.
[41] W. Li, C. Feng, L. Zhang, H. Xu, B. Cao, and M. A. Imran, ‘‘A scalable
multi-layer PBFT consensus for blockchain,’’ IEEE Trans. Parallel Distrib.
Syst., vol. 32, no. 5, pp. 1146–1160, May 2021.
[42] J. Tu, M. Zhou, H. Cui, and F. Li, ‘‘An equivalent aggregated model
of large-scale flexible loads for load scheduling,’’ IEEE Access, vol. 7,
pp. 143431–143444, 2019.
[43] B. Mi, Y. Weng, D. Huang, Y. Liu, and Y. Gan, ‘‘A novel PoW scheme
implemented by probabilistic signature for blockchain,’’Comput. Syst. Sci.
Eng., vol. 39, no. 2, pp. 265–274, 2021.
[44] M. Caramanis, E. Ntakou, W. Hogan, A. Chakrabortty, and J. Schoene,
‘‘Co-optimization of power and reserves in dynamic T&D power mar-
kets with nondispatchable renewable generation and distributed energy
resources,’’ Proc. IEEE, vol. 104, no. 4, pp. 804–836, Apr. 2016.
[45] R. Zhou and K. Hwang, ‘‘PowerTrust: A robust and scalable reputation
system for trusted peer-to-peer computing,’’ IEEE Trans. Parallel Distrib.
Syst., vol. 18, no. 4, pp. 460–473, Apr. 2007.
ZHENYA JI (Member, IEEE) received the B.Eng.
and Ph.D. degrees in electrical engineering from
Southeast University, Nanjing, China, in 2009 and
2018, respectively. She was a Visiting Student with
Rheinisch-Westfälische Technische Hochschule
Aachen, Germany, from 2012 to 2013. She has
been a Lecturer at Nanjing Normal University,
since 2018. Her research interests include charg-
ing strategies for electric vehicles, electric vehi-
cle adoption policies, and modeling of integrated
energy systems.
HAO LI received the B.Eng. degree in electrical
engineering from theXi’anUniversity of Posts and
Telecommunications, Shaanxi, China, in 2021.
He is currently pursuing the master’s degree with
Nanjing Normal University. His research interests
include charging strategies for electric vehicles
and the coordination for distribution networks and
transportation networks.
108734 VOLUME 10, 2022
Z. Ji et al.: Selection Game for Consensus-Based Decentralized Aggregators of Distributed Energy Resources
YUQING BAO (Member, IEEE) was born in
Zhenjiang, China, in 1987. He received the Ph.D.
degree from Southeast University (SEU), Nanjing,
China, in 2016. He has been working as a Faculty
Member at Nanjing Normal University (NJNU),
since 2015. His current research interests include
power system operation and scheduling, power
demand side management, and the frequency con-
trol of the power systems.
WEI WANG (Member, IEEE) received the B.S.
degree in electrical engineering and automation
from Jiangnan University, Wuxi, China, in 2011,
and the M.S. and Ph.D. degrees in electrical
engineering from Southeast University, Nanjing,
China, in 2013 and in 2017, respectively. He cur-
rently works as an Associate Professor with the
School of Electrical and Automation Engineering,
Nanjing Normal University. His research interests
include integrated energy systems, energy harvest-
ing, and novel wireless power transfer systems.
XUELIANG HUANG (Member, IEEE) received
the Ph.D. degree in electrical engineering from
Southeast University, Nanjing, China, in 1997.
He was a Visiting Scholar at Tokyo University,
Tokyo, Japan, from 2002 to 2004. He is cur-
rently a Professor with the School of Electrical
Engineering, Southeast University. He is also the
Chief Director with the Jiangsu Key Laboratory
of Smart Grid Technology and Equipment, China.
His research interests include integrated multi-
energy systems, energy internet, smart charging management for electric
vehicles, and wireless charging technology.
ZHONG CHEN (Member, IEEE) received the
M.S. and Ph.D. degrees from the School of Elec-
trical Engineering, Southeast University, China,
in 2002 and 2006, respectively. He is currently
a Professor with the School of Electrical Engi-
neering, Southeast University. His research inter-
ests include electric vehicle, renewable energy, and
integrated power system operation and control.
ZIQI ZHANG received the B.S. degree from
the College of Electrical Engineering, Wuhan
University, China, in 2016, and the M.S. degree
from the School of Electrical Engineering,
Southeast University, China, in 2019, where he is
currently pursuing the Ph.D. degree. His research
interest includes integration of electric vehicle into
modern power systems.
YE RUI received the B.S. and M.S. degrees
from the Nanjing Institute of Technology, China,
in 2011 and 2015, respectively, and the Ph.D.
degree from the School of Electrical Engineering,
Southeast University, China, in 2022. He is cur-
rently a Researcher with Beijing East Zhongtong
Technology Development Company Ltd. His
research interest includes integration of electric
vehicle into modern power systems.
VOLUME 10, 2022 108735