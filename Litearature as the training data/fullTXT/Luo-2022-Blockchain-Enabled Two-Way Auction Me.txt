Blockchain-Enabled Two-Way Auction Mechanism for Electricity Trading in Internet of Electric Vehicles
IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022 8105
Blockchain-Enabled Two-Way Auction Mechanism
for Electricity Trading in Internet of
Electric Vehicles
Long Luo , Member, IEEE, Jingcui Feng, Hongfang Yu , Member, IEEE, and Gang Sun , Member, IEEE
Abstract—As people pay more attention to environment protec-
tion, the number of electric vehicles (EVs) is gradually increasing.
Energy trading management for EVs is becoming a challenge.
However, existing research has not considered the problem of
information sharing between energy traders and issues surround-
ing the protection of user privacy. Therefore, in this article,
we propose a vehicle-to-vehicle (V2V) and vehicle-to-grid (V2G)
electricity trading architecture based on blockchain. All energy
transactions of EVs can be recorded on the blockchain ledger to
ensure privacy and smart contracts work as agents for pricing
and optimal energy allocation. Furthermore, we introduce a two-
way auction mechanism based on the Bayesian game and design
a new price adjustment strategy. Finally, we propose a bidirec-
tional auction mechanism based on the Bayesian game approach.
We use extensive simulations to evaluate the performance of our
proposed algorithm. Simulation results show that the social wel-
fare and cost performance of our algorithm can be improved by
up to 102.8% and 319%, respectively.
Index Terms—Bidirectional auction mechanism, blockchain,
electric vehicles (EVs), energy trading, Internet of EVs.
I. INTRODUCTION
SMART grids are integrated, high-speed, two-way com-
munication networks designed to improve efficiency, reli-
ability, and safety through the use of advanced technolog-
ical equipment, automated control, and modern communi-
cations technologies [1]. Environmental pollution and fossil
fuel shortages have become two serious issues across the
globe [2]. New electric vehicles (EVs) are environmentally
friendly and energy efficient. EVs are by nature pollution-
free and utilize renewable energy sources; therefore, they have
Manuscript received February 19, 2021; revised April 28, 2021; accepted
May 15, 2021. Date of publication May 21, 2021; date of current version
May 23, 2022. This work was supported by the PCL Future Greater-Bay
Area Network Facilities for Large-Scale Experiments and Applications under
Grant PCL2018KP001. (Corresponding author: Gang Sun.)
Long Luo and Jingcui Feng are with the Key Laboratory of Optical
Fiber Sensing and Communications (Ministry of Education), University of
Electronic Science and Technology of China, Chengdu 611731, China (e-mail:
longluo.uestc@gmail.com; 734253596@qq.com).
Hongfang Yu is with the Key Laboratory of Optical Fiber Sensing and
Communications (Ministry of Education), University of Electronic Science
and Technology of China, Chengdu 611731, China, and also with Peng Cheng
Laboratory, Shenzhen 518066, China (e-mail: yuhf@uestc.edu.cn).
Gang Sun is with the Key Laboratory of Optical Fiber Sensing and
Communications (Ministry of Education) and the Agile and Intelligent
Computing Key Laboratory of Sichuan Province, University of Electronic
Science and Technology of China, Chengdu 611731, China (e-mail:
gangsun@uestc.edu.cn).
Digital Object Identifier 10.1109/JIOT.2021.3082769
great potential to alleviate environmental pollution and fossil
fuel shortages. Thus, many countries are vigorously promoting
the popularization of EVs.
The vehicle-to-grid (V2G) architecture is a revolution-
ary technology that allows for a two-way energy exchange
between EVs and the grid, with advantages such as the use
of auxiliary services, active power support for the grid, and
reactive power compensation, in such a way that is beneficial
for EVs [3]. EVs can either purchase energy from the grid or
sell their excess energy to the grid. As the data and energy
flow between EVs and the grid in both ways, EVs can be
charged when the grid load is low, and power can be fed back
to the grid during peak load periods, thus effectively allow-
ing the grid to engage in peak load transfer, improving energy
efficiency, and reducing transmission loss [4]. The vehicle-to-
vehicle (V2V) architecture allows an EV to transmit energy
through a two-way charger in the local grid and then distribute
it among EVs through a controller, such as a local energy
aggregator (LEAG). The LEAG is responsible for organizing
the EVs and ensuring they can interact with each other [5]. In
fact, through the use of the V2G and V2V architecture, an EV
is not only a means of transportation but also a controllable
load and distributed power source. However, as the number
of EVs increases, it becomes increasingly difficult to manage
their daily charging and discharging behavior. Therefore, the
universal popularization of EVs is faced with many challenges.
First, to meet the daily charging needs of EVs, a compre-
hensive and powerful charging infrastructure has been built
in various parts of the city. As the number of EVs rapidly
increases, their charging behavior can lead to congestion,
fluctuations, and extreme overload peaks in the distribution
network. There are two main ways to solve this problem.
First, a large number of centralized generators and amount of
energy storage equipment can be deployed in the power grid
to meet the energy demand during peak periods [6]. However,
this arrangement greatly increases the operating costs and
risk of an attack on the grid. An alternative approach is to
take advantage of the two-way energy trading characteristic
of EVs, which can be effectively utilized for a peak load
transfer of the grid, improve energy efficiency, and reduce
transmission loss by absorbing excess energy during off-peak
hours and delivering energy back to the grid during peak
hours [7]. This solution provides an entirely new and low-
cost approach that solves the problem of grid load without
additional operating costs.
2327-4662 c© 2021 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.
See https://www.ieee.org/publications/rights/index.html for more information.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
https://orcid.org/0000-0002-5219-1780
https://orcid.org/0000-0002-5219-1780
https://orcid.org/0000-0002-2448-8915
8106 IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022
Second, the existing research lacks a distributed convenient,
efficient, and secure mechanism that can be used for V2G
or V2V energy trading. The traditional energy trading plat-
form used by EVs relies on a centralized and trusted third
party, where all EVs are identified, authenticated, authorized,
and connected through a central cloud server. This central-
ized system has many shortcomings [8]: 1) the cloud server
is a bottleneck and single point such that its failure could dis-
rupt the entire network; 2) energy trading platforms provide
a complex set of services that could expose EVs to a range
of security and privacy threats, such as location tracking; and
3) failures due to security vulnerabilities (such as the installa-
tion of malware) can lead to serious accidents that compromise
the safety of passengers and other road users that are nearby.
Therefore, there is a need for a distributed convenient, effi-
cient and secure mechanism that can be used for V2G or V2V
energy trading.
Characterized by decentralization, transparency, immutabil-
ity, and global inclusiveness, blockchain has fostered a wide
range of novel applications and fields and transformed the
information Internet into the value Internet [9]. A blockchain
is essentially a distributed database, or public ledger, that
records all transactions or digital events; an energy trading
system can rely on such a distributed ledger rather than a cen-
tralized and trusted third party to record transaction data.
Moreover, an efficient and secure distributed energy trading
system can rely on distributed redundancy and encryption tech-
nology to ensure transaction data security and user privacy
protection. Blockchain has exactly these characteristics. It has
provided a unique technology in a distributed network for
secure energy transaction without trusted third parties through
the use of an immutable ledger and encryption technology,
and the execution of smart contracts. Therefore, the decentral-
ization, transparency, and immutability of blockchain make it
appropriate for secure energy trading among EVs.
To address the above-mentioned challenges and consider-
ing the characteristics of blockchain, we propose a V2V and
V2G electricity trading architecture based on blockchain. First,
at each charging field, we deploy an LEAG that can pro-
vide a series of energy trading services. Each LEAG acts as
a blockchain node that backups all blockchain data, and jointly,
the LEAGs maintain the blockchain and collect and validate
energy transaction records. Due to incomplete information
sharing among the charging and discharging EVs and to ensure
transactions are successful, we introduce a two-way auction
mechanism based on the Bayesian game that models the
optimal pricing problem for maximizing the utilities of both
sides of each electricity transaction. In addition, we design
a new price adjustment strategy based on the continuous two-
way auction mechanism. Next, we identify the optimal energy
allocation by solving a convex problem that maximizes social
welfare. Finally, to guarantee the fairness of transactions, this
energy trading scheme is written into a smart contract that is
deployed at each blockchain node.
The main contributions of this article are as follows.
1) We propose a V2V and V2G electricity trading archi-
tecture based on blockchain, where all EV transactions
can be recorded on the blockchain ledger to ensure all
information remains secure. Smart contracts simultane-
ously act as agents for pricing and the optimal energy
allocation. When a transaction occurs, the trading algo-
rithm designed in the smart contract is automatically
executed.
2) The Bayesian game is adopted to determine the pricing
in the distributed V2V electricity trading network with
incomplete information sharing. We introduce a two-
way auction mechanism based on the Bayesian game
and propose a new price adjustment strategy that can
improve the transaction success rate, thus improving
social welfare. We model the optimal pricing problem
based on maximizing the utilities of both sides of the
electricity transaction and model the optimal energy
allocation as a convex problem that maximizes social
welfare. Finally, we propose a bidirectional auction
based on the Bayesian game algorithm.
3) We use extensive numerical examples to evaluate the
performance of the proposed algorithms. The social wel-
fare and cost performance (CP) of our algorithm are
better than those of existing algorithms.
The remainder of this article is arranged as follows. Related
researches are reviewed in Section II. The system architecture
is presented in Section III, which includes the descriptions
of the system entities and the energy trading process. The
problem modeling of energy trading and the details of the
bidirectional auction based on the Bayesian game (BABG)
algorithm are described in Sections IV and V. We provide
the simulation results of the compared algorithms and analyze
their performance in Section VI. Finally, the conclusion of this
article is presented in Section VII.
II. RELATED WORK
A. V2G and V2V Energy Trading Scheme
Due to the popularization and promotion of EVs, the daily
energy trading behavior of EVs has attracted extensive atten-
tion from both industry and academia. There are two main
types of charging and discharging scenarios: 1) V2G and
2) V2V.
For the V2G scenario, much research has focused on EV
energy management in terms of charging stations [10]–[17].
Zou et al. [10] considered the coordination problem arising
from the need to charge a certain number of EVs within
a limited range and proposed a novel class of auction-based
games, proving that the effective bid set of EVs during charg-
ing is a Nash equilibrium (NE) of the underlying auction game.
Mohammadi et al. [11] modeled the plug-in EV (PEV) coop-
erative charging (PEV-CC) problem as a convex multitime-
step problem and introduced a receding horizon to integrate
feedback into the decision-making process, minimizing the
charging costs. Xu et al. [12] prioritized the scheduling of
plug-in (hybrid) EVs (PHEVs) based on the less laxity and
longer remaining processing time (LLLP) principle to mini-
mize the overall cost. Ghosh et al. [13] proposed an online
menu-based pricing system for EV charging, where the charg-
ing station determines the price for every arriving EV based
on its energy state and the time it will take for the EV to
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
LUO et al.: BLOCKCHAIN-ENABLED TWO-WAY AUCTION MECHANISM FOR ELECTRICITY TRADING 8107
charge. In [14], considering that the charging demand of EVs
cannot be matched with uncertain wind power generation, the
authors studied the coordination between the charging of EVs
and local wind power generation by considering a building
microgrid and proposing a distributed simulation-based policy
improvement (DSBPI) approach. In [15], a stochastic fore-
cast energy management strategy was proposed based on fast
rolling optimization and modeled stochastic driving behavior
as a probabilistic conversion matrix of PHEV demand torque
based on Markov chains to reduce energy consumption and
running time. To achieve specific economic objectives related
to the distribution network operators (DNOs) while ensuring
that EVs benefit from the system, Su et al. [16] proposed
a rolling horizontal scheduling method based on a genetic
algorithm (GA) to maximize the DNOs’ profit margin while
ensuring the interests of EVs are considered. In [17], the
author proposed a topology-aware V2G energy trading mech-
anism that aims to use the charging/discharging power of the
EVs to adjust the voltage deviation of the active distribution
system.
A few studies focused on distributed V2V energy trading
management [18]–[20]. Alvaro-Hermana et al. [18] presented
a novel peer-to-peer (P2P) energy trading mechanism for
two groups of EVs that greatly reduces the impact of the
charging process on the power system during working hours
and individually optimizes the energy cost of EVs in the
time-space dimension. To balance local electricity demand,
Kang et al. [19] proposed a local P2P energy transaction model
where the local purchasing and selling of energy between
PHEVs were conducted using a smart grid and providing
incentives for discharging PHEVs. Xia et al. [20] proposed
a V2V energy trading scheme based on Bayesian game
pricing in blockchain-enabled Internet of vehicles (BIoVs)
and obtained the optimal price under the linear strategic
equilibrium.
B. Blockchain-Based Applications
Blockchain is characterized by decentralization, trans-
parency, immutability, anonymity, and auditability, and has
fostered a wide range of novel applications and fields [21].
The key advantage is the peer-to-peer (P2P) distributed trust
provided by blockchain [21]: 1) eliminating the use of third
parties for transactions; 2) reducing transaction costs; and
3) shortening transaction time. Therefore, this new tech-
nology has received much attention in the fintech world,
where it was first introduced. In [22], a portfolio manage-
ment framework was proposed based on blockchain and a deep
reinforcement learning framework that continues to reallocate
capital into financial assets to improve expected returns and
reduce risk. However, due to the development of technology,
the application of blockchain is not limited to the financial
field. Blockchain is closely related to the new generation
of information technology, such as data sharing (DS) [23],
encryption techniques [24], artificial intelligence (AI) [25],
and the Internet of Things [26], [27].
Some studies have applied blockchain to energy
management [28]–[33]. Liang et al. [28] proposed a new
distributed protection framework based on blockchain to
improve the self-defense capability of modern power systems
by using electricity meters as nodes in the distributed
network and using electricity meter measurements as blocks.
Keshk et al. [29] proposed a privacy protection framework
for the privacy and security of smart grids; the framework
consisted of two main modules: 1) a two-level privacy
module and 2) an exception detection module. To balance
the flexible energy demand and uncertainty regarding local
photovoltaic (PV) output, Zhang et al. [30] proposed a P2P
local energy market model that includes both energy trading
and uncertain trading; the predicted power was matched
with demand that was flexible in terms of the timing, and
the uncertain power was matched with the demand that was
flexible in terms of the amount of power. Wang et al. [31]
developed an optimization model and architecture based on
blockchain to manage the operation of a crowdsourced energy
system (CES) with P2P energy transactions and were able
to produce the seamless exchange of energy. Li et al. [32]
proposed a new blockchain-based energy trading scheme
(BC-ETS), FeneChain, which uses anonymous authentication
to protect user privacy and employs a time-commitment-based
mechanism to verify the fairness of energy transactions. To
address challenges, such as insufficient scalability, vulner-
ability to network attacks, and low processing efficiency,
Guan et al. [33] proposed a secure and efficient BC-ETS,
which can both protect privacy and balance power supply and
demand.
A few studies applied blockchain to distributed V2V or V2G
energy trading management [20], [34], [35]. Li and Hu [34]
utilized consortium blockchain to design a scheme for bidi-
rectional power trading between EVs and the power grid and
proposed an improved krill herd (KH) algorithm to solve dis-
ordered charging of massive EVs. Sadiq et al. [35] developed
a blockchain-based trading model for V2V or vehicle to infras-
tructure (V2I) in which blockchain is implemented on RSUs
and introduced an account generation method based on the
time-series single-exponential technique.
In conclusion, blockchain works very well in the above
applications, so it has significant potential for vehicle energy
trading management. However, few studies have focused on
the energy scheduling management problem for V2V energy
trading.
III. SYSTEM ARCHITECTURE
A. Architecture and Entities
As shown in Fig. 1, the proposed electricity trading archi-
tecture based on blockchain mainly consists of the following
four entities.
1) EVs: The EVs are a new type of EV with a pollution-
free, low-noise driving mode equipped with a two-way
charge and discharge system. These EVs are envi-
ronmentally friendly and energy efficient, so they are
regarded as a promising transportation tool for green
cities. In our energy trading system, EVs have three
different roles (electricity buyer, electricity seller, and
idle user). An EV can choose to become a charging
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
8108 IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022
Fig. 1. Energy trading architecture based on blockchain.
EV (electricity buyer) or a discharging EV (electricity
seller). Then, the EV decides to trade with either the grid
or other EVs according its own requirements. The idle
EVs do not participate in this energy trading. However,
they can also participate in the next energy trading
according to their wishes. An EV chooses its role in our
system according to its energy status, its energy require-
ment, and the time it can spend for waiting. It takes less
time to trade with the grid than other EVs; however,
EVs gain more utility by trading with other EVs than
the grid. The details are given in Section IV.
2) LEAGs: There is a LEAG deployed in each charg-
ing field, and the LEAG provides a series of energy
trading services, including communication support,
information collection, and charging/discharging pric-
ing. Each LEAG is an energy consensus node, and the
LEAGs jointly maintain the blockchain, act according
to consensus, audit transactions, and share data. The
prewritten smart contract, which is our pricing mecha-
nism and ensures optimal energy allocation, is deployed
in each energy node. When a transaction occurs, the
smart contract acts as an energy trading auctioneer, and
the trading mechanism designed in the smart contract is
automatically executed, which coordinates charging EVs
and discharging EVs. There are three major components
in each LEAG: 1) a trading server; 2) an account server;
and 3) a storage server. The trading server is responsi-
ble for coordinating the EVs’ charging and discharging
activities, collecting information on the energy demand
of charging EVs and the energy supply of discharging
EVs, and executing the pricing and energy allocation
algorithm to match the charging and discharge EVs. The
trading server also monitors feedback from smart meters
Fig. 2. Energy trading process.
in real time and intelligently controls its two-way charg-
ing switch according to the energy allocation algorithm.
Each EV has a trading account that stores all its trading
records. Each EV also owns a digital wallet that stores
its digital assets. To protect the users’ privacy and ensure
anonymity, the real address of the wallet is replaced by
a set of random characters. The map between a random
wallet address and the corresponding trading account is
stored in the account server. The storage server stores
all the transaction records in the blockchain.
3) Power Grid: The power grid is a transmission network
connecting either power plants and substations or sub-
stations and mainly undertakes the task of transmitting
electric energy. In our system, the price of electricity
obtained from the power grid is stable over time, so it
is constant. To employ the market price, there is a need
to limit the price of charging EVs and discharging EVs.
Therefore, the LEAG sets the price of obtaining electric-
ity from the grid as the upper bound of the electricity
price for sellers and the price of energy sold to the grid
as the lower bound of the electricity price for buyers.
4) Smart Meters: Traditional electricity meters manage
electricity consumption; smart meters also have bidi-
rectional metering functions and thus, can adapt to
smart power grids and new energy sources. Each EV
is equipped with a built-in smart meter that records
the volume of energy transactions and provides strong
data support that allows it to pay for both charging and
discharging.
B. Energy Trading Process
This section provides a detailed description of energy trad-
ing in our system. As shown in Fig. 2, during energy trading,
the EV connected to the LEAG first chooses its role according
to its energy state and energy demand/surplus. Based on its
own requirements, each EV can decide to trade with either
the grid or other EVs. If the EV decides to trade with the
grid, it can do so immediately, without waiting. Conversely,
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
LUO et al.: BLOCKCHAIN-ENABLED TWO-WAY AUCTION MECHANISM FOR ELECTRICITY TRADING 8109
if the EV decides to trade with other EVs, it must wait for
a matching period, but the price of energy is more beneficial
for both the buyer and seller. The following mainly describes
the transactions that take place between EVs. Charging EVs
submit their energy demand to the LEAG, and discharging
EVs submit their energy supply requests to the LEAG. After
the LEAG collects and verifies the transaction requests for
a certain amount of time, it acts as the energy auctioneer and
coordinates the charging EVs and discharging EVs by trig-
gering the pricing and energy allocation mechanism designed
in the smart contract. EVs trade with other EVs according to
the optimal trading scheme. The LEAG collects all the trad-
ing records over time and uses a consensus algorithm to audit
and verify the authenticity and accuracy of the transactions.
Then, the LEAG writes valid transaction records into the block
and builds the block. This trading process mainly includes the
following five steps.
1) System Initialization: Each LEAG is registered with
the authority as a legitimate energy node. Each EV becomes
a legitimate entity after registering with a government author-
ity to confirm its true identity in the real world—for example,
by using the resident identification card of the EV user. Then,
each EV is granted a legal identification Ii and obtains a pair
of public/private keys (PKi, SKi) after participating in the
blockchain system through access to the LEAG. Here, to
ensure that data transmission and access in the blockchain
remain secure, we use an asymmetric encryption algorithm,
such as an elliptic curve encryption algorithm, to encrypt the
data. The public key is used to encrypt data, and the corre-
sponding private key is used only to decrypt the encrypted
data. The public and private keys are different, and the cal-
culation used for one cannot be obtained from the other. The
EVs also need to apply to the LEAG for a set of random
wallet addresses {RWAi,n}Nn=1, where N is the number of wal-
let addresses that can be obtained from the LEAG. Each EV
owns a trading account Ai, where Ai = {Ii, PKi, SKi, RWAi,n};
the account is stored in the account server and is actually
a map between a random wallet address and the corresponding
EV’s identification. While the EVs engage in the initialization
process after accessing the LEAG, they upload their wallet
addresses to the LEAG and verify the integrity of the wal-
let information. Then, the EVs download their own wallet
data from the storage server of the LEAG.
2) Role and Transaction Object Selection: During the
energy trading process, each EV must first choose the appro-
priate role according to its own energy state and energy
demand/surplus. If an EV has little energy left and cannot
complete its travel plan, it prefers to be a charging EV. An EV
that has enough energy and is willing to take part in the V2V
energy trading is referred to as a discharging EV. Next, the
EV should select the transaction object. Each EV can decide
to trade with either the grid or other EVs based on its own
requirements. If a charging EV chooses to trade with the grid,
it can execute the trade immediately without waiting. However,
if the EV decides to trade with other EVs, it must wait for
a matching period. In the real world, the electric price of the
power grid is stable over time, so the price of electricity sold
by the grid usually is a constant and always is higher than
the price of electricity sold by discharging EVs. Similarly,
the price of electricity sold by the grid usually is a constant
and always is lower than the price of electricity sold by other
charging EVs. The prices of electricity purchased from and
sold to the grid limit the energy price in the V2V market.
3) Energy Trading: For EVs that choose to trade with the
grid, they trade with the grid directly at the price offered by
the grid. For EVs that choose to participate in V2V energy
trading, the charging PHEV, as the energy consumer, sends
the purchase request, which includes its energy demand, the
initial expected purchase price, and the maximum acceptable
purchase price, to the trading server of the LEAG. The dis-
charging PHEV, as the energy seller, sends the sales request,
which includes its energy supply, the initial expected selling
price, and the minimum acceptable selling price, to the trading
server of the LEAG. After the trading server has collected all
trade requests for a period of time, the smart contract that has
been predeployed on the trading server is automatically trig-
gered. The contract acts as an energy auctioneer to execute
the Bayesian game-based bidirectional auction algorithm for
optimal energy pricing and allocation. Then, the LEAG pro-
vides the algorithm result to the EVs, and the EVs trade with
other EVs according to the optimal trading scheme, which is
controlled by the EVs’ built-in smart meter.
4) Building Blocks: The LEAG collects all local transac-
tion records at regular intervals, and to ensure the authenticity
and accuracy of these records, it encrypts and digitally signs
them. Afterward, these transaction records are structured into
a block. Each block is linked to the previous block in the
order of a linear timestamp created by using the encrypted
hash value of the previous block. These blocks connect to
form a chain. The blockchain contains all verified transaction
information generated when a block is created. The stor-
age structure of transaction data is as follows: 1) version,
indicating the validation rules that this transaction must fol-
low; 2) NumInputs, the number of inputs included in this
transaction; 3) inputs, the input data contained in this transac-
tion, including the hash value of previous transactions, the
index of the associated output, and the unlocking script;
4) NumOutputs, the number of outputs included in this trans-
action; 5) outputs, the output data contained in the transaction,
including the output value (payment amount and trading vol-
ume) and locking script; and 6) LockTime, the locking time of
this transaction, setting it as 0 in our system to indicate imme-
diate propagation and execution. The block header contains
references to the previous block and the following information
related to the current block: 1) the hash value of the parent
block, which is the hash address pointing to the previous block,
a 256-bit hash value; 2) version, which is the version number
of the block header, indicating the validation rules that the
block must follow; 3) Merkle root, which is the hash value of
all transactions in the block; and 4) timestamp, which is the
exact time that the block was generated.
5) Consensus Process: The Proof of Work (PoW) in the
Bitcoin system relies on a machine that can carry out math-
ematical computations to obtain the right to keep accounts
and consumes a large amount of computational resources.
Every consensus requires the joint participation of the whole
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
8110 IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022
TABLE I
DEFINITIONS OF KEY SYMBOLS
network, so it takes a long time to reach a consensus.
This process is not suitable for our system. In our system,
we employ a Byzantine-based consensus mechanism (BCM)
proposed by [36] as our consensus algorithm. The BCM
is a new byzantine-based consensus algorithm based on the
credit of each node. Each node’s credit mechanism is intro-
duced through a practical Byzantine fault tolerance (PBFT)
algorithm. In the blockchain system, each consensus node
initializes the credit as a constant; and as the consensus pro-
cess progresses, the credit of good nodes gradually increases,
while that of malicious nodes gradually decreases. As a result,
the number of prepared and committed messages required for
a good node to reach a consensus decrease, which is beneficial
for reducing latency and improving throughput. This consen-
sus algorithm, which has low latency and high throughput, is
suitable for our system.
IV. PROBLEM MODELING OF ENERGY TRADING
Based on the game theory, the Bayesian game is one in
which players do not have complete information about the
type of opponent. Therefore, Bayesian games are also known
as incomplete information games. In practical energy trading
processes, neither the energy buyers nor the energy sellers
have complete information about each other. Therefore, the
Bayesian game has great potential to solve the V2V energy
pricing problem with incomplete information.
A. Modeling the Energy Trading Volume Problem
In the energy trading market, both sides of the transaction
are made up of selfish and rational individuals, and they hope
that their expected energy utility can be maximized [37]. In
this section, we first model the optimal transaction volume
determination as a formulated convex problem that maximizes
social welfare. Then, we model the optimal pricing problem
to maximize the utilities of both sides of the energy transac-
tion. There is a LEAG deployed in each charging field, and the
LEAG provides a series of energy trading services for charg-
ing EVs and discharging EVs. Each charging EV is denoted
as CEi, where i = {1, 2, . . . , N}, and its energy demand is
di, such that di ∈ [dmin
i , dmax
i ]. dmin
i is the minimum energy
demand of the charging EV required for its travel plan, and
dmax
i is the maximum acceptable energy demand of the charg-
ing EV. Each discharging EV is denoted as DEj, for which
j = {1, 2, . . . , M}, and its energy supply is sj. Discharging
EVs can provide energy up to a maximum amount smax
j for
energy trading. The definitions of key symbols are shown in
Table I.
During the V2V energy trading process, the LEAG broad-
casts the energy demand to the discharging EVs to match
the charging and discharging EVs. We denote the energy that
a charging EV CEi purchases from a discharging EV DEj as
dij. Furthermore, in our system, a charging EV can choose to
trade either with the grid or discharging EVs. Therefore, its
energy demand is calculated as
di = dG
i +
M∑
j=1
dij (1)
where dG
i is the energy purchased from the grid. If a charging
EV chooses to trade with the grid, then dij = 0. However, if
a charging EV chooses to trade with other EVs, then dG
i = 0.
In the V2V energy trading process, the LEAG allocates the
energy supply of a discharging EV to charging EVs. We denote
the energy that discharging EV DEj sells to charging EV CEi
as sji. Similarly, a discharging EV can choose to trade with
either the grid or charging EVs. Therefore, its energy supply
is calculated as
sj = sG
j +
N∑
i=1
sji (2)
where sG
j is the energy sold to the grid. If a discharging EV
chooses to trade with the grid, then sji = 0. Otherwise, if
sG
j = 0, the discharging EV chooses to trade with other EVs.
From the perspective of charging EVs, social welfare
maximization leads to the utility maximization of each par-
ticipant, which, in this article, is manifested as the utility
maximization of charging EVs because of individual rational
constraints. Each EV is a risk-averse individual that pursues its
own interests, so the utility function should be a nondecreasing
and concave function of energy demand. According to [38],
in the utility modeling of energy customers, the natural loga-
rithmic function has been widely accepted. In this article, we
calculate the charging EVs’ utility function using the natural
logarithmic function as
Ui(di) = ωiln
(
di − dmin
i + 1
)
(3)
where ωi is the willingness of charging EVs to participate in
energy trading, which is usually a constant within the range
of [0, 1].
From the perspective of discharging EVs, social welfare
maximization refers to minimizing the costs of each partici-
pant. In our system, the main cost of discharging EVs is energy
transmission loss. According to [39], the loss of energy trans-
mission in the local energy network is mainly caused by the
resistance of the transmission lines. Therefore, following [39],
the loss of energy transmission is modeled as a quadratic func-
tion of the amount of energy that is transferred. Thus, in this
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
LUO et al.: BLOCKCHAIN-ENABLED TWO-WAY AUCTION MECHANISM FOR ELECTRICITY TRADING 8111
article, we can quantify the energy loss of the discharging
EVs as
Cj
(
sj
) = l1
(
sj
)2 + l2sj (4)
where l1 and l2 are the energy cost factors. In addition, l1 > 0
and l2 > 0.
In conclusion, in the energy trading process, charging EVs
want to maximize their utility function, while discharging
EVs want to minimize their cost function. Our energy trading
system should effectively maximize social welfare and realize
market equilibrium. Therefore, in this article, we must cal-
culate the optimal energy distribution by maximizing social
welfare. Here, the function of the social welfare maximization
problem (SWM) is formulated as follows:
SWM : max
di,sj
⎧
⎨
⎩
N∑
i=1
Ui(di)−
M∑
j=1
Cj
(
sj
)
⎫
⎬
⎭ (5)
s.t. dmin
i ≤ di ≤ dmax
i (6)
sj ≤ smax
j (7)
di = ρsj ≥ 0 (8)
where ρ is the energy transmission efficiency, which is usually
a constant within the range of [0, 1].
During the energy trading process, an EV can select the
transaction object (the grid or other EVs), so there are two
trading scenarios, V2G and V2V.
1) V2G: In this scenario, the EVs trade with the grid. Here,
dij = 0 and sji = 0 hold for all EVs that trade with the
grid. Therefore, the SWM problem becomes
SWM1 : max
dG
i ,sG
j
⎧
⎨
⎩
N∑
i=1
Ui
(
dG
i
)
−
M∑
j=1
Cj
(
sG
j
)
⎫
⎬
⎭ (9)
s.t. dmin
i ≤ dG
i ≤ dmax
i (10)
sG
j ≤ smax
j (11)
where N and M are the number of charging EVs and
discharging EVs, respectively, which trade with the grid.
2) V2V: In this scenario, the EVs trade with other EVs.
Here, dG
i = 0 and sG
j = 0 hold for all EVs that partici-
pate in the V2V energy trading. Now, the SWM problem
becomes
SWM2 : max
di,sj
⎧
⎨
⎩
N∑
i=1
Ui(di)−
M∑
j=1
Cj
(
sj
)
⎫
⎬
⎭ (12)
s.t. dmin
i ≤
M∑
j=1
dij ≤ dmax
i (13)
N∑
i=1
sji ≤ smax
j (14)
dij = ρsji ≥ 0 (15)
where ρ is the energy delivery efficiency, and N and
M are the numbers of charging EVs and discharging
EVs, respectively, which participate in the V2V energy
trading.
B. Energy Pricing Problem Modeling
In our proposed energy trading system, when the EVs decide
to participate in the V2V energy transaction, the charging EVs
are supposed to submit their initial expected purchase price
pij and maximum acceptable purchase price pmax
ij , while the
discharging EVs should submit their initial expected selling
price rji and minimum acceptable selling price rmin
ji . To adapt
to the market price and encourage EVs to participate in V2V
energy trading and to balance overload peaks in the grid, the
LEAG sets the price for selling from grid rG as the upper
bound of electricity price for sellers rmax
ji and the price for
selling energy to grid pG as the lower bound of electricity
price for buyers pmin
ij . Therefore, pij ∈ [pmin
ij , pmax
ij ] and rji ∈
[rmin
ji , rmax
ji ].
In our V2V energy trading system, the LEAG acts as
the auctioneer to obtain the initial expected purchase price
pij of the charging EVs and the initial expected selling
price rji of the discharging EVs, where pij ∈ [pmin
ij , pmax
ij ]
and rji ∈ [rmin
ji , rmax
ji ]. In addition, pij and rji obey a uni-
form distribution in the intervals [pmin
ij , pmax
ij ] and [rmin
ji , rmax
ji ],
respectively. Then, the smart contract is triggered to perform
the bidirectional auction mechanism.
We might also assume that the bidding of both parties leads
to a linear equilibrium. The bidding strategy functions of the
buyers and sellers are Wij(pij) and Qji(rji), respectively. The
bidding strategy function used for the bid of charging EV i
for discharging EV j is expressed as
Wij
(
pij
) = ab + ebpij (16)
where ab > 0 and eb > 0. The bidding strategy function of
the discharging EV j bid for charging EV i is expressed as
Qji
(
rji
) = as + esrji (17)
where as > 0 and es > 0.
Because pij and rji lead to a uniform distribution in the
intervals [pmin
ij , pmax
ij ] and [rmin
ji , rmax
ji ], Wij(pij) and Qji(rji) are
evenly distributed over interval [ab + ebpmin
ij , ab + ebpmax
ij ]
and [as + esrmin
ji , as + esrmax
ji ], respectively. Therefore, the
probability distribution of the bidding strategy of charg-
ing EVs can be expressed as Sij(Wij) = Prob{Wij ≥
Qji(rji)}, while the probability distribution of the bidding
strategy of discharging EVs can be expressed as Fji(Qji) =
Prob{Qji≤ Wij(pij)}.
Specifically, Fij(Qji) can be obtained as
Fji
(
Qji
) = Prob
{
Qji ≤ Wij
(
pij
)}
= Prob
{
Qji≤ ab + ebpmax
ij
}
=
∫ ab+ebpmax
ij
Qji
1
eb
(
pmax
ij − pmin
ij
)dQji
= ab + ebpmax
ij − Qji
eb
(
pmax
ij − pmin
ij
) . (18)
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
8112 IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022
Similarly, Sij(Wij) can be obtained as
Sij
(
Wij
) = Prob
{
Wij ≥ Qji
(
rji
)}
= Prob
{
Wij ≥ as + esr
min
ji
}
=
∫ Wij
as+esrmin
ji
1
es
(
rmax
ji − rmin
ji
)dWij
= Wij − as − esrmin
ji
es
(
rmax
ji − rmin
ji
) . (19)
In our V2V energy trading system, both the charging EVs
and discharging EVs do not have complete information about
each other. The charging EVs know only their own initial
expected purchase price pij; thus, the utility of the charging
EV maximization problem under incomplete information is
formulated as
P1: max
Wij
[
pij − 1
2
(
Wij + E
[
Qji
(
rji
) ∣∣ Wij ≥ Qji
(
rji
)])]
∗Sij
(
Wij
)
(20)
where E[Qji(rji) |Wij ≥ Qji(rji)] indicates the expected bid of
the discharging EV when the bid of the charging EV is not
lower than the bid of the discharging EV.
Similarly, discharging EVs know only their own initial
expected selling price rji; thus, the maximized utility of the
discharging EV under incomplete information is formulated as
P2: max
Qji
[
1
2
(
Wij + E
[
Wij
(
pij
) ∣∣ Wij
(
pij
) ≥ Qji
])− rji
]
∗Fji
(
Qji
)
(21)
where E[Wij(pij)
∣∣ Wij(pij) ≥ Qji] indicates the expected bid
of the charging EV when the bid of the charging EV is not
lower than the bid of the discharging EV.
V. ALGORITHM DESIGN
In this section, we propose a Bayesian game based bidi-
rectional auction algorithm to solve the problems modeled in
Section IV. This algorithm is written in the smart contract.
When the energy trading process occurs, the smart contract is
executed automatically.
A. Optimal Volume of Transactions
This section mainly describes how the optimal energy trans-
action volume can be obtained by solving the SWM problem.
There are two trading scenarios, V2G and V2V.
1) V2G: In this scenario, dij = 0, and sji = 0. In the energy
market, the electricity price of the power grid is stable
over time, so it is set to be a constant. In addition, in our
system, once the EVs trade with the grid, they cannot
participate in V2V energy trading. Therefore, charging
EVs trade with the grid to purchase energy dG
i from the
grid at the price of the grid selling rG
i , where rG
i = rmax
ji .
Similarly, discharging EVs trade with the grid to sell
energy sG
j to the grid at price pG
j , where pG
j = pmin
ij .
Thus, these EVs do not participate in the subsequent
V2V energy pricing mechanism. In functions Ui(dG
i ) and
Cj(sG
j ), both dG
i and sG
j are constant. Consequently, the
functions Ui(dG
i ) and Cj(sG
j ) are constant. Therefore, the
optimal solutions to problem SWM1 are dG
i and sG
j .
2) V2V: In the V2V energy trading market, we obtain
the optimal energy transaction volume by solving the
SWM2 problem. The second-order partial derivatives
of objective function (12) satisfy [∂2(di)/∂d2
i ] < 0
and [∂2(sj)/∂s2
j ] > 0, so objective function (12) is
strictly concave, and the constraints are convex. Thus,
this function has a unique optimal solution.
According to [40], the unique optimal solution can be
obtained by using the Karush–Kuhn–Tucker (KKT) condi-
tion. We introduce Lagrangian multipliers in objective func-
tion (12) to obtain the augmented Lagrangian function φ.
Specifically, the introduced Lagrangian multipliers are γ =
{γi|i = 1, 2, . . . , N}, δ = {δi|i = 1, 2, . . . , N}, μ = {μj|j =
1, 2, . . . , M}, η = {ηij|i = 1, 2, . . . , N; j = 1, 2, . . . , M}, and
ξ = {ξji|i = 1, 2, . . . , N; j = 1, 2, . . . , M}. Thus, the Lagrange
function φ is expressed as
φ
(
di, sj, δ, γ, μ, η, ξ
) =
N∑
i=1
Ui(di)−
M∑
j=1
Cj
(
sj
)
+
N∑
i=1
δi
⎛
⎝
M∑
j=1
dij − dmax
i
⎞
⎠
+
N∑
i=1
γi
⎛
⎝dmin
i −
M∑
j=1
dij
⎞
⎠
+
M∑
j=1
μj
(
N∑
i=1
sji − smax
j
)
+
N∑
i=1
M∑
j=1
ηij
(
dij − ρsji
)
−
N∑
i=1
M∑
j=1
ξjiρsji. (22)
According to the KKT condition, the optimal solutions of
the SWM2 problem are supposed to satisfy the following
solution conditions:
∇dijφ
(
di, sj, δ, γ, μ, η, ξ
) = ωi∑M
j=1 dij − dmin
i + 1
+ δi − γi + ηij = 0 (23)
∇sjiφ
(
di, sj, δ, γ, μ, η, ξ
) = −2l1sji − l2 + μj
− ηijρ − ξjiρ. (24)
In the real energy trading market, the volume of total
energy transactions for the same batch of EVs should be
stable, without large fluctuations. To ensure the stability of
our V2V energy trading market, the total amount of energy
traded through the optimal energy allocation scheme obtained
by solving problem SWM2 should be stable. However, the
total energy volume in the optimal solutions obtained by solv-
ing problem SWM2 is slightly volatile. To conform to market
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
LUO et al.: BLOCKCHAIN-ENABLED TWO-WAY AUCTION MECHANISM FOR ELECTRICITY TRADING 8113
rules, we introduce a convergence factor (CF)
CF = SS(t1) − SS(t1−1)
SS(t1)
(25)
where SS is the total volume of energy trading, SS =∑N
i=1
∑M
j=1 sji, and t1 is the current iteration number of the
energy allocation. In the first iteration, the charging EVs sub-
mit their energy demand, and the discharging EVs submit
their energy supply to the LEAG according to their own
circumstances. Based on this information, the LEAG solves
the SWM2 problem to obtain an optimal energy distribu-
tion scheme. Then, the total volume of energy trading in
this iteration is obtained, as is the energy demand/supply
of the next iteration. The algorithm then goes into the next
iteration. The algorithm terminates when the result satisfies
the following condition:
CF < ε1 (26)
where ε1 is a constant that determines the accuracy of the
final result. The final optimal energy distribution is in line
with market rules.
B. Bayesian Game-Based Bidirectional Auction Mechanism
This section presents the details of the bidirectional auction
mechanism based on the Bayesian game used for V2V energy
trading.
Because pij and rji obey a uniform distribution over their
respective intervals, according to (16) and (17), we can
calculate E[Qji(rji)
∣∣ Wij ≥ Qji(rji)] as
E
[
Qji
(
rji
) ∣∣ Wij ≥ Qji
(
rji
)] =
Wij∫
as+esrmin
ji
x
Wij − as − esrmin
ji
dx
= 1
2
(
as + esr
min
ji +Wij
)
. (27)
Similarly, according to (16) and (17), we can calculate
E[Wij(pij)
∣∣ Wij(pij) ≥ Qji] as
E
[
Wij
(
pij
) ∣∣ Wij
(
pij
) ≥ Qji
] =
ab+ebpmax
ij∫
Qji
x
ab + ebpmax
ij − Qji
dx
= 1
2
(
ab + ebpmax
ij + Qji
)
. (28)
According to (20) and (21), when both participants adopt
a linear bidding strategy, their optimal reaction functions are
correspondingly linear. Here, we substitute (19) and (27) into
P1 and substitute (18) and (28) into P2. Then, we can obtain
the linear Bayesian equilibrium solution under the optimal
reaction conditions as
W ′ij =
2
3
pij + 1
4
rmin
ji +
1
12
pmax
ij (29)
Q′ji =
2
3
rji + 1
4
pmax
ij +
1
12
rmin
ji . (30)
As we know, in real V2V energy trading, when the price
W ′ij that charging EV i will pay is lower than the price Q′ji
set by discharging EV j, the transaction will not be success-
ful. This decreases the transaction success rate, which, in turn,
decreases the social welfare. In addition, the Bayesian equilib-
rium solution sometimes does not satisfy the above transaction
conditions. Therefore, to ensure that each EV participating in
the V2V energy trading scheme can successfully deal with
other EVs, we introduce a two-way auction mechanism, which
can be used to improve the transaction success rate.
In a two-way auction, after the current round, as long as the
closing conditions have not been met, the seller and the buyer
adjust their bids according to market rules and conduct a new
round of trading. First, we propose a new price adjustment
strategy. We assume that the bid of charging EV i in round
t2 of the auction is Wt2
ij , where W0
ij = pij, and the bid of
the discharging EV j in round t2 of the auction is Qt2
ji , where
Q0
ji = rji. Then, the bids of both charging EV i and discharging
EV j in round t2 + 1 of the auction are
W(t2+1)
ij = W(t2)
ij − αmin
{
W(t2)
ij − pmax
ij , 0
}
(31)
Q(t2+1)
ji = Q(t2)
ji − βmax
{
Q(t2)
ji − rmin
ji , 0
}
(32)
where α is the price adjustment coefficient of the charging
EVs, where 0 ≤ α ≤ 1, and β is the price adjustment
coefficient of the discharging EVs, where 0 ≤ β ≤ 1.
According to formula (31), the bid of the charging EVs in
each round is not higher than the maximum acceptable pur-
chase price pmax
ij . When α = 0, the bid of the charging EVs in
each round is the same as their bids in the first round. When
0 ≤ α ≤ 1, and another auction round proceeds, the bids
of the charging EVs increase continuously and approach the
maximum acceptable purchase price pmax
ij . The larger α is, the
faster the bids converge.
Similarly, the bids of the discharging EVs in each round
are not lower than the minimum acceptable selling price rmin
ji .
When β = 0, the bids of the discharging EVs in each round
are the same as their bids in the first round. When 0 ≤ β ≤ 1,
and another auction round proceeds, the bids of the discharg-
ing EVs decrease continuously and approach the minimum
acceptable selling price rmin
ji . The larger β is, the faster the
bids converge.
C. Algorithm Description
This section gives the details of the BABG algorithm that
we proposed.
The BABG algorithm obtains the optimal energy allocation
of the first iteration by solving the SWM2 problem and then
determines whether the total volume of energy trading meets
the solution for (26). If not, the process continues to the next
iteration. Algorithm 1 shows the details of BABG.
After the LEAG obtains the optimal energy allocation, the
BABG algorithm enters the bidirectional auction pricing mod-
ule. In the first auction, the LEAG calculates the first bids of
the charging and discharging EVs according to their initial
expected prices. Then, the algorithm determines whether the
bids of the buyers and the sellers meet the terms of the trans-
action. If the terms of the transaction are not met, then both
participants adjust their bids and enter the next auction. If the
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
8114 IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022
Algorithm 1 BABG Algorithm
Input: ε1, ε2,
{
dmin
i , dmax
i , pij, pmax
ij
}N
i=1
,
{
smax
j , rji, rmin
ji
}M
j=1
Output:d(t1)
ij , s(t1)
ji , W(t2)
ij , Q(t2)
ji
1: Initialization:
{
pmin
ij
}N
i=1
,
{
rmax
ji
}M
j=1
. Let the iteration
time t1 = 0, auction time t2 = 0, and flag1 = flag2 = 1;
2: while flag1 do
3: The LEAG solves the SWM2 problem to obtain d(t1)
ij
and s(t1)
ji ;
4: Let t1 = t1 + 1;
5: if CF < ε1, then
6: flag1 = 0 and then broadcasts the optimal energy
distribution to the charging EVs and discharging EVs;
7: end if
8: end while
9: while flag2 do
10: Let t2 = t2 + 1;
11: The LEAG solves the P1 and P2 problems to obtain
W(t2)
ij and Q(t2)
ji through Equations (29) and (30);
12: if W(t2)
ij < Q(t2)
ji , then
13: W(t2)
ij = W(t2)
ij − αmin{W(t2)
ij − pmax
ij , 0} and
Q(t2)
ji = Q(t2)
ji − βmax{Q(t2)
ji − rmin
ji , 0};
14: let pij = W(t2)
ij and rji = Q(t2)
ji , then return to Step 10;
15: else
16: if CW < ε2 and CQ < ε2, then
17: flag2 = 0 and then broadcasts the optimal energy
price to charging EVs and discharging EVs;
18: end if
19: end if
20: end while
21: return d(t1)
ij , s(t1)
ji , W(t2)
ij , Q(t2)
ji
condition is satisfied, then the LEAG checks the termination
condition of the pricing mechanism to determine whether the
current bids meet the following condition of convergence:
CW = W(t2)
ij −W(t2−1)
ij
W(t2)
ij
< ε2 (33)
CQ = Q(t2)
ji − Q(t2−1)
ji
Q(t2)
ji
< ε2 (34)
where ε2 is the convergence coefficient, which is a constant.
If the current bids do not satisfy (33) and (34), then both
participants adjust their bids and enter the next auction. When
ε2 is small enough, the final price obtained is stable.
A smart contract can be regarded as a program deployed in
the blockchain that can run automatically. Because the scheme
involves trusted and tamper-resistant data, the predefined rules
and terms can be automatically executed, and certain predefined
operations can be automatically performed when certain con-
ditions are met. We prewrite the BABG algorithm into a smart
contract. When a transaction occurs, the BABG algorithm
employed in the smart contract is automatically executed.
Algorithm 2 Smart Contract Implementation
1: Initialization ();
2: Input: i, Ii;
3: {PKi, SKi, RWAi,n}←register(Ii);
4: BuyerInput:
{
dmin
i , dmax
i , pij, pmax
ij
}N
i=1
;
5: SellerInput:
{
smax
j , rji, rmin
ji
}M
j=1
;
6: TradingScheme ();
7: Call BABG algorithm;
8: send (dij, Wij);
9: send (sji, Qji);
Detailed smart contract is shown in Algorithm 2. After the
system initialization, each EV registers with the blockchain
network and obtains a public/private key pair (PKi, SKi) and
a random wallet address RWAi,n. In the smart contract, we
use an asymmetric encryption algorithm to encrypt the data.
The public key PKi is used to encrypt data, and the corre-
sponding private key SKi is used only to decrypt the encrypted
data. When a transaction takes place, i.e., all EVs have sub-
mitted their energy requirements and their initial bids, the
LEAG automatically executes the algorithm BABG. Finally,
the optimal energy distribution d(t1)
ij , s(t1)
ji and optimal price
W(t2)
ij , Q(t2)
ji are obtained, and then,the result is broadcast to
each EV.
VI. SIMULATION AND ANALYSIS
This section provides extensive numerical examples that are
used to evaluate the performance of the proposed algorithms.
A. Simulation Setting
In our simulation, we set the purchase price pG and the
selling price rG of the grid as 0.6 and 1 yuan/kWh according
to [41]. Therefore, the grid’s selling and buying prices limit
the energy price in the V2V market, where rmax
ji = rG =
1 yuan/kWh and pmin
ij = pG = 0.6 yuan/kWh. According
to [18], the maximum effective state of a charge is 20 kWh.
The other simulation parameters are shown in Table II.
We compare our BABG algorithm with two existing V2V
energy trading algorithms, i.e., the iterative double auc-
tion (IDA) algorithm proposed in [19] and the V2V electricity
trading algorithm (ETA) proposed in [20]. The IDA algorithm
models the energy transaction problem as a mathematical
optimization problem, introduces a corresponding incentive
mechanism, and uses a Lagrange algorithm to determine the
optimal energy allocation and pricing strategy. In the ETA,
the optimal pricing under the linear strategic equilibrium has
been obtained, which maximizes the utilities of both parties.
For fairness, our data represent the averages of data obtained
from multiple experiments.
B. Simulation Results and Analysis
To verify the performance of our algorithm under differ-
ent user scales, we test the maximum social welfare achieved
under different user scales.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
LUO et al.: BLOCKCHAIN-ENABLED TWO-WAY AUCTION MECHANISM FOR ELECTRICITY TRADING 8115
TABLE II
PARAMETERS USED IN OUR SIMULATIONS
Fig. 3. Simulation results of social welfare. (a) Number of discharging EVs
is 40. (b) Number of charging EVs is 35.
Fig. 3(a) shows the relationship between the maximum
social welfare and the number of charging EVs when the
number of discharging EVs is fixed at 40. The maximum
social welfare first increases with the increase in the number
of charging EVs, reaches the maximum at 35 charging EVs,
and then decreases. The IDA increases with the increase in
the number of charging EVs first, then decreases, and finally,
flattens out. With the same input, the value of maximum social
welfare of IDA is lower than that of our BABG algorithm. The
maximum social welfare of the ETA increases as the number
of charging EVs increase, but the overall value is still lower
than that of the algorithm proposed in this article. This result
shows that the BABG algorithm proposed in this article is
better than the two existing algorithms.
Fig. 3(b) shows the relationship between the maximum
social welfare and the number of discharging EVs when the
number of charging EVs is fixed at 35. The results show
that the maximum social welfare of our BABG algorithm first
Fig. 4. Effects of the price adjustment coefficient based on the BABG
algorithm. (a) Average price versus price adjustment coefficient. (b) Number
of auctions versus price adjustment coefficient.
increases with the increase in the number of discharging EVs,
reaches the maximum when the number of discharging EVs is
40, and then decreases. The IDA increases with the increase
in the number of discharging EVs first and then decreases
slightly. With the same input, the value of maximum social
welfare of IDA is lower than that of our BABG algorithm.
The maximum social welfare of the ETA changes gently with
the number of discharging EVs, but the overall value is much
lower than that of the algorithm proposed in this article. This
result shows that the BABG algorithm proposed in this article
is effective.
These results indicate that there is performance degradation
when one side of the user scale is too large. This degrada-
tion occurs when there are a large number of discharging
EVs in the energy trading scheme, and the energy supply far
exceeds the energy demand, leading to the idle waste of energy
and an increase in energy loss, thus reducing social welfare.
However, when the number of charging EVs far exceeds the
number of discharging EVs, the energy demand far exceeds
the energy supply, so the energy demand cannot be met, lead-
ing to a decline in social welfare. This result is consistent with
what occurs in the real energy trading market.
Our algorithm includes a price adjustment function, and the
price adjustment coefficients determine α and β and the con-
vergence rate of the pricing mechanism. Fig. 4(a) shows the
relationship between the average price and the price adjust-
ment coefficient when the number of charging EVs is 35 and
the number of discharging EVs is 40. Fig. 4(b) shows the
relationship between the average number of auctions and the
price adjustment coefficient at the same user scale. As we can
see, the difference between the purchase price of the charging
EVs and the selling price of the discharging EVs increases as
the price adjustment coefficient increases, while the average
number of auctions decreases. This occurs because the larger
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
8116 IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022
Fig. 5. Average price versus the number of auctions. (a) α = β = 0.3.
(b) α = β = 0.5.
the price adjustment coefficient is, the larger the range of each
price adjustment is and subsequently, the larger the difference
is. The smaller the price adjustment coefficient is, the greater
the corresponding increasing in the number of auctions. A bet-
ter pricing strategy is obtained, but it requires more time and
computing power.
To understand the process of the Bayesian game-based bidi-
rectional auction, we show the process where the average price
varies with the number of auctions in Fig. 5. Fig. 5(a) depicts
the relationship between the average price and number of auc-
tions, where the price adjustment coefficient α = β = 0.3.
Fig. 5(b) depicts the relationship between the average price
and number of auctions, where the price adjustment coeffi-
cient α = β = 0.5. As shown in the figure, in the first
auction, the selling price of the discharging EVs is much
higher than the buying price of the charging EVs. As the
auction continues, the difference between the selling price
and the buying price decreases, and then, the buying price
exceeds the selling price to reach the terms of the transac-
tion, which tends to stabilize gradually. Therefore, in each
new auction, a more stable pricing strategy is used. When
α = β = 0.5, the convergence speed is faster than that when
α = β = 0.3, which is consistent with the details mentioned
above.
In our system, the difference between the purchase price
of charging EVs and the selling price of discharging EVs is
the profit of the auctioneer. We define the profit margin of an
auctioneer (PMA) as
PMA = p− r
r
(35)
where p is the average value of all W(t2)
ij , and r is the average
value of all Q(t2)
ji .
As shown in Fig. 6, from the perspective of the auction-
eer, as mentioned above, the greater the price adjustment
Fig. 6. PMA at various user scales.
Fig. 7. Total trading volume versus the EV scale. (a) Number of charging
EVs is 35. (b) Number of discharging EVs is 40.
coefficient is, the greater the difference between the purchase
price and the selling price is, and the greater the PMA is. From
the perspective of users, the greater the price adjustment coef-
ficient is, the lower the time cost is but the larger the price
difference charged by the auctioneer is. In addition, under dif-
ferent user sizes, the change in the auctioneer’s profit margin
is basically the same as the change in the price adjustment
coefficient, so it is little affected by the user scale. Therefore,
our algorithm is applicable to different kinds of real energy
transactions.
Fig. 7(a) depicts the relationship between the total volume
of energy trading and the number of discharging EVs when
the number of charging EVs is 35. As shown in the figure,
with the increase in discharge EVs, the total trading volume
tends to be stable. This is because when the number of charg-
ing EVs is fixed, the total energy demand is also fixed. Even
if the number of discharging EVs continues to increase, the
total trading volume remains stable, at most equal to the total
demand. Fig. 7(b) depicts the relationship between the total
volume of energy trading and the number of charging EVs
when the number of discharging EVs is 40. As shown in the
figure, with the increase in charging EVs, the total trading vol-
ume tends to be stable. This is because when the number of
discharging EVs is fixed, the total energy supply is also fixed.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
LUO et al.: BLOCKCHAIN-ENABLED TWO-WAY AUCTION MECHANISM FOR ELECTRICITY TRADING 8117
Fig. 8. CP of BABG, IDA, and ETA. (a) Number of charging EVs is 35.
(b) Number of discharging EVs is 40.
Even though the number of charging EVs keeps increasing, it
can provide a certain amount of energy, so the total trading
volume is also a certain amount, at most equal to the total sup-
ply. Therefore, our algorithm is applicable to the real energy
trading market.
To quantify the cost of the algorithm to obtain the maximum
social welfare, we define the CP as
CP =
maxdi,sj
{∑N
i=1 Ui(di)−∑M
j=1 Cj
(
sj
)}
∑M
j=1 Cj
(
sj
) . (36)
Fig. 8(a) shows the relationship between the CP and number
of discharging EVs when the number of charging EVs is 35.
Fig. 8(b) shows the relationship between the CP and number
of charging EVs when the number of discharging EVs is 40.
Similarly, we compare the proposed BABG algorithm with
IDA and ETA. The results show that the CP of the BABG
algorithm proposed in this article is significantly higher than
that of the existing algorithms. This result shows that our algo-
rithm can obtain higher returns at a lower cost and thus, our
algorithm is effective and excellent.
VII. CONCLUSION AND DISCUSSION
We developed a V2V and V2G energy trading system
based on blockchain. For the energy trading, we developed
LEAGs in our system. To guarantee the reliability and secu-
rity of the transaction data, a prewritten smart contract that
employs a Bayesian game based bidirectional auction algo-
rithm is deployed in each LEAG. The LEAGs jointly maintain
the blockchain, participate in reaching a consensus, audit
transactions, and share data. Because the charging EVs and
discharging EVs do not have complete information about
each other, we proposed a bidirectional auction mechanism
based on the Bayesian game. We modeled the optimal pricing
problem to maximize the utilities of both sides of the elec-
tricity transaction and modeled the optimal energy allocation
as a convex problem that maximizes social welfare. Then, we
performed simulation analysis and compared the results of our
algorithm with those of two existing algorithms. Under the
same input, the social welfare of our algorithm is up to 66.4%
higher than that of the IDA algorithm and up to 102.8% higher
than that of the ETA algorithm. Furthermore, the CP of our
algorithm is up to 100.7% higher than that of the IDA algo-
rithm and 319% higher than that of the ETA algorithm. The
results indicate that the algorithm we proposed provides results
that align with what occurs in the real energy trading mar-
ket, and its performance is significantly better than that of the
existing algorithms.
In the future work, we will consider cross-LEAG energy
trading between EVs. In addition, we plan to design a cor-
responding energy trading scheme for the charging and
discharging requirements of EVs on the road.
REFERENCES
[1] V. C. Gungor et al., “Smart grid technologies: Communication tech-
nologies and standards,” IEEE Trans. Ind. Informat., vol. 7, no. 4,
pp. 529–539, Nov. 2011.
[2] C.-C. Lin, D.-J. Deng, C.-C. Kuo, and Y.-L. Liang, “Optimal charging
control of energy storage and electric vehicle of an individual in the
Internet of energy with energy trading,” IEEE Trans. Ind. Informat.,
vol. 14, no. 6, pp. 2570–2578, Jun. 2018.
[3] K. M. Tan, V. K. Ramachandaramurthy, and J. Y. Jia, “Optimal vehi-
cle to grid planning and scheduling using double layer multi-objective
algorithm,” Energy, vol. 112, pp. 1060–1073, Oct. 2016.
[4] J. Wang, P. Zeng, X. Jin, F. Kong, Z. Wang, D. Li, and M. Wan,
“Software defined Wi-V2G: A V2G network architecture,” IEEE Intell.
Transp. Syst. Mag., vol. 10, no. 2, pp. 167–179, Apr. 2018.
[5] C. Liu, K. T. Chau, D. Wu, and S. Gao, “Opportunities and challenges of
vehicle-to-home, vehicle-to-vehicle, and vehicle-to-grid technologies,”
Proc. IEEE, vol. 101, no. 11, pp. 2409–2427, Nov. 2013.
[6] A.-H. Mohsenian-Rad, V. W. S. Wong, J. Jatskevich, R. Schober,
and A. Leon-Garcia, “Autonomous demand-side management based
on game-theoretic energy consumption scheduling for the future smart
grid,” IEEE Trans. Smart Grid, vol. 1, no. 3, pp. 320–331, Dec. 2010.
[7] Z. Zhou, C. Sun, R. Shi, Z. Chang, S. Zhou, and Y. Li, “Robust energy
scheduling in vehicle-to-grid networks,” IEEE Netw., vol. 31, no. 2,
pp. 30–37, Mar./Apr. 2017.
[8] A. Dorri, M. Steger, S. Kanhere, and R. Jurdak, “BlockChain: A dis-
tributed solution to automotive security and privacy,” IEEE Commun.
Mag., vol. 55, no. 12, pp. 119–125, Dec. 2017.
[9] S. Wang, X. Qu, Q. Hu, and W. Lv, “An uncertainty- and collusion-proof
voting consensus mechanism in blockchain,” 2019. [Online]. Available:
https://arxiv.org/abs/1912.11620.
[10] S. Zou, Z. Ma, X. Liu, and I. Hiskens, “An efficient game for coordi-
nating electric vehicle charging,” IEEE Trans. Autom. Control, vol. 62,
no. 5, pp. 2374–2389, May 2017.
[11] J. Mohammadi, G. Hug, and S. Kar, “A fully distributed cooperative
charging approach for plug-in electric vehicles,” IEEE Trans. Smart
Grid, vol. 9, no. 4, pp. 3507–3518, Jul. 2018.
[12] Y. Xu, F. Pan, and L. Tong, “Dynamic scheduling for charging electric
vehicles: A priority rule,” IEEE Trans. Autom. Control, vol. 61, no. 12,
pp. 4094–4099, Dec. 2016.
[13] A. Ghosh and V. Aggarwal, “Control of charging of electric vehicles
through menu-based pricing,” IEEE Trans. Smart Grid, vol. 9, no. 6,
pp. 5918–5929, Nov. 2018.
[14] Y. Yang, Q.-S. Jia, G. Deconinck, X. Guan, Z. Qiu, and Z. Hu,
“Distributed coordination of EV charging with renewable energy in
a microgrid of buildings,” IEEE Trans. Smart Grid, vol. 9, no. 6,
pp. 6253–6264, Nov. 2018.
[15] C. Yang, S. You, W. Wang, L. Li, and C. Xiang, “A stochastic predictive
energy management strategy for plug-in hybrid electric vehicles based
on fast rolling optimization,” IEEE Trans. Ind. Electron., vol. 67, no. 11,
pp. 9659–9670, Nov. 2020.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
8118 IEEE INTERNET OF THINGS JOURNAL, VOL. 9, NO. 11, JUNE 1, 2022
[16] J. Su, T. T. Lie, and R. Zamora, “A rolling horizon scheduling of aggre-
gated electric vehicles charging under the electricity exchange market,”
Appl. Energy, vol. 275, pp. 1–12, Oct. 2020.
[17] W. Zhong, K. Xie, Y. Liu, C. Yang, and S. Xie, “Topology-aware vehicle-
to-grid energy trading for active distribution systems,” IEEE Trans.
Smart Grid, vol. 10, no. 2, pp. 2137–2147, Mar. 2019.
[18] R. Alvaro-Hermana, J. Fraile-Ardanuy, P. J. Zufiria, L. Knapen, and
D. Janssens, “Peer to peer energy trading with electric vehicles,” IEEE
Intell. Transp. Syst. Mag., vol. 8, no. 3, pp. 33–44, Jul. 2016.
[19] J. Kang, R. Yu, X. Huang, S. Maharjan, Y. Zhang, and E. Hossain,
“Enabling localized peer-to-peer electricity trading among plug-in hybrid
electric vehicles using consortium blockchains,” IEEE Trans. Ind.
Informat., vol. 13, no. 6, pp. 3154–3164, Dec. 2017.
[20] S. Xia, F. Lin, Z. Chen, C. Tang, Y. Ma, and X. Yu, “A Bayesian
game based vehicle-to-vehicle electricity trading scheme for blockchain-
enabled Internet of Vehicles,” IEEE Trans. Veh. Technol., vol. 69, no. 7,
pp. 6856–6868, Jul. 2020.
[21] V. Chang, P. Baudier, H. Zhang, Q. Xu, J. Zhang, and M. Arami, “How
blockchain can impact financial services—The overview, challenges and
recommendations from expert interviewees,” Technol. Forecast. Soc.
Change, vol. 158, pp. 1–12, Sep. 2020.
[22] F. Soleymani and E. Paquet, “Financial portfolio optimization with
online deep reinforcement learning and restricted stacked autoencoder—
DeepBreath,” Expert Syst. Appl., vol. 156, pp. 1–16, Oct. 2020.
[23] L. Liu et al., “Blockchain-enabled secure data sharing scheme in
mobile-edge computing: An asynchronous advantage actor–critic learn-
ing approach,” IEEE Internet Things J., vol. 8, no. 4, pp. 2342–2353,
Feb. 2021.
[24] S. Bai, G. Yang, C. Rong, G. Liu, and H. Dai, “QHSE: An efficient
privacy-preserving scheme for blockchain-based transactions,” Future
Gener. Comput. Syst., vol. 112, pp. 930–944, Nov. 2020.
[25] K. Salah, M. H. U. Rehman, N. Nizamuddin, and A. Al-Fuqaha,
“Blockchain for AI: Review and open research challenges,” IEEE
Access, vol. 7, pp. 10127–10149, 2019.
[26] B. Cao et al., “When Internet of Things meets blockchain: Challenges
in distributed consensus,” IEEE Netw., vol. 33, no. 6, pp. 133–139,
Nov./Dec. 2019.
[27] Y. Li et al., “Direct acyclic graph-based ledger for Internet of Things:
Performance and security analysis,” IEEE/ACM Trans. Netw., vol. 28,
no. 4, pp. 1643–1656, Aug. 2020.
[28] G. Liang, S. R. Weller, F. Luo, J. Zhao, and Z. Y. Dong, “Distributed
blockchain-based data protection framework for modern power systems
against cyber attacks,” IEEE Trans. Smart Grid, vol. 10, no. 3,
pp. 3162–3173, May 2019.
[29] M. Keshk, B. Turnbull, N. Moustafa, D. Vatsalan, and K.-K. R. Choo, “A
privacy-preserving-framework-based blockchain and deep learning for
protecting smart power networks,” IEEE Trans. Ind. Informat., vol. 16,
no. 8, pp. 5110–5118, Aug. 2020.
[30] Z. Zhang, R. Li, and F. Li, “A novel peer-to-peer local electricity market
for joint trading of energy and uncertainty,” IEEE Trans. Smart Grid,
vol. 11, no. 2, pp. 1205–1215, Mar. 2020.
[31] S. Wang, A. F. Taha, J. Wang, K. Kvaternik, and A. Hahn, “Energy
crowdsourcing and peer-to-peer energy trading in blockchain-enabled
smart grids,” IEEE Trans. Syst., Man, Cybern., Syst., vol. 49, no. 8,
pp. 1612–1623, Aug. 2019.
[32] M. Li, D. Hu, L. Chhagan, M. Conti, and Z. Zhang, “Blockchain-enabled
secure energy trading with verifiable fairness in industrial Internet of
Things,” IEEE Trans. Ind. Informat., vol. 16, no. 10, pp. 6564–6574,
Oct. 2020.
[33] Z. Guan, X. Lu, N. Wang, J. Wu, X. Du, and M. Guizani, “Towards
secure and efficient energy trading in IIoT-enabled energy Internet:
A blockchain approach,” Future Gener. Comput. Syst., vol. 110,
pp. 686–695, Sep. 2020.
[34] Y. Li and B. Hu, “A consortium blockchain-enabled secure and privacy-
preserving optimized charging and discharging trading scheme for elec-
tric vehicles,” IEEE Trans. Ind. Informat., vol. 17, no. 3, pp. 1968–1977,
Mar. 2021.
[35] A. Sadiq, M. U. Javed, R. Khalid, A. Almogren, M. Shafiq, and
N. Javaid, “Blockchain based data and energy trading in Internet of
Electric Vehicles,” IEEE Access, vol. 9, pp. 7000–7020, 2021.
[36] J. Guo, X. Ding, and W. Wu, “An architecture for distributed ener-
gies trading in Byzantine-based blockchain,” 2020. [Online]. Available:
https://arxiv.org/abs/2005.07341.
[37] L. Zhang, B. Cao, Y. Li, M. Peng, and G. Feng, “A multi-stage stochas-
tic programming-based offloading policy for fog enabled IoT-eHealth,”
IEEE J. Sel. Areas Commun., vol. 39, no. 2, pp. 411–425, Feb. 2021.
[38] Z. Su, Y. Wang, Q. Xu, M. Fei, Y.-C. Tian, and N. Zhang, “A secure
charging scheme for electric vehicles with smart communities in energy
blockchain,” IEEE Internet Things J., vol. 6, no. 3, pp. 4601–4613,
Jun. 2019.
[39] Z. Li, J. Kang, R. Yu, D. Ye, Q. Deng, and Y. Zhang, “Consortium
blockchain for secure energy trading in industrial Internet of Things,”
IEEE Trans. Ind. Informat., vol. 14, no. 8, pp. 3690–3700, Aug. 2018.
[40] Q. Zhao and Y. Zhu, “Distributed social welfare maximization in vehic-
ular participatory sensing systems,” in Proc. IEEE 22nd Int. Symp. Qual.
Serv., Hong Kong, China, 2014, pp. 332–337.
[41] G. Sun, M. Dai, F. Zhang, H. Yu, X. Du, and M. Guizani,
“Blockchain-enhanced high-confidence energy sharing in Internet of
Electric Vehicles,” IEEE Internet Things J., vol. 7, no. 9, pp. 7868–7882,
Sep. 2020.
Long Luo (Member, IEEE) received the B.S.
degree in communication engineering from Xi’an
University of Technology, Xi’an, China, in 2012, and
the M.S. and Ph.D. degrees in communication engi-
neering from the University of Electronic Science
and Technology of China (UESTC), Chengdu,
China, in 2015 and 2020, respectively.
She is currently a Postdoctoral Researcher with
UESTC. Her research interests include networking
and distributed systems.
Jingcui Feng is currently pursuing the master’s
degree in communication and information systems
with the University of Electronic Science and
Technology of China, Chengdu, China.
Her research interests include Internet of Vehicles
and blockchain.
Hongfang Yu (Member, IEEE) received the
B.S. degree in electrical engineering from Xidian
University, Xi’an, China, in 1996, and the M.S. and
Ph.D. degrees in communication and information
engineering from the University of Electronic
Science and Technology of China, Chengdu,
China, in 1999 and 2006, respectively.
From 2009 to 2010, she was a Visiting Scholar
with the Department of Computer Science and
Engineering, University at Buffalo, Buffalo, NY,
USA. Her research interests include network surviv-
ability, network security, and next-generation Internet.
Gang Sun (Member, IEEE) received the Ph.D.
degree in communication and information systems
from the University of Electronic Science and
Technology of China (UESTC), Chengdu, China, in
2012.
He is currently a Full Professor of Computer
Science with UESTC. His research interests include
vehicular ad hoc networks, blockchain, cloud com-
puting, parallel and distributed systems, ubiqui-
tous/pervasive computing and intelligence, and cyber
security.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 08:42:11 UTC from IEEE Xplore.  Restrictions apply. 
<<
  /ASCII85EncodePages false
  /AllowTransparency false
  /AutoPositionEPSFiles false
  /AutoRotatePages /None
  /Binding /Left
  /CalGrayProfile (Gray Gamma 2.2)
  /CalRGBProfile (sRGB IEC61966-2.1)
  /CalCMYKProfile (U.S. Web Coated \050SWOP\051 v2)
  /sRGBProfile (sRGB IEC61966-2.1)
  /CannotEmbedFontPolicy /Warning
  /CompatibilityLevel 1.4
  /CompressObjects /Off
  /CompressPages true
  /ConvertImagesToIndexed true
  /PassThroughJPEGImages true
  /CreateJobTicket false
  /DefaultRenderingIntent /Default
  /DetectBlends true
  /DetectCurves 0.0000
  /ColorConversionStrategy /LeaveColorUnchanged
  /DoThumbnails false
  /EmbedAllFonts true
  /EmbedOpenType false
  /ParseICCProfilesInComments true
  /EmbedJobOptions true
  /DSCReportingLevel 0
  /EmitDSCWarnings false
  /EndPage -1
  /ImageMemory 1048576
  /LockDistillerParams true
  /MaxSubsetPct 100
  /Optimize true
  /OPM 0
  /ParseDSCComments false
  /ParseDSCCommentsForDocInfo false
  /PreserveCopyPage true
  /PreserveDICMYKValues true
  /PreserveEPSInfo false
  /PreserveFlatness true
  /PreserveHalftoneInfo true
  /PreserveOPIComments false
  /PreserveOverprintSettings true
  /StartPage 1
  /SubsetFonts false
  /TransferFunctionInfo /Remove
  /UCRandBGInfo /Preserve
  /UsePrologue false
  /ColorSettingsFile ()
  /AlwaysEmbed [ true
    /Arial-Black
    /Arial-BoldItalicMT
    /Arial-BoldMT
    /Arial-ItalicMT
    /ArialMT
    /ArialNarrow
    /ArialNarrow-Bold
    /ArialNarrow-BoldItalic
    /ArialNarrow-Italic
    /ArialUnicodeMS
    /BookAntiqua
    /BookAntiqua-Bold
    /BookAntiqua-BoldItalic
    /BookAntiqua-Italic
    /BookmanOldStyle
    /BookmanOldStyle-Bold
    /BookmanOldStyle-BoldItalic
    /BookmanOldStyle-Italic
    /BookshelfSymbolSeven
    /Century
    /CenturyGothic
    /CenturyGothic-Bold
    /CenturyGothic-BoldItalic
    /CenturyGothic-Italic
    /CenturySchoolbook
    /CenturySchoolbook-Bold
    /CenturySchoolbook-BoldItalic
    /CenturySchoolbook-Italic
    /ComicSansMS
    /ComicSansMS-Bold
    /CourierNewPS-BoldItalicMT
    /CourierNewPS-BoldMT
    /CourierNewPS-ItalicMT
    /CourierNewPSMT
    /EstrangeloEdessa
    /FranklinGothic-Medium
    /FranklinGothic-MediumItalic
    /Garamond
    /Garamond-Bold
    /Garamond-Italic
    /Gautami
    /Georgia
    /Georgia-Bold
    /Georgia-BoldItalic
    /Georgia-Italic
    /Haettenschweiler
    /Helvetica
    /Helvetica-Bold
    /HelveticaBolditalic-BoldOblique
    /Helvetica-BoldOblique
    /Impact
    /Kartika
    /Latha
    /LetterGothicMT
    /LetterGothicMT-Bold
    /LetterGothicMT-BoldOblique
    /LetterGothicMT-Oblique
    /LucidaConsole
    /LucidaSans
    /LucidaSans-Demi
    /LucidaSans-DemiItalic
    /LucidaSans-Italic
    /LucidaSansUnicode
    /Mangal-Regular
    /MicrosoftSansSerif
    /MonotypeCorsiva
    /MSReferenceSansSerif
    /MSReferenceSpecialty
    /MVBoli
    /PalatinoLinotype-Bold
    /PalatinoLinotype-BoldItalic
    /PalatinoLinotype-Italic
    /PalatinoLinotype-Roman
    /Raavi
    /Shruti
    /Sylfaen
    /SymbolMT
    /Tahoma
    /Tahoma-Bold
    /Times-Bold
    /Times-BoldItalic
    /Times-Italic
    /TimesNewRomanMT-ExtraBold
    /TimesNewRomanPS-BoldItalicMT
    /TimesNewRomanPS-BoldMT
    /TimesNewRomanPS-ItalicMT
    /TimesNewRomanPSMT
    /Times-Roman
    /Trebuchet-BoldItalic
    /TrebuchetMS
    /TrebuchetMS-Bold
    /TrebuchetMS-Italic
    /Tunga-Regular
    /Verdana
    /Verdana-Bold
    /Verdana-BoldItalic
    /Verdana-Italic
    /Vrinda
    /Webdings
    /Wingdings2
    /Wingdings3
    /Wingdings-Regular
    /ZapfChanceryITCbyBT-MediumItal
    /ZWAdobeF
  ]
  /NeverEmbed [ true
  ]
  /AntiAliasColorImages false
  /CropColorImages true
  /ColorImageMinResolution 200
  /ColorImageMinResolutionPolicy /OK
  /DownsampleColorImages false
  /ColorImageDownsampleType /Average
  /ColorImageResolution 300
  /ColorImageDepth -1
  /ColorImageMinDownsampleDepth 1
  /ColorImageDownsampleThreshold 1.50000
  /EncodeColorImages true
  /ColorImageFilter /DCTEncode
  /AutoFilterColorImages false
  /ColorImageAutoFilterStrategy /JPEG
  /ColorACSImageDict <<
    /QFactor 0.76
    /HSamples [2 1 1 2] /VSamples [2 1 1 2]
  >>
  /ColorImageDict <<
    /QFactor 0.76
    /HSamples [2 1 1 2] /VSamples [2 1 1 2]
  >>
  /JPEG2000ColorACSImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /JPEG2000ColorImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /AntiAliasGrayImages false
  /CropGrayImages true
  /GrayImageMinResolution 200
  /GrayImageMinResolutionPolicy /OK
  /DownsampleGrayImages false
  /GrayImageDownsampleType /Average
  /GrayImageResolution 300
  /GrayImageDepth -1
  /GrayImageMinDownsampleDepth 2
  /GrayImageDownsampleThreshold 1.50000
  /EncodeGrayImages true
  /GrayImageFilter /DCTEncode
  /AutoFilterGrayImages false
  /GrayImageAutoFilterStrategy /JPEG
  /GrayACSImageDict <<
    /QFactor 0.76
    /HSamples [2 1 1 2] /VSamples [2 1 1 2]
  >>
  /GrayImageDict <<
    /QFactor 0.76
    /HSamples [2 1 1 2] /VSamples [2 1 1 2]
  >>
  /JPEG2000GrayACSImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /JPEG2000GrayImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /AntiAliasMonoImages false
  /CropMonoImages true
  /MonoImageMinResolution 400
  /MonoImageMinResolutionPolicy /OK
  /DownsampleMonoImages false
  /MonoImageDownsampleType /Bicubic
  /MonoImageResolution 600
  /MonoImageDepth -1
  /MonoImageDownsampleThreshold 1.50000
  /EncodeMonoImages true
  /MonoImageFilter /CCITTFaxEncode
  /MonoImageDict <<
    /K -1
  >>
  /AllowPSXObjects false
  /CheckCompliance [
    /None
  ]
  /PDFX1aCheck false
  /PDFX3Check false
  /PDFXCompliantPDFOnly false
  /PDFXNoTrimBoxError true
  /PDFXTrimBoxToMediaBoxOffset [
    0.00000
    0.00000
    0.00000
    0.00000
  ]
  /PDFXSetBleedBoxToMediaBox true
  /PDFXBleedBoxToTrimBoxOffset [
    0.00000
    0.00000
    0.00000
    0.00000
  ]
  /PDFXOutputIntentProfile (None)
  /PDFXOutputConditionIdentifier ()
  /PDFXOutputCondition ()
  /PDFXRegistryName ()
  /PDFXTrapped /False
  /CreateJDFFile false
  /Description <<
    /CHS <FEFF4f7f75288fd94e9b8bbe5b9a521b5efa7684002000410064006f006200650020005000440046002065876863900275284e8e55464e1a65876863768467e5770b548c62535370300260a853ef4ee54f7f75280020004100630072006f0062006100740020548c002000410064006f00620065002000520065006100640065007200200035002e003000204ee553ca66f49ad87248672c676562535f00521b5efa768400200050004400460020658768633002>
    /CHT <FEFF4f7f752890194e9b8a2d7f6e5efa7acb7684002000410064006f006200650020005000440046002065874ef69069752865bc666e901a554652d965874ef6768467e5770b548c52175370300260a853ef4ee54f7f75280020004100630072006f0062006100740020548c002000410064006f00620065002000520065006100640065007200200035002e003000204ee553ca66f49ad87248672c4f86958b555f5df25efa7acb76840020005000440046002065874ef63002>
    /DAN <FEFF004200720075006700200069006e0064007300740069006c006c0069006e006700650072006e0065002000740069006c0020006100740020006f007000720065007400740065002000410064006f006200650020005000440046002d0064006f006b0075006d0065006e007400650072002c0020006400650072002000650067006e006500720020007300690067002000740069006c00200064006500740061006c006a006500720065007400200073006b00e60072006d007600690073006e0069006e00670020006f00670020007500640073006b007200690076006e0069006e006700200061006600200066006f0072007200650074006e0069006e006700730064006f006b0075006d0065006e007400650072002e0020004400650020006f007000720065007400740065006400650020005000440046002d0064006f006b0075006d0065006e0074006500720020006b0061006e002000e50062006e00650073002000690020004100630072006f00620061007400200065006c006c006500720020004100630072006f006200610074002000520065006100640065007200200035002e00300020006f00670020006e0079006500720065002e>
    /DEU <FEFF00560065007200770065006e00640065006e0020005300690065002000640069006500730065002000450069006e007300740065006c006c0075006e00670065006e0020007a0075006d002000450072007300740065006c006c0065006e00200076006f006e002000410064006f006200650020005000440046002d0044006f006b0075006d0065006e00740065006e002c00200075006d002000650069006e00650020007a0075007600650072006c00e40073007300690067006500200041006e007a006500690067006500200075006e00640020004100750073006700610062006500200076006f006e00200047006500730063006800e40066007400730064006f006b0075006d0065006e00740065006e0020007a0075002000650072007a00690065006c0065006e002e00200044006900650020005000440046002d0044006f006b0075006d0065006e007400650020006b00f6006e006e0065006e0020006d006900740020004100630072006f00620061007400200075006e0064002000520065006100640065007200200035002e003000200075006e00640020006800f600680065007200200067006500f600660066006e00650074002000770065007200640065006e002e>
    /ESP <FEFF005500740069006c0069006300650020006500730074006100200063006f006e0066006900670075007200610063006900f3006e0020007000610072006100200063007200650061007200200064006f00630075006d0065006e0074006f0073002000640065002000410064006f00620065002000500044004600200061006400650063007500610064006f007300200070006100720061002000760069007300750061006c0069007a00610063006900f3006e0020006500200069006d0070007200650073006900f3006e00200064006500200063006f006e006600690061006e007a006100200064006500200064006f00630075006d0065006e0074006f007300200063006f006d00650072006300690061006c00650073002e002000530065002000700075006500640065006e00200061006200720069007200200064006f00630075006d0065006e0074006f00730020005000440046002000630072006500610064006f007300200063006f006e0020004100630072006f006200610074002c002000410064006f00620065002000520065006100640065007200200035002e003000200079002000760065007200730069006f006e0065007300200070006f00730074006500720069006f007200650073002e>
    /FRA <FEFF005500740069006c006900730065007a00200063006500730020006f007000740069006f006e00730020006100660069006e00200064006500200063007200e900650072002000640065007300200064006f00630075006d0065006e00740073002000410064006f006200650020005000440046002000700072006f00660065007300730069006f006e006e0065006c007300200066006900610062006c0065007300200070006f007500720020006c0061002000760069007300750061006c00690073006100740069006f006e0020006500740020006c00270069006d007000720065007300730069006f006e002e0020004c0065007300200064006f00630075006d0065006e00740073002000500044004600200063007200e900e90073002000700065007500760065006e0074002000ea0074007200650020006f007500760065007200740073002000640061006e00730020004100630072006f006200610074002c002000610069006e00730069002000710075002700410064006f00620065002000520065006100640065007200200035002e0030002000650074002000760065007200730069006f006e007300200075006c007400e90072006900650075007200650073002e>
    /ITA (Utilizzare queste impostazioni per creare documenti Adobe PDF adatti per visualizzare e stampare documenti aziendali in modo affidabile. I documenti PDF creati possono essere aperti con Acrobat e Adobe Reader 5.0 e versioni successive.)
    /JPN <FEFF30d330b830cd30b9658766f8306e8868793a304a3088307353705237306b90693057305f002000410064006f0062006500200050004400460020658766f8306e4f5c6210306b4f7f75283057307e305930023053306e8a2d5b9a30674f5c62103055308c305f0020005000440046002030d530a130a430eb306f3001004100630072006f0062006100740020304a30883073002000410064006f00620065002000520065006100640065007200200035002e003000204ee5964d3067958b304f30533068304c3067304d307e305930023053306e8a2d5b9a3067306f30d530a930f330c8306e57cb30818fbc307f3092884c3044307e30593002>
    /KOR <FEFFc7740020c124c815c7440020c0acc6a9d558c5ec0020be44c988b2c8c2a40020bb38c11cb97c0020c548c815c801c73cb85c0020bcf4ace00020c778c1c4d558b2940020b3700020ac00c7a50020c801d569d55c002000410064006f0062006500200050004400460020bb38c11cb97c0020c791c131d569b2c8b2e4002e0020c774b807ac8c0020c791c131b41c00200050004400460020bb38c11cb2940020004100630072006f0062006100740020bc0f002000410064006f00620065002000520065006100640065007200200035002e00300020c774c0c1c5d0c11c0020c5f40020c2180020c788c2b5b2c8b2e4002e>
    /NLD (Gebruik deze instellingen om Adobe PDF-documenten te maken waarmee zakelijke documenten betrouwbaar kunnen worden weergegeven en afgedrukt. De gemaakte PDF-documenten kunnen worden geopend met Acrobat en Adobe Reader 5.0 en hoger.)
    /NOR <FEFF004200720075006b00200064006900730073006500200069006e006e007300740069006c006c0069006e00670065006e0065002000740069006c002000e50020006f0070007000720065007400740065002000410064006f006200650020005000440046002d0064006f006b0075006d0065006e00740065007200200073006f006d002000650072002000650067006e0065007400200066006f00720020007000e5006c006900740065006c006900670020007600690073006e0069006e00670020006f00670020007500740073006b007200690066007400200061007600200066006f0072007200650074006e0069006e006700730064006f006b0075006d0065006e007400650072002e0020005000440046002d0064006f006b0075006d0065006e00740065006e00650020006b0061006e002000e50070006e00650073002000690020004100630072006f00620061007400200065006c006c00650072002000410064006f00620065002000520065006100640065007200200035002e003000200065006c006c00650072002e>
    /PTB <FEFF005500740069006c0069007a006500200065007300730061007300200063006f006e00660069006700750072006100e700f50065007300200064006500200066006f0072006d00610020006100200063007200690061007200200064006f00630075006d0065006e0074006f0073002000410064006f00620065002000500044004600200061006400650071007500610064006f00730020007000610072006100200061002000760069007300750061006c0069007a006100e700e3006f002000650020006100200069006d0070007200650073007300e3006f00200063006f006e0066006900e1007600650069007300200064006500200064006f00630075006d0065006e0074006f007300200063006f006d0065007200630069006100690073002e0020004f007300200064006f00630075006d0065006e0074006f00730020005000440046002000630072006900610064006f007300200070006f00640065006d0020007300650072002000610062006500720074006f007300200063006f006d0020006f0020004100630072006f006200610074002000650020006f002000410064006f00620065002000520065006100640065007200200035002e0030002000650020007600650072007300f50065007300200070006f00730074006500720069006f007200650073002e>
    /SUO <FEFF004b00e40079007400e40020006e00e40069007400e4002000610073006500740075006b007300690061002c0020006b0075006e0020006c0075006f0074002000410064006f0062006500200050004400460020002d0064006f006b0075006d0065006e007400740065006a0061002c0020006a006f0074006b006100200073006f0070006900760061007400200079007200690074007900730061007300690061006b00690072006a006f006a0065006e0020006c0075006f00740065007400740061007600610061006e0020006e00e400790074007400e4006d0069007300650065006e0020006a0061002000740075006c006f007300740061006d0069007300650065006e002e0020004c0075006f0064007500740020005000440046002d0064006f006b0075006d0065006e00740069007400200076006f0069006400610061006e0020006100760061007400610020004100630072006f0062006100740069006c006c00610020006a0061002000410064006f00620065002000520065006100640065007200200035002e0030003a006c006c00610020006a006100200075007500640065006d006d0069006c006c0061002e>
    /SVE <FEFF0041006e007600e4006e00640020006400650020006800e4007200200069006e0073007400e4006c006c006e0069006e006700610072006e00610020006f006d002000640075002000760069006c006c00200073006b006100700061002000410064006f006200650020005000440046002d0064006f006b0075006d0065006e007400200073006f006d00200070006100730073006100720020006600f60072002000740069006c006c006600f60072006c00690074006c006900670020007600690073006e0069006e00670020006f006300680020007500740073006b007200690066007400650072002000610076002000610066006600e4007200730064006f006b0075006d0065006e0074002e002000200053006b006100700061006400650020005000440046002d0064006f006b0075006d0065006e00740020006b0061006e002000f600700070006e00610073002000690020004100630072006f0062006100740020006f00630068002000410064006f00620065002000520065006100640065007200200035002e00300020006f00630068002000730065006e006100720065002e>
    /ENU (Use these settings to create PDFs that match the "Recommended"  settings for PDF Specification 4.01)
  >>
>> setdistillerparams
<<
  /HWResolution [600 600]
  /PageSize [612.000 792.000]
>> setpagedevice