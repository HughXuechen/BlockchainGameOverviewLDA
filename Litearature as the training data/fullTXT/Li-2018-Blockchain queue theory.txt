Blockchain Queue Theory
Blockchain Queue Theory
Quan-Lin Li1(B), Jing-Yu Ma1, and Yan-Xia Chang2
1 School of Economics and Management Sciences, Yanshan University,
Qinhuangdao 066004, China
liquanlin@tsinghua.edu.cn
2 School of Science, Yanshan University, Qinhuangdao 066004, China
Abstract. Blockchain has many benefits including decentraliza-
tion, availability, persistency, consistency, anonymity, auditability and
accountability, and it also covers a wide spectrum of applications rang-
ing from cryptocurrency, financial services, reputation system, Internet
of Things, sharing economy to public and social services. Not only may
blockchain be regarded as a by-product of Bitcoin cryptocurrency sys-
tems, but also it is a type of distributed ledger technologies through
using a trustworthy, decentralized log of totally ordered transactions. By
summarizing the literature of blockchain, it is found that more and more
important research is to develop basic theory, for example, mathematical
models (Markov processes, queueing theory and game models) for min-
ing management and consensus mechanism, performance analysis and
optimization of blockchain systems. In this paper, we develop queueing
theory of blockchain systems and provide system performance evaluation.
To do this, we design a Markovian batch-service queueing system with
two different service stages, which are suitable to well express the min-
ing process in the miners pool and the building of a new blockchain. By
using the matrix-geometric solution, we obtain a system stable condition
and express three key performance measures: (a) The average number
of transactions in the queue, (b) the average number of transactions in
a block, and (c) the average transaction-confirmation time. Finally, we
use numerical examples to verify computability of our theoretical results.
Although our queueing model here is simple only under exponential or
Poisson assumptions, our analytic method will open a series of poten-
tially promising research in queueing theory of blockchain systems.
Keywords: Blockchain · Bitcoin · Queueing theory
Matrix-geometric solutions · Mining process
Block-generation process · Blockchain-building process
1 Introduction
In this paper, we develop queueing theory of blockchain systems under a dynamic
behavior setting. Such a blockchain queue in general is very necessary and useful
Quan-Lin Li was supported by the National Natural Science Foundation of China under
grant No. 71671158 and No. 71471160, and by the Natural Science Foundation of Hebei
province under grant No. G2017203277.
c© Springer Nature Switzerland AG 2018
X. Chen et al. (Eds.): CSoNet 2018, LNCS 11280, pp. 25–40, 2018.
https://doi.org/10.1007/978-3-030-04648-4_3
http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-030-04648-4_3&domain=pdf
https://doi.org/10.1007/978-3-030-04648-4_3
26 Q.-L. Li et al.
in performance analysis and optimization of blockchain systems, and it will also
be helpful in optimal design of blockchain technologies. To this end, we propose
and analyze a Markovian batch-service queueing system with two different ser-
vice stages, which are suitable to well express the mining process in the miners
pool and the building of a new blockchain. By using the matrix-geometric solu-
tion, we obtain a system stable condition and express three key measures: The
average number of transactions in the queue, the average number of transactions
in a block, and the average transaction-confirmation time. At the same time, we
use some numerical examples to verify effective computability of our theoretical
results. Different from the previous works in the literature, this paper is the first
one to give a complete solution with respect to analysis of blockchain queues.
We hope that our approach opens a new avenue to queueing analysis of more
general blockchain systems in practice, and can motivate a series of promising
future research on development of blockchain technologies.
Blockchain is one of the most popular issues discussed extensively in recent
years, and it has already changed people’s lifestyle in some real areas due to
its great impact on finance, business, industry, transportation, heathcare and so
forth. Since the introduction of Bitcoin by Nakamoto [23], blockchain technolo-
gies have become widely adopted in many real applications, for example, survey
work of applications by NRI [25] and Foroglou and Tsilidou [10]; finance by Tsai
et al. [30]; business and information systems by Beck et al. [1]; applications to
companies by Montemayor et al. [22]; Internet of Things and shared economy
by Huckle et al. [12]; healthcare by Mettler [21]; and the others.
So far blockchain research has obtained many important advances, readers
may refer to a book by Swan [29]; survey papers by Tschorsch and Scheuermann
[31], Zheng et al. [35,36], Lin and Liao [19] and Constantinides et al. [6]; a key
research framework by Yli-Huumo et al. [34], Plansky et al. [27], Lindman et al.
[20] and Risius and Spohrer [28]; consensus mechanisms by Wang et al. [33] and
Debus [8]; blockchain economics by Catalini and Gans [5] and Davidson et al.
[7]; and the others by Vranken [32] and Dinh et al. [9].
However, little work has been done on basic theory of blockchain systems
so far, for example, developing mathematical models (e.g., Markov processes,
queueing theory, game models, optimal methods, and decision making), pro-
viding performance analysis and optimization, and setting up useful relations
among key factors or basic parameters (e.g., block size, transaction fee, mining
reward, solving difficulty, throughput, and efficiency).
Our blockchain queueing model focuses on analysis of the block-generation
and blockchain-building processes in the mining management, in which the
sum of the block-generation and blockchain-building times is regarded as the
transaction-confirmation time of a block. For convenience of reader’s understand-
ing, it is necessary to simply recall some papers which discussed the miner pools
and the mining processes. A blockchain is maintained and updated by the min-
ing processes in which many nodes, called miners, compete for finding answers
of a very difficult puzzle-like problem. While the transactions are grouped into
a block, and then the block is pegged to the blockchain once the key nonce is
Blockchain Queue Theory 27
provided by means of a mining competition that an algorithmic puzzle special-
ized for this block is solved. For such a mining process, readers may refer to, for
example, Bitcoin by Nakamoto [23], Bhaskar and Chuen [2] and Böhme et al. [4];
and blockchain by Sect. 2 in Zheng et al. [35] and Sect. 2 in Dinh et al. [9]. At the
same time, the mining processes are well supported by mining reward methods
and consensus mechanism whose detailed analysis was given in Debus [8] as well
as an excellent overview by Wang et al. [33]. In addition, it may be useful to
see transaction graph and transaction network by Ober et al. [26] and Kondor
et al. [16]. Finally, the mining processes are also discussed by game theory, e.g.,
see Houy [11], Lewenberg et al. [17], Kiayias et al. [15] and Biais et al. [3].
Kasahara, Kawahara and Kawase provided an early research (in fact, so far
there have been only their two papers in the literature) on applying queueing
theory to deal with the transaction-confirmation time for Bitcoin, in which they
gave some interesting idea and useful simulations to heuristically motivate future
promising research. See Kasahara and Kawahara [13] and Kawase and Kasahara
[14] for more details. In those two papers, Kasahara, Kawahara and Kawase first
assumed that the transaction-confirmation times follow a continuous probability
distribution function. Then they used the supplementary variable method to set
up a system of differential-difference equations (see Sect. 3 of Kawase and Kasa-
hara [14]) by using the elapsed service time. However, they have not correctly
given the unique solution of the system of differential-difference equations yet,
although they used the generating function technique to provide some formal-
ized computation. For example, the average number E[N ] of transactions in the
system and the average transaction-confirmation time: E[T ] = E[N ]/λ given
in (17) of Kawase and Kasahara [14], while it is worth noting that they still
directly depend on the infinitely-many unknown numbers: αn for n = 0, 1, 2, . . ..
However, those unknown numbers αn defined in their paper are impossible to be
obtained by such an ordinary technique. In fact, we also believe that analysis of
the Bitcoin queueing system with general transaction-confirmation times, given
in Kawase and Kasahara [14], is still an interesting open problem in the future
queueing research.
To overcome the difficulties involved in Kawase and Kasahara [14], this paper
introduce two different exponential service stages corresponding to the block-
generation and blockchain-building times. As seen in Sect. 2, such two service
stages are very reasonable in description of the block-generation and blockchain-
building processes. Although our blockchain queueing model is simple only under
exponential or Poisson assumptions, it is easy to see that this model is still very
interesting due to its two stages of batch services: a block of transactions is
generated and then a new blockchain is built. At the same time, we obtain
several new useful results as follows:
(a) Stability: This system is positive recurrent if and only if
bμ1μ2
μ1 + μ2
> λ.
28 Q.-L. Li et al.
Note that this stable condition is not intuitive, and it can not be obtained
by means of some simple observation. In addition, since our transaction-
confirmation time S is the sum of the block-generation time S1 and the
blockchain-building time S2, it is clear that our transaction-confirmation time
obeys a generalized Erlang distribution of order 2 with the mean E[S] =
E[S1] + E[S2] = 1/μ1 + 1/μ2. Thus our stable condition is the same as that
condition: λE[S] < b given in Page 77 of Kawase and Kasahara [14].
(b) Expressions: By means of the matrix-geometric solution, we use the
rate matrix to provide simple expressions for the average number of transactions
in the queue, the average number of transactions in a block, and the average
transaction-confirmation time. At the same time, we use numerical examples to
verify computability of our theoretical results.
The structure of this paper is organized as follows. Section 2 describes an
interesting blockchain queue. Section 3 establishes a continuous-time Markov
process of GI/M/1 type, and derives a system stable condition and the sta-
tionary probability vector by means of the matrix-geometric solution. Section 4
provides simple expressions for three key performance measures, and uses some
numerical examples to verify computability of our theoretical results. Finally,
some concluding remarks are given in Sect. 5.
2 Model Description for a Blockchain Queue
In this section, based on the real background of blockchain, we design an inter-
esting blockchain queue, in which the block-generation and blockchain-building
processes are expressed as a two stages of batch services.
When using a queueing system to model the blockchain, it is a key to set
up the service process by means of analysis of the mining management which
is related to the consensus mechanism. Here, we take a service time as the
transaction-confirmation time which is the sum of the block-generation and
blockchain-building times, that is, our service time is two stages: the first one
is generated from the mining processes, while another comes from the network
latency. In the block-generation stage, a newly generated block is confirmed by
solving a computational intensive problem by means of a cryptographic Hash
algorithm, called mining ; while a number of nodes who compete for finding the
answer is called miners. The winner will be awarded reward, which consists of
some fixed values and fees of transactions included in the block, and he still
has the right to peg a new block to the blockchain. In addition, a block is
a list of transactions, together with metadata including the timestamp of the
current block, the timestamp of the most previous block, and a field called a
nonce which is given by the mining winner. Therefore, it is seen that the block-
generation and blockchain-building processes, the two stages of services, can be
easily understand from the real background of blockchain, e.g., see Bitcoin net-
works by Nakamoto [23] and Bhaskar and Chuen [2]; and blockchain by Sect. 2
in Zheng et al. [35] and Sect. 2 in Dinh et al. [9]. Based on this, we can abstract
the mining processes to set up the two stages of services: the block-generation
Blockchain Queue Theory 29
and blockchain-building processes, so that the blockchain system is described
as a Markovian batch service queue with two different service stages, which is
depicted in Fig. 1.
Fig. 1. A blockchain queueing system
Now, from Fig. 1 we provide some model descriptions as follows:
Arrival Process: Transactions arrive at the blockchain system according to
a Poisson process with arrival rate λ. Each transaction must first enter and
queue up in an waiting room of infinite size. Note that the arrival process of
transactions is denoted in the lower left corner of Fig. 1.
Service Process: Each arrival transaction first queues up in the waiting room.
Then it waits for being successfully mined into a block, this is regarded as the
first stage of service, called block generation. Up to the block-generation time,
a group of transactions are chosen as a block and simultaneously, a nonce is
appended to the block by the mining winner. See the lower middle part of Fig. 1
for more details. Finally, the block with the group of transactions will be pegged
to a blockchain, this is regarded as the second stage of service due to the network
latency, called blockchain building, see the right and lower part of Fig. 1. In
addition, the upper part of Fig. 1 also outlines the blockchain and the internal
structure of every block.
30 Q.-L. Li et al.
In the blockchain system, for the two stages of services, we assume that the
block-generation times in the first stage are i.i.d and exponential with service rate
μ2; the blockchain-building times in the second stage are i.i.d and exponential
with the service rate μ1.
The block-Generation Discipline: A block can consist of several transac-
tions but at most b transactions. The transactions mined into a block are not
completely based on the First Come First Service (FCFS) with respect to the
transaction arrivals. Thus some transactions in the back of this queue may be
preferentially first chosen into the block, seen in the lower middle part of Fig. 1.
For simplification of description, our later computation will be based on
the FCFS discipline. This may be a better approximation in analysis of the
blockchain queueing system if the transactions are regarded as the indistinctive
ones under a dynamic behavior setting.
The Maximum Block Size: To avoid the spam attack, the maximum block
size is limited. We assume that there are at most b transactions in each block.
If the resulting block size is smaller than the maximum block size b , then the
transactions newly arriving during the mining process of a block can be accepted
in the block again. If there are more than b transactions in the waiting room,
then a new block will include b transactions through the full blocks to maximize
the batch service ability in the blockchain system.
Independence: We assume that all the random variables defined above are
independent of each other.
Remark 1: The arrival process of transactions at the blockchain system may be
non-Poisson (for example, Markov arrival process, renewal process and nonho-
mogeneous Poisson process). On the other hand, the two stages of batch service
times may be non-exponential (for example, phase-type distribution and general
distribution). However, so far analysis of the blockchain queues with renewal
arrival process or with general service time distribution has still been an inter-
esting open problem in queueing research of blockchain systems.
Remark 2: In the blockchain system, there are key factors, such as the max-
imum block size, mining reward, transaction fee, mining strategy, security of
blockchain and so on. Based on some of them, we may develop reward queueing
models, decision queueing models, and game queueing models in the study of
blockchain systems. Analysis for these key factors will be very necessary and
useful in improving blockchain technologies in many future applications.
3 A Markov Process of GI/M/1 Type
In this section, for the blockchain queueing system, we establish a continuous-
time Markov process of GI/M/1 type. Based on this, we derive a system stable
condition and the stationary probability vector of this system by means of the
matrix-geometric solution.
Blockchain Queue Theory 31
Let I (t) and J (t) be the numbers of transactions in the block and in the
queue at time t, respectively. Then, (I (t) , J (t)) may be regarded as a state of the
blockchain queueing system at time t. Note that i = 0, 1, . . . , b and j = 0, 1, 2, . . .,
for various cases of (I (t) , J (t)) we write
Ω = {(i, j) : i = 0, 1, . . . , b, j = 0, 1, 2, . . .}
= {(0, 0) , (1, 0) , . . . , (b, 0) ; (0, 1) , (1, 1) , . . . , (b, 1) ; . . . ;
(0, b) , (1, b) , . . . , (b, b) ; (0, b + 1) , (1, b + 1) , . . . , (b, b + 1) ; . . .} . (1)
Fig. 2. State transition relation of a Markov process
Let X (t) = (I (t) , J (t)). Then {X (t) : t ≥ 0} is a continuous-time Markov
process of GI/M/1 type on the state space Ω. Figure 2 denotes the state transi-
tion relation of the Markov process {X (t) : t ≥ 0}, thus its infinitesimal gener-
ator is given by
Q =
⎛
⎜⎜⎜⎜⎜⎜⎜⎜⎜⎜⎜⎜⎝
B0 A0
B1 A1 A0
B2 A1 A0
...
. . . . . .
Bb A1 A0
Ab A1 A0
Ab A1 A0
. . . . . . . . .
⎞
⎟⎟⎟⎟⎟⎟⎟⎟⎟⎟⎟⎟⎠
, (2)
where
A0 = λI, A1 =
⎛
⎜⎜⎜⎝
− (λ + μ2)
μ1 − (λ + μ1)
...
. . .
μ1 − (λ + μ1)
⎞
⎟⎟⎟⎠ , Ab =
⎛
⎜⎜⎝
0 · · · 0 μ2
⎞
⎟⎟⎠ ,
and
B0 =
⎛
⎜⎜⎜⎝
−λ
μ1 − (λ + μ1)
...
. . .
μ1 − (λ + μ1)
⎞
⎟⎟⎟⎠ ,
32 Q.-L. Li et al.
B1 =
⎛
⎜⎜⎝
0 μ2 0 · · · 0
⎞
⎟⎟⎠ , B2 =
⎛
⎜⎜⎝
0 0 μ2 · · · 0
⎞
⎟⎟⎠ , . . . , Bb =
⎛
⎜⎜⎝
0 · · · 0 μ2
⎞
⎟⎟⎠ .
For the continuous-time Markov process of GI/M/1 type, now we use the
mean drift method to discuss its system stable condition. Note that the mean
drift method for checking system stability is given a detailed introduction in
Chap. 3 of Li [18] (e.g., Theorem 3.19 and the continuous-time case in Page
172).
From Chap. 1 of Neuts [24] or Chap. 3 of Li [18], for the Markov process of
GI/M/1 type, we write
A = A0 + A1 + Ab =
⎛
⎜⎜⎜⎜⎜⎝
−μ2 μ2
μ1 −μ1
...
. . .
μ1 −μ1
μ1 −μ1
⎞
⎟⎟⎟⎟⎟⎠
.
Clearly, the matrix A is an irreducible, aperiodic and positive recurrent Markov
process with two states (i.e., States 0 and b), together with b − 1 instantaneous
states (i.e., States 1, 2, . . . , b − 1) which will vanish as the time t goes to infinity.
Note that such a special Markov process A can not influence applications of the
matrix-geometric solution because it is only related to the mean drift method
for establishing system stable conditions. In this case, let θ = (θ0, θ1, . . . , θb) be
the unique solution to the system of linear equations: θA = 0 and θe = 1, where
e is a column vector of ones with proper dimension. It is easy to check that
θ =
(
μ1
μ1 + μ2
, 0, . . . , 0,
μ2
μ1 + μ2
)
.
The following theorem provides a necessary and sufficient condition under
which the Markov process Q is positive recurrent.
Theorem 1. The Markov process Q of GI/M/1 type is positive recurrent if and
only if
bμ1μ2
μ1 + μ2
> λ.
Proof. By using the mean drift method given in Chap. 3 of Li [18] (e.g., Theorem
3.19 and the continuous-time case in Page 172), it is easy to see that the Markov
process Q of GI/M/1 type is positive recurrent if and only if
θA0e < bθAbe. (3)
Note that
θA0e = λ, (4)
Blockchain Queue Theory 33
and
bθAbe = bθ0μ2 =
bμ1μ2
μ1 + μ2
, (5)
thus we obtain
bμ1μ2
μ1 + μ2
> λ.
This completes the proof. �
When the Markov process Q of GI/M/1 type is positive recurrent, we write
its stationary probability vector as
π = (π0,π1,π2, . . .) ,
where
π0 = (π0,0, π1,0, . . . , πb,0) ,
π1 = (π0,1, π1,1, . . . , πb,1) ,
πk = (π0,k, π1,k, . . . , πb,k) , k ≥ 2.
For the Markov process Q of GI/M/1 type, to compute its stationary prob-
ability vector, we need to first obtain the rate matrix R, which is the minimal
nonnegative solution to the following nonlinear matrix equation
RbAb + RA1 + A0 = 0. (6)
In general, it is very complicated to provide expression for the unique solution
to this nonlinear matrix equation due to the term RbAb of size b + 1. In fact,
for the blockchain queueing system, here we can not also provide an explicit
expression for the rate matrix R. For example, we consider a special case with
b = 2. For this simple case, we have
A0 = λI,A1 =
⎛
⎝
− (λ + μ2)
μ1 − (λ + μ1)
μ1 − (λ + μ1)
⎞
⎠ , A2 =
⎛
⎝
0 0 μ2
⎞
⎠ .
From computing R2A2 +RA1 +A0 = 0, it is easy to see that for the simple case
with the maximal block size b = 2, we can not provide an explicit expression for
the rate matrix R of size 3 yet.
Although the rate matrix R has not an explicit expression, we can use some
iterative algorithms, given in Chaps. 1 and 2 of Neuts [24], to give its numerical
solution. Here, an effective iterative algorithm is described as
R0 = 0,
RN+1 =
(
Rb
NAb + A0
)
(−A1)
−1
.
Note that this algorithm is fast convergent, that is, after a finite number of
iterative steps, we can numerically given a solution of higher precision for the
rate matrix R.
The following theorem directly comes from Theorem 1.2.1 of Chap. 1 in Neuts
[24]. Here, we restate it without a proof.
34 Q.-L. Li et al.
Theorem 2. If the Markov process Q of GI/M/1 type is positive recurrent, then
the stationary probability vector π = (π0,π1,π2, . . .) is given by
πk = π0R
k, k ≥ 1, (7)
where the vector π0 is positive, and it is the unique solution to the following
system of linear equations:
π0B [R] = π0, (8)
π0 (I − R)−1
e = 1,
and the matrix B [R] =
∑b
k=0 RkBk is irreducible and stochastic.
4 Performance Analysis
In this section, we provide performance analysis of the blockchain queueing sys-
tem. To this end, we provide three key performance measures and give their
simple expressions by means of the vector π0 and the rate matrix R. Finally, we
use numerical examples to verify computability of our theoretical results, and
show how the performance measures depend on some key parameters of this
system.
When the blockchain queueing system is stable, we write
I = limt→+∞I (t) , J = limt→+∞J (t) .
(a) The average number of transactions in the queue
It follows from (8) and (7) that
E [J ] =
∞∑
j=0
j
b∑
i=0
πi,j =
∞∑
j=0
jπje = π0R (I − R)−2
e.
(b) The average number of transactions in the block
Let h = (0, 1, 2, . . . , b)T . Then
E [I] =
∞∑
j=0
b∑
i=0
iπi,j =
∞∑
j=0
πjh = π0 (I − R)−1
h.
(c) The average transaction-confirmation time
In the blockchain system, the transaction-confirmation time is the time
interval from the time epoch that a transaction arrives at the waiting room
to the point that the blockchain pegs a block with this transaction. In fact,
the transaction-confirmation time is the sojourn time of the transaction in the
blockchain system, and it is also the sum of the block-generation and blockchain-
building times of a block with this transaction.
Let T denote the transaction-confirmation time of any transaction when the
blockchain system is stable.
The following theorem provides expression for the average transaction-
confirmation time by means of the stationary probability vector.
Blockchain Queue Theory 35
Theorem 3. If the blockchain queueing system is stable, then the average
transaction-confirmation time E[T ] is given by
E[T ] =
∞∑
k=0
b−1∑
l=0
π0,kb+l (k + 1)
(
1
μ1
+
1
μ2
)
+
b∑
i=1
∞∑
k=0
b−1∑
l=0
πi,kb+l
[
1
μ1
+ (k + 1)
(
1
μ1
+
1
μ2
)]
.
Proof. It is clear that (i, kb + l) is a state of the blockchain system for i =
0, 1, . . . , b, k = 0, 1, . . . , and l = 0, 1, . . . , b − 1.
When a transaction arrives at the blockchain system at time t, it observes
and finds that there are i transactions in the block and kb+ l transactions in the
queue. Based on the two stages of exponential service times and by using the
stationary probability vector π, we apply the law of total probability to be able
to compute the average transaction-confirmation time. For this, our computation
will have two different cases as follows:
Case One: i = 0. In this case, the transaction finds that there is no transaction
in the block at the beginning moment, thus its transaction-confirmation time
includes k + 1 block-generation times (k + 1)/μ2 and k + 1 blockchain-building
times (k + 1)/μ1. Thus we obtain
E[T|i=0] =
∞∑
k=0
b−1∑
l=0
π0,kb+l (k + 1)
(
1
μ1
+
1
μ2
)
.
Case Two: i = 1, 2, . . . , b. In this case, the transaction finds that there are i
transactions in the block, thus its transaction-confirmation time includes k + 1
block-generation times (k+1)/μ2 and k+2 blockchain-building times (k+2)/μ1.
We obtain
E[T|i�=0] =
b∑
i=1
∞∑
k=0
b−1∑
l=0
πi,kb+l
[
1
μ1
+ (k + 1)
(
1
μ1
+
1
μ2
)]
.
Therefore, by means of considering all the different cases, the average
transaction-confirmation time E[T ] is given by
E[T ] =
∞∑
k=0
b−1∑
l=0
π0,kb+l (k + 1)
(
1
μ1
+
1
μ2
)
+
b∑
i=1
∞∑
k=0
b−1∑
l=0
πi,kb+l
[
1
μ1
+ (k + 1)
(
1
μ1
+
1
μ2
)]
.
This completes the proof. �
Let 〈x〉|i=0 be the 1st element of the vector x. The following theorem provides
a simple expression for the average transaction-confirmation time E[T ] by means
of the vector π0 and the rate matrix R.
Theorem 4. If the blockchain queueing system is stable, then the average
transaction-confirmation time E[T ] is given by
E [T ] =
1
μ1
[
π0 (I − R)−1
e −
〈
π0 (I − R)−1
〉
|i=0
]
+
(
1
μ1
+
1
μ2
)
π0
(
I − Rb
)−1
(I − R)−1
e.
36 Q.-L. Li et al.
Proof. By using Theorem 3, we give some corresponding computation. Note that
1
μ1
b∑
i=1
∞∑
k=0
b−1∑
l=0
πi,kb+l =
1
μ1
[ ∞∑
k=0
b−1∑
l=0
πkb+le −
∞∑
k=0
b−1∑
l=0
π0,kb+l
]
,
∞∑
k=0
b−1∑
l=0
πkb+le =
∞∑
k=0
b−1∑
l=0
π0R
kb+le = π0 (I − R)−1
e,
∞∑
k=0
b−1∑
l=0
π0,kb+l =
〈 ∞∑
k=0
b−1∑
l=0
πkb+l
〉
|i=0
=
〈
π0 (I − R)−1
〉
|i=0
,
we obtain
1
μ1
b∑
i=1
∞∑
k=0
b−1∑
l=0
πi,kb+l =
1
μ1
[
π0 (I − R)−1
e −
〈
π0 (I − R)−1
〉
|i=0
]
.
On the other hand, since
b∑
i=0
∞∑
k=0
b−1∑
l=0
πi,kb+l (k + 1)
(
1
μ1
+
1
μ2
)
=
(
1
μ1
+
1
μ2
) ∞∑
k=0
b−1∑
l=0
(k + 1) πkb+le,
we get
∞∑
k=0
b−1∑
l=0
(k + 1) πkb+l =
∞∑
k=0
b−1∑
l=0
(k + 1) π0R
kb+l
= π0
∞∑
k=0
(k + 1) Rkb
(
I − Rb
)
(I − R)−1
= π0
(
I − Rb
)−1
(I − R)−1
.
This leads our desired result. The proof is completed. �
In the remainder of this section, we provide some numerical examples to
verify computability of our theoretical results and to analyze how the three
performance measures E [J ], E [I] and E [T ] depend on some crucial parameters
of the blockchain queueing system.
In the numerical examples, we take some common parameters: Block-
generation service rate μ1 ∈ [0.05, 1.5], blockchain-building service rate μ2 = 2,
arrival rate λ = 0.3, maximum block size b1 = 40, b2 = 80, b3 = 320.
From the left part of Fig. 3, it is seen that E [J ] and E [I] decrease, as μ1
increases. At the same time, from the right part of Fig. 3, E [J ] decreases as b
increases, but E [I] increases as b increases.
From Fig. 4, it is seen that E [T ] decreases, as μ1 increases; while it decreases,
as b increases.
Blockchain Queue Theory 37
0 0.5 1 1.5
1
0
1
2
3
4
5
6
E
[J
]
E
[I
]
b
1
= 40
b
2
= 80
b
3
= 320
0 0.5 1 1.5
1
0
10
20
30
40
50
60
70
80
90
b
1
= 40
b
2
= 80
b
3
= 320
Fig. 3. E [J ], E [I] vs. μ1 for three different b1, b2, b3.
Finally, we specifically observe the impact of the maximal block size b on the
E [T ]. Comparing with the parameters given in Figs. 3 and 4, we only change
the two parameters b and λ: b = 40, 41, 42, . . . , 500, λ1 = 0.1, λ2 = 0.9, λ3 = 1.5.
From Fig. 5, it is seen that E [T ] decreases, as b increases. In addition, it is
observed that there exists a critical value η such that when b ≤ η, E [T ] increases,
as λ increases. On the contrary, when b > η, E [T ] increases, as λ decreases. In
fact, such a difference is also intuitive that the block generation time becomes
bigger as λ decreases.
0 0.5 1 1.5
1
0
5
10
15
20
25
30
35
40
E
[T
]
b
1
= 40
b
2
= 80
b
3
= 320
Fig. 4. E [T ] vs. μ1 for three different b1, b2, b3.
38 Q.-L. Li et al.
0 50 100 150 200 250 300 350 400 450 500
b
10
20
30
40
50
60
70
E
[T
]
1
=0.1
2
=0.9
3
=1.5
Fig. 5. E [T ] vs. b for three different λ1, λ2, λ3.
5 Concluding Remarks
In this paper, our aim is to focus on how to develop queueing theory of blockchain
systems. To do this, we design an interesting Markovian batch-service queueing
system with two different service stages, while the two stages can well express
the mining process in the miners pool and the building of a new blockchain.
By using the matrix-geometric solution, we not only obtain a system stable
condition but also simply express three key performance measures: The average
number of transactions in the queue, the average number of transactions in a
block, and the average transaction-confirmation time. Finally, we use numerical
examples to verify computability of our theoretical results. Along these lines, we
will continue our future research on the following directions:
– Considering more general blockchain queueing systems, for example, the
Markov arrival process of transactions, and two stages of phase-type batch
services.
– Analyzing multiple classes of transactions in the blockchain systems. Also, the
transactions are dealt with in the block-generation and blockchain-building
processes according to a priority service discipline.
– When the arrivals of transactions are a renewal process, and the block-
generation times or the blockchain-building times follow general probability
distributions, an interesting research work is to focus on fluid and diffusion
approximations of the blockchain systems.
Blockchain Queue Theory 39
– Setting up reward function with respect to cost structures, transaction fees,
mining reward, consensus mechanism, security and so forth. Our aim is to
find optimal policies in the blockchain systems.
– Further developing stochastic optimization and control, Markov decision pro-
cesses and stochastic game theory in the blockchain systems.
References
1. Beck, R., Avital, M., Rossi, M., Thatcher, J.B.: Blockchain technology in business
and information systems research. Bus. Inf. Syst. Eng. 59(6), 381–384 (2017)
2. Bhaskar, N.D., Chuen, D.L.K.: Bitcoin mining technology. In: Handbook of Digital
Currency, pp. 45–65 (2015)
3. Biais, B., Bisiere, C., Bouvard, M., Casamatta, C.: The blockchain folk theorem.
Working paper, Toulouse School of Economics, Université Toulouse Capitole, pp.
1–71 (2018)
4. Böhme, R., Christin, N., Edelman, B., Moore, T.: Bitcoin: economics, technology,
and governance. J. Econ. Perspect. 29(2), 213–38 (2015)
5. Catalini, C., Gans, J.S.: Some simple economics of the blockchain. National Bureau
of Economic Research, No. w22952, pp. 1–29 (2016)
6. Constantinides, P., Henfridsson, O., Parker, G.G.: Introduction - platforms and
infrastructures in the digital age. Inf. Syst. Res. 29(2), 381–400 (2018)
7. Davidson, S., De Filippi, P., Potts, J.: Economics of blockchain. Online Available:
HAL Id: hal-01382002, pp. 1–23 (2016)
8. Debus, J.: Consensus methods in blockchain systems, pp. 1–58. Frankfurt School
of Finance & Management, Blockchain Center, Technical report (2017)
9. Dinh, T.T.A., Liu, R., Zhang, M., Chen, G., Ooi, B.C., Wang, J.: Untangling
blockchain: a data processing view of blockchain systems. IEEE Trans. Knowl.
Data Eng. 30(7), 1366–1385 (2018)
10. Foroglou, G., Tsilidou, A.L.: Further applications of the blockchain. Abgerufen Am
3, 1–9 (2015)
11. Houy, N.: The bitcoin mining game. Online Available: HAL Id: halshs-00958224,
pp. 1–17 (2014)
12. Huckle, S., Bhattacharya, R., White, M., Beloff, N.: Internet of Things, blockchain
and shared economy applications. Procedia Comput. Sci. 98, 461–466 (2016)
13. Kasahara, S., Kawahara, J.: Effect of Bitcoin fee on transaction-confirmation pro-
cess. arXiv preprint arXiv:1604.00103, pp. 1–24 (2016)
14. Kawase, Y., Kasahara, S.: Transaction-confirmation time for bitcoin: a queueing
analytical approach to blockchain mechanism. In: Yue, W., Li, Q.-L., Jin, S., Ma, Z.
(eds.) QTNA 2017. LNCS, vol. 10591, pp. 75–88. Springer, Cham (2017). https://
doi.org/10.1007/978-3-319-68520-5 5
15. Kiayias, A., Koutsoupias, E., Kyropoulou, M., Tselekounis, Y.; Blockchain mining
games. In: Proceedings of the 2016 ACM Conference on Economics and Compu-
tation, pp. 365–382. ACM (2016)
16. Kondor, D., Pósfai, M., Csabai, I., Vattay, G.: Do the rich get richer? An empirical
analysis of the Bitcoin transaction network. PloS ONE 9(2), 1–10 (2014)
17. Lewenberg, Y., Bachrach, Y., Sompolinsky, Y., Zohar, A., Rosenschein, J.S.: Bit-
coin mining pools: a cooperative game theoretic analysis. In: Proceedings of the
2015 International Conference on Autonomous Agents and Multiagent Systems,
pp. 919–927 (2015)
http://arxiv.org/abs/1604.00103
https://doi.org/10.1007/978-3-319-68520-5_5
https://doi.org/10.1007/978-3-319-68520-5_5
40 Q.-L. Li et al.
18. Li, Q.L.: Constructive Computation in Stochastic Models with Applications: The
RG-Factorizations. Springer, Heidelberg (2010). https://doi.org/10.1007/978-3-
642-11492-2
19. Lin, I.C., Liao, T.C.: A survey of blockchain security issues and challenges. Int. J.
Netw. Secur. 19(5), 653–659 (2017)
20. Lindman, J., Tuunainen, V.K., Rossi, M.: Opportunities and risks of blockchain
technologies - a research agenda. In: Proceedings of the 50th Hawaii International
Conference on System Sciences, pp. 1533–1542 (2017)
21. Mettler, M.: Blockchain technology in healthcare: the revolution starts here. In:
The 18th International IEEE Conference on e-Health Networking, Applications
and Services, pp. 1–3. IEEE (2016)
22. Montemayor, L., Boersma, T., van Dorp, T.: Comprehensive guide to companies
involved in blockchain and energy. Blockchain Business (2018)
23. Nakamoto, S.: Bitcoin: a peer-to-peer electronic cash system, pp. 1–9 (2008).
https://bitcoin.org/bitcoin.pdf
24. Neuts, M.F.: Matrix-Geometric Solutions in Stochastic Models. Johns Hopkins
University Press, Baltimore (1981)
25. NRI, Survey on blockchain technologies and related services. FY2015 Report,
Nomura Research Institute, pp. 1–78 (2015). http://www.meti.go.jp/english/
press/2016/pdf/053101f.pdf
26. Ober, M., Katzenbeisser, S., Hamacher, K.: Structure and anonymity of the Bitcoin
transaction graph. Future Internet 5(2), 237–250 (2013)
27. Plansky, J., O’Donnell, T., Richards, K.: A strategist’s guide to blockchain. Strateg.
+ Bus. Mag. 82, 1–12 (2016)
28. Risius, M., Spohrer, K.: A blockchain research framework. Bus. Inf. Syst. Eng.
59(6), 385–409 (2017)
29. Swan, M.: Blockchain: Blueprint for a New Economy. O’Reilly Media Inc., Newton
(2015)
30. Tsai, W.T., Blower, R., Zhu, Y., Yu, L.: A system view of financial blockchains.
In: The IEEE Symposium on Service-Oriented System Engineering, pp. 450–457.
IEEE (2016)
31. Tschorsch, F., Scheuermann, B.: Bitcoin and beyond: a technical survey on decen-
tralized digital currencies. IEEE Commun. Surv. Tutor. 18(3), 2084–2123 (2016)
32. Vranken, H.: Sustainability of bitcoin and blockchains. Curr. Opin. Environ. Sus-
tain. 28, 1–9 (2017)
33. Wang, W., et al.: A survey on consensus mechanisms and mining management in
blockchain networks. arXiv preprint arXiv:1805.02707, pp. 1–33 (2018)
34. Yli-Huumo, J., Ko, D., Choi, S., Park, S., Smolander, K.: Where is current research
on blockchain technology? – A systematic review. PloS ONE 11(10), 1–27 (2016)
35. Zheng, Z., Xie, S., Dai, H.N., Chen, X., Wang, H.: An overview of blockchain
technology: architecture, consensus, and future trends. In: The IEEE International
Congress on Big Data, pp. 557–564. IEEE (2017)
36. Zheng, Z., Xie, S., Dai, H.N., Wang, H.: Blockchain challenges and opportunities:
a survey. Int. J. Web Grid Serv. 13(2), 1–25 (2017)
https://doi.org/10.1007/978-3-642-11492-2
https://doi.org/10.1007/978-3-642-11492-2
https://bitcoin.org/bitcoin.pdf
http://www.meti.go.jp/english/press/2016/pdf/053101f.pdf
http://www.meti.go.jp/english/press/2016/pdf/053101f.pdf
http://arxiv.org/abs/1805.02707
	Blockchain Queue Theory
	1 Introduction
	2 Model Description for a Blockchain Queue
	3 A Markov Process of GI/M/1 Type
	4 Performance Analysis
	5 Concluding Remarks
	References