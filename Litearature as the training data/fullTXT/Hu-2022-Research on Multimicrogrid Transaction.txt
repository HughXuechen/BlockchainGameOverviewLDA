Research Article
Research on Multimicrogrid Transaction Model and Cross-Chain
Transaction Mechanism Based on Blockchain
Wei Hu , Xue Xia, and Yi Zhang
School of Economics and Management, Shanghai University of Electric Power, Shanghai 200090, China
Correspondence should be addressed to Wei Hu; hwshiep@shiep.edu.cn
Received 23 February 2022; Revised 28 March 2022; Accepted 31 March 2022; Published 11 April 2022
Academic Editor: Gengxin Sun
Copyright © 2022Wei Hu et al.*is is an open access article distributed under the Creative Commons Attribution License, which
permits unrestricted use, distribution, and reproduction in any medium, provided the original work is properly cited.
*e traditional microgrid electricity transactions face a low security, poor economic benefits, and weak stability. To solve these
problems, this paper proposes a multimicrogrid cross-chain transaction model based on quantum blockchain. Specifically, a
bidding strategy was developed for the noncooperative dynamic game of aggregator-multimicrogrid alliance, aiming to balance
and optimize the benefits of all parties and effectively enhance the consumption rate of electric energy. To improve the transaction
efficiency between aggregators, a consensus mechanism was designed for multimicrogrid cross-chain communication, realizing
consistent self-adaptation to cross-chain information. In addition, the quantum threshold signature technology was adopted to
ensure the reliability of transaction data and create an unconditional secure communication environment. Case analysis shows
that our model proposed in this paper not only ensures the security and stability of transactions but also enhances the economic
benefits, providing theoretical support and decision support for the optimization of multimicronetwork cross-chain
transaction model.
1. Introduction
*e continuous development of energy information tech-
nology brings more and more challenges to data commu-
nication and isolated value island in multiple energy
transaction market. *e emerging technology of quantum
blockchain injects new vitality to the multiple energy
transaction market and significantly vitalizes the peer-to-
peer cross-chain transactions between multiple microgrids
[1]. Based on quantum blockchain, the multimicrogrid
cross-chain transactions can overcome the problems of
traditional electricity transactions within microgrids, such as
poor stability, low efficiency, and incredible data. *erefore,
it is of great significance to deeply integrate multimicrogrid
cross-chain communication with quantum blockchain
technology.
So far, domestic and foreign scholars have coupled
microgrid electricity transactions with key blockchain
techniques from various aspects. Zhang et al. [2] designed an
electricity transaction settlement model based on smart
contract and verified the feasibility and effectiveness of the
proposed model. Chang et al. [3] established a hybrid game
model, which includes the Stackelberg game between grid
sources and the cooperative game between wind power and
thermal power and designed an income distribution method
based on both economic and environmental factors. After
analyzing the demand of each node in microgrids, Ma et al.
[4] improved the ant colony algorithm to build a blockchain-
based competitive game model for multiple grids. She et al.
[5] presented a secure transaction model based on heter-
ogenous energy blockchain, aiming to realize the comple-
mentation between multiple energies in the electricity
transaction system. *e above studies have applied block-
chain technology in electricity transactions. However, the
existing models fail to offer a secure and efficient method for
multimicrogrid cross-chain transactions.
For multimicrogrid joint operation, the cross-chain
technology of quantum blockchain can break through the
trust barriers of each microgrid and realize energy trans-
actions between multiple systems without sacrificing pri-
vacy. Quantum communication is a new communication
pattern that transmits information, using the superposition
Hindawi
Mathematical Problems in Engineering
Volume 2022, Article ID 4535974, 11 pages
https://doi.org/10.1155/2022/4535974
mailto:hwshiep@shiep.edu.cn
https://orcid.org/0000-0003-4978-2376
https://creativecommons.org/licenses/by/4.0/
https://creativecommons.org/licenses/by/4.0/
https://doi.org/10.1155/2022/4535974
of states, quantum entanglement, and quantum teleporta-
tion [6]. Quantum blockchain is developing rapidly, and the
relevant theories are increasingly perfect, providing refer-
ence and research direction for optimizing the electricity
transactions of multimicrogrids.
Considering the above factors, this paper proposes a
multimicrogrid cross-chain transaction model based on
quantum blockchain. Firstly, a bidding mechanism was
developed for the noncooperative dynamic game between
aggregators and microgrids + grid and between aggregators,
and the optimal selling model was derived for the multi-
microgrids to obtain the unique Nash equilibrium solution,
thereby maximizing the consumption of distributed energy.
After that, a consensus mechanism was designed for mul-
timicrogrid cross-chain communication. *e mechanism
disperses the values across blockchain nodes in the private
chain and effectively optimizes the efficiency of multi-
microgrid cross-chain transactions. Finally, a quantum
threshold signature scheme was formed under the quantum
key distribution protocol. *e scheme manages to regulate
the transaction behaviors between multiple microgrids and
improve the security of the transaction data.
2. Quantum Blockchain
Blockchain is a new application mode of computer tech-
nology, such as distributed data storage, peer-to-peer
transmission, consensus mechanism, and encryption algo-
rithm [7]. Blockchain is different from general distributed
storage. Each node in the blockchain stores a copy of the
blockchain database [8]. Blockchain is formed by linking
blocks with hash values. *e defining features of blockchain
are decentralization, openness, and tamper-proof infor-
mation [9]. *e blockchain system consists of multiple data
blocks, each of which is generated chronologically after the
previous block. Figure 1 shows the structure of the
blockchain.
Quantum computing uses the laws of quantum me-
chanics to process information and perform calculation.*e
basic principle of quantum mechanics is quantum super-
position [10]. *e superposition of states α|0 + β|1 is the
most general state of physical systems [11].*e coefficients α
and β are complex numbers about the number of config-
urations. *e configuration probabilities can be described as
g0 � |α|2 and g1 � |β|2, with g0 + g1 � 1. Similar to those in
the classic blockchain, the nodes in the quantum blockchain
network each stores a copy of the blockchain, aiming to
increase effective blocks in a decentralized manner.
3. Cross-Chain Communication
3.1. Multimicrogrid Joint Operation Architecture.
Microgrid is a small power distribution system composed of
distributed power sources, storage devices, electrical loads,
and monitoring and protection devices [12]. With the large-
scale construction of microgrids, multiple adjacent micro-
grids in a certain area can form a multimicrogrid joint
operation system through the connected transmission and
distribution network.
Figure 2 presents two independent microgrids i and j.
*e transmission and distribution network in the area serves
as the physical channel for electricity interaction. Each of the
two microgrids has established a blockchain-based internal
peer-to-peer electricity transaction network, i.e., blockchain
x and blockchain y. When the electricity supply and demand
are out of balance, each microgrid purchases electricity at a
high price from or sells electricity at a low price to the
external distribution network. But this strategy is not
conducive to the economic operation of each microgrid,
because energy may get lost during the long-distance
transmission in the distribution network [13]. To solve the
problem, this paper designs a dynamic adaptive cross-chain
network, which enables each party in blockchains x and y to
handle cross-system transactions independently. *e dy-
namic adaptive network was established on quantum
blockchain, such that the cross-chain transactions inherit the
advantages of distributed data storage and mutual trust.
3.2. Multimicrogrid Cross-Chain Communication. In each
blockchain network, a verification node subset (VNS) is
chosen based on credibility and used to verify the effectiveness
of cross-chain communication information, namely, Vx􏼈 􏼉
and Vy􏽮 􏽯. By threshold signature, the VNS extends the in-
ternal consensus within each blockchain to interchain
consensus. *e nodes of VNS are independent of each
other. *e cross-chain consensus of multimicrogrid joint
operation can be described by Vk􏼈 􏼉 ∈ Vx ∪Vy. Figure 3
shows the cross-chain communication process of block-
chains x and y.
Blockchain node xi of microgrid i first makes a request
for cross-chain transaction. *en, blockchain node yj of
microgrid j receives the request and signs the transaction
agreement. *is process can be divided into six phases:
(1) xi prepares a graphical identification certificate and a
data transmission key xis and describes the cross-
chain transaction demand mxi. *e details and
deadline of the electricity transaction are written in a
smart contract ET
resquest
xi
, which is deployed.
(2) Vx􏼈 􏼉 verifies the transaction demand by testing the
consistency of cross-chain consensus. If the trans-
action demand is verified, the key will be updated,
and a new smart contract will be constructed. *en,
the cross-chain transaction will be sent to Vy􏽮 􏽯.
Otherwise, the transaction demand will be neglected.
(3) Vy􏽮 􏽯 verifies the transaction demand. If the trans-
action demand is verified, the key will be updated,
and a new smart contract will be constructed. *en,
the smart contract information will be broadcasted
to all the nodes in blockchain y. Otherwise, the
transaction demand will be neglected.
(4) Node yj in blockchain y concludes a transaction with
xi according to the transaction demand. If formulas
(1)–(3) hold, yj will update the key and write the
blind response to mxi. *en, the corresponding
transaction demand will be redeployed into yj.
Otherwise, the transaction demand will be neglected.
2 Mathematical Problems in Engineering
tcurrent ≤ tcontractdeadline − Δt. (1)
Request mxi( 􏼁 ∈ Vy􏽮 􏽯. (2)
Traceability mxi,Key, sig( 􏼁 �� 1, (3)
where tcurrent is the current date; tcontractdeadline is the
deadline of the contract; Δt is the upper limit of the
time for deploying or executing the smart contract;
Traceability(mxi,Key, sig) is the proof of the
traceability and credibility of the information sensor;
Key and sig are the key and the corresponding digital
signature from xi to yj.
Nonce Hash function of 
the previous block
Merkle 
root Timestamp
Header n
Body
Electricity transactions 1, 2, 
and 3
Electricity 
transactio
n 1
Electricity 
transactio
n 2
Electricity 
transactio
n 3
Electricity 
transactions…
...
Header n+1
Nonce 
Hash function of 
the previous 
block
Merkle 
root Timestamp
Body
Electricity 
transactions…
··· 
... ...
Electricity 
transactio
n 1
Electricity 
transactio
n 2
Electricity 
transactio
n 3
Electricity transactions 1, 2, 
and 3
Figure 1: Blockchain structure.
Microgrid i (Blockchain x) Microgrid j (Blockchain y)
Dynamic adaptive cross-
chain network
Request xi
Request yiEnergy flow
Information flow
Figure 2: Multimicrogrid joint operation architecture.
Blockchain Y
Consensus 
verification
No
Neglection
Vy
Yj
Consensus 
verification
Yes
Transform
Blockchain X
Xi
No
Vx
①
②③
④
⑤
⑥
Figure 3: Cross-chain communication process.
Mathematical Problems in Engineering 3
(5) xi verifies the smart contract from yj. If the smart
contract is verified, xi will write the hash function of
the electricity transaction into the smart contract and
extract the response mxi. During the execution of the
smart contract, xi returns the key of the electricity
transaction to yj. *e other cross-chain transactions
are executed in a similar manner.
(6) After executing the electricity transaction contract, xi
and yj will separately broadcast the cross-chain
certificate to the multimicrogrid system.
4. Quantum Blockchain-Based Multimicrogrid
Transaction Model
4.1. Electricity Transaction Model Based on Multiple
Aggregators. As the initiator of multimicrogrid game,
aggregators are critical liaisons in the energy transaction
between microgrids and between microgrid and the big
grid. To maximize its own utility, an aggregator sells or
buys electricity at a reasonable price to or from the big
grid or the multiple microgrids. With the highest selling
price in the electricity market, the multiple microgrids
expect the maximal bidding income [14]. During the
dynamic transaction, the unique Nash equilibrium so-
lution is needed to lower the electrical energy flow cost
within the multiple microgrids [15]. Taking the multiple
microgrids as an example, this paper constructs the
optimal selling model for aggregators (Figure 4) by
simplex method and dynamic game, with the goal of
optimizing electricity consumption and balancing supply
and sales:
EA � EM−A + EP−A( 􏼁 − EA−M + EA−P( 􏼁,
EM−A � δ 􏽘
N
i,j�1 i≠j
PPG(sell) · PMi−p + PPG(buy) · PMi−Mj
􏼒 􏼓,
EP−A � δPsell 􏽘
N
i,j�1 i≠j
Qsell − PMi−Mj
􏼒 􏼓,
EA−M � Psell 􏽘
N
i�1
Psell,
EA−P � PPG(sell) 􏽘
N
i�1
PMi−p,
⎧⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎨
⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎩
(4)
where EM−A and EP−A are the income of aggregators by
selling electricity to microgrids and the big grid, respectively;
δ is the coefficient of the electricity service fee charged by
aggregators; PPG(sell) and PPG(buy) are the real-time purchase
and selling prices of electricity of the big grid, respectively;
PMi−p and PMi−Mj
are the electricity volumes purchased by
MGA − i from the big grid and MGA − j via aggregators,
respectively; Psell is the selling price of microgrids; Qsell is the
electricity volume sold bymicrogrids; EA−M andEA−P are the
expenditures of aggregators purchasing electricity from
microgrids and the big grid, respectively.
4.1.1. Objective Function.
max , EA,
max , W
t
� 􏽘
n
s�1
b
t
isq
t
is,
min , ρ.
⎧⎪⎪⎪⎪⎪⎨
⎪⎪⎪⎪⎪⎩
(5)
EA is the utility function of aggregators; Wt is the bidding
income expected by the microgrids in the electricity market;
qt
is is the bidding electricity volume of microgrid i for the
quoted price bt
is; ρ is the clearing price at the equilibrium.
4.1.2. Constraints.
s.t.
Psell <PPG(sell),
0.85< σ < 1.2,
􏽘
n
s�1
x
t
is � 1,
1.05C
t
i q
t
i􏼐 􏼑
q
t
i
≤ 􏽘
n
s�1
b
t
isx
t
is ≤ ρ
t(k− 1)
,
ρ≤ ρ∗,
0≤ q
t
is ≤ q
t
iM−EM, ∀s � 1, 2, . . . , n.
⎧⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎨
⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎩
(6)
① Psell <Qsell: Psell is the electricity selling price of
microgrids; PPG(sell) is the real-time electricity selling
price of the big grid.
② 0.85< σ < 1.2: δ is the electricity service coefficient
charged by aggregates.
③ 􏽐
n
s�1 xt
is � 1: xt
is is the proportion of qt
is in total
bidding electricity volume.
④ 1.05Ct
i (qt
i)/qt
i ≤ 􏽐
n
s�1 bt
isx
t
is ≤ ρt(k− 1): qt
i is the elec-
tricity generated by microgrid i at time t; Ct
i(qt
i) is the
marginal electricity generation cost of qt
i ; ρ
t(k− 1) is the
clearing price of round k-1 at time t; bt
is is the quoted
price.
⑤ ρ≤ ρ∗: ρ is the clearing price at equilibrium; ρ∗ is the
optimal clearing price at the optimal Nash
equilibrium.
⑥ 0≤ qt
is ≤ qt
iM−EM, ∀s � 1, 2, . . . , n: qt
is is the bidding
electricity volume of microgrid i at the quoted price
bt
is; qt
iM−EM is the total bidding electricity volume of
microgrid i at time t.
*e game bidding model of the supply-side microgrids is
a noncooperative game model. According to the bidding
strategy development method, the upper and lower limits of
the quoted price were determined by setting the marginal
cost of the bidding electricity volume [16]. Once the quoted
price interval n is determined, the bidding strategy belongs
4 Mathematical Problems in Engineering
to a discrete limited pure strategy set and has a Nash
equilibrium solution. In the electricity market, there are two
discrete strategy sets of bidding, which, respectively, belong
to microgrid i and microgrid j. *e Nash equilibrium of the
bidding game can be established as
W
t
S
t−c
i , S
t−c
j􏼐 􏼑≥maxW
t
S
t−c
i , S
t−c
j􏼐 􏼑, (7)
where subscript c is the bidding strategy St
i or the fulfilment
of Nash equilibrium; Wt is the bidding income of the
multiple microgrids in the electricity market. *e improved
iterative search was performed to obtain the Nash equi-
librium solution to the above bidding game [17]. In each
iteration, if the calculated clearing price is below the preset
minimum, the clearing price will be corrected into the preset
minimum; otherwise, the clearing price will be corrected
into the preset maximum.
Let St,k
i , St,k
j􏽮 􏽯 be the bidding strategy of the multiple
microgrids. *en, the bidding strategy of the multiple
microgrids is St,k+1
i , St,k+1
j􏽮 􏽯 in the k+1-th iteration, where
S
t,k+1
� max
St
W
t
S
t,k+1
i , S
t,k+1
j , S
t,k
i , S
t,k
j􏼐 􏼑. (8)
Formula (8) is the optimal bidding income of the
multiple microgrids at the fixed bidding strategy St,k+1. *e
Nash equilibrium solution of the game, i.e., the optimal
bidding strategy, can be obtained, after the iteration ends
when the bidding strategy of all microgrids changes no
more:
S
t,k
i , S
t,k
j􏽮 􏽯 � S
t,k+1
i , S
t,k+1
j􏽮 􏽯. (9)
*e game might not reach Nash equilibrium, when the
maximum number of iterations is too small or the interval of
the clearing price is unreasonable (the interval could be
affected by weather or relevant policies). *erefore, the it-
eration should end, when Nash equilibrium is not fulfilled
after the iteration reaches the preset maximum number. In
this case, the current round of bidding for the electricity
market fails. Figure 5 shows the flow of the abovementioned
bidding game model of the multiple microgrids.
4.2. Quantum 5reshold Signature. *e cross-chain com-
munication between multiple microgrids can disperse the
value dynamically and adaptively across blockchain nodes
[18]. For multimicrogrid cross-chain communication, the
data transmission will become more secure and trustworthy
if the distributed key management is realized by quantum
threshold signature technology.*emultiple microgrids will
operate more efficiently, for the cross-chain communication
is verified by a few privileged nodes.
It is assumed that, in the quantum block chain, each pair
of nodes are connected by a classic channel, and a private key
sequence is established using the quantum key distribution
(QKD) network. In other words, these nodes connected by
the quantum channel form a QKD network. Quantum
threshold signature is a scheme that couples distributed keys
with multithreshold signature. *is technology has been
extensively applied to the smart contract of blockchains,
owing to its low cost, high security, and data credibility.
Assuming that the QKD network exists, this paper realizes
the unconditionally secure communication based on
quantum threshold signature.
Definition 1. Quantum threshold signature scheme Q is a
tuple P, M,Σ, Sign, Ver􏼈 􏼉.
(1) P � P0, P1, . . . , Pn􏼈 􏼉 is the set of communication
participants, including the signer P0 and n potential
receivers P1⟶ Pn. It is assumed that some of the σ
participants are honest, with σ > 34.
(2) M � 0, 1{ }lm is the set of messages with a length of lm.
Aggregator AG 1
Big grid PG
MGA-i MAG-j
Energy flow
Load
Demand Time
Volume Load Volume
Demand Time
Information flow Value flow
Aggregator AG 2
Selling 
income
Purchasing 
cost 
MGA -i * MAG-j*
Load Volume
Demand Time
Load Volume
Demand Time
Purchasing 
cost 
Quantum 
blockchain
Uploading to quantum blockchain
Aggregator income-expenditure
Transaction
Game
Selling 
income
Figure 4: Cross-chain transaction model of aggregators.
Mathematical Problems in Engineering 5
(3) Σ � 0, 1{ }n2lh is the set of signatures with a length of
lm.
(4) Sign M⟶Σ is a function that receives message
m ∈M and outputs signature σ ∈ Σ. Signing a
message falls into a distribution phase and a sig-
nature phase.
4.2.1. Distribution Phase
① *e sender randomly generates a string r1,1, . . . , rn,n,
each of which is of the length lh. *e hash function
determined by r1,1, . . . , rn,n is represented by
f1,1, . . . , fn,n.
② *e sender safety sends ri,1, . . . , ri,n to all receivers Pi.
③ Receiver Pi will send ri,j to another receiver Pi
′.
4.2.2. Signature Phase. Message m is given a signature
Sign(m) � (f1,1(m), . . . , fn,n(m)).
Proof
M × P × Σ⟶ True, False{ } is a function that receives
message m, signature σ, and participant Pi and returns the
Boolean value based on the validity of the signature. *e
verification is performed by Pi.
After receiving a pair of signatures (m, σ), with σ being a
signature of forms (t1,1, . . . , tn,n), the receiver Pi will carry
out the following test:
T
m
j,i �
1, if tj,i � fj,i(m),
0, otherwise.
􏼨 (10)
If (m, σ, Pi) is true, when Pi accepts the signature, more
than (1/2 + 2(1 − σ)) × n pass the test, with σ being the
proportion of honest participants:
􏽘
n
j�1
T
m
j,i ≥
1
2
+ 2(1 − σ)􏼒 􏼓 × n. (11)
Theorem 1. 5e quantum threshold signature scheme meets
the following security requirements.
(1) Unforgeability: 5e attacker cannot create a valid
signature with a probability s higher than a negligible
level.
(2) Transferability: If an honest Pi accepts a signature, the
other honest Pi will also accept the signature.
(3) Undeniability: 5e signer cannot reject the legal sig-
nature he/she created with a probability higher than a
negligible level.
In the blockchain smart contract, some nodes should be
authorized to form a Vk􏼈 􏼉 in cross-chain communication,
which facilitates multimicrogrid joint operation. *e full
node server in the system is responsible for maintaining Vk􏼈 􏼉
and providing all valid operation information, until the
protocol is reached. When the node of Vk􏼈 􏼉 reaches a
consistent result, the new data block is generated. *e
number of nodes in Vk􏼈 􏼉 is selected according to the actual
situation of the multimicrogrid system. *en, the public-
private key pair (KPublic
V , K
private
V ) of Vk􏼈 􏼉 is generated by the
quantum threshold signature scheme. *e cross-chain
consensus rules are as follows:
Vk􏼈 􏼉 � V1 V2
����
���� · · · Vk, Vd
����
����Vl � ∅􏽮 􏽯, (1≤d, l≤ k). (12)
Vk
􏼌􏼌􏼌􏼌
􏼌􏼌􏼌􏼌 � nk nk ≥ 0( 􏼁. (13)
􏽘
m
k�1
nk � n (m≥ 1). (14)
CK
public
V ET, tk, nk( 􏼁 �
True, if nk ≥ tk
′ ≥ tk,
False, otherwise.
􏼨 (15)
CK
private
V ET, t1, n1; · · · ; tm, nm; t, n( 􏼁
�
True, if nd ≥ td
′ ≥ td, 􏽘
m
d�1
td ≥ t,
False, otherwise,
⎧⎪⎪⎨
⎪⎪⎩
(16)
where nk is all the nodes in Vk􏼈 􏼉; formula (12) is the co-
operation relationship between independent blockchains;
formulas (13) and (14) describe the scale of cross-chain
consensus nodes, with the former being the threshold for
energy blockchain to verify cross-chain information and the
latter being the condition for the verification; formulas (15)
Start
Determining initial 
bidding strategy by 
simplex method
Defining the iteration 
variable k
Updating bidding strategy
Starting the k=k+1-th 
round of bidding
Nash equilibrium reached
Clearing price within the 
preset interval?
Determining the optimal 
bidding strategy
End
Bidding 
fails
Yes
No
Yes
No
Figure 5: Flow of iterative solving process.
6 Mathematical Problems in Engineering
and (16) are the consensus threshold for the public-private
key pair; tk is the minimum number of nk needed to pass a
verification; tk
′ is the actual number of nk needed to pass a
verification. For the n nodes in Vk􏼈 􏼉, at least t nodes should
pass the verification.
*e proposed quantum threshold consensus mechanism
for multiple microgrids can ensure the consistency of cross-
chain information, without changing the structure of the
current blockchain system in each system.
4.3.FlowofCross-ChainTransaction. During the cross-chain
transaction between multiple microgrids and aggregators,
the big grid and microgrids perform real-name registration
in the virtual power plant, aiming to ensure that the account
information is true and effective. At this time, aggregates, as
intermediaries that are critical to the big grid and micro-
grids, initiate the transaction game. In the virtual power
plant, the multiple microgrids kick off the cross-chain
communication based on blockchain, while ensuring the
consistency of the transaction information and improving
the transaction efficiency. In the private chain, aggregators
AG1 and AG2 carry out a noncooperative dynamic game
bidding across the chain with the big grid and the multiple
microgrids. Taking the multiple microgrids for example, the
simplex method is adopted to compute the utility of
aggregators, as well as the bidding income and clearing price
of themselves. *en, the optimal selling model is solved to
maximize the utility and bidding income and to reach the
unique Nash equilibrium solution. In this way, the utilities of
different parties are balanced, the electricity consumption is
optimized, and the economic benefits are increased
(Figure 6).
On this basis, it is necessary to check if the bidding
strategy of the k-th round is equal to that of the k+1-th
round, i.e., if the Nash equilibrium is reached, aiming to
ensure that the cross-chain transaction has a unique clearing
price. If not, the transaction fails; if yes, quantum threshold
signature is implemented in the multiple microgrids, and
quantum keys are used to prevent the signature set and
message set from being attacked or tampered with. Whether
the multimicrogrid cross-chain transaction has reached a
consensus is tested in the private chain. If yes, a transaction
order is generated in the virtual power plant; otherwise, the
cross-chain transaction fails. After the multiple microgrids,
the big grid, and aggregators reach a consensus, all trans-
action data will be uploaded to the quantum blockchain and
broadcasted across the private chain. *en, these partici-
pants will exchange energy as per the smart contract, putting
an end to the cross-chain transaction.
5. Case Analysis
5.1. Analysis on the Optimal SellingModel. It is assumed that
the virtual power plant has 4 microgrids. In each phase of
bidding, the electricity volume was derived by fitting the
unified clearing price in the previous round. *e optimal
bidding results were simulated for the multiple microgrids at
220 kW, 550 kW, and 1,000 kW. *e parameter of the
bidding strategy was set to 3; i.e., the multiple microgrids
have three electricity prices: high, medium, and low. In
addition, the authors set Δut � CMC−t
iM−EM − CAC−t
i , with
CMC−t
iM−EM being the marginal cost of the maximum power
generation and CAC−t
i being the mean cost of the maximum
power generation.
As shown in Table 1, microgrid 1, with a high power
generation cost, does not have an advantage in the bidding
process. *e winning bid was merely 12.3827 kW, with the
electricity demand of 220 kW. *e income falls, as the grid
offers a low electricity price. But the bid-winning electricity
amount and income increase obviously with the growing
market demand. *erefore, power generation should be
reduced when market demand is low.
(1) Microgrid 2 has a low power generation cost and
outputs lots of power. *erefore, it always has an
advantage in the market.*emicrogrid enjoys a high
bid-winning electricity volume and a higher income
than its competitors. *e same occurred to micro-
grid 4.
(2) Limited by its output, microgrid 3 does not have an
outstanding income. Despite having a low bid-
winning electricity volume, the microgrid achieves a
considerable income. *us, power generation can be
increased to boost the income.
To verify the bidding strategy, three traditional quoted
prices, n� 3 (high, medium, and low), were selected, with
Δut � 0.2CMC−t
iM−EM, and microgrid 1 was taken as the object.
Figure 7 presents the results of our bidding strategy (im-
proved strategy) and traditional strategy under different
demands.
As shown in Figure 7, when the market demand was
220 kW, the bid-winning volume of our strategy was
12.3827 kW, while that of the traditional strategy was 0 kW.
Under different demands, our strategy always surpassed the
traditional one in income and bid-winning volume.
*erefore, the noncooperative game bidding strategy adapts
better to the electricity market. It can increase the bid-
winning volume of multiple microgrids, while increasing
their income.
As shown in Figure 8, through the 24 iterations, the
oscillating unified clearing prices of improved and tradi-
tional strategies tended to be stable after the 15th and 21st
iterations, respectively. *erefore, the improved clearing
price model helps to improve the transaction efficiency.
Being lower than the traditional clearing price, the improved
clearing price benefits the consumption of electricity in the
multiple microgrids. When the market demand was 220 kW,
the competition between the microgrids intensified with the
growing number of iterations, due to the relatively small
electricity demand. To increase the bid-winning volume, the
microgrids continued to suppress the offered prices. Hence,
more bid-winning volume clustered to the low price interval,
dragging down the unified clearing price. With the rise of
market demand, the unified clearing price increased with the
number of iterations. In other words, the microgrids
gradually lifted the price to obtain more selling income. As a
Mathematical Problems in Engineering 7
result, more bid-winning volume clustered to the high price
interval.
In this case, the microgrid nodes have reached a con-
sensus of noncooperative game, during the blockchain-
based alliance between aggregators and multiple microgrids.
*en, twomicrogrids were selected for simulation: MGA − i,
which is operated by an energy conservation service pro-
vider, and MGA − j, a microgrid node. *e former is a large
solar and wind power generator mainly serving residents;
the latter is a small solar power generator mainly serving
businesses. Figure 9 predicts the load and day-ahead outputs
of the two microgrids.
5.2. Effectiveness of Multimicrogrid Cross-Chain Consensus.
Suppose x and y are connected to different microgrids and
wish to communicate across the chain. *ey know each
other’s public information parameters parmA and parmB.
Each parameter has its own private key. Based on the basic
principle that quantum blockchain has function, x and y can
obtain the following communication keys:
Keyx � Hash K
private
x · parmy􏼐 􏼑,
Keyy � Hash K
private
y · parmx􏼐 􏼑.
(17)
Due to the commutative property of multiplication, we
have x� y. *erefore, the cross-chain consensus transaction
of the multiple microgrids is effective.
5.3. Analysis on Quantum 5reshold Signature Scheme
5.3.1. Unforgeability. In an electricity transaction, an at-
tacker Eve cannot eavesdrop the transaction ciphertext
without the private key K
private
V of lawful participants
P � P0, P1, . . . , Pn􏼈 􏼉. Since the QKD distributes K
private
V in a
unified manner, it is impossible for Eve to steal the trans-
action information. Even if he/she tries to forge a quantum
threshold signature |σ, Eve cannot pass the verification of
quantum threshold signature:
|σ〉 � K
private
V ∗ |M〉, |Σ〉, T
m
j,i􏼐 􏼑. (18)
*e quantum channel between the sender and the re-
ceiver is constructed based on superposition of states. *e
message set M � 0, 1{ }lm is transmitted securely and reliably
in quantum state via the QKD. *e receiver will notice the
test Tm
j,i on honest nodes. Hence, the signature set and
message set cannot be foraged or tampered with.
5.3.2. Transferability. In electricity transactions, quantum
threshold signature is transferable. *e transferability op-
timizes the efficiency of energy transmission. As a result, this
technology is widely applied in electronic trading systems.
When participant Pi confirms that a signature Σ � 0, 1{ }n2lh
and a message M � 0, 1{ }lm are true, the node will be rec-
ognized as an honest node.*is node will be uploaded to the
quantum blockchain and broadcasted. It can be queried in
the block forever. At this time, other legal participants will
accept the signature andmessage of that participant, with the
assistance of the trusted communication channel. *erefore,
the quantum threshold signature technology is transferable.
5.3.3. Undeniability. *e quantum threshold signature |σ of
P0 is broadcasted via the quantum channel, making it im-
possible to be denied by the participant. If the signer P0
denies his/her quantum threshold signature out of any
reason, Pi can refuse by presenting the signature and serial
number provided by the quantum channel.
If P0 denies K
private
V , Pi can verify if P0 is making a false
claim by a random string r1,1, . . . , rn,n and Tm
j,i in formula
(11). If P0 denies |M and |Σ, Pi can restore |M and |Σ with a
probability of
Pcover �
1
4n, (19)
where n is the length of message.*e longer the length is, the
closer the success rate of the denial by P0 is to zero.
*erefore, the quantum threshold signature technology is
undeniable.
Start
�e big grid and microgrids perform real-name registration 
in the virtual power plant
�e aggregators initiate the transaction game
Multiple microgrids perform cross-chain communication 
based on smart contract
Noncooperative dynamic game bidding
Computing the optimal utility of aggregators
Computing bidding income and clearing price
Quantum threshold signature
Generating multi-microgrid transaction order
Uploading transaction data to quantum blockchain
Energy transmission between aggregators, and the big grid 
and microgrids
Nash equilibrium
reached?
Cross-chain consensus
reached?
End
Transaction 
failure
Yes
Yes
No
No
Figure 6: Flow of cross-chain transaction between multiple
microgrids and aggregators.
8 Mathematical Problems in Engineering
Table 1: Optimal bidding results.
Demand/kW Output and income Microgrid 1 Microgrid 2 Microgrid 3 Microgrid 4
220 Output/kW 12.3827 211.9130 82.4917 143.2126
Income (¥/h) 24.2680 38.2586 29.7031 34.9696
550 Output/kW 120.0565 214.7536 98.2639 116.9259
Income (¥/h) 31.6679 50.9820 38.2654 45.6489
1000 Output/kW 130.0000 258.0000 114.0000 148.0000
Income (¥/h) 43.9573 68.9525 50.9993 60.8332
220 550 1000
In
co
m
e (
¥/
h)
Demand (kW)
0
50
100
150
Bi
d-
w
in
ni
ng
 
vo
lu
m
e (
kW
)
0
20
40
60
Improved (income)
Traditional (income)
Improved (bid-winning volume)
Traditional (bid-winning volume)
Figure 7: Income and bid-winning volume under different demands.
1 3 5 7 9 11 13 15 17 19 21 23 25 27 29
Im
pr
ov
ed
 u
ni
fie
d 
cle
ar
in
g 
pr
ic
e 
( ¥
/k
w
·h
)
Number of iterations (k)
0.45
0.5
0.55
0.6
0.65
0.7
0.75
220 kw
550 kw
1000 kw
(a)
1 3 5 7 9 11 13 15 17 19 21 23 25 27 29
Tr
ad
iti
on
al
 u
ni
fie
d 
cle
ar
in
g 
pr
ic
e 
(¥
/k
w
·h
)
Number of iterations (k)
0.45
0.5
0.55
0.6
0.65
0.7
0.75
220 kw
550 kw
1000 kw
(b)
Figure 8: Improved and traditional clearing prices under different demands. (a) Optimization results of improved clearing price.
(b) Optimization results of traditional clearing price.
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
Time
-40
0
40
80
120
160
200
240
280
320
360
Po
w
er
/k
W
 (k
w
)
Electrical load
�ermal load
(a)
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
Time
Electrical load
�ermal load
0
40
80
120
160
200
240
280
320
360
Po
w
er
/k
W
 (k
w
)
(b)
Figure 9: Predicted load and day-ahead outputs of two microgrids. (a) Load and day-ahead output of MGA-i. (b) Load and day-ahead
output of MGA-j.
Mathematical Problems in Engineering 9
6. Conclusions
*is paper proposes amultimicrogrid cross-chain transaction
model based on quantum blockchain, aiming to better solve
the energy transaction between multiple microgrids, ensure
safe and reliable cross-chain transactions, and increase the
consumption rate of distributed energy. Starting from the
architecture of quantum blockchain-based aggregator-mul-
timicrogrid alliance, the authors constructed the optimal
selling model of multiple microgrids, in the light of nonco-
operative dynamic game. *e model enables the multiple
microgrids to win sufficient electricity volume and set precise
and efficient prices, guarantees the unique Nash equilibrium
solution for the bidding strategies of aggregators, the big grid,
and the microgrids, and greatly improves the economic
benefits of private chains. In addition, the consensus
mechanism of multimicrogrid cross-chain communication
was taken as the embedding algorithm of smart contract, such
that the value is dispersed across blockchain nodes, the in-
formation and attributes of transaction subjects are consistent
among the multiple microgrids, and the multiple microgrids
can operate efficiently and collaborate in cross-chain com-
munication. Furthermore, quantum blockchain was deeply
integrated with multimicrogrid cross-chain communication,
barring attackers from knowing quantum keys.*erefore, the
attackers cannot pass the verification on quantum threshold
signature, not to mention accessing the ciphertext of the
signature set andmessage set. In this way, the transaction data
become much safer, creating a trustworthy environment for
multimicrogrid cross-chain transactions. *e experimental
results show the following:
(1) *e optimal bidding results can be achieved by the
multiple microgrids through noncooperative dy-
namic game and simplex method. Our bidding
strategy can boost the bid-winning volume of the
multiple microgrids, while enhancing the income of
aggregators and the multiple microgrids and
adapting well to the market of multimicrogrid cross-
chain transactions.
(2) By the basic principle of quantum blockchain hash
function, the consensus mechanism of multi-
microgrid communication was verified with the
communication keys.
(3) Using quantum blockchain technology, the quantum
threshold signature scheme was proved to be
unforgeable, transferable, and undeniable.
In the future, cross-chain trading of multimicronetworks
can be further combined with China’s dual carbon policy to
establish a fair and reasonable initial allocation mechanism of
carbon emission rights, achieve efficient and stable operation
of carbon emission rights allocation, and build a zero-carbon
trading platform of “green mountains are gold mountains.”
Data Availability
*e data used to support the findings of this study are
available from the corresponding author upon request.
Conflicts of Interest
*e authors declare that they have no conflicts of interest.
Acknowledgments
*is paper was supported by the National Social Science
Foundation (Grant no. 19BGL003).
References
[1] H. Y. Zhou, W. H. Qian, J. J. Bai, Z. N Wei, G. Q Sun, and
H. X Zang, “Typical application scenarios and project review
of energy blockchain,” Electric Power Construction, vol. 41,
no. 2, pp. 11–20, 2020.
[2] Y. Zhang, Q. Wu, and W. Hu, “A multi-microgrid thermal
game model based on quantum blockchain,” International
Journal of Heat and Technology, vol. 39, no. 5, pp. 1491–1500,
2021.
[3] Y. Chang, Z. Q. Liu, S. Huang, and W. X. Liu, “Coordinated
planning and profit distribution of wind power, thermal
power and grid based on mixed game theory,” Power System
Technology, vol. 43, no. 11, pp. 3899–3907, 2019.
[4] T. N. Ma, L. L. Peng, Y. Du, Q. F. Gou, C. Wang, and
X. F. Guo, “Local multimicro grid market competition game
model and solving algorithm under block chain technology,”
Electric Power Automation Equipment, vol. 38, no. 5,
pp. 191–203, 2018.
[5] W. She, Z. H. Gu, X. Y. Yang, Z. Tian, J. S. Chen, and W. Liu,
“Multi-energy complementary security transaction model for
heterogeneous energy block chain,” Power Grid Technology,
vol. 43, no. 9, pp. 3193–3201, 2019.
[6] S. Xie, X. Wang, and H. Shang, “Security analysis on wireless
sensor network in the data center for energy internet of
things,” International Journal of Safety and Security Engi-
neering, vol. 10, no. 3, pp. 397–402, 2020.
[7] B. V. S. Babu and K. S. Babu, “*e purview of blockchain
appositeness in computing paradigms: a survey,” Ingénierie
des Systèmes d’Information, vol. 26, no. 1, pp. 33–46, 2021.
[8] G. J. Gong, Z. N. Zhang, X. Y. Zhang et al., “Electric power
system operation mechanism with energy routers based on
QOS index under blockchain architecture,” Energies, vol. 13,
no. 2, 2020.
[9] J. Wang, H. Zhong, Z. Ma, Q. Xia, and C. Kang, “Review and
prospect of integrated demand response in the multi-energy
system,” Applied Energy, vol. 202, pp. 772–782, 2017.
[10] W. Lin, X. Jin, Y. Mu et al., “A two-stage multi-objective
scheduling method for integrated community energy system,”
Applied Energy, vol. 216, pp. 428–441, 2018.
[11] L. Zhang, B. X. Liu, R. Y. Zhang, F. X. Jiang, and Y. J. Liu,
“Overview of blockchain technology,” Computer Engineering,
vol. 45, no. 5, pp. 1–12, 2019.
[12] J. Asfar, A. Atieh, and R. Al-Mbaideen, “Techno-economic
analysis of a microgrid hybrid renewable energy system in
Jordan,” Journal Européen des Systèmes Automatisés, vol. 52,
no. 4, pp. 415–423, 2019.
[13] Y. Y. Xu, Q. F. Liao, D. C. Liu et al., “Multi-agent intraday
joint optimal dispatch of regional integrated energy system
based on comprehensive demand response and game,” Power
Grid Technology, vol. 43, no. 7, pp. 2506–2518, 2019.
[14] E. Mengelkamp, B. Notheisen, C. Beer, D. Dauer, and
C. Weinhardt, “A block-chain-based smart grid: towards
sustainable local energy markets,” Computer Science and
10 Mathematical Problems in Engineering
Technology, Transactions A: Science, vol. 43, no. 5, pp. 2351–
2361, 2019.
[15] X. Sun, Q. Wang, P. Kulicki, and M. Sopek, “A simple voting
protocol on quantum blockchain,” International Journal of
5eoretical Physics, vol. 58, no. 1, pp. 275–281, 2019.
[16] Z. Y. Chen, D. Q. Gao, D. Wang, L. Guochun, andW. Xiaojing,
“Performance evaluation of power quantum secure commu-
nication system for energy internet,” Computer Research and
Development, vol. 54, no. 4, pp. 711–719, 2017.
[17] S. P. Tan and C. Yang, “Research and improvement of
blockchain’s DPoS consensus mechanism,” Modern Com-
puter, vol. 6, pp. 11–14, 2019.
[18] X. Liu, Z. Yan, and J.Wu, “Optimal coordinated operation of a
multi-energy community considering interactions between
energy storage and conversion devices,” Applied Energy,
vol. 248, pp. 256–273, 2019.
Mathematical Problems in Engineering 11