Prosumer Community: A Risk Aversion Energy Sharing Model
828 IEEE TRANSACTIONS ON SUSTAINABLE ENERGY, VOL. 11, NO. 2, APRIL 2020
Prosumer Community: A Risk Aversion
Energy Sharing Model
Shichang Cui , Yan-Wu Wang , Senior Member, IEEE, Chaojie Li , and Jiang-Wen Xiao
Abstract—Household photovoltaic (HPV) prosumers and the
community photovoltaic (CPV) system have been growing rapidly
with the development of the sustainable technology. The uncertain-
ties of these distributed renewable energy resources bring a signif-
icant challenge to the design of power-market mechanism and the
energy dispatch of the power system for promoting energy effi-
ciency. It is essential to develop a novel efficient energy manage-
ment strategy for addressing this challenge from the perspective of
community prosumers. Accordingly, a risk aversion energy shar-
ing model based on a devised local energy market is presented. A
stochastic game is established to minimize prosumers’ energy costs
and the weighted conditional value-at-risk of energy sharing loss
of uncertain CPV through optimal energy sharing profiles. The
household loads and HPV outputs are considered as stochastic pa-
rameters in the game model. Moreover, a sample weighted average
approximation (SWAA) method is proposed for a better estimation
of the stochastic game while the SWAA equilibrium is obtained by
a relaxation method-based algorithm with theoretical proof. In ad-
dition, the blockchain technology is introduced as a distributed and
secure way to facilitate the energy sharing model. The case studies
show the efficiency of the proposed energy sharing model and the
algorithm.
Index Terms—Prosumer, community photovoltaic, risk aver-
sion, energy sharing, stochastic game, SWAA equilibrium,
blockchain.
NOMENCLATURE
Abbreviations:
CPV Community photovoltaic.
Manuscript received September 15, 2018; revised December 24, 2018 and
February 25, 2019; accepted April 1, 2019. Date of publication April 4, 2019;
date of current version March 23, 2020. This work was supported in part by
the National Natural Science Foundation of China under Grants 61773172,
61572210, and 51537003, in part by the Natural Science Foundation of Hubei
Province of China under Grant 2017CFA035, in part by the Fundamental Re-
search Funds for the Central Universities under Grant 2018KFYYXJJ119, and in
part by the academic frontier youth team of HUST. Paper no. TSTE-00925-2018.
(Corresponding author: Yan-Wu Wang.)
S. Cui and J.-W. Xiao are with the School of Artificial Intelligence and Au-
tomation, Huazhong University of Science and Technology, Wuhan 430074,
China, and also with the Key Laboratory of Image Processing and Intelligent
Control, Ministry of Education, Wuhan 430074, China (e-mail:,shichang_cui@
hust.edu.cn; jwxiao@hust.edu.cn).
Y.-W. Wang is with the School of Artificial Intelligence and Automation,
Huazhong University of Science and Technology, Wuhan 430074, China, with
the Key Laboratory of Image Processing and Intelligent Control, Ministry of
Education, Wuhan 430074, China, and also with the Hubei Provincial Col-
laborative Innovation Center for New Energy, China Three Gorges University,
Yichang 443003, China (e-mail:,wangyw@hust.edu.cn).
C. Li is with the Alibaba Group, Hangzhou 311100, China (e-mail:, cjlee.
cqu@163.com).
Color versions of one or more of the figures in this paper are available online
at http://ieeexplore.ieee.org.
Digital Object Identifier 10.1109/TSTE.2019.2909301
EV Electric vehicle.
HESS Household energy storage system.
HPV Household photovoltaic.
PV Photovoltaic.
SAA Sample average approximation.
SWAA Sample weighted average approximation.
Common parameters and variables:
αω0,t Coefficient for real-time power prices.
αDA,t Coefficient for day-ahead power prices.
βω0,t Coefficient for real-time power prices.
βDA,t Coefficient for day-ahead power prices.
Γ The stochastic game.
K Set of sample scenarios.
N Set of prosumers.
T Set of all hours.
ω Subscript to denote stochastic variables.
τk Weight of sample scenario k.
θt Confidence level for CVaR.
Gω,t Energy generation of CPV.
K Number of sample scenarios.
k Index of sample scenario.
Lω,t Real-time net energy demand of the community.
LDA,t Day-ahead net energy demand of the community.
N Number of prosumers.
n Index of prosumer.
pω,t Real-time prices in local community market.
pDA,t Day-ahead prices in local community market.
pcpv Prices for prosumers of CPV energy.
St Power demand for Community service.
T Number of hours.
t Index of hour.
Prosumer parameters and variables:
ηEV
n Power efficiency of HPEV.
ηHESS
n Power efficiency of HESS.
X Feasible set.
πn(·) Cost function in game.
ψn Energy cost.
ρtn Weight for prosumer n evaluating CVaR.
atn Variable for CVaR.
bω,t
n Real-time net energy demand.
bDA,t
n Day-ahead net energy demand.
Cmax
n Maximum capacity of HESS.
Cmin
n Minimum capacity of HESS.
cω,t
n Charging power for HESS.
1949-3029 © 2019 IEEE. Personal use is permitted, but republication/redistribution requires IEEE permission.
See https://www.ieee.org/publications/rights/index.html for more information.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
https://orcid.org/0000-0001-5568-3038
https://orcid.org/0000-0002-4722-1332
https://orcid.org/0000-0002-0557-1481
https://orcid.org/0000-0002-8708-2920
mailto:shichang_cui@hust.edu.cn
mailto:jwxiao@hust.edu.cn
mailto:wangyw@hust.edu.cn
mailto:cjlee.cqu@163.com
CUI et al.: PROSUMER COMMUNITY: A RISK AVERSION ENERGY SHARING MODEL 829
Chrmax
n Maximum charging power of HESS.
dω,t
n Discharging power for HESS.
Dismax
n Minimum discharging power of HESS.
eω,t
n Charging power for HPEV.
Eω
n Power charging demand of EV.
Echn Rated charging power of HPEV.
gω,t
n Household PV generation.
lω,t
n Household demand.
rtn Expected energy share from CPV.
Xn Decision vector.
xtn Decision vector.
I. INTRODUCTION
U P TO now, renewable energy resources (RES) have been
developing rapidly worldwide to handle energy crisis and
environmental issues. Nevertheless, the uncertainty and the in-
termittence of large-scale RES integrating into the main grid
bring challenges for the energy scheduling and the operation of
distribution network [1]. Therefore, household consumers are
encouraged to install small-scale household photovoltaic (HPV)
systems on rooftop for local utilization [2], and these consumers
are named as prosumers in [3] due to their abilities of both con-
suming and generating energy. Furthermore, middle-scale RES
installations such as the community photovoltaic (CPV) with
lower average capital costs are also getting an increasing at-
tention for providing more access to renewable energy for pro-
sumers in a community with open spaces [4], [5]. Even so, the
temporal mismatch between the renewable energy generation
of HPV and CPV and the energy demands leads to a low effi-
ciency of local renewable energy utilization, not to mention the
uncertainties of renewable energy generation and household de-
mands. Therefore, efficient energy management for local-area
prosumers and CPV with uncertainties is indeed essential for
achieving a sustainable green community with higher energy
efficiency, lower energy cost, and less dependence on the main
grid.
A promising way to deal with the energy management prob-
lem of community prosumers is to broaden individual prosumers
to a community-wide system by organizing a peer-to-peer group
model for local energy sharing among prosumers [3], [6]. The
model allows prosumers to directly buy/sell local resources
from/to other prosumers under certain market rules. The related
studies can be classified into two groups: the market bidding
models based on auction mechanism [7]–[9] and the dynamical
pricing models with price-driven mechanism [10]–[12]. For the
former group, each participant has a fixed role which provides
energy as a seller or consumes energy as a buyer according to
bidding profile. However, prosumers should be capable of mak-
ing their own decisions of selling or buying energy based on their
energy generations, load schedules and power prices to achieve
a high energy efficiency and low energy costs [10], [11]. In fact,
this is natural and rational since each prosumer just requires to
make its own decision for its own interest individually, which
can also ensure its privacy security [11]. Therefore, the dynami-
cal pricing models with the essence of price-driven mechanisms
are more flexible and more suitable to organize the peer-to-peer
energy sharing prosumer group, which is also verified by the
related existing works [10], [13]–[21]. For a better literature re-
view, we will introduce these works in detail in the next section.
In these works, the dynamic prices models generally lead to local
energy sharing games where prosumers decide their energy shar-
ing profiles to minimize their own costs in response to different
prices [12], [15], [21]. However, the uncertainties of household
loads and PV generations have not been fully considered, and ef-
ficient distributed algorithms to seek the game equilibrium with
a convergence proof are insufficient. Therefore, in this paper,
we introduce two-stage dynamic prices, i.e., day-ahead prices
and real-time prices, varying with the community net demands
in day-ahead stage and real-time stage respectively. Based on
the two-stage dynamic prices, we formulate a stochastic energy
sharing game where each prosumer decides its two-stage energy
sharing profiles to minimize the energy cost while the uncer-
tainties are considered as real-time stochastic parameters. Then
we propose a sample weighted average approximation (SWAA)
equilibrium for estimating the stochastic Nash equilibrium of
the proposed stochastic game, which can provide economical
guidelines for practical energy sharing. Moreover, an efficient
distributed algorithm with a convergence proof is presented to
seek the SWAA equilibrium.
To further improve the efficiency of the energy management,
the energy management of CPV is also integrated into the energy
sharing model in this paper. The energy management of CPV can
be regarded as the energy sharing of common resources among
prosumers. [22] dispatches the common resource to prosumers
according to their investments. Each prosumer has a fixed share
of common resources, which cannot achieve a full and flexible
utilization of the resources. Inspired by the risk management
theory of a stochastic optimization [23], [24], for the uncertain
CPV, we present a risk aversion energy sharing method, where
each prosumer requires to decide its expected energy share from
CPV by evaluating the conditional value-at-risk (CVaR) for the
over-expecting loss for actual power generation of the uncertain
CPV. In this way, the energy sharing of CPV is negotiated and
accepted by all prosumers, and the common resources can also
be fully utilized. The energy sharing of CPV is integrated into the
proposed stochastic game model to achieve an efficient energy
sharing within the prosumer community.
The presented energy sharing model of prosumers and CPV
is shown to be effective since the local energy efficiency can be
promoted and the model can be implemented in a distributed
way. Therefore, a secure and distributed technology is also re-
quired for both reducing the cost of the computation center
and ensuring the information security. Hence, we introduce an
emerging information technology as one of the most promising
ways to meet the requirement: blockchain with smart contracts
[25]. Blockchain with smart contracts is a kind of technology
on which transactions can succeed without the need of having
a trusted third party. It is distributed to all nodes of the net-
work to form a secure decentralized market platform. With ex-
tensive interesting financial applications for dealing with trust
issues [26], blockchains have also gained growing attention in
the smart energy market and the energy trading [9], [27]. [9]
derives the components for a blockchain-based prosumer mi-
crogrid, and introduces a practical microgrid for verification.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
830 IEEE TRANSACTIONS ON SUSTAINABLE ENERGY, VOL. 11, NO. 2, APRIL 2020
[27] investigates the opportunity of blockchain-based microgrid
market to the growth of prosumer. Inspired by [9], [27], we in-
troduce the blockchain technology to implement the presented
model. Specifically, each prosumer assigned with a unique index
acts as a node on the blockchain, and then facilitates the proposed
peer-to-peer energy sharing model through mutual communica-
tion. The equilibrium results containing energy sharing profiles
and prices will be executed and cleared on the blockchain. This
distributed implementation way can spread the calculation load
over multiple prosumers and can provide information security
guarantee for the energy system.
Finally, the contributions of the paper are summarized as fol-
lows:
� A novel energy sharing model of prosumers and CPV is
proposed to facilitate a sustainable prosumer community.
� A CVaR based energy sharing model of uncertain CPV
is presented to fully and reliably utilize the uncertain re-
sources.
� The energy sharing model is formulated as a stochastic
game based on the presented two-stage dynamic prices,
where the household loads and PV generations are con-
sidered as real-time stochastic parameters. The modeling
method is novel compared with the existing literature. A
SWAA equilibrium is proposed to estimate the stochastic
game with higher accuracy. A distributed practical algo-
rithm is presented to seek the SWAA equilibrium.
The rest of the paper is organized as follows. Section II intro-
duces the related literature on price-driven mechanisms. Section
III models the community energy system. Section IV introduces
the stochastic game and the equilibrium analysis for community
energy sharing. Section V presents the case studies. Section VI
concludes the paper and points out the limitation of the work
and the future research focus.
II. LITERATURE OF PRICE-DRIVEN MECHANISMS
In this section, the existing literature on the price-driven mech-
anisms for energy management as well as the comparisons with
our work will be introduced.
Generally speaking, the related literature can be classified
into two kinds according to their modeling structures: leader-
follower structure and peer-to-peer structure. For the leader-
follower structure, there is a leader acting as the price maker
and the users are price takers adjusting their energy demands.
Typical solutions contains bi-level optimization and Stackelberg
game. [13] formulates retailer-users of leader-follower structure
as a bi-level problem where the retailer holds the upper level to
decide prices and users being capable of executing load shift-
ing hold the lower level to decide energy demands. [14] uses
the bi-level scheme to investigate the energy sharing and pric-
ing problem to facilitate a renewable and commercial solution
for an apartment building. However, bi-level optimization prob-
lems are known to be strongly NP-hard to solve with classical
numerical methods [28]. From the perspective of game theory,
[10] sets a shared facility controller as the leader and prosumers
as the game followers for a renewable city. Similarly, [15], [16]
investigate the energy sharing within a PV prosumer microgrid
setting the operator of microgrid as the price maker with detailed
modeling, and the works analyse the game equilibrium strictly.
In [15], [16], the real-time uncertainties such as energy genera-
tion and demands are discussed. However, the demand response
models in [14]–[16] are based on an ideal natural logarithm for
utilities of energy consumptions and may not be practically ap-
plicable. In general, in the leader-follower structure, the leader
intends to maximize its profit function, and prosumers minimize
their energy bills or discomfort associated with engaging in de-
mand response actions. Therefore, the overall energy efficiency
mainly depends on the profit function of the leader that con-
trols the system energy schedule with trustworthy concerns and
information security.
In the peer-to-peer structure, a certain global mechanism is
usually required to drive the energy scheduling of individual
peer-to-peer prosumers to achieve global expected efficiency.
There are two widely used practices: designing prices functions
and reducing total costs. In the first practice, [17] uses a linear
price function and formulates a generalized equilibrium prob-
lem for the demand-side energy management of multiple users,
and the randomness of renewable sources is considered through
presenting an expected cumulative expense, however, the work
requires exact distribution of uncertain parameters. [18] designs
a price function based on the energy supply and demand ra-
tio inside the community, and autonomous dynamic demand
response is integrated to adjust the energy scheduling of pro-
sumers as the prices changes. [19] discusses the energy sharing
among neighborhood users with the appliance-level demand re-
sponse to reduce individual energy costs. [20] presents a linear
price function increasing with the overall net demands, and pro-
poses a distributed algorithm for peer-to-peer demand response
game. However, [18]–[20] investigate the ideal demand response
programmes and haven’t considered the uncertain factors. The
other practice is to let users minimize the overall energy costs.
[21] proposes a two-stage game for prosumers managing charg-
ing and discharging of their HESS and electric vehicles (EV)
to reduce the community quadratic energy cost in day-ahead
scheduling stage and real-time adjusting stage. Note that the
price-driven peer-to-peer structure always leads to aggregative
games [29]. Nevertheless, we believe designing a price function
based on the demand and supply relationship is more applicable
since it is natural for users or prosumers to receive prices signals
rather than to persuade them to reduce the overall energy costs.
Therefore, we adopt the former practice as our scheme in this
paper. Moreover, the uncertainties of PV generation and loads
have not been fully taken into account in day-ahead schedul-
ing in these works, which may lead to a poor performance in
real applications. In our paper, we treat the uncertain factors as
stochastic parameters and formulate a stochastic energy sharing
game by integrating the risk aversion energy sharing of CPV
into it. The equilibrium analysis and proof for the convergence
of the algorithm are also provided.
III. SYSTEM MODELING
A schematic diagram of the proposed community energy shar-
ing model is shown in Fig. 1. The community contains multiple
prosumers, CPV and community electrical services including
streetlights, and is connected to the main grid. To achieve a
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
CUI et al.: PROSUMER COMMUNITY: A RISK AVERSION ENERGY SHARING MODEL 831
Fig. 1. Community energy sharing diagram: multiple prosumers, CPV, and
community electric services, as well the implementation of the energy sharing
model on the blockchain technology.
sustainable energy community, the proposed way is to promote
price-driven energy sharing within the community with the ex-
istence of multiple uncertainties. The local two-stage dynamic
prices include day-ahead prices and real-time prices varying re-
spectively with day-ahead and real-time net demands of the
community. The dynamic prices provide economic incentives
for prosumers to commit themselves to adjust the net demand
through scheduling their energy sharing profiles. The blockchain
technology is used to implement the energy sharing model as
Fig. 1 shows. Each prosumer in the community is assigned with
an index and utilizes its unique validator identification (ID) to
perform a verifiable node on the blockchain. Under certain dis-
tributed communication protocols, prosumers carry out the pro-
posed energy sharing model in a secure and distributed way to
obtain an equilibrium as the final energy sharing profiles and
prices in the local market. The equilibrium serves as the smart
contracts to be executed and cleared on the blockchain. Note
that the main work of this paper is to investigate the community
energy sharing model, the blockchain technology is referred as
a promising way to implementing the model, and details on the
implementation will be given in the end of section IV.
Let N = {1, 2, . . . , n, . . . , N} denote the set of prosumers
in the community and T = {1, 2, . . . , t, . . . , T} denote the set
of hours of the scheduled day. The prosumers can share their
energy demands/supplies from/to the community, and can also
negotiate with each other for their expected energy shares which
refer to their day-ahead energy quantities shared from the CPV.
Thus, the energy sharing profiles of prosumer n ∈ N include
its day-ahead net demand bDA,t
n , ∀t ∈ T , real-time net demand
bω,t
n , ∀t ∈ T , and the expected energy share rtn, ∀t ∈ T , from
CPV. Considering the real-time uncertainties, we adopt the two-
stage stochastic optimization model for energy scheduling of
prosumers [30], [31]. Thus in this section, we model the com-
munity energy system from three aspects. We firstly introduce
the local two-stage dynamic prices. Then we formulate the
over-expecting risk of energy sharing of uncertain CPV. At last
we formulate the energy cost function of each prosumer based
on two-stage stochastic optimization. Considering that the pro-
sumers are located close to each other, the loss of energy distri-
bution of the power network is negligible.
A. Price Functions
The day-ahead price pDA,t ($/kWh) is supposed to be an
increasing function with respect to the day-ahead net demand
LDA,t of the community, and a linear form is presented as
follows:
pDA,t(LDA,t) = αDALDA,t + βDA,
LDA,t =
∑
n∈N
bDA,t
n ,
(1)
where αDA and βDA are given parameters based on the origi-
nal maximum and minimum net demand of the community and
the market prices bounds. The net power demand LDA,t is the
summation of the day-ahead net demands bDA,t
n , ∀n ∈ N , of all
prosumers. As an increasing function with respect to the com-
munity net power demand, the proposed price function is able
to motivate prosumers to reduce their energy demands in peak
hours and increase their energy demands in off-peak hours, and
thus can smooth the net demand of the community, reduce the
influence on main grid, and release the energy distribution com-
plexity for power systems.
Similarly, the real-time price pω,t(Lω,t) is a linear increas-
ing function of the real-time net power demand Lω,t ($/kWh)
equaling to the sum of real-time net demands bω,t
n , ∀n ∈ N , of
prosumers as follows:
pω,t(Lω,t) = αω0Lω,t + βω0 , Lω,t =
∑
n∈N
bω,t
n , (2)
where αω0,t and βω0,t are given parameters, and ω is a super-
script to indicate the uncertain variables. In this paper, we use
ω1, ω2, ... to denote different scenarios. The real-time price is
used to clear the real-time demands due to the mismatch between
the day-ahead energy supplies and real-time uncertainties.
Different from the price mechanism currently in effect in the
traditional power grid, the presented price functions can dynami-
cally reflect the economical law of demand and supply. Note that
once the net demands are settled, the prices are determined.
B. Risk-Averse Energy Sharing of CPV
CPV as the community common resources provides flexi-
ble access of renewable energy to energy consumption of the
prosumer community including public electrical services and
prosumers. However, the energy generation Gω,t of CPV is un-
certain, and the uncertainty leads to low energy efficiency and the
difficulty for a fair distribution of common resources. Inspired
by the risk management theory of stochastic programming [23],
we propose a risk-averse energy sharing method to deal with
the challenge. A different scenario of ω will have a different
CPV generation Gω,t, and prosumers must reach consensus on
their expected shares of the community resources rtn, ∀n ∈ N ,
by minimizing the risk of total energy sharing loss due to the
existence of these stochastic parameters. Thus we model the
over-expecting risk by introducing CVaR [24] as follows:
CVaRθ
(
∑
n∈N
rtn, S
ω,t, Gω,t
)
=
arg min
at≥0
{
at +
E[
∑
n∈N r
t
n + Sω,t −Gω,t − at]
+
1− θ
}
,
(3)
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
832 IEEE TRANSACTIONS ON SUSTAINABLE ENERGY, VOL. 11, NO. 2, APRIL 2020
Fig. 2. Energy management for a prosumer.
where at is the auxiliary variables, Sω,t is the community ser-
vice energy demand, Gω,t is the energy generation of CPV, θ
is the confidence level, and [
∑
n∈N r
t
n + Sω,t −Gω,t − at]+ is
the loss function for the total expected energy shares considering
the uncertain energy outputs of CPV system. Moreover, [·]+ de-
notes the projectormax{0, ·}, and E[·] denotes the mathematical
expectation of the elements. Let a = [a1, a2, . . . , aT ], and the
corresponding constraint set is defined asA = {at ≥ 0, t ∈ T }.
C. Cost Function for Prosumers
The individual energy system of each prosumer is shown in
Fig. 2. Smart meters, controllers and inverters are hardware sup-
ports for the energy management of a prosumer. A prosumer
n owns HPV, EV, HESS, and household electrical appliances,
and schedules its day-ahead and real-time energy demands of
bDA,t
n , bω,t
n , expected CPV share rtn, charging rate eω,t
n of EV
for the charging demandEcnn, charging and discharging power
(cω,t
n , dω,t
n ) of HESS based on HPV generation gω,t
n and house-
hold load lω,t
n so as to minimize its energy cost.
Under the local price mechanism, prosumer n always expects
to minimize the following energy cost function by two-stage
stochastic optimization:
∑
t∈T
ψn(b
DA,t
n , rtn, b
ω,t
n , eω,t
n , cω,t
n , dω,t
n )
=
∑
t∈T
{
pDA,tbDA,t
n + pcpvr
t
n + E
[
pω,tbω,t
n
]}
,
(4)
where pcpv denotes the power price of CPV which is set to be
very low for fully utilization of CPV and compensating the con-
struction and maintenance expenses. Since the price functions
pDA,t and pω,t are linear increasing functions, the cost function
ψn(·) is also convex with respect its decision variables. In a sce-
nario of ω, the prosumer must keep the balance within itself, and
the balance can be formulated as follows:
bDA,t
n + rtn + bω,t
n − eω,t
n − cω,t
n + dω,t
n ≥ lω,t
n − gω,t
n , ∀t, (5)
rtn, e
ω,t
n , cω,t
n , dω,t
n , bω,t
n ≥ 0, ∀t, (6)
where rtn, e
ω,t
n , cω,t
n , dω,t
n are non-negative due to their physi-
cal implication. bω,t
n is set to be non-negative to avoid arbi-
trage. bDA,t
n can be non-negative or negative since prosumers
can buy/sell energy from/to the community market and they can
flexibly schedule their energy including HPV, HESS and EV.
The constraints of charging limits of EV for prosumer n are
given as follows:
0 ≤ eω,t
n ≤ εtnEchn, ∀t, (7a)
∑
t∈T
ηEV
n eω,t
n = Eω
n , (7b)
where ηEV
n is the charging efficiency of EV, Echn denotes the
rated charging power and εtn is a binary parameter indicating the
plug-in state of EV n at hour t. When εtn = 1, EV n is connected
to the household charging point at hour t and thus is charged.
Eω
n is the energy usage of EV in current day at scenario of ω,
and the energy consumption is assumed to be fully compensated
in plug-in hours. This assumption will guarantee EV to be full
charged when leaving the house and thus will avoid the abrupt
energy demand of EV during the charging day. The constraints
of HESS are shown below:
0 ≤ cω,t
n ≤ Chrmax
n , ∀t, (8a)
0 ≤ dω,t
n ≤ Dismax
n , ∀t, (8b)
Cmin
n ≤ Cω,0
n +
t∑
i=1
(
ηHESS
n cω,i
n − dω,i
n
ηHESS
n
)
≤ Cmax
n , ∀t,
(8c)
Cω,0
n +
∑
t∈T
(
ηHESS
n cω,t
n − dω,t
n
ηHESS
n
)
≥ Cω,0
n , (8d)
where ηHESS
n and 1
ηHESS
n
are the charging and discharging ef-
ficiency of HESS, Chrmax
n and Dismax
n are the charging and
discharging rate limits of HESS. (8c) ensures that the energy
level of HESS at each hour must be limited between the mini-
mum capacity Cmin
n and the maximum capacity Cmax
n to avoid
an overuse of the battery. (8d) ensures that the left energy level
at the end of the day must not be lower than the initial energy
level.
IV. NON-COOPERATIVE GAME AND EQUILIBRIUM ANALYSIS
In this section, we will show the proposed local market mech-
anism with dynamic prices will lead to a non-cooperative game
among prosumers for energy sharing within the community. The
main problem is how to deal with the energy sharing of CPV.
Let each prosumer decide its expectation rtn for CPV by mak-
ing a tradeoff between the expected share of CPV at low prices
and the over-expecting risk of uncertain CPV. Then we can for-
mulate the objective function of prosumer n by adding the risk
model (3) with a weight parameter ρn to prosumers’ energy cost
function (4) as follows:
πn(Xn, X−n;ω) =
∑
t∈T
⎧
⎨
⎩ψn(x
t
n) + ρnCVaRθ
⎛
⎝
∑
m∈N/{n}
rtm + rtn, S
ω,t, Gω,t
⎞
⎠
⎫
⎬
⎭,
(9)
where xtn = [bDA,t
n , rtn, b
ω,t
n , eω,t
n , cω,t
n , dω,t
n , atn], and Xn =
[x1n, x
2
n, . . . , x
T
n ] is the decision variable vector of prosumer n
for a whole period [1, 2, . . . , T ] and X−n = [X1, . . . , Xn−1,
Xn+1, . . . , XN ] is all the strategies except prosumer n. Let
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
CUI et al.: PROSUMER COMMUNITY: A RISK AVERSION ENERGY SHARING MODEL 833
X = [X1, . . . , Xn, ...XN ]. (9) is designed to be the game model
for prosumer n in response to the decisions of other prosumers.
The decision of the game model is limited in the constraint set
Xn := {(5), (6), (7), (8), ∀t ∈ T } ∪ A.
A. Formulation of the Non-Cooperative Game
In a non-cooperative game, each participant usually mini-
mizes its cost according to other participants’ decisions. In this
paper, we formulate a stochastic non-cooperative game denoted
by Γ = {N , πn, Xn ∈ Xn, ∀n ∈ N , ω} consisting of the fol-
lowing components:
1) All prosumers in the residential prosumer community are
the players of the non-cooperative game;
2) Prosumer n ∈ N in the game always minimizes its game
objective πn to make its decision Xn within the set of
strategies Xn, which is formulated as follows:
min
Xn∈Xn
πn(Xn, X−n;ω).
Define the variational inequality [31], [32] as the game of
seeking x∗ ∈ X such that
(X −X∗)�F (X∗;ω) ≥ 0, ω ∈ Ω a.s., (10)
where a.s. means almost surely under given probability mea-
sure Ω, F (X;ω) = (−∇πn(Xn, X−n;ω)), n ∈ N , and X :=∏
n∈NXn.
B. SWAA Nash Equilibrium
Generally, it is difficult to ensure that there exits a solution
X∗ satisfying (10) with the existence of the uncertain vari-
able ω. However, the Monte Carlo simulation based discretiza-
tion can be applied to generate an independent and identically
discrete sample ωk, k = 1, 2, . . . ,K, to approximates the ex-
pectation with sample average [33] rather than exploring the
expectation of prosumers’ stochastic game models.
Sample average approximation (SAA) as the average esti-
mation of stochastic model is usually acceptable without any
posterior knowledge. SAA can be improved once we have some
posterior knowledge of the stochastic variable ω. Let ω̄ denote
the scenario to be estimated, and ωk, k = 1, 2, . . . ,K, the his-
torical scenarios. Supposing we have the observation for ω̄, we
can define the posterior probability distribution according to the
Bayesian inference [34]:
P(ωk|ω̄) =
P(ω̄|ωk)P(ωk)
P(ω̄)
, k = 1, 2, . . . ,K, (11)
where P(ωk|ω̄) is the probability of ωk with the observation of
ω̄. P(ω̄|ωk) is the likehood for the prior scenario ωk, P(ωk)
the prior probability of scenario ωk, and P(ω̄) the evidence
of observation ω̄. Based on the posterior estimation ω̄, we
can estimate πn(Xn, X−n; ω̄) with the posterior probabilities
P(ωk|ω̄), k = 1, 2, . . . ,K, as follows:
πSWAA
n (Xn, X−n) =
∑
k∈K
P(ωk|ω̄)πn(Xn, X−n;ωk). (12)
Note that (12) is an improvement of SAA by introducing
P(ωk|ω̄) as the weight of different scenario ωk. This method is
called SWAA in this paper. In order to guarantee the convergence
and consistency of SWAA theoretically, we present the following
theorem to illustrate the performance of SWAA with the proof
provided in appendix A. For convenience, letπSWAA(X) denote
πSWAA
n (Xn, X−n), and π(X, ω̄) denote πn(Xn, X−n; ω̄).
Theorem 1: The SWAA for stochastic optimization has the
following properties:
i) πSWAA(X) → π(X, ω̄) w.p. 1, as K → ∞ at an expo-
nential rate of convergence;
ii) let π(X,ω) be a Carathéodory function (i.e., continuous
in X and measurable in ω), then the functions π(X,ω)
and πSWAA(X) are lower semicontinuous, and for any
X̄ ∈ X , πSWAA(X̄)
e→π(X̄, ω̄) w.p. 1.
However, such improvement is still impractical as it requires
knowledge of posterior weights distribution which cannot be
obtained directly before the scenario ω̄ happens. Generally,
the renewable energy generation and energy demand have a
strong correlation with the weather conditions. Therefore, we
can approximate the posterior probability in (11) by the like-
hood τk, k = 1, 2, ..,K, of predicted weather conditions of ω̄ to
those of historical scenarios ωk, k = 1, 2, ..,K. With this con-
sideration, we propose a SWAA equilibrium as follows:
πK
n (X∗,K
n , X∗,K
−n ) =
min
Xn∈Xn
∑
k∈K
τkπn(Xn, X
∗,K
−n ;ωk), ∀n ∈ N ,
(13)
where τk, k = 1, 2, . . . ,K, are the weight parameters or occur-
rence probabilities of the scenarios ωk, k = 1, 2, . . . ,K. Be-
sides, we have
∑
k∈Kτk = 1, 0 ≤ τk ≤ 1, ∀k ∈ K. In this paper,
we select the weight {τ1, τ2, . . . , τK} through least square de-
viation according to the similarity of weather condition, and the
detail will be shown in the simulation section. Therefore, the
corresponding game models for all prosumers (∀n ∈ N ) can be
formulated as:
πK
n (Xn, X−n) =
∑
k∈K
∑
t∈T
τk×
⎧
⎨
⎩ψn(x
t
n) + ρnCVaRθ
⎛
⎝
∑
m∈N/{n}
rtm + rtn, S
ωk,t, Gωk,t
⎞
⎠
⎫
⎬
⎭.
(14)
As mentioned before, the cost function ψn, ∀n, is convex
with respect to its decision variables Xn. Similarly, the CVaR
measurement CVaRθ(
∑
n∈N r
t
n, S
ωk,t, Gωk,t) is also convex in
Xn, ∀n. Hence, the model (14) and its feasible solution sets are
convex with respect to its decision variables, which guarantees
the existence of SWAA equilibrium of the stochastic game.
C. Relaxation Method to Seek the Equilibrium
We introduce the relaxation method [32], [35] to seek the
SWAA equilibrium through the regularized Nikaido-Isoda func-
tion Φγ(X,Y ) : ((
∏
n∈NXn)× (
∏
n∈NXn)) → R shown as
follows:
Φγ(X,Y ) =
∑
n∈N
[
πK
n (Xn, X−n)− πK
n (Yn, X−n)
]
− γ
2
‖X − Y ‖2, (15)
where Y = [Y1, Y2, . . . , YN ] ∈
∏
n∈NXn and γ is a given pa-
rameter. The regularized Nikaido-Isoda function is a measure to
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
834 IEEE TRANSACTIONS ON SUSTAINABLE ENERGY, VOL. 11, NO. 2, APRIL 2020
Algorithm 1: Relaxation Method to Seek SWAA Equilib-
rium.
1: for each n ∈ N do
2: Prosumer n initializes its strategy Xn(1) ∈ Xn;
3: end for
4: Initialize iteration time i = 1;
5: The maximum and minimum market energy prices in a
day are given by prmax, prmin;
6: Initialize αDA and βDA by the linear interpolation
between prmax and prmin with respect to the
maximum and minimum net demands of the initial
strategy;
7: Initialize parameters: θ, ρ1, ρ2, . . . , ρN , γ, λ, ε;
8: repeat
9: for each prosumer n ∈ N do
10: Prosumer n makes its best response Yn(i) by:
Yn(i) =
arg min
Yn∈Xn
[
πK
n (Yn, X−n(i)) +
γ
2
(Yn −Xn(i))
2
]
11: end for
12: % Relaxation method to update strategies;
13: for each prosumer n ∈ N do
14: Prosumer n updates its strategy as follows:
Xn(i+ 1) = (1− λ(i))Xn(i) + λ(i)Yn(i);
15: end for
16: Update: i = i+ 1, λ(i) = 1
i+1 ;
17: until ‖Y (i)−X(i)‖ ≤ ε
indicate how much a player gains if the player changes its strat-
egy to a new vector yn while all other players continue to hold
their strategies X−n. Let Y γ denote the maximizer of function
(15), i.e. Y γ(X) = argmaxY ∈
∏
n∈NXn
Φγ(X,Y ), which also
means:
Y γ(X) = arg min
Y ∈
∏
n∈N
Xn
∑
n∈N
[
πK
n (Yn, X−n)
]
+
γ
2
‖X − Y ‖2.
(16)
Let Vγ(X) := Φγ(X,Y
γ(X)). A point X∗ ∈
∏
n∈NXn is
defined as the normalized equilibrium point that is also the
SWAA equilibrium point of the proposed stochastic game Γ
if Vγ(X∗) = 0 holds [35], [36]. By seeking the best responses
Y γ(X) continually, the equilibrium X∗ will be obtained [35],
[36]. The relaxation method to seek the SWAA equilibrium is
shown in Algorithm 1, where λ(i), i = 1, 2, ..., are the relaxation
parameters. The following theorem with the proof provided in
appendix B can guarantee the convergence of the algorithm:
Theorem 2: There exists a unique normalized equilibrium
point to which Algorithm 1 converges if:
1)
∏
n∈NXn is a convex subset of R.
2) the Nikaido-Isoda function Φ(X,Y ) : ((
∏
n∈NXn)×
(
∏
n∈NXn)) → R is convex and Φ(X,X) = 0.
3) the relaxation parameters λ(i) satisfy: λ(i) > 0, λ(i) → 0
as i→ ∞, and
∑∞
i=1 λ(i) = ∞.
According to the theorem, we simply set λ(i) = 1
i+1 as the
iteration proceeds. In each iteration, each player only needs to
make its best response and update its strategy according to other
players’ strategies since (16) can be decomposed into subprob-
lems for individual prosumers as shown in Step 10 in Algorithm
1. Thus, without a calculation center to gather all the informa-
tion, the presented algorithm can be implemented in a distributed
way where the privacy security of prosumers can be guaranteed.
Moreover, the subproblems for prosumers are convex optimiza-
tion problems with linear constraints which can be solved by
the existing convex optimization algorithms. These advantages
make Algorithm 1 practical for implementation.
Note that the energy sharing game model is peer-to-peer and
totally distributed, and thus can be facilitated through the dis-
tributed secure blockchain technology. Specifically, each pro-
sumer is assigned with an index and utilizes its unique ID to
perform a node on the blockchain. During the iteration process
of the proposed algorithm, a node will fulfill the following tasks
in each iteration on the blockchain: 1) calculate its own new
energy sharing profile based on the total energy sharing profiles
recorded in the last iteration; 2) broadcast its new profile without
other private information marked with its ID to other nodes on the
blockchain; 3) receive information from other nodes with their
ID marks and update the records of all energy sharing profiles
in the iteration; 4) check the stopping criteria for equilibrium.
Once the stopping criteria is satisfied, the iteration process will
stop, and the nodes will record the equilibrium containing the
final energy sharing profiles and prices in the local market. The
equilibrium serves as the smart contracts to be executed and
cleared on the blockchain.
V. SIMULATION CASES
In this section, we carry out case studies to show the advances
of the proposed energy sharing model and to verify the efficiency
of the algorithm for seeking the stochastic game equilibrium.
A. Data Preparation
Before the simulation, we prepare essential data such as re-
newable energy generation, the community service demand, the
prosumers’ information about EV, HESS, HPV and household
demands. At first, a period is set to be from 7:00 am in one
day to 7:00 am of the next day, since this period can represent
an energy cycle especially considering EV charging/discharging
process. We obtain the meteorological data of Melbourne city
from December 1, 2016 to February 31, 2017 (the summer sea-
son) including temperature, humidity, outdoor air pressure and
wind speed through the Australia Bureau of Meteorology [37].
The solar power outputs of PV systems are calculated through
the following equation [38]:
Ps = ηSI(1− 0.005(H + 25))[kWm−2], (17)
where η is the conversion efficiency of PV array (%) setting
15.7%, S is the PV array area (m2), I is the solar irradiance
(kWm−2), and H is the outdoor temperature (◦C). In gen-
eral, 1kW capacity of PV system needs about 10 m2 of PV
array. Thus, we can calculate PV outputs with capacity and
meteorological information through (17). The historical energy
demands of household prosumers are obtained from their res-
idential smart meters in Australia. The configurations for both
EV and HESS [21], [39] (such as Tesla, Nissan, Toyota) are
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
CUI et al.: PROSUMER COMMUNITY: A RISK AVERSION ENERGY SHARING MODEL 835
TABLE I
HESS AND EV CONFIGURATIONS
shown in Table. I. According to [40]–[42], an EV usually con-
sumes 0.13 − 0.20 kWh/km and the daily trip length of most
EVs ranges from 10 km to 20 km. Each EV’s daily energy con-
sumption is set by randomly choosing its energy consumption
profile per kilometer and daily trip length. Normally, EVs return
to their homes around 17:00 to 20:00. The arrival time (also plug-
in time) of each EV is randomly selected from 17:00 to 20:00,
and EV can be charged from its arrival time to its departure time
7:00.
Next we decide the weight {τ1, τ2, . . . , τK} with least square
deviation. Let [wtem
1 , wtem
2 , . . . , wtem
K ] be normalized hourly
temperature vector of the K sample scenarios, and similarly
we have [whum
1 , whum
2 , . . . , whum
K ] being normalized hourly
humidity vector, [wpre
1 , wpre
2 , . . . , wpre
K ] normalized hourly air
pressure vector and [wwin
1 , wwin
2 , . . . , wwin
K ] normalized hourly
wind speed vector. Let Wk = [wtem
k , whum
k , wpre
k , wwin
k ], k =
1, 2, . . . ,K, denote the corresponding weather condition of the
sample scenarios. The predicted weather condition of the sched-
uled day provided by online meteorological services is denoted
by W̄ after normalization. Then τk, k = 1, 2, . . . ,K, can be ob-
tained through solving the following least square deviation prob-
lem:
min
τ1,τ2,...τK
∑
k∈K
‖τkWk − W̄‖2
s.t.
∑
k∈K
τk = 1, τ1, τ2, ...τK ≥ 0.
(18)
Other parameters are set as follows. The confidence level for
CVaR is selected as 0.95. The regularization parameter γ is se-
lected as 0.1. ρ = 0.10 is the initial setting. The market prices
are prmax = 0.30 and prmin = 0.05. All the simulations are
implemented in Matlab 2015b environment running on Intel-i5
personal computer with 8 GB RAM.
B. Numerical Results
1) Basic Result: To show the basic result, we assume a
medium-scale community with N = 50 prosumers and CPV
with the capacity of 50 kW. Prosumers are not equipped with
HPVs. We selectK = 30 scenarios whose detailed data such as
meteorological information and household demands are chosen
from the data set mentioned in subsection IV-A.
After executing Algorithm 1 with the settings, we obtain the
numerical results shown in Fig. 3. The solid line in Fig. 3
represents the day-ahead energy demand of all prosumers
without the support of CPV and HESS, and the dotted line
represents the energy demand with CPV. In the period of
7:00 am–17:00 pm with renewable energy generation, the net
demands of the community indeed can be reduced significantly,
but the net demands also shows large fluctuations over the day.
Fig. 3. Net energy demands of the prosumer community: net demand, net
demand with CPV, and net demand with both CPV and HESS.
Moreover, the demand peak still exists during 21:00 pm-2:00
am, which shows that CPV is not capable of reducing the peak
in periods of low or no renewable energy output. The dash line
shows a smooth net energy demand with both CPV and HESS,
which verifies the advantages of the proposed energy sharing
model compared to the former two cases. The satisfactory result
is mainly due to the spatial and temporal energy transferring
abilities of HESS of prosumers. Basically, HESS stores locally
surplus renewable energy for later utilization. It shows that the
proposed model promotes an autonomous energy sharing among
CPV and prosumers with their interest incentive.
2) SWAA and SAA: We compare the results of SWAA equi-
librium and SAA equilibrium in Fig. 4. Theoretically, with the
estimated weight distribution, prosumers will definitely have a
more accurate estimation for CPV energy generation compared
to average estimation. As Fig. 4 shows, the energy expectation
for CPV in SWAA denoted by the bars is closer to the actual out-
put of CPV than that of SAA, which is in line with the analysis. In
SWAA equilibrium, prosumers can make better utilization of the
local random renewable energy compared to SAA equilibrium.
Thus, SWAA equilibrium brings a higher energy efficiency for
the community. SWAA shows a better performance than SAA
approach by making the most of CPV, which indicates the ad-
vantage of the proposed SWAA over SAA.
3) Influence of CVaR weight: We carry out numerous simu-
lations to analyse the influence of the CVaR weight ρ. In system
modeling, we assume each prosumer has it own weight ρn on
CVaR to make a tradeoff between the the energy cost and over-
expecting risk of CPV. For convenience, we use the same weight
ρ for all prosumers. Let ρ = 0.05, 0.10, 0.15, 0.20. By keeping
all other parameters fixed, we can obtain the energy distributions
of CPV for the four cases as shown in Fig. 5.
The solid lines are the actual energy generation profiles of
CPV, and other four lines are the total energy expectation plus
the community service demand profiles under different weight
scales. Theoretically, if the weight ρ is small, it will lead to an
overestimation of power generation of CPV, as a result, pro-
sumers will expect too much energy from CPV which may not
be able to provide in real time. This will lead to a large real-time
energy shortage for the community, which may bring about high
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
836 IEEE TRANSACTIONS ON SUSTAINABLE ENERGY, VOL. 11, NO. 2, APRIL 2020
Fig. 4. Energy distribution of CPV of SWAA and SAA. The yellow and blue
bars denote the total expected share of all prosumers for CPV energy and actual
community service demand, and the red line and cyan lines denote the actual
outputs and sample outputs of CPV.
Fig. 5. Energy distribution of CPV in four cases of ρ = 0.05, 0.100.15, 0.20.
real-time energy expense. If the weight ρ becomes larger, pro-
sumers will definitely behave more conservatively and tend to
reduce the expected share of CPV as a tradeoff between the en-
ergy cost and over-expecting risk. Obviously, this is confirmed
by the comparison shown in Fig. 5. Specifically, when ρ = 0.05,
the expected energy from CPV is likely to exceed the actual
TABLE II
CALCULATION PERFORMANCE
energy generation of CPV, and when ρ = 0.15, 0.20 the renew-
able energy of CPV can not be fully utilized. ρ = 0.10 shows
the best energy efficiency in the four cases. Different settings
for the weight ρ have different energy efficiency and different
conservatism on the usage of the uncertain resources. Therefore,
by adjusting ρ, the proposed risk-averse energy sharing method
for CPV can also regulate the conservatism on uncertain energy
generation of CPV and the energy efficiency in the community.
A suitable setting for ρ will both reduce the real-time demands
and make full utilization of the renewable energy of CPV.
C. Algorithm Evaluation
We evaluate the calculation performance of the proposed al-
gorithm through simulation cases with different numbers of pro-
sumers. We show the calculation detail for communities with 10,
50, 100 prosumers in Table II, where ’Number’ means the num-
ber of prosumers in the community, ’Tot.Time’ means the total
calculation time in given iteration time denoted by ’Iter’, ’Accu-
racy’ denotes the norm of the difference of price vectors in the
last two iterations. We also calculate the average running time
denoted as ’Dis.Time’ of single prosumer to be the quotient of
’Tot.Time’ and ’Number’. Moreover, we estimate the average
time denoted as ’Ave.Time’ of solving the subproblem in Step
10 of Algorithm 1 through dividing ’Tot.Time’ with ’Number’
and iteration times.
Several conclusions can be obtained from Table II. Firstly, the
algorithm is definitely applicable for the community with dif-
ferent scales since the algorithm requires few iteration times to
reach a high accuracy and the number of prosumers has a slight
influence. In practice, we just need a small number of iterations
to reach a relatively high and acceptable accuracy. Secondly,
the algorithm can be satisfactory if it is implemented in a dis-
tributed manner. ’Dis.Time’, the average running time for sin-
gle prosumer, is proportional to iteration times, and ’Dis.Time’
barely changes as the number of prosumers increases from 10 to
100 in given Iter times. Thus the running time of distributed im-
plementation with an ideal communication environment will be
acceptable. Thirdly, the subproblems are easily solvable which
is reflected by their average calculation time as ’Ave.Time’. In
general, we can see that the proposed distributed algorithm is
practically feasible and has a good computational performance.
VI. CONCLUSION
This paper presents a risk aversion energy sharing model
based on a devised local energy market for a prosumer com-
munity with CPV installations. To be more specific, a stochastic
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
CUI et al.: PROSUMER COMMUNITY: A RISK AVERSION ENERGY SHARING MODEL 837
energy sharing game is modeled where each prosumer tends to
minimize its own objective where there is a tradeoff between the
energy cost and the risk of energy sharing of uncertain CPV and
the household loads and HPV outputs are considered as stochas-
tic parameters. The risk is modeled by CVaR. A sample weighted
average approximation (SWAA) equilibrium is proposed for
better estimation of the stochastic game, and is achieved by a
relaxation method based algorithm. The theoretical analysis is
provided. To facilitate the energy sharing model, the blockchain
technology as a distributed and secure way is introduced. The
case studies show the efficiency of the proposed community en-
ergy sharing model and the algorithm. In future work, we intend
to introduce other novel approaches to handle stochastic param-
eters such as autoregressive models. We will also consider the
practical engineering realization of the blockchain-based energy
sharing for a prosumer community.
APPENDIX A
PROOF OF THEOREM 1
A. Proof for the Convergence
Suppose ω̄ is a random variable with the induced measure
of μ, and ν the induced measure for the random variable ω.
Let π(X) denote the expectation of π(X, ω̄). Similar with the
definition in [43], let the likelihoodL(·) := dμ
dν (·). We define the
following estimation:
π̄(X) :=
1
K
K∑
k=1
π(X,ωk)L(ωk)
Thus we have Eω [π̄(X)] = 1
K
∑K
k=1Eω [π(X,ωk)L(ωk)] =
1
K
∑K
k=1Eω̄ [π(X, ω̄)] = π(X). [23] proves that the variance
of the estimation π̄(X) has smaller variance than SAA. We
can apply the results to the proposed SWAA with some ad-
justments. The specific scenario ω̄ is deterministic, thus μ can
be 0. Accordingly, the likelihood function can be used to ap-
proximate the posterior probability distribution. When K →
∞, we have πSWAA(X) :=
∑K
k=1P (ωk)π(X,ωk) → π(X, ω̄)
since the posterior probability distribution will have a more
accurate approximation for L(·) according to the Strong Law
of Large Numbers. The exponential convergence rate with re-
spect to given samples of number K can be obtained from the
Theorem 5.16 in [23] of SAA convergence rate by considering
f(X,ωk) := P (ωk)π(X,ωk) as random samples.
B. Proof for the Consistency
The consistency means the optimal value and the solution
set of the approximate problem converge to the corresponding
deterministic problem. Let f(X,ωk) := P (ωk)π(X,ωk) and
g(X,ωk) := π(X,ωk). The properties of lower semicontinuity
of g(X,ω), f(X,ω) and π(X, ω̄) can be obtained as in [43].
The lower semicontinuity of πSWAA(X) has been investigated
following the Fatou’s Lemma, since for every X̄ we have
limX→X̄ inf πSWAA(X) = limX→X̄ inf
∑K
k=1f(X,ωk) ≥∑K
k=1limX→X̄ inf f(X,ωk) ≥
∑K
k=1f(X̄, ωk) = g(X̄, ωk).
Then the epiconvergence πSWAA(X̄)
e→π(X̄, ω̄) is directly
obtained from the Theorem 2.3 of [44].
APPENDIX B
PROOF OF THEOREM 2
The existence of a normalized equilibrium point X∗ fol-
lows from the Kakutani’s Theorem [45]. The convergence of
the algorithm can be proved using the optimal value func-
tion Vγ(X) := Φγ(X,Y
γ(X)). The function Vγ(X) equals
zero at the normalized equilibrium point X∗: Vγ(X∗) = 0 and
Vγ(X
∗) > 0, X ∈ X , X �= X∗. Suppose the statement does not
holds, according to Lemma 4.1 of [46], there exists a subse-
quence im and δ > 0 such that
Vγ(X(im+1)) > Vγ(X(im)),
and
‖X(im)− Y γ(X(im))‖ ≥ δ > 0.
While the following inequality has been investigated [46]:
Vγ(X(im+1)) ≤ Vγ(X(im))− 1
2
(1− λ(im))λ(im)β(δ)
for sufficiently large numbers m. Thus the contradiction proves
Theorem 2.
REFERENCES
[1] R. L. Fares and M. E. Webber, “The impacts of storing solar energy in the
home to reduce reliance on the utility,” Nature Energy, vol. 2, no. 2, 2017,
Art. no. 17001.
[2] E. McKenna and M. Thomson, “Photovoltaic metering configurations,
feed-in tariffs and the variable effective electricity prices that result,” IET
Renew. Power Gener., vol. 7, no. 3, pp. 235–245, May 2013.
[3] Y. Parag and B. K. Sovacool, “Electricity market design for the prosumer
era,” Nature Energy, vol. 1, no. 4, 2016, Art. no. 16032.
[4] J. Coughlin et al., “A guide to community shared solar: Utility, private,
and nonprofit project development,” U.S. Dept. Energy, SunShot Initiative,
Washington, DC, USA, Rep. no. DOE/GO-102012-3569, 2012.
[5] W. Chen and P. Wei, “Socially optimal deployment strategy and incentive
policy for solar photovoltaic community microgrid: A case of China,”
Energy Policy, vol. 116, pp. 86–94, 2018.
[6] W. Qi, B. Shen, H. Zhang, and Z.-J. M. Shen, “Sharing demand-side energy
resources–A conceptual design,” Energy, vol. 135, pp. 455–465, Sep. 2017.
[7] E. G. Kardakos, C. K. Simoglou, and A. G. Bakirtzis, “Optimal bidding
strategy in transmission-constrained electricity markets,” Elect. Power
Syst. Res., vol. 109, pp. 141–149, 2014.
[8] J. Li, Y. Liu, and L. Wu, “Optimal operation for community-based multi-
party microgrid in grid-connected and islanded modes,” IEEE Trans. Smart
Grid, vol. 9, no. 2, pp. 756–765, Mar. 2018.
[9] E. Mengelkamp, J. Gärttner, K. Rock, S. Kessler, L. Orsini, and
C. Weinhardt, “Designing microgrid energy markets: A case study: The
Brooklyn microgrid,” Appl. Energy, vol. 210, pp. 870–880, 2018.
[10] W. Tushar et al., “Three-party energy management with distributed en-
ergy resources in smart grid,” IEEE Trans. Ind. Electron., vol. 62, no. 4,
pp. 2487–2498, Apr. 2015.
[11] R. Deng, Z. Yang, F. Hou, M.-Y. Chow, and J. Chen, “Distributed real-time
demand response in multiseller–multibuyer smart distribution grid,” IEEE
Trans. Power Syst., vol. 30, no. 5, pp. 2364–2374, Sep. 2015.
[12] S. Cui, Y.-W. Wang, J. Xiao, and N. Liu, “A two-stage robust energy
sharing management for prosumer microgrid,” IEEE Trans. Ind. Inform.,
to be published, doi: 10.1109/TII.2018.2867878.
[13] W. Wei, F. Liu, and S. Mei, “Energy pricing and dispatch for smart grid re-
tailers under demand response and market price uncertainty,” IEEE Trans.
Smart Grid, vol. 6, no. 3, pp. 1364–1374, May. 2015.
[14] A. Fleischhacker, H. Auer, G. Lettner, and A. Botterud, “Sharing so-
lar PV and energy storage in apartment buildings: Resource alloca-
tion and pricing,” IEEE Trans. Smart Grid, to be published, doi:
10.1109/TSG.2018.2844877.
[15] N. Liu, X. Yu, C. Wang, and J. Wang, “Energy sharing management for mi-
crogrids with PV prosumers: A stackelberg game approach,” IEEE Trans.
Ind. Informat., vol. 13, no. 3, pp. 1088–1098, 2017.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
https://dx.doi.org/10.1109/TII.2018.2867878
https://dx.doi.org/10.1109/TSG.2018.2844877
838 IEEE TRANSACTIONS ON SUSTAINABLE ENERGY, VOL. 11, NO. 2, APRIL 2020
[16] S. Cui, Y.-W. Wang, and N. Liu, “Distributed game-based pricing strategy
for energy sharing in microgrid with PV prosumers,” IET Renew. Power
Gener., vol. 12, no. 3, pp. 380–388, Feb. 2018.
[17] I. Atzeni, L. G. Ordóñez, G. Scutari, D. P. Palomar, and J. R. Fonollosa,
“Noncooperative day-ahead bidding strategies for demand-side expected
cost minimization with real-time adjustments: A GNEP approach,” IEEE
Trans. Signal Process., vol. 62, no. 9, pp. 2397–2412, May 2014.
[18] N. Liu, X. Yu, C. Wang, C. Li, L. Ma, and J. Lei, “Energy-sharing
model with price-based demand response for microgrids of peer-to-peer
prosumers,” IEEE Trans. Power Syst., vol. 32, no. 5, pp. 3569–3583,
Sep. 2017.
[19] B. Celik, R. Roche, D. Bouquain, and A. Miraoui, “Decentralized neigh-
borhood energy management with coordinated smart home energy shar-
ing,” IEEE Trans. Smart Grid, vol. 9, no. 6, pp. 6387–6397, Nov. 2018.
[20] C. Li, X. Yu, W. Yu, G. Chen, and J. Wang, “Efficient computation for
sparse load shifting in demand side management,” IEEE Trans. Smart
Grid, vol. 8, no. 1, pp. 250–261, Jan. 2017.
[21] M. H. K. Tushar, A. W. Zeineddine, and C. Assi, “Demand-side manage-
ment by regulating charging and discharging of the EV, ESS, and utilizing
renewable energy,” IEEE Trans. Ind. Inform., vol. 14, no. 1, pp. 117–126,
Jan. 2018.
[22] S. van der Stelt, T. AlSkaif, and W. van Sark, “Techno-economic analysis
of household and community energy storage for residential prosumers with
smart appliances,” Appl. Energy, vol. 209, pp. 266–276, 2018.
[23] A. Shapiro, D. Dentcheva, and A. Ruszczyński, Lectures on Stochastic Pro-
gramming: Modeling and Theory. Philadelphia, PA, USA: SIAM, 2009.
[24] R. Khodabakhsh and S. Sirouspour, “Optimal control of energy storage in a
microgrid by minimizing conditional value-at-risk,” IEEE Trans. Sustain.
Energy, vol. 7, no. 3, pp. 1264–1273, Jul. 2016.
[25] M. T. Alam, H. Li, and A. Patidar, “Bitcoin for smart trading in smart
grid,” in Proc. 21st IEEE Int. Workshop Local Metropolitan Area Netw.,
2015, pp. 1–2.
[26] A. Killeen, “The confluence of bitcoin and the global sharing economy,”
in Handbook of Digital Currency. New York, NY, USA: Elsevier, 2015,
pp. 485–503.
[27] J. Green and P. Newman, “Citizen utilities: The emerging power
paradigm,” Energy Policy, vol. 105, pp. 283–293, 2017.
[28] A. Sinha, P. Malo, and K. Deb, “A review on bilevel optimization: From
classical to evolutionary approaches and applications,” IEEE Trans. Evol.
Comput., vol. 22, no. 2, pp. 276–295, Apr. 2018.
[29] W. Buchholz, R. Cornes, and D. Rübbelke, “Interior matching equilibria in
a public good economy: An aggregative game approach,” J. Public Econ.,
vol. 95, no. 7/8, pp. 639–645, Aug. 2011.
[30] H. Zhang, Z. Hu, E. Munsing, S. J. Moura, and Y. Song, “Data-
driven chance-constrained regulation capacity offering for distributed
energy resources,” IEEE Trans. Smart Grid, to be published, doi:
10.1109/TSG.2018.2809046.
[31] C. Li, Y. Xu, X. Yu, C. Ryan, and T. Huang, “Risk-averse energy trading
in multienergy microgrids: A two-stage stochastic game approach,” IEEE
Trans. Ind. Inform., vol. 13, no. 5, pp. 2620–2630, Oct. 2017.
[32] F. Facchinei and C. Kanzow, “Generalized nash equilibrium problems,”
Ann. Oper. Res., vol. 175, no. 1, pp. 177–211, 2010.
[33] G.-H. Lin and M. Fukushima, “Stochastic equilibrium problems and
stochastic mathematical programs with equilibrium constraints: A survey,”
Pacific J. Optim., vol. 6, no. 3, pp. 455–482, 2010.
[34] S. Theodoridis, Machine Learning: A Bayesian and Optimization Perspec-
tive. New York, NY, USA: Academic, 2015.
[35] A. V. Heusinger and C. Kanzow, “Relaxation methods for generalized nash
equilibrium problems with inexact line search,” J. Optim. Theory Appl.,
vol. 143, no. 1, pp. 159–183, 2009.
[36] J. B. Krawczyk and S. Uryasev, “Relaxation algorithms to find nash equi-
libria with economic applications,” Environ. Model. Assessment, vol. 5,
no. 1, pp. 63–73, 2000.
[37] Australia bureau of meteorology, Accessed: Mar. 1, 2018. [Online]. Avail-
able: http://www.bom.gov.au/
[38] A. Yona, T. Senjyu, T. Funabashi, and C.-H. Kim, “Determination method
of insolation prediction with fuzzy and applying neural network for long-
term ahead pv power output correction,” IEEE Trans. Sustain. Energy,
vol. 4, no. 2, pp. 527–533, Apr. 2013.
[39] Toyota electric vehicles, Accessed: Nov. 27, 2018. [Online]. Available:
https://www.gac-toyota.com.cn/vehicles/ix4
[40] G. Pasaoglu, D. Fiorello, L. Zani, A. Martino, A. Zubaryeva, and C. Thiel,
“Projections for electric vehicle load profiles in europe based on travel
survey data,” Joint Res. Centre Eur. Commission, Petten, Netherlands,
Rep. no. EUR 25993 EN, 2013.
[41] Q. Wu et al.“Driving pattern analysis for electric vehicle (EV) grid inte-
gration study,” in Proc. IEEE PES Innovative Smart Grid Technol. Conf.
Eur., 2010, pp. 1–6.
[42] N. S. Pearre, W. Kempton, R. L. Guensler, and V. V. Elango, “Electric
vehicles: How much range is required for a days driving?” Transp. Res.
Part C: Emerg. Technol., vol. 19, no. 6, pp. 1171–1184, 2011.
[43] J. Barrera, T. Homem-de Mello, E. Moreno, B. K. Pagnoncelli, and
G. Canessa, “Chance-constrained problems and rare events: An impor-
tance sampling approach,” Math. Program., vol. 157, no. 1, pp. 153–189,
2016.
[44] Z. Artstein and R. J.-B. Wets, “Consistency of minimizers and the SLLN
for stochastic programs,” J. Convex Analysis, vol. 2, pp. 1–17, 1994.
[45] V. Z. Belenkii, V. A. Volkonskii, S. A. Ivankov, A. B. Pomaranski, and A.
D. Shapiro, “Iterative methods in game theory and programming,” Russia,
1974.
[46] S. Uryas’ ev and R. Y. Rubinstein, “On relaxation algorithms in computa-
tion of noncooperative equilibria,” IEEE Trans. Autom. Control, vol. 39,
no. 6, pp. 1263–1267, Jun. 1994.
Shichang Cui received the B.S. degree in automa-
tion from the Huazhong University of Science and
Technology, Wuhan, China, in 2016, where he is cur-
rently working toward the Ph.D. degree in control sci-
ence and engineering. His current research interests
include robust optimization, stochastic optimization,
and energy management for smart grids.
Yan-Wu Wang (M’10–SM’13) received the B.S. de-
gree in automatic control, the M.S. degree, and the
Ph.D. degree in control theory and control engineer-
ing from the Huazhong University of Science and
Technology (HUST), Wuhan, China, in 1997, 2000,
and 2003, respectively.
She is currently a Professor with the School of Ar-
tificial Intelligence and Automation, HUST, Wuhan,
China, and with the Key Laboratory of Image Pro-
cessing and Intelligent Control, Ministry of Educa-
tion, Wuhan, China. Her research interests include
hybrid systems, cooperative control, and multi-agent systems with applications
in smart grid. Dr. Wang was the recipient of several awards, including the First
Prize of Hubei Province Natural Science in 2014, First Prize of the Ministry of
Education of China in 2005, and Excellent Ph.D. Dissertation of Hubei Province
in 2004, China. She was also awarded the title of “New Century Excellent Tal-
ents” by the Chinese Ministry of Education in 2008.
Chaojie Li received the B.Eng. degree in elec-
tronic science and technology and the M.Eng. de-
gree in computer science from Chongqing University,
Chongqing, China, in 2007 and 2011. He received
the Ph.D. degree from RMIT University, Melbourne,
Australia, in 2017. He worked as a Research Fellow
at RMIT University for one and a half year. He is cur-
rently a Senior Algorithm Engineer at Alibaba Group
Hangzhou, China. His current research interests
include graph representation learning, distributed op-
timization and control in smart grid, and neural net-
works and their application.
Jiang-Wen Xiao received the B.S. degree in elec-
trical engineering, the M.S. degree in control the-
ory and control engineering, and the Ph.D. degree in
systems engineering from the Huazhong University
of Science and Technology (HUST), Wuhan, China,
in 1994, 1997, and 2001 respectively. From 2001 to
2003, he worked as a Postdoctoral Researcher with
the College of Management, HUST, Wuhan, China.
He is currently a Professor with the School of Ar-
tificial Intelligence and Automation, HUST, Wuhan,
China. His research interests include modeling and
control of nonlinear and complex systems, data mining and optimization.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:41:27 UTC from IEEE Xplore.  Restrictions apply. 
https://dx.doi.org/10.1109/TSG.2018.2809046
<<
  /ASCII85EncodePages false
  /AllowTransparency false
  /AutoPositionEPSFiles true
  /AutoRotatePages /None
  /Binding /Left
  /CalGrayProfile (Gray Gamma 2.2)
  /CalRGBProfile (sRGB IEC61966-2.1)
  /CalCMYKProfile (U.S. Web Coated \050SWOP\051 v2)
  /sRGBProfile (sRGB IEC61966-2.1)
  /CannotEmbedFontPolicy /Warning
  /CompatibilityLevel 1.4
  /CompressObjects /Off
  /CompressPages true
  /ConvertImagesToIndexed true
  /PassThroughJPEGImages true
  /CreateJobTicket false
  /DefaultRenderingIntent /Default
  /DetectBlends true
  /DetectCurves 0.0000
  /ColorConversionStrategy /sRGB
  /DoThumbnails true
  /EmbedAllFonts true
  /EmbedOpenType false
  /ParseICCProfilesInComments true
  /EmbedJobOptions true
  /DSCReportingLevel 0
  /EmitDSCWarnings false
  /EndPage -1
  /ImageMemory 1048576
  /LockDistillerParams true
  /MaxSubsetPct 100
  /Optimize true
  /OPM 0
  /ParseDSCComments false
  /ParseDSCCommentsForDocInfo true
  /PreserveCopyPage true
  /PreserveDICMYKValues true
  /PreserveEPSInfo false
  /PreserveFlatness true
  /PreserveHalftoneInfo true
  /PreserveOPIComments false
  /PreserveOverprintSettings true
  /StartPage 1
  /SubsetFonts false
  /TransferFunctionInfo /Remove
  /UCRandBGInfo /Preserve
  /UsePrologue false
  /ColorSettingsFile ()
  /AlwaysEmbed [ true
    /Algerian
    /Arial-Black
    /Arial-BlackItalic
    /Arial-BoldItalicMT
    /Arial-BoldMT
    /Arial-ItalicMT
    /ArialMT
    /ArialNarrow
    /ArialNarrow-Bold
    /ArialNarrow-BoldItalic
    /ArialNarrow-Italic
    /ArialUnicodeMS
    /BaskOldFace
    /Batang
    /Bauhaus93
    /BellMT
    /BellMTBold
    /BellMTItalic
    /BerlinSansFB-Bold
    /BerlinSansFBDemi-Bold
    /BerlinSansFB-Reg
    /BernardMT-Condensed
    /BodoniMTPosterCompressed
    /BookAntiqua
    /BookAntiqua-Bold
    /BookAntiqua-BoldItalic
    /BookAntiqua-Italic
    /BookmanOldStyle
    /BookmanOldStyle-Bold
    /BookmanOldStyle-BoldItalic
    /BookmanOldStyle-Italic
    /BookshelfSymbolSeven
    /BritannicBold
    /Broadway
    /BrushScriptMT
    /CalifornianFB-Bold
    /CalifornianFB-Italic
    /CalifornianFB-Reg
    /Centaur
    /Century
    /CenturyGothic
    /CenturyGothic-Bold
    /CenturyGothic-BoldItalic
    /CenturyGothic-Italic
    /CenturySchoolbook
    /CenturySchoolbook-Bold
    /CenturySchoolbook-BoldItalic
    /CenturySchoolbook-Italic
    /Chiller-Regular
    /ColonnaMT
    /ComicSansMS
    /ComicSansMS-Bold
    /CooperBlack
    /CourierNewPS-BoldItalicMT
    /CourierNewPS-BoldMT
    /CourierNewPS-ItalicMT
    /CourierNewPSMT
    /EstrangeloEdessa
    /FootlightMTLight
    /FreestyleScript-Regular
    /Garamond
    /Garamond-Bold
    /Garamond-Italic
    /Georgia
    /Georgia-Bold
    /Georgia-BoldItalic
    /Georgia-Italic
    /Haettenschweiler
    /HarlowSolid
    /Harrington
    /HighTowerText-Italic
    /HighTowerText-Reg
    /Impact
    /InformalRoman-Regular
    /Jokerman-Regular
    /JuiceITC-Regular
    /KristenITC-Regular
    /KuenstlerScript-Black
    /KuenstlerScript-Medium
    /KuenstlerScript-TwoBold
    /KunstlerScript
    /LatinWide
    /LetterGothicMT
    /LetterGothicMT-Bold
    /LetterGothicMT-BoldOblique
    /LetterGothicMT-Oblique
    /LucidaBright
    /LucidaBright-Demi
    /LucidaBright-DemiItalic
    /LucidaBright-Italic
    /LucidaCalligraphy-Italic
    /LucidaConsole
    /LucidaFax
    /LucidaFax-Demi
    /LucidaFax-DemiItalic
    /LucidaFax-Italic
    /LucidaHandwriting-Italic
    /LucidaSansUnicode
    /Magneto-Bold
    /MaturaMTScriptCapitals
    /MediciScriptLTStd
    /MicrosoftSansSerif
    /Mistral
    /Modern-Regular
    /MonotypeCorsiva
    /MS-Mincho
    /MSReferenceSansSerif
    /MSReferenceSpecialty
    /NiagaraEngraved-Reg
    /NiagaraSolid-Reg
    /NuptialScript
    /OldEnglishTextMT
    /Onyx
    /PalatinoLinotype-Bold
    /PalatinoLinotype-BoldItalic
    /PalatinoLinotype-Italic
    /PalatinoLinotype-Roman
    /Parchment-Regular
    /Playbill
    /PMingLiU
    /PoorRichard-Regular
    /Ravie
    /ShowcardGothic-Reg
    /SimSun
    /SnapITC-Regular
    /Stencil
    /SymbolMT
    /Tahoma
    /Tahoma-Bold
    /TempusSansITC
    /TimesNewRomanMT-ExtraBold
    /TimesNewRomanMTStd
    /TimesNewRomanMTStd-Bold
    /TimesNewRomanMTStd-BoldCond
    /TimesNewRomanMTStd-BoldIt
    /TimesNewRomanMTStd-Cond
    /TimesNewRomanMTStd-CondIt
    /TimesNewRomanMTStd-Italic
    /TimesNewRomanPS-BoldItalicMT
    /TimesNewRomanPS-BoldMT
    /TimesNewRomanPS-ItalicMT
    /TimesNewRomanPSMT
    /Times-Roman
    /Trebuchet-BoldItalic
    /TrebuchetMS
    /TrebuchetMS-Bold
    /TrebuchetMS-Italic
    /Verdana
    /Verdana-Bold
    /Verdana-BoldItalic
    /Verdana-Italic
    /VinerHandITC
    /Vivaldii
    /VladimirScript
    /Webdings
    /Wingdings2
    /Wingdings3
    /Wingdings-Regular
    /ZapfChanceryStd-Demi
    /ZWAdobeF
  ]
  /NeverEmbed [ true
  ]
  /AntiAliasColorImages false
  /CropColorImages true
  /ColorImageMinResolution 150
  /ColorImageMinResolutionPolicy /OK
  /DownsampleColorImages false
  /ColorImageDownsampleType /Bicubic
  /ColorImageResolution 900
  /ColorImageDepth -1
  /ColorImageMinDownsampleDepth 1
  /ColorImageDownsampleThreshold 1.00111
  /EncodeColorImages true
  /ColorImageFilter /DCTEncode
  /AutoFilterColorImages false
  /ColorImageAutoFilterStrategy /JPEG
  /ColorACSImageDict <<
    /QFactor 0.76
    /HSamples [2 1 1 2] /VSamples [2 1 1 2]
  >>
  /ColorImageDict <<
    /QFactor 0.40
    /HSamples [1 1 1 1] /VSamples [1 1 1 1]
  >>
  /JPEG2000ColorACSImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /JPEG2000ColorImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /AntiAliasGrayImages false
  /CropGrayImages true
  /GrayImageMinResolution 150
  /GrayImageMinResolutionPolicy /OK
  /DownsampleGrayImages false
  /GrayImageDownsampleType /Bicubic
  /GrayImageResolution 1200
  /GrayImageDepth -1
  /GrayImageMinDownsampleDepth 2
  /GrayImageDownsampleThreshold 1.00083
  /EncodeGrayImages true
  /GrayImageFilter /DCTEncode
  /AutoFilterGrayImages false
  /GrayImageAutoFilterStrategy /JPEG
  /GrayACSImageDict <<
    /QFactor 0.76
    /HSamples [2 1 1 2] /VSamples [2 1 1 2]
  >>
  /GrayImageDict <<
    /QFactor 0.40
    /HSamples [1 1 1 1] /VSamples [1 1 1 1]
  >>
  /JPEG2000GrayACSImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /JPEG2000GrayImageDict <<
    /TileWidth 256
    /TileHeight 256
    /Quality 15
  >>
  /AntiAliasMonoImages false
  /CropMonoImages true
  /MonoImageMinResolution 1200
  /MonoImageMinResolutionPolicy /OK
  /DownsampleMonoImages false
  /MonoImageDownsampleType /Bicubic
  /MonoImageResolution 1600
  /MonoImageDepth -1
  /MonoImageDownsampleThreshold 1.00063
  /EncodeMonoImages true
  /MonoImageFilter /CCITTFaxEncode
  /MonoImageDict <<
    /K -1
  >>
  /AllowPSXObjects false
  /CheckCompliance [
    /None
  ]
  /PDFX1aCheck false
  /PDFX3Check false
  /PDFXCompliantPDFOnly false
  /PDFXNoTrimBoxError true
  /PDFXTrimBoxToMediaBoxOffset [
    0.00000
    0.00000
    0.00000
    0.00000
  ]
  /PDFXSetBleedBoxToMediaBox true
  /PDFXBleedBoxToTrimBoxOffset [
    0.00000
    0.00000
    0.00000
    0.00000
  ]
  /PDFXOutputIntentProfile (None)
  /PDFXOutputConditionIdentifier ()
  /PDFXOutputCondition ()
  /PDFXRegistryName ()
  /PDFXTrapped /False
  /CreateJDFFile false
  /Description <<
    /CHS <FEFF4f7f75288fd94e9b8bbe5b9a521b5efa7684002000410064006f006200650020005000440046002065876863900275284e8e55464e1a65876863768467e5770b548c62535370300260a853ef4ee54f7f75280020004100630072006f0062006100740020548c002000410064006f00620065002000520065006100640065007200200035002e003000204ee553ca66f49ad87248672c676562535f00521b5efa768400200050004400460020658768633002>
    /CHT <FEFF4f7f752890194e9b8a2d7f6e5efa7acb7684002000410064006f006200650020005000440046002065874ef69069752865bc666e901a554652d965874ef6768467e5770b548c52175370300260a853ef4ee54f7f75280020004100630072006f0062006100740020548c002000410064006f00620065002000520065006100640065007200200035002e003000204ee553ca66f49ad87248672c4f86958b555f5df25efa7acb76840020005000440046002065874ef63002>
    /DAN <FEFF004200720075006700200069006e0064007300740069006c006c0069006e006700650072006e0065002000740069006c0020006100740020006f007000720065007400740065002000410064006f006200650020005000440046002d0064006f006b0075006d0065006e007400650072002c0020006400650072002000650067006e006500720020007300690067002000740069006c00200064006500740061006c006a006500720065007400200073006b00e60072006d007600690073006e0069006e00670020006f00670020007500640073006b007200690076006e0069006e006700200061006600200066006f0072007200650074006e0069006e006700730064006f006b0075006d0065006e007400650072002e0020004400650020006f007000720065007400740065006400650020005000440046002d0064006f006b0075006d0065006e0074006500720020006b0061006e002000e50062006e00650073002000690020004100630072006f00620061007400200065006c006c006500720020004100630072006f006200610074002000520065006100640065007200200035002e00300020006f00670020006e0079006500720065002e>
    /DEU <FEFF00560065007200770065006e00640065006e0020005300690065002000640069006500730065002000450069006e007300740065006c006c0075006e00670065006e0020007a0075006d002000450072007300740065006c006c0065006e00200076006f006e002000410064006f006200650020005000440046002d0044006f006b0075006d0065006e00740065006e002c00200075006d002000650069006e00650020007a0075007600650072006c00e40073007300690067006500200041006e007a006500690067006500200075006e00640020004100750073006700610062006500200076006f006e00200047006500730063006800e40066007400730064006f006b0075006d0065006e00740065006e0020007a0075002000650072007a00690065006c0065006e002e00200044006900650020005000440046002d0044006f006b0075006d0065006e007400650020006b00f6006e006e0065006e0020006d006900740020004100630072006f00620061007400200075006e0064002000520065006100640065007200200035002e003000200075006e00640020006800f600680065007200200067006500f600660066006e00650074002000770065007200640065006e002e>
    /ESP <FEFF005500740069006c0069006300650020006500730074006100200063006f006e0066006900670075007200610063006900f3006e0020007000610072006100200063007200650061007200200064006f00630075006d0065006e0074006f0073002000640065002000410064006f00620065002000500044004600200061006400650063007500610064006f007300200070006100720061002000760069007300750061006c0069007a00610063006900f3006e0020006500200069006d0070007200650073006900f3006e00200064006500200063006f006e006600690061006e007a006100200064006500200064006f00630075006d0065006e0074006f007300200063006f006d00650072006300690061006c00650073002e002000530065002000700075006500640065006e00200061006200720069007200200064006f00630075006d0065006e0074006f00730020005000440046002000630072006500610064006f007300200063006f006e0020004100630072006f006200610074002c002000410064006f00620065002000520065006100640065007200200035002e003000200079002000760065007200730069006f006e0065007300200070006f00730074006500720069006f007200650073002e>
    /FRA <FEFF005500740069006c006900730065007a00200063006500730020006f007000740069006f006e00730020006100660069006e00200064006500200063007200e900650072002000640065007300200064006f00630075006d0065006e00740073002000410064006f006200650020005000440046002000700072006f00660065007300730069006f006e006e0065006c007300200066006900610062006c0065007300200070006f007500720020006c0061002000760069007300750061006c00690073006100740069006f006e0020006500740020006c00270069006d007000720065007300730069006f006e002e0020004c0065007300200064006f00630075006d0065006e00740073002000500044004600200063007200e900e90073002000700065007500760065006e0074002000ea0074007200650020006f007500760065007200740073002000640061006e00730020004100630072006f006200610074002c002000610069006e00730069002000710075002700410064006f00620065002000520065006100640065007200200035002e0030002000650074002000760065007200730069006f006e007300200075006c007400e90072006900650075007200650073002e>
    /ITA (Utilizzare queste impostazioni per creare documenti Adobe PDF adatti per visualizzare e stampare documenti aziendali in modo affidabile. I documenti PDF creati possono essere aperti con Acrobat e Adobe Reader 5.0 e versioni successive.)
    /JPN <FEFF30d330b830cd30b9658766f8306e8868793a304a3088307353705237306b90693057305f002000410064006f0062006500200050004400460020658766f8306e4f5c6210306b4f7f75283057307e305930023053306e8a2d5b9a30674f5c62103055308c305f0020005000440046002030d530a130a430eb306f3001004100630072006f0062006100740020304a30883073002000410064006f00620065002000520065006100640065007200200035002e003000204ee5964d3067958b304f30533068304c3067304d307e305930023053306e8a2d5b9a3067306f30d530a930f330c8306e57cb30818fbc307f3092884c3044307e30593002>
    /KOR <FEFFc7740020c124c815c7440020c0acc6a9d558c5ec0020be44c988b2c8c2a40020bb38c11cb97c0020c548c815c801c73cb85c0020bcf4ace00020c778c1c4d558b2940020b3700020ac00c7a50020c801d569d55c002000410064006f0062006500200050004400460020bb38c11cb97c0020c791c131d569b2c8b2e4002e0020c774b807ac8c0020c791c131b41c00200050004400460020bb38c11cb2940020004100630072006f0062006100740020bc0f002000410064006f00620065002000520065006100640065007200200035002e00300020c774c0c1c5d0c11c0020c5f40020c2180020c788c2b5b2c8b2e4002e>
    /NLD (Gebruik deze instellingen om Adobe PDF-documenten te maken waarmee zakelijke documenten betrouwbaar kunnen worden weergegeven en afgedrukt. De gemaakte PDF-documenten kunnen worden geopend met Acrobat en Adobe Reader 5.0 en hoger.)
    /NOR <FEFF004200720075006b00200064006900730073006500200069006e006e007300740069006c006c0069006e00670065006e0065002000740069006c002000e50020006f0070007000720065007400740065002000410064006f006200650020005000440046002d0064006f006b0075006d0065006e00740065007200200073006f006d002000650072002000650067006e0065007400200066006f00720020007000e5006c006900740065006c006900670020007600690073006e0069006e00670020006f00670020007500740073006b007200690066007400200061007600200066006f0072007200650074006e0069006e006700730064006f006b0075006d0065006e007400650072002e0020005000440046002d0064006f006b0075006d0065006e00740065006e00650020006b0061006e002000e50070006e00650073002000690020004100630072006f00620061007400200065006c006c00650072002000410064006f00620065002000520065006100640065007200200035002e003000200065006c006c00650072002e>
    /PTB <FEFF005500740069006c0069007a006500200065007300730061007300200063006f006e00660069006700750072006100e700f50065007300200064006500200066006f0072006d00610020006100200063007200690061007200200064006f00630075006d0065006e0074006f0073002000410064006f00620065002000500044004600200061006400650071007500610064006f00730020007000610072006100200061002000760069007300750061006c0069007a006100e700e3006f002000650020006100200069006d0070007200650073007300e3006f00200063006f006e0066006900e1007600650069007300200064006500200064006f00630075006d0065006e0074006f007300200063006f006d0065007200630069006100690073002e0020004f007300200064006f00630075006d0065006e0074006f00730020005000440046002000630072006900610064006f007300200070006f00640065006d0020007300650072002000610062006500720074006f007300200063006f006d0020006f0020004100630072006f006200610074002000650020006f002000410064006f00620065002000520065006100640065007200200035002e0030002000650020007600650072007300f50065007300200070006f00730074006500720069006f007200650073002e>
    /SUO <FEFF004b00e40079007400e40020006e00e40069007400e4002000610073006500740075006b007300690061002c0020006b0075006e0020006c0075006f0074002000410064006f0062006500200050004400460020002d0064006f006b0075006d0065006e007400740065006a0061002c0020006a006f0074006b006100200073006f0070006900760061007400200079007200690074007900730061007300690061006b00690072006a006f006a0065006e0020006c0075006f00740065007400740061007600610061006e0020006e00e400790074007400e4006d0069007300650065006e0020006a0061002000740075006c006f007300740061006d0069007300650065006e002e0020004c0075006f0064007500740020005000440046002d0064006f006b0075006d0065006e00740069007400200076006f0069006400610061006e0020006100760061007400610020004100630072006f0062006100740069006c006c00610020006a0061002000410064006f00620065002000520065006100640065007200200035002e0030003a006c006c00610020006a006100200075007500640065006d006d0069006c006c0061002e>
    /SVE <FEFF0041006e007600e4006e00640020006400650020006800e4007200200069006e0073007400e4006c006c006e0069006e006700610072006e00610020006f006d002000640075002000760069006c006c00200073006b006100700061002000410064006f006200650020005000440046002d0064006f006b0075006d0065006e007400200073006f006d00200070006100730073006100720020006600f60072002000740069006c006c006600f60072006c00690074006c006900670020007600690073006e0069006e00670020006f006300680020007500740073006b007200690066007400650072002000610076002000610066006600e4007200730064006f006b0075006d0065006e0074002e002000200053006b006100700061006400650020005000440046002d0064006f006b0075006d0065006e00740020006b0061006e002000f600700070006e00610073002000690020004100630072006f0062006100740020006f00630068002000410064006f00620065002000520065006100640065007200200035002e00300020006f00630068002000730065006e006100720065002e>
    /ENU (Use these settings to create PDFs that match the "Suggested"  settings for PDF Specification 4.0)
  >>
>> setdistillerparams
<<
  /HWResolution [600 600]
  /PageSize [612.000 792.000]
>> setpagedevice