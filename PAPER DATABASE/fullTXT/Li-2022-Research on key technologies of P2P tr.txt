Research on key technologies of P2P transaction in virtual power plant based on blockchain
Received: 30 November 2021 - Revised: 26 February 2022 - Accepted: 22 March 2022 - IET Smart Grid
DOI: 10.1049/stg2.12064
REV I EW
Research on key technologies of P2P transaction in virtual power
plant based on blockchain
Bin Li1 | Fan Yang2 | Bing Qi2 | XueFeng Bai2 | Yi Sun2 | Songsong Chen1,3
1Beijing Key Laboratory of Demand Side Multi‐
Energy Carriers Optimization and Interaction
Technique, Beijing, China
2School of Electrical and Electronic Engineering,
North China Electric Power University, Beijing,
China
3China Electric Power Research Institute, Beijing,
China
Correspondence
Fan Yang, School of Electrical and Electronic
Engineering, North China Electric Power University,
Changping District, Beijing 102206, China.
Email: yang_fan68@163.com
Funding information
Beijing Key Laboratory of Demand Side Multi‐
Energy Carriers Optimization and Interaction
Technique, Grant/Award Number: YD80‐21‐001
Abstract
It is a critical part of increasing renewable energy accommodation by using virtual power
plant (VPP) to attain carbon neutrality. However, VPP applications primarily consider
VPP's participation in power market transactions as a whole and rarely consider the
transaction interaction between internal resources. VPP's internal resources complement
each other organically, and blockchain technology for distributed transactions has incor-
porated points. In this article, the authors undertake a study and examine the P2P scenario
of VPP internal transactions in light of the issues experienced by DERs transactions. Next,
the authors analyse the consensus mechanism, smart contract, inter‐blockchain technol-
ogy, and game theory, and how to apply them in the P2P scenarios of VPP internal
transactions. Further, the authors design the function of the DER transaction system,
which lays the foundation for the realisation of the system in the future. Finally, the authors
conclude that the potential of blockchain technology in P2P transactions between internal
entities of the VPP is significant and warrants further investigation.
KEYWORD S
blockchain, consensus mechanism, inter‐blockchain technology, P2P transaction, smart contract, virtual power
plant
1 | INTRODUCTION
1.1 | Motivation and related work
China must rapidly create a low‐carbon, clean, safe, and effi-
cient energy system to meet its 2030 objective of peaking
carbon emissions and becoming carbon neutral by 2060 [1, 2].
All types of renewable energy, such as solar energy, wind po-
wer, and hydropower, must be widely developed [3]. However,
because most renewable energy is unpredictable and uncertain,
it brings a lot of peak shaving and valley filling pressure to the
power system. By coordinating numerous distributed energy
sources to engage in power system operations, virtual power
plant (VPP) plays an important role in renewable energy ac-
commodation. Jibei North Power Trading Centre submitted
the Virtual Power Plant Flow Draft International Standard
(Virtual Power Plants: Use Cases) to IEC on Sept.18, 2020 [4].
VPP's technological advancements and application successes in
China have been described and condensed. The participation
of VPP in P2P trading of new energy power is regarded as one
of the development directions of the new power system in the
White Paper of China Southern Power Grid Corporation's
Action Plan for the Construction of New Power System,
released in May 2021 [5].
The critical factor that affects the security and efficiency of
transactions in VPP is how to coordinate DERs and control-
lable load. In the current electricity markets, most of them use
a centralised approach. However, the centralised coordination
method may increase transaction security risk and processing
time, so some decentralised methods are preferred [6–8].
Some experts and scholars have proposed several block-
chain applications in VPP [9–11]. Combined with electricity
trading, the business structure and transaction mode of VPP can
be established in the blockchain environment, and the VPP
energy certification and certificate transaction mode based on
blockchain technology can be designed [12]. By using PBFT and
equal consumption micro‐growth rate model, the economic
benefits of the VPP can be high‐speed improved [13]. It can be
This is an open access article under the terms of the Creative Commons Attribution‐NonCommercial‐NoDerivs License, which permits use and distribution in any medium, provided the
original work is properly cited, the use is non‐commercial and no modifications or adaptations are made.
© 2022 The Authors. IET Smart Grid published by John Wiley & Sons Ltd on behalf of The Institution of Engineering and Technology.
IET Smart Grid. 2022;5:223–233. wileyonlinelibrary.com/journal/stg2 - 223
https://doi.org/10.1049/stg2.12064
https://orcid.org/0000-0001-7544-8991
https://orcid.org/0000-0002-6836-8640
mailto:yang_fan68@163.com
https://orcid.org/0000-0001-7544-8991
https://orcid.org/0000-0002-6836-8640
https://ietresearch.onlinelibrary.wiley.com/journal/25152947
http://crossmark.crossref.org/dialog/?doi=10.1049%2Fstg2.12064&domain=pdf&date_stamp=2022-04-14
balanced between different agents for specific consensus
mechanisms to improve the robustness of the Security Con-
strained Economic Dispatch (SCED) algorithm [14]. A block-
chain network model suitable for the energy and electric power
industry is studied, and then the corresponding VPP scheduling
model is designed [15]. Considering the interoperability re-
quirements between blockchain, some key technologies of data
interaction of heterogeneous blockchain in the multi‐energy
system are analysed to support complex energy transactions
[16] smart contracts can be written on the Ethereum blockchain
platform to design P2P energy transaction schemes for VPP [17,
18]. For the application of game theory, when designing the
distributed strategy update algorithm (DSUA) based on a
distributed power dispatch algorithm (DPDA), the DSUA
considers the situation of suppliers' alternate or simultaneous
update of bids. Game theory analysis and simulation can show
the closeness of supplier bids to the Nash equilibrium [19].
Energy blockchain technology in DER transactions is
widely applied. There are few studies on the application of
inter‐blockchain technology in DER transactions, but there are
no relevant research results on the DER trading system within
VPP in which blockchain technology participates.
1.2 | Contribution
This paper applies the latest developments of blockchain to
P2P energy transactions within virtual power plants. The major
contributions of the article are summarised as follows.
(1) Comparing and sorting out different blockchain consensus
algorithms applicable to the DER transactions. Besides,
the application mode of the VPP smart contract and inter‐
Blockchain solution is studied.
(2) We have designed a DER P2P transaction system and
introduced a blockchain‐related functional design to sup-
port the future application of VPP interaction.
2 | DER TRADING CHALLENGES AND
APPLICABILITY ANALYSIS
2.1 | DER trading challenges
The DER trading mechanism is constantly changing as the
market changes.With the rapid development of information and
communication technology, it will produce a lot of new market
entities, that is, power generation enterprises, aggregators, third‐
party energy service providers etc. There are enormous chal-
lenges ahead for distributed VPP transactions, especially in an
untrusted environment [20].
(1) Various market entities
Even though the geo‐distributed owners of DERs show a
strong willingness to participate in the transaction of VPP, the
crisis of confidence makes them distrust each other [21, 22].
Additionally, the diverse requirement of information security
for owners complicates the transaction of VPP. Solving the
crisis of confidence and security of transaction information is
of strategic importance to the grid.
With the deregulation of the energy trading market in
China, increasing DERs participate in grid‐interactive projects.
For instance, the ancillary service market managed by State Grid
based on the Intelligent Vehicle Networking Platform is ex-
pected to connect more than 1 million charging piles and serve
3 million electric vehicles. To enable the transaction of
distributed energy and to enhance the management of the
market, the National Development and Reform Commission
(NDRC)and National Energy Administration released a series
of policies, where DER projects can choose to sell electricity
nearby within 110kV voltage level, and the buyers and sellers
can independently decide the transaction mode and transaction
price. Given this context, the grid and the owners of DERs
would break the ‘wall of selling electricity’. Those policies
reconstruct the original rules of power trading and that of the
power market [23].
(2) Electric power market risk
Compared with the traditional power market, the credit risk
in the P2P energy market will increase sharply. From the
perspective of the market mechanism, the lack of government
endorsement in the market makes profit‐seeking users have a
chance to engage in vicious competition at the trade fair. DER
aggregators have higher choices, which provides space for
market subjects to default [24]. All discourages further trans-
actions with DERs, and the grid will ultimately have to pay for
those risks. However, without proper trading mechanism
design, participants may engage in dishonest behaviour, which
further leads to a potential crisis of confidence and even market
failure [25].
(3) Complex business scenarios
Some regions or provinces establish different energy
trading rules of DERs. However, these rules are revised
frequently to match the dynamic trading demand of DERs,
which means that the share of energy transaction information
between regions would be difficult [26]. To make unified
management of geo‐distributed DERs, cross‐region interaction
schemes and trading rule contracts should be established to
solve the above problems.
2.2 | Applicability analysis
The following Figure 1 shows the VPP architecture based on
blockchain. The VPP control centre carries out business
interaction with the dispatching centre and the power market
at the upper level, and the lower level carries out business
interaction with distributed resource aggregators such as
electric vehicles, energy storage equipment, and controllable
loads. Each node in the VPP blockchain network has its own
224 - LI ET AL.
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
distributed ledger. The VPP control centre is responsible for
maintaining the status of each node and collecting transaction
requests, transaction records, and other tasks. Blockchain can
form a complete and reliable VPP distributed database, making
its distributed ledger impossible to tamper with.
It can make up for the deficiency of VPP with a fully
decentralised structure. The applicability of blockchain tech-
nology in virtual power plants is mainly as follows:
(1) DERs' Joint Maintenance and Supervision. The ledger data
in the blockchain has the right to common supervision and
access, and the blockchain transaction network made of
DERs has the right of common read and write access to
data, which greatly ensures the security and transparency
of transaction data.
(2) Automating P2P transactions. Smart contracts, which can
be triggered by an event and execute related activities ac-
cording to specified rules without the supervision of a third
party, can be written in the business system. Automatic
matching and transaction settlement are realised through
contract execution, drastically shortening the profit cycle
of distributed energy and enhancing transaction efficiency
[27, 28].
(3) Realising service convergence between different chains. The
scalability and compatibility of a fully decentralised VPPwill
be optimised by inter‐blockchain technology [29]. While
applying blockchain to internal transactions, different un-
derlying chains can be adapted according to different
transaction attributes. Inter‐blockchain technology can
realise business integration between different chains.
(4) Increasing fairness in the distribution of benefits. In
decentralised networks, how fairly distributing the profits
from node transactions is the key to improving the enthu-
siasm for distributed energy participation and response [30].
3 | KEY TECHNOLOGIES OF
BLOCKCHAIN APPLIED TO THE
INTERNAL TRANSACTION OF VPP
3.1 | DER consensus mechanism
In the application of blockchain technology in the P2P trans-
action of VPP, the VPP control centre controls the aggregation
of DER data, the data records in the traditional VPP are cen-
tralised. The transaction data of the generation side and the
demand side will be transferred to the main station for
recording. Still, the data is unsupervised and easily tampered
with internally. The appropriate accounting node will be selected
to synchronise the transaction information in the DER trans-
actions that join the blockchain consensus mechanism.
Although it is a P2P transaction, all nodes in the blockchain can
F I GURE 1 Blockchain‐based virtual power plant (VPP) architecture
LI ET AL. - 225
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
jointly supervise the transaction and realise the real‐time update
of the records of the whole network. As for the choice of
consensus mechanism in VPP, we should consider the re-
quirements of decentralisation degree, some security and
resource consumption issues in a specific environment. As
shown in Table 1, for comparison of some common consensus
algorithms, the proof consensus algorithm should be preferred
in the scenario with a high requirement for decentralisation such
as Proof ofWork (PoW) [31], Proof of Stake (PoS) [32], Proof of
Majority (PoM) [33], Proof of Authority (PoA) [34], Proof of
Contribution (PoC) [35] etc. It can also adapt to different sce-
narios to improve the specific algorithm. For example, it can
refer to the largest shareholder in the PoS algorithm as the ac-
counting node. The VPP can select the node with the largest
power generation and consumption as the accounting node to
achieve the consensus accounting of the whole network [36].
Considering resource consumption, consensus algorithms such
as PoS and DPoS should be considered the main priority.
However, there are some security problems in using proof al-
gorithms, such as a 51% attack [37], Solar Eclipse attack on PoW,
selfish mining and rights centralisation, and DDoS attack on
disinterested DPoS of PoS. In the case of high‐security re-
quirements, another type of consensus algorithm, distributed
consensus algorithm, should be considered. The standard al-
gorithms are Practical Byzantine Fault Tolerance algorithm
(PBFT) [38], Paxos algorithm [39], Raft algorithm [40], Gossip
algorithm [41], Zab algorithm [42], and so on. However, the
degree of decentralisation of this kind of algorithm is not as
good as that of proof algorithms, so we should consider the
requirement of centralisation when using this kind of algorithm.
Since most application scenarios within VPP should first
consider security, reliability, and capacity issues. For example,
PBFT can solve Byzantine problems and accommodate the
wrong nodes. The raft algorithm can adjust the faulty nodes in a
complex network environment and ensure the balance of the
whole network based on the security of nodes with odd
numbers.
VPP operators need to consider the DERs requirement
from different entities and use different consensus algorithms,
the following Figure 2, combined with inter‐blockchain tech-
nology, we can design given the hierarchical partitioning of the
VPP internal consensus solution. In such a situation, after
reaching an agreement with themaster node's consensus node, it
can enter or leave the chain at any time without affecting the
total transaction.
3.2 | Smart VPP contract
The demand and generation sides of traditional VPP internal
transactions are hard to execute P2P transactions safely. A
centralised node needs specific procedures to collect demand
information from each trading side. Throughout the process,
the third‐party supervision node needs to assure information
security so that the execution efficiency is very low. ‘Event
triggering’ is used to carry out smart contracts. The logic of
P2P transactions is equipped with different smart contracts
and can be triggered automatically [44]. All transaction pro-
cessing and preservation methods, as well as a comprehensive
state machine for accepting and processing multiple smart
contracts, are included in smart contracts. Each contract's state
machine and trigger condition are traversed by the smart
contract regularly, and when it meets the trigger condition it is
pushed into the queue to be validated. The to‐be‐confirmed
contract will be sent to each node for confirmation.
P2P secure transactions, which apply blockchain, can be
realised without the participation of a third party. DER
aggregators can be regarded as blockchain nodes. After the
VPP aggregator authenticates the identity of each DER node
and before the opening of the internal trading market, the
demand side and generation side resources can sign contracts
to collect the demand for DERs, formulate smart contracts,
and store them in the chain. The transaction process will
automatically generate information and store it in the block-
chain according to the conditions stated in the smart contract,
which will settle in real‐time in the form of e‐CNY. Compared
with the traditional trading market, the smart contract sim-
plifies the transaction process, which plays a corresponding
role in the process of identity authentication, subject matching,
audit, and settlement, improves trading efficiency, and ensures
trade security.
Take P2P transactions of EVs (Electric Vehicles) [45] as an
example (Figure 3). Emergency transaction requests can be
sent to the P2P blockchain trading platform immediately. The
platform keeps a smart contract signed by the EV user and
indicates the demand. After the platform receives the demand
information sent by the emergency demand user, if users meet
the requirements, they will automatically match the transaction.
The whole network supervises the transaction process and
keeps it in the chain. In this way, users with charging and
discharging demand can give up the right to use energy without
an urgent need, and the whole market can achieve efficient P2P
transactions.
3.3 | VPP combination chain technology
In P2P DER transactions, several blockchains can be used
depending on the transaction attributes. If there are different
data chains, the blockchain's data‐sharing and value transfer will
become unreliable, which makes business circulation difficult to
realise. Inter‐blockchain technology enables business value ac-
commodation between different networks while also improving
blockchain scalability. Using combination blockchain technol-
ogies allows for the flexible interaction of resources between
chains while yet allowing for efficient transaction processing.
The following Figure 4, shows the transaction diagram of
DERs based on the combination chains. Based on Polkadot's
idea [46] and different internal resource attributes, this article
divides VPP into a demand Relay chain, DG (Distributed
Generation) Relay chain, and energy storage Relay chain. Each
VPP chain is composed of some Parachains and a Relay chain
[47]. The inter‐blockchain [48] P2P transaction design can be
applied to the transaction of large multi‐energy and realise the
226 - LI ET AL.
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
T
A
B
L
E
1
C
om
pa
ris
on
of
co
ns
en
su
s
al
go
rit
hm
s
fo
r
vi
rt
ua
lp
ow
er
pl
an
t
(V
PP
)
T
yp
e
P
oX
al
go
ri
th
m
s
D
is
tr
ib
ut
ed
co
ns
is
te
nc
y
al
go
ri
th
m
A
lg
or
ith
m
P
oW
P
oA
P
oS
D
P
oS
P
B
F
T
Pa
xo
s
R
af
t
Pr
oj
ec
ts
B
itc
oi
n/
Li
te
co
in
/
B
itc
oi
n‐
N
G
/
G
H
O
ST
/E
th
er
eu
m
Po
A
.N
et
w
or
k
Pe
er
co
in
/C
ar
da
no
/
B
la
ck
co
in
E
O
S/
B
its
ha
re
H
yp
er
le
ge
r
Fa
br
ic
/C
ita
/r
ip
pl
e
W
Pa
xo
s/
C
hu
bb
y/
H
yp
er
ta
bl
e
Fa
br
ic
/A
llu
xi
o/
et
c
H
as
h
C
om
pu
ta
tio
n
H
L
L
L
H
H
L
Se
cu
rit
y
M
(5
1%
at
ta
ck
,e
cl
ip
se
at
ta
ck
,s
el
fis
h
m
in
in
g)
M
(M
al
ic
io
us
no
de
s,
pr
iv
ac
y
iss
ue
s)
H
(5
1%
at
ta
ck
,n
o
in
te
re
st
[4
3]
)
L
(p
ow
er
ce
nt
re
,
D
D
oS
at
ta
ck
)
H
(<
33
.3
3%
co
m
m
on
no
de
/
<
33
.3
3%
co
m
m
on
no
de
/<
20
%
co
m
m
on
no
de
H
(n
o
m
al
ic
io
us
no
de
)
H
(n
o
m
al
ic
io
us
no
de
)
T
hr
ou
gh
pu
t/
T
PS
<
20
T
PS
<
40
0T
PS
≥
25
T
PS
>
30
0T
PS
>
10
00
T
PS
>
50
00
T
PS
>
50
00
T
PS
B
lo
ck
ge
ne
ra
tio
n
tim
e/
s
30
0s
5s
64
s
3s
0.
5s
2s
2s
Tr
ad
e
co
nfi
rm
at
io
n
T
im
e/
s
60
s
10
s
30
s
10
s
Im
m
ed
ia
te
ly
co
nfi
rm
(1
s)
1s
1s
Fa
ul
t
to
le
ra
nc
e
1/
2
1/
2
1/
2
1/
2
1/
3
0
0
D
iv
ar
ic
at
in
g
H
H
H
N
N
L
L
D
el
ay
ed
H
L
H
L
L
L
L
Sc
al
ab
ili
ty
L
L
L
H
H
H
H
E
ne
rg
y
co
ns
um
pt
io
n
H
H
L
L
L
H
L
A
pp
lic
ab
le
sc
en
ar
io
La
rg
e‐
sc
al
e
V
PP
tr
an
sa
ct
io
ns
w
ith
in
th
e
ca
m
pu
s
T
he
de
gr
ee
of
de
ce
nt
ra
lis
at
io
n
is
hi
gh
an
d
th
e
sc
al
e
is
sm
al
l
La
rg
e‐
sc
al
e
V
PP
tr
an
sa
ct
io
ns
w
ith
in
th
e
ca
m
pu
s
La
rg
e‐
sc
al
e
V
PP
tr
an
sa
ct
io
ns
w
ith
in
th
e
ca
m
pu
s
C
om
pl
ex
ne
tw
or
k
tr
ad
in
g
en
vi
ro
nm
en
t
C
om
pl
ex
ne
tw
or
k
tr
ad
in
g
en
vi
ro
nm
en
t
C
om
pl
ex
ne
tw
or
k
tr
ad
in
g
en
vi
ro
nm
en
t
N
ot
e:
H
(H
ig
h)
,L
(L
ow
),
N
(N
or
m
al
).
LI ET AL. - 227
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
F I GURE 2 Schematic diagram of composite consensus mechanism
F I GURE 3 P2P transaction diagram of electric vehicle based on smart contract
228 - LI ET AL.
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
interoperability of the internal resource chain of the VPP. In
the combined chain architecture, the slots in the Parachain can
ensure that each transaction ledger is stored and the demand
(generation data is updated) in real‐time. Each Relay chain
uniformly manages the operation and consensus of the Para-
chains in the region, and all the light nodes are directly inte-
grated into the Relay chain. All data, including the main chain
and side chain [49] data, need to be verified by the Relay chain
before data sharing (Cross Chain Message Passing Protocol
Data Transfer).
Different participating entities will receive the demand and
price information. Each DER can also participate in bidding as
a parallel thread. When parallel DERs want to participate in
energy trading, they can take part in the auction, which will
take place in each relay block of the DG chain, and send
authentication information to the main chain after passing the
side chain verification. SPV bi‐directional anchoring technol-
ogy is applied to realise the secure transaction of each chain
resource through multiple verifications. In addition, under the
combination chain system, in the smart contract, we can
further introduce some authority mechanisms, reward/pun-
ishment mechanisms, and supervision audit schemes in the
relay chain to promote the enthusiasm of internal P2P traders.
In summary, the inter‐blockchain technology supports data
flow and contract call between homogeneous (heterogeneous)
blockchain and ensures contract call data flow and atomicity
through multiple relay‐chain verifications.
3.4 | Benefit distribution of DERs based on
game theory
Research on VPP mainly focusses on overall external charac-
teristics and VPP participation in market bidding. Few studies
have considered the P2P coordination strategy, operation
mechanism, and individual benefit analysis between internal
DERs of VPP [50–52]. When VPP participates in bidding
transactions in the power market, VPP operators issue
scheduling orders to DSO and coordinate and control DERs.
In the settlement, the power market will issue the confirmed
cost of products, and after the settlement, VPP operators will
distribute interests to DER. Figure 5 is the block diagram of
the bidding transaction.
In the absence of any incentive mechanism, especially
when the internal DER belongs to different investment sub-
jects, it is challenging to truly realise centralised scheduling and
complementary operation. Therefore, considering the market
mechanism of complementary process inside VPP and the
diversified interest demands of different participants, a new
interest distribution scheme is designed by combining the
economics technology in blockchain, namely the game theory,
to improve the efficiency of P2P transactions on both sides
inside the VPP.
From the perspective of game theory, the distributed
consensus and transaction rights of blockchain are consensus
systems that achieve Nash equilibrium [53, 54]. Game theory
F I GURE 4 Transaction architecture diagram of virtual power plant (VPP) based on composite chain
LI ET AL. - 229
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
can develop some incentive mechanisms to prevent nodes
from improper execution or attack. Game theory can be
divided into Cooperative game and Non‐Cooperative game.
The Non‐Cooperative game emphasises maximising self‐
interest, and the Cooperative game emphasises collectivism,
group rationality, fairness, and justice. Considering the internal
bidding of DERs in the VPP, if there are some conflicts of
interest among various controllable resources in the internal
reserve market, the Non‐Cooperative game is preferred. Sup-
pose we do not consider the internal bidding of VPP, but
participate in the market bidding as a whole to distribute the
benefits internally. In that case, we should prioritise using the
cooperative game to maximise the output of DERs. When
considering the internal benefit distribution of VPP, game
theory should be based on the characteristics of DG output,
generation cost, expected profit, and other needs, based on the
features of conflict of interest and self‐benefit of various DG
investors in the market competition, and the information of
each DG is not entirely public, to design a bidding scheme of
controllable DG participating in internal reserve market based
on Non‐Cooperative game theory. Typical models of incom-
plete information games are mainly the Cournot Model,
Stackberg Sequential game Model, Supply Function Model etc.
[55]. By comparison, the electricity market price is usually
determined by the total market demand and the supply func-
tion of each producer, so the supply function model is often
considered in the internal bidding of VPP, and its strategy is to
make the bidding curve with the maximum profit as the goal
[56]. For Cooperative game that participates in the electricity
market as a whole, the profit distribution can be based on the
Cooperative game theory of the Shapley value method to
create a new way to maximise the profit distribution of internal
resources [57]. Taking the cooperative operation of wind po-
wer generation and electric vehicles as an example, the profit
distribution problem between wind power suppliers and EV
aggregators in the Cooperative game can be solved by intro-
ducing the bidding deviation punishment mechanism and
designing the profit distribution method according to the un-
certainty factors of wind power suppliers. They are making full
use of the Shapley value method to solve the uncertainty fac-
tors of wind power suppliers.
4 | BLOCKCHAIN TECHNOLOGY IS
APPLIED TO THE FUNCTION DESIGN
OF P2P TRANSACTION OF DERs
This section presents the key technology of blockchain for
DER P2P transactions from three aspects, that is, the service
system, the aggregate system, and the terminal. We have
mapped different blockchain functions (contract functions,
traceability functions, inter‐blockchain information sharing
functions, security management functions, and game func-
tions) to different VPP functions. Table 2 shows the procedure
in detail:
5 | CONCLUSIONS
This paper discusses the current challenges of distributed en-
ergy transactions within VPP. The application of consensus al-
gorithms, smart contracts, inter‐blockchain technology,
F I GURE 5 Block diagram of virtual power plant (VPP) bidding transaction
230 - LI ET AL.
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
T
A
B
L
E
2
V
irt
ua
lp
ow
er
pl
an
t
(V
PP
)
di
st
rib
ut
ed
en
er
gy
re
so
ur
ce
P2
P
tr
an
sa
ct
io
n
fu
nc
tio
n
V
P
P
di
st
ri
bu
te
d
en
er
gy
re
so
ur
ce
P
2P
tr
an
sa
ct
io
n
Sy
st
em
fu
nc
tio
n
Se
rv
ic
e
sy
st
em
A
gg
re
ga
te
sy
st
em
T
er
m
in
al
U
se
r
m
an
ag
em
en
t
fu
nc
tio
n
U
se
r
re
gi
st
ra
tio
n
A
(M
)B
(O
)C
(O
)D
(M
)E
(O
)
A
(M
)B
(M
)C
(M
)D
(M
)E
(O
)
A
(M
)B
(−
)C
(O
)D
(M
)E
(O
)
Pe
rm
iss
io
ns
A
(M
)B
(O
)C
(−
)D
(M
)E
(O
)
A
(M
)B
(O
)C
(O
)D
(M
)E
(O
)
A
(M
)B
(−
)C
(O
)D
(M
)E
(−
)
In
fo
rm
at
io
n
qu
er
y
A
(M
)B
(M
)C
(M
)D
(M
)E
(−
)
A
(M
)B
(M
)C
(M
)D
(M
)E
(−
)
A
(M
)B
(M
)C
(M
)D
(M
)E
(−
)
Pr
oj
ec
t
m
an
ag
em
en
t
fu
nc
tio
n
Pr
oj
ec
t
bu
ild
A
(O
)B
(O
)C
(−
)D
(M
)E
(−
)
A
(O
)B
(O
)C
(O
)D
(M
)E
(O
)
A
(O
)B
(−
)C
(O
)D
(M
)E
(−
)
Pr
oj
ec
t
re
le
as
ed
A
(O
)B
(O
)C
(M
)D
(M
)E
(O
)
A
(O
)B
(O
)C
(O
)D
(M
)E
(−
)
A
(O
)B
(−
)C
(O
)D
(M
)E
(O
)
Pr
oj
ec
t
up
da
te
A
(O
)B
(O
)C
(M
)D
(M
)E
(O
)
A
(O
)B
(M
)C
(O
)D
(M
)E
(−
)
A
(O
)B
(−
)C
(O
)D
(M
)E
(O
)
D
el
et
e
A
(O
)B
(O
)C
(M
)D
(M
)E
(−
)
A
(O
)B
(−
)C
(M
)D
(M
)E
(−
)
A
(O
)B
(−
)C
(O
)D
(M
)E
(−
)
Re
so
ur
ce
m
an
ag
em
en
t
fu
nc
tio
n
Pa
ra
m
et
er
m
ai
nt
en
an
ce
A
(M
)B
(M
)C
(−
)D
(M
)E
(−
)
A
(M
)B
(M
)C
(−
)D
(M
)E
(O
)
A
(M
)B
(O
)C
(−
)D
(M
)E
(−
)
A
cq
ui
sit
io
n
co
nt
ro
l
A
(O
)B
(M
)C
(O
)D
(M
)E
(−
)
A
(M
)B
(M
)C
(O
)D
(M
)E
(O
)
A
(O
)B
(−
)C
(M
)D
(M
)E
(O
)
E
ve
nt
m
an
ag
em
en
t
fu
nc
tio
n
E
ve
nt
no
tifi
ca
tio
n
A
(M
)B
(O
)C
(M
)D
(M
)E
(O
)
A
(M
)B
(M
)C
(O
)D
(M
)E
(−
)
A
(−
)B
(−
)C
(O
)D
(−
)E
(O
)
Re
gu
la
to
ry
or
de
r
iss
ui
ng
A
(M
)B
(M
)C
(M
)D
(M
)E
(O
)
A
(O
)B
(M
)C
(O
)D
(M
)E
(O
)
A
(−
)B
(O
)C
(M
)D
(−
)E
(O
)
Lo
ad
co
nt
ro
l
A
(M
)B
(M
)C
(O
)D
(M
)E
(O
)
A
(M
)B
(O
)C
(O
)D
(M
)E
(−
)
A
(O
)B
(−
)C
(−
)D
(O
)E
(−
)
Im
pl
em
en
t
ef
fe
ct
m
an
ag
em
en
t
fu
nc
tio
n
A
(M
)B
(M
)C
(O
)D
(M
)E
(O
)
A
(M
)B
(M
)C
(O
)D
(M
)E
(O
)
A
(M
)B
(M
)C
(O
)D
(M
)E
(O
)
O
th
er
fe
at
ur
es
Se
cu
rit
y
m
an
ag
em
en
t
fu
nc
tio
n
A
(M
)B
(M
)C
(M
)D
(M
)E
(O
)
A
(M
)B
(O
)C
(M
)D
(M
)E
(O
)
A
(−
)B
(O
)C
(−
)D
(M
)E
(O
)
A
ut
om
at
ic
ex
ec
ut
io
n
fu
nc
tio
n
A
(M
)B
(−
)C
(O
)D
(M
)E
(−
)
A
(O
)B
(−
)C
(O
)D
(M
)E
(−
)
A
(M
)B
(O
)C
(O
)D
(O
)E
(O
)
M
an
ua
li
nt
er
ve
nt
io
n
m
an
ag
em
en
t
fu
nc
tio
n
A
(O
)B
(M
)C
(O
)D
(M
)E
(−
)
A
(O
)B
(O
)C
(O
)D
(M
)E
(−
)
A
(O
)B
(O
)C
(−
)D
(M
)E
(−
)
A
bb
re
vi
at
io
ns
:A
,c
on
tr
ac
t
fu
nc
tio
ns
;B
,t
ra
ce
ab
ili
ty
fu
nc
tio
ns
;C
,i
nt
er
‐b
lo
ck
ch
ai
n
in
fo
rm
at
io
n
sh
ar
in
g
fu
nc
tio
ns
;D
,s
ec
ur
ity
m
an
ag
em
en
t
fu
nc
tio
ns
;E
,g
am
e
fu
nc
tio
ns
;‘
M
’,
in
di
ca
te
s
a
m
an
da
to
ry
fu
nc
tio
n;
‘O
’,
in
di
ca
te
s
an
op
tio
na
lf
un
ct
io
n;
‘─
’,
in
di
ca
te
s
th
at
th
is
fu
nc
tio
n
is
un
av
ai
la
bl
e.
LI ET AL. - 231
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
and game theory are analysed. In addition, the DER P2P
transaction function is designed. This system function design
provides a theoretical research foundation for the imple-
mentation of blockchain technology for DER P2P transaction
systems. In the future, we will implement the system based on
the system functions to provide a reliable and convenient trading
environment for DER P2P transactions. At present, China is
vigorously promoting distributed power generation. The
application of blockchain technology to DER transactions
within VPP can promote renewable energy accommodation and
clean power generation. We hope that the research study in this
article will have particular reference significance for the devel-
opment of related applications.
ACKNOWLEDGEMENTS
This work was supported by the projects from Beijing Key
Laboratory of Demand Side Multi‐Energy Carriers Optimiza-
tion and Interaction Technique (YD80‐21‐001).
CONFLICT OF INTEREST
We do not have any conflict of interest to disclose.
PERMISSION TO REPRODUCE MATERIALS
FROM OTHER SOURCES
None.
DATA AVAILABILITY STATEMENT
Data sharing not applicable to this article as no datasets were
generated or analysed during the current study.
ORCID
Bin Li https://orcid.org/0000-0001-7544-8991
Fan Yang https://orcid.org/0000-0002-6836-8640
REFERENCES
1. Guo, W., Tang, R.: Electric power industry under 2060 carbon neutral
target. Energy. 11, 8 (2020)
2. People's Daily: Fully implement Xi Jinping thought on ecological civili-
zation to ensure the goal of carbon peak carbon neutrality as scheduled.
001 (2021)
3. Zhang, H., et al.: Collaborative two‐stage day‐ahead optimization
scheduling of microgrid supply and demand with WCVaR evaluation.
Auto. Elect. Power Syst. 45(2), 9 (2021)
4. The IEC International Standard for virtual power plants for energy
transition. North China Electr. Ind. (01), 50–51 (2021)
5. Rahimi, M., Ardakani, F.J., Ardakani, A.J.: Optimal stochastic scheduling
of electrical and thermal renewable and non‐renewable resources in
virtual power plant. Int. J. Electr. Power Energy Syst. 127, 106658 (2021)
6. Saxena, S., et al.: Blockchain based transactive energy systems for voltage
regulation in active distribution networks. IET Smart Grid. 3(5), 646–656
(2020)
7. Xu, J., et al.: Bidding transaction platform for distributed electrical energy
based on blockchain. Xi’an Smart Power. 47(10), 56–62 (2019)
8. Aoun, A., et al.: A review of Industry 4.0 characteristics and challenges,
with potential improvements using blockchain technology. Comput.
Indust. Eng. 162, 107746 (2021)
9. Wang, Z., et al.: AEBIS: AI‐enabled blockchain‐based electric vehicle
integration system for power management in smart grid platform. IEEE
Access. 8, 226409–226421 (2020)
10. Cioara, T., et al.: Blockchain‐based decentralised virtual power plants of
small prosumers. IEEE Access. 9, 29490–29504 (2021)
11. Li, Z., Chen, S., Zhou, B.: Electric vehicle peer‐to‐peer energy trading
model based on SMEs and blockchain. IEEE Trans. Applied Supercond.
31(8), 1–4 (2021)
12. Zhou, H., et al.: Research on trading pattern of virtual power plant based
on blockchain technology. Power Demand Side Manag. 23(1), 72–76
(2021)
13. Zhou, G., Li, G.: Research on distributed scheduling strategy of virtual
power plant considering blockchain. Comput. Eng. Appl. 56(15),
268–273 (2020)
14. Chen, S., et al.: A distributed and robust security‐constrained economic
dispatch algorithm based on blockchain. IEEE Trans. Power Syst. 37(1),
691–700 (2021)
15. She, W., et al.: Virtual power plant operation and scheduling model based
on energy blockchain network. Proc. CSEE. 37(13), 3729–3736 (2017)
16. Li, B., et al.: Multi‐energy system transaction system and key technologies
based on heterogeneous blockchain. Auto. Electr. Power Syst. 42(4),
183–193 (2018)
17. Seven, S., et al.: Peer‐to‐peer energy trading in virtual power plant based
on blockchain smart contracts. IEEE Access. 8, 175713–175726 (2020)
18. Ping, J., et al.: Decentralized transactive mechanism in distribution
network based on smart contract. Proc. CSEE. 37(13), 3682–3690 (2017)
19. Chen, S., et al.: Accommodating strategic players in distributed algo-
rithms for power dispatch problems. IEEE Trans. Cybernet. (2021)
20. Yan, X.: Research on Blockchain Technology for Multi‐agent Participa-
tion in Power Market. North China Electric Power University, Beijing
(2020)
21. Brousmichc, K.L., et al.: Blockchain energy market place evaluation: an
agent‐based approach. In: IEEE 9th Annual Information Technology,
Electronics and Mobile Communication Conference (IEMCON), pp.
321–327. IEEE (2018)
22. Li, G., et al.: Incentivizing distributed energy trading among prosumers:
A general Nash bargaining approach. Int. J. Elect Power Energy Syst.
131, 107100 (2021)
23. The guidance of Energy Bureau of Development and Reform Com-
mission on accelerating the development of new energy storage. Bull.
State Council Peoples Rep. China. 25, 43–46 (2021)
24. She, W., et al.: Decentralized allocation of power resources based on user
preferences. Power Syst. Auto. 43, 98–105 (2019)
25. Chen, S., et al.: A trusted energy trading framework by marrying
blockchain and optimization. Adv. Appl. Energy. 2, 100029 (2021)
26. Qin, Q.: Research on Blockchain Technology Supporting Client‐Side
Distributed Energy Transaction. North China electric power university,
Beijing (2021)
27. Wang, B., et al.: Transaction mechanism of demand response resource
considering credit in blockchain environment. Auto. Elect. Power Syst.
45(05), 30–38 (2021)
28. Li, B., et al.: A preliminary study of block chain based automated demand
response system. Proc. CSEE. 37(13), 3691–3702 (2017)
29. Xuan, J., et al.: Distributed energy transaction based on multi‐chain
collaborative blockchain. Electr. Power Const. 42(11), 34–43 (2021)
30. Li, Y., et al.: Design and management of a distributed hybrid energy
system through smart contract and blockchain. Appl. Energy. 248,
390–405 (2019)
31. He, J., et al.: A highly reliable consensus mechanism for blockchain based
on contribution and difficulty values. Chin. J. Comp. 44(01), 162–176
(2021)
32. Saad, M., Qin, Z., Ren, K.: e‐PoS: making proof‐of‐stake decentralized
and fair. IEEE Trans. Parall. Distrib. Syst. 32(08), 1961–1973 (2021)
33. Kim, J.T., Jin, J., Kim, K.: A study on an energy‐effective and secure
consensus algorithm for private blockchain systems (PoM: Proof of
Majority). In: International Conference on Information and Communi-
cation Technology Convergence (ICTC), pp. 932–935. IEEE (2018)
34. Toyoda, K., et al.: Function‐level bottleneck analysis of private proof‐of‐
authority ethereum blockchain. IEEE Access. 8, 141611–141621 (2020)
35. Xue, T., et al.: Proof of contribution: a modification of proof of work to
increase mining efficiency. In: IEEE 42nd Annual Computer Software
and Applications Conference (COMPSAC), vol. 1, pp. 636–644, IEEE
(2018)
232 - LI ET AL.
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
https://orcid.org/0000-0001-7544-8991
https://orcid.org/0000-0001-7544-8991
https://orcid.org/0000-0002-6836-8640
https://orcid.org/0000-0002-6836-8640
https://orcid.org/0000-0001-7544-8991
https://orcid.org/0000-0002-6836-8640
36. Jiang, W., et al.: Design of energy blockchain platform for optimized
dispatch of user‐side source storage resources. Auto. Electr. Power Syst.
45(12), 11–19 (2021)
37. Sun, Y., Fan, L., Hong, X.: Technology development and application of
blockchain: current status and challenges. Strat. Study Chin. Acad. Eng.
20(2), 27–32 (2018)
38. Li, Y.,Qiao, L., Lv, Z.: An optimized byzantine fault tolerance algorithm for
consortium blockchain. Peer‐to‐Peer Netw. Appl. 14(5), 2826–2839 (2021)
39. Konczak, J., et al.: Recovery algorithms for paxos‐based state machine
replication. IEEE Trans. Depend. Secure Comput. 18(02), 623–640
(2021)
40. Huang, D., et al.: RBFT: byzantine fault‐tolerant consensus mechanism
based on raft cluster. J. Commun. 42(03), 209–219 (2021)
41. Srivastava, S., et al.: CGP: cluster‐based gossip protocol for dynamic
resource environment in cloud. Simul. Model. Pract. Theory. 108, 102275
(2021)
42. Zhu, Y.: Research and Implementation of Distributed Coordination
Service Based on Object. Zhejiang University (2016)
43. Tian, H., Zhao, J.: Review of blockchain consensus mechanism for
Internet of Things. J. Comput. Appl. 41(04), 917–929 (2021)
44. He, H., Yan, A., Chen, Z.: Review of smart contract technology and
application based on blockchain. J. Comput Res. Dev. 55(11), 2452–2466
(2018)
45. Jia, Q., et al.: Blockchain‐based distribution of air‐conditioning load
power usage rights: models and methods. Proc. Chin. Soc. Electr. Eng.
40(11), 3393–3402 (2020)
46. The Parachain Advantage. Exploring Polkadot's Next‐Generation Model
[EB/OL]. https://polkadot.network/blog/the‐parachain‐advantage‐
exploring‐polkadots‐next‐generation‐model/
47. Ye, S., et al.: BitXHub: side‐relay chain base heterogeneous blockchain
interoperable platform. Comput. Sci. 47(06), 294–302 (2020)
48. Kan, L., et al.: A multiple blockchains architecture on inter‐blockchain
communication. In: IEEE International Conference on Software Quality,
Reliability and Security Companion (QRS‐C), pp. 139–145 (2018)
49. Li, D., Huo, Y.: Research on cross‐domain authentication of power
Internet of things based on side chain technology. Electr. Power Eng.
Technol. 39(06), 8–12 (2020)
50. Ling, Y.: Research on Internal Bidding Mechanism of Virtual Power Plant
Base on Game Theory. North China Electric Power University (2016)
51. Li, L., et al.: Virtual power plant risk aversion model and profit distri-
bution method under power market. Electr. Power Const. 42(01), 67–75
(2021)
52. Qin, T., et al.: Bargaining game theory based on the distributed energy
cooperation profit distribution model. Electr. Power. Auto. Equip.
33(01), 134–140 (2019)
53. Jiang, Y., et al.: Electricity trading pricing among prosumers with game
theory‐based model in energy blockchain environment. Appl. Energy.
271, 115239 (2020)
54. Song, L., Li, T., Wang, Y.: Applications of game theory in blockchain. J.
Cryptol. Res. 6(01), 100–111 (2019)
55. Wang, Y., et al.: Evaluation of economic benefits of virtual power plant
between demand and plant sides based on cooperative game theory.
Energy Conv. Manag. 238, 114180 (2019)
56. Doan, H.T., Cho, J., Kim, D.: Peer‐to‐peer energy trading in smart grid
through blockchain: a double auction‐based game theoretic approach.
IEEE Access. 9, 49206–49218 (2021)
57. Yiran, L., et al.: Improvement of the PoS consensus mechanism in
blockchain based on Shapley value. J. Comput. Res. Dev. 55(10), 2208
(2018)
How to cite this article: Li, B., et al.: Research on key
technologies of P2P transaction in virtual power plant
based on blockchain. IET Smart Grid. 5(4), 223–233
(2022). https://doi.org/10.1049/stg2.12064
LI ET AL. - 233
 25152947, 2022, 4, D
ow
nloaded from
 https://ietresearch.onlinelibrary.w
iley.com
/doi/10.1049/stg2.12064 by C
ity U
niversity O
f H
ong K
ong, W
iley O
nline L
ibrary on [15/04/2023]. See the T
erm
s and C
onditions (https://onlinelibrary.w
iley.com
/term
s-and-conditions) on W
iley O
nline L
ibrary for rules of use; O
A
 articles are governed by the applicable C
reative C
om
m
ons L
icense
https://polkadot.network/blog/the-parachain-advantage-exploring-polkadots-next-generation-model/
https://polkadot.network/blog/the-parachain-advantage-exploring-polkadots-next-generation-model/
https://doi.org/10.1049/stg2.12064
	Research on key technologies of P2P transaction in virtual power plant based on blockchain
	1 | INTRODUCTION
	1.1 | Motivation and related work
	1.2 | Contribution
	2 | DER TRADING CHALLENGES AND APPLICABILITY ANALYSIS
	2.1 | DER trading challenges
	2.2 | Applicability analysis
	3 | KEY TECHNOLOGIES OF BLOCKCHAIN APPLIED TO THE INTERNAL TRANSACTION OF VPP
	3.1 | DER consensus mechanism
	3.2 | Smart VPP contract
	3.3 | VPP combination chain technology
	3.4 | Benefit distribution of DERs based on game theory
	4 | BLOCKCHAIN TECHNOLOGY IS APPLIED TO THE FUNCTION DESIGN OF P2P TRANSACTION OF DERs
	5 | CONCLUSIONS
	ACKNOWLEDGEMENTS
	CONFLICT OF INTEREST
	PERMISSION TO REPRODUCE MATERIALS FROM OTHER SOURCES
	DATA AVAILABILITY STATEMENT