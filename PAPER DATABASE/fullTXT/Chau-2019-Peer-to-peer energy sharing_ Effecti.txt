Peer-to-Peer Energy Sharing: Effective Cost-Sharing Mechanisms and Social Efficiency
Peer-to-Peer Energy Sharing:
Effective Cost-Sharing Mechanisms and Social Efficiency
Sid Chi-Kin Chau, Jiajia Xu
Australian National University
{sid.chau,jiajia.xu}@anu.edu.au
Wilson Bow
James Cook University
wilson.bow@my.jcu.edu.au
Khaled Elbassioni
Khalifa University
khaled.elbassioni@ku.ac.ae
ABSTRACT
P2P (peer-to-peer) energy sharing allows household users to share
their local energy resources (e.g., rooftop PVs, home batteries) based
on an agreed cost-sharing mechanism (e.g., implemented as a smart
contract over a blockchain ledger). Sharing energy resources is
becoming a new form of sharing economy. This not only promotes
renewable energy adoption among household users but also opti-
mizes their energy resources efficiently. However, household users
are self-interested and incentive-driven. It is not clear how to moti-
vate them to team up for energy sharing, and what proper economic
mechanisms are to incentivize them to do so in a socially efficient
way. This paper sheds light on the economic principles of cost-
sharing mechanisms for P2P energy sharing. We investigate P2P
energy sharing scenarios of direct connections and grid settlement
with simple cost-sharing mechanisms (e.g., proportional-split, bar-
gaining games), and the subsequent stable coalitions, such that no
group of users will deviate to form other coalitions. We characterize
the social efficiency of P2P energy sharing by the strong price of
anarchy that compares the worst-case stable coalitions and a social
optimum. We show that the strong price of anarchy is mild, both in
practice (by an extensive data analysis on a real-world P2P energy
sharing project) and in theory (by a small bound in general settings).
This can hence bolster the viability of P2P energy sharing.
KEYWORDS
Peer-to-Peer Energy Sharing; Sharing Economy; Cost-SharingMech-
anisms; Social Efficiency; Strong Price of Anarchy;
ACM Reference Format:
Sid Chi-Kin Chau, Jiajia Xu, Wilson Bow, and Khaled Elbassioni. 2019. Peer-
to-Peer Energy Sharing: Effective Cost-Sharing Mechanisms and Social
Efficiency. In Proceedings of the Tenth ACM International Conference on
Future Energy Systems (e-Energy ’19), June 25–28, 2019, Phoenix, AZ, USA.
ACM,NewYork, NY, USA, 11 pages. https://doi.org/10.1145/3307772.3328312
1 INTRODUCTION
The energy sector is undergoing crucial transformative changes.
First, as a global endeavor to mitigate climate change, ambitious
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for profit or commercial advantage and that copies bear this notice and the full citation
on the first page. Copyrights for components of this work owned by others than the
author(s) must be honored. Abstracting with credit is permitted. To copy otherwise, or
republish, to post on servers or to redistribute to lists, requires prior specific permission
and/or a fee. Request permissions from permissions@acm.org.
e-Energy ’19, June 25–28, 2019, Phoenix, AZ, USA
© 2019 Copyright held by the owner/author(s). Publication rights licensed to the
Association for Computing Machinery.
ACM ISBN 978-1-4503-6671-7/19/06. . . $15.00
https://doi.org/10.1145/3307772.3328312
plans of renewable energy integration are being introduced world-
wide. As a result, a high level of renewable energy penetration will
disrupt the management and control of traditional energy grids.
Second, our society is embracing the notion of decentralization.
End users can now gain better control of their own services in
diverse sectors with increasing transparency and autonomy. The
combination of accelerating renewable energy integration and de-
centralization leads to the paradigm of “transactive energy”, which
gives end users a higher degree of choices and control of how energy
is generated, delivered and utilized [33]. An important realization
of transactive energy is P2P (peer-to-peer) energy exchanges [43]
that allow distributed coordination among local energy producers
and consumers without centralized operators.
The concept of P2P energy exchanges is a disruptive revolution
to the highly monopolized energy sector. The incumbent grid oper-
ators are often reluctant to incorporate user-led renewable energy
because this will reduce their profit margin. Currently, household
users can only sell electricity from their rooftop solar PVs to the
grid at very low feed-in tariffs (sometimes as low as a fifth of the
consumption tariffs). Low feed-in tariffs prolong the payback pe-
riod of household renewable energy facilities and disincentivize
renewable energy adoption. Furthermore, many household renew-
able energy facilities are often utilized inefficiently. For example,
neighboring households do not coordinate their consumption usage
to maximize the benefits of their mutual energy resources, despite
of the temporal variations in their energy supplies and demands.
Therefore, allowing household users to sell electricity among them-
selves in P2P energy exchanges and subsequently coordinate their
usage not only incentivizes renewable energy adoption but also
optimizes the overall energy efficiency.
There are various ways to realize P2P energy exchanges. On one
hand, a possible approach is by a real-time trading process operating
in short timescale tomatch suppliers and customers instantaneously
[17, 28]. This, however, requires a challenging rapid control system
in tandem with the trading process. The fast-adjusting trading
process will induce reliability issues to power grid.
On the other hand, one can rely on a longer-term arrangement
of energy sharing among household users by settling their supplies
and demands based on an agreed cost-sharing mechanism. This
will require minimum changes in a more reliable manner to the
current power grid.We call this approach “P2P energy sharing”. Note
that a similar concept of cost-sharing is popular in diverse sectors
(e.g., ride-sharing), giving rise to the trend of “sharing economy”
[18, 41]. In keeping with this trend, sharing energy resources (e.g.,
rooftop PVs, batteries) is becoming a new form of sharing economy
[25]. The cost-sharing mechanism can be implemented as a smart
contract over a blockchain ledger [8].
1
215
https://doi.org/10.1145/3307772.3328312
https://doi.org/10.1145/3307772.3328312
http://crossmark.crossref.org/dialog/?doi=10.1145%2F3307772.3328312&domain=pdf&date_stamp=2019-06-15
Figure 1: Illustrations of P2P energy sharing scenarios.
To motivate our study of P2P energy sharing, we next present
two possible scenarios, as illustrated in Fig. 1.
Example 1 (Cost-Sharing by Direct Connections): Consider a com-
munity of household users who share their local energy resources
(e.g., rooftop PVs, home batteries) by establishing direct electri-
cal connections among themselves
1
. The users will coordinate the
operations of their energy management systems to maximize the
benefits of mutual energy resources for a relatively long period.
The incurred operational cost will be split among the users in a fair
manner based on individual consumption behavior and received
benefits. A user will not participate in sharing, if he/she perceives
disproportionate benefit.
Example 2 (Cost-Sharing by Grid Settlement): Consider a group
of household users who are separated at a distance without direct
connections. In this setting, the users may still be able to share
energy by transferring the electricity through the grid among their
energy resources in geographically dispersed locations. To enable
P2P energy sharing, utility operators need to provide billing settle-
ment among individual users, such that the instantaneous consump-
tion of electricity from one user can be offset by the instantaneous
export of electricity from another user. This can be achieved by
smart meters that record and report instantaneous electricity flows.
The users will first form a coalition to coordinate the operations of
their energy management systems and underwrite a sharing agree-
ment for a relatively long period on a separate platform (e.g., as a
smart contract over a blockchain ledger). Then the agreed parties
will notify the utility operators to settle their accounts on their
behalf during the agreement period. Note that utility operators may
impose an additional charge for the billing settlement service.
The aforementioned scenarios illustrate the promising potential
of P2P energy sharing. To enable P2P energy sharing, there requires
a proper cost-sharing mechanism among household users to split the
cost among the involved parties in a desirable manner. Although
cost-sharing mechanism in coalition formation has been studied
in traditional economics [36, 37] and multi-agent systems [13, 34],
the new context of P2P energy sharing exhibits a different set of
characteristics and presents several challenges as follows:
(1) Decentralized Decision-Making: There is no centralized
planner, administrator or manager in P2P energy sharing.
1
Besides of direction electrical connections, this also may require changes to the
local metering infrastructure, in order to report the net aggregate electricity usage of
household users, instead of individual usage, to the utility operator.
The operations are mostly carried out on P2P digital plat-
forms on the basis of voluntary participations. Hence, the
decision-making processes should preserve the autonomy
and transparency of individual participants.
(2) Incentive-Driven Coalitions: Every user acts according
to his/her self-interested goals and economic purposes. The
establishment of sharing agreement among users is solely
motivated by self-interested behavior and incentives. In par-
ticular, the users will choose to join the best possible coalition
that minimizes their individual costs.
(3) Presence of Uncertainty: There is a high level of uncer-
tainty regarding the future energy supplies and demands.
The various sources of uncertaintymake the decision-making
process of P2P energy sharing highly challenging.
Because of these characteristics, it requires a proper understand-
ing of cost-sharing mechanisms for P2P energy sharing. With such
an understanding, new computational tools and platforms can be
developed to assist P2P energy sharing in practice.
In this paper, we seek to address the following questions about
P2P energy sharing.Which cost-sharing mechanisms will motivate
self-interested users to team up for sharing energy? Will they share
their energy in a socially efficient way? If not, how can we reduce the
gap from a socially efficient outcome?
There are rich theories to be studied in P2P energy sharing. To
model self-interested user behavior in P2P energy sharing, we for-
mulate a coalition formation game [10, 14, 24], whereby users will
split the cost associated with a potential coalition for an energy shar-
ing agreement according to a given cost-sharing mechanism. We
consider simple cost-sharing mechanisms, including proportional-
split (that proportionally divides according to the users’ original
cost without coalitions) and bargaining games (based on bargaining
game theory). The users will opt to join to a coalition that minimizes
their individual costs. Thus, the likely outcome of self-interested
user behavior will be a stable coalition, such that no group of users
deviates to form another coalitions. A stable coalition is a strong
Nash equilibrium, which is related to a collective deviation of a
group of users, unlike typical Nash equilibrium that only considers
a unilateral deviation of a single user.
To analyze the social efficiency of P2P energy sharing, we study
the strong price of anarchy that compares the worst-case stable
coalitions and a social optimum (i.e., the state with minimum to-
tal cost of all users). A desirable cost-sharing mechanism should
have a small strong price of anarchy. By empirical evaluation and
theoretical analysis, we show that the strong price of anarchy is
mild for proportional-split and bargaining games. This can hence
bolster the viability of P2P energy sharing.
In summary, this paper is structured as follows:
(Sec. 3) We formulate a general model of coalition formation for P2P
energy sharing.
(Sec. 4) We incorporate online control strategies to coordinate the
operations of energy management systems in a coalition,
which can cope with uncertain future demands and supplies.
(Sec. 5) We perform an extensive data analysis based on a real-world
P2P energy sharing project. We examine the empirical ratios
between stable coalitions and a social optimum.
216
(Sec. 6) We derive the theoretical strong price of anarchy in general
settings for several cost-sharing mechanisms.
2 RELATEDWORK
This paper explores novel ideas of P2P exchanges among energy
prosumers. There have been a number of studies investigating
P2P energy trading. For example, see an extensive survey in [43],
and the references therein. Among these studies, P2P energy trad-
ing has been applied to distributed energy resource management
[28, 42, 45]. Moreover, the idea of shared pool of energy has been
proposed in various energy sharing applications, such as virtual
power plants [32], energy storage cloud [25, 29] and other multi-
user energy systems [12, 27, 44]. P2P energy trading has been re-
cently demonstrated in a real-world microgrid of the Brooklyn
Microgrid Project [31]. However, a key difference between this
work and previous studies is that we focus on the economic mecha-
nisms enabling energy sharing in form of a long-term arrangement.
We study coalition formation mechanisms of self-interested users
and social efficiency in P2P energy sharing.
To model P2P energy sharing, we draw inspiration from the lit-
erature of sharing economy. For example, [14] studies ride-sharing,
room-sharing, and pass-sharing applications. We adopt a similar
coalition formation game with specific optimization problems ap-
plied to energy management systems. Furthermore, we extend the
model in [14] to incorporate online decision-making with uncer-
tainty arisen in P2P energy sharing.
Our coalition formation model belongs to the topic of network
cost-sharing and hedonic coalition formation games [1, 6, 7, 10, 19,
23, 24, 26, 38, 39]. A study particularly related to our results is the
price of anarchy for stable matching and the various extensions to
K-sized coalitions [4, 5]. Our coalition formation game is a subclass
of hedonic coalition formation games [10, 23] that allows arbitrary
coalitions subject to a constraint on the maximum number of users
per coalition. This model is useful in modeling practical applications
of sharing economy.We also study simple cost-sharingmechanisms,
such as egalitarian-split and Nash bargaining solution that are not
considered in hedonic coalition formation games [4, 5].
3 FORMULATION AND MODELS
P2P energy sharing is a new concept. We first propose a generic pro-
cess for setting up P2P energy sharing. Then we will formulate the
corresponding models and optimization problems. To arrange P2P
energy sharing, it is likely to involve multiple steps from planning
to actual operation as follows:
(1) Planning: Each household needs to gather sufficient historical
data of local demands and PV supplies. It will be used to
plan the potential coalition-based optimization of energy
management operations in P2P energy sharing.
(2) Matching: The participating households will advertise the
technical specifications of their energy resources (e.g., rooftop
PVs and batteries) and profiles of past demands and PV sup-
plies on an information repository. Automatic tools will be
utilized to find and form a coalition of households for setting
up a potential cost-sharing agreement.
Figure 2: Variables and parameters of the energy manage-
ment system model.
(3) Agreement: If the households agree on a cost-sharing mecha-
nism and the corresponding coordinated optimization strate-
gies of energy resources, they will underwrite a sharing
agreement for a certain period on a database (e.g., a blockchain
ledger). Then the agreed parties will notify the utility opera-
tor to settle their billing accounts on their behalf, if required.
We consider a small number of participating households per
each agreement because of the management complexity.
(4) Operation: When the actual operation of P2P energy sharing
is executed according to the agreement, each household will
continuously monitor their benefits from P2P energy sharing.
The households may renegotiate their agreement at the end
of the agreed period.
Based on the above process, we will study the corresponding
optimization and coalition formation processes in this paper. Next,
we will present the models of energy management system, cost-
sharing mechanisms and stable coalitions.
3.1 Energy Management System Model
We consider a set of n users, denoted byN , who will form coalitions
to share certain energy resources. There is a list of variables and
parameters associated with the users and the management systems
of their energy resources, as illustrated in Fig. 2.
• Demand: Each user i ∈ N is characterized by an energy
demand function ai (t). The demand function can be con-
structed based on the prediction from historical data. In
practice, there is uncertainty associated with future demand.
An online decision-making process is required to manage
energy resources with respect to uncertain future demand.
• Rooftop PV: Each user i ∈ N is equipped with rooftop PV,
characterized by an energy supply function ri (t). The supply
function ri (t) is divided into three feed-in rates: rai (t) is for
demand satisfaction, rbi (t) for charging battery, and r
g
i (t) for
electricity feed-in to the grid.
• Home Battery: Each user i ∈ N is equipped with home
battery, characterized by capacity Bi . The battery is con-
strained by charging efficiency ηc ≤ 1 and discharging ef-
ficiency η
d
≥ 1, charge rate constraint µc and discharge
217
rate constraint µ
d
. Let bi (t) be the current state-of-charge
in the battery at time t , and dai (t) be the discharge rate for
demand satisfaction, whereas d
g
i (t) be the discharge rate for
electricity feed-in to the grid.
• Grid: In addition to local rooftop PV and home battery, each
user can also import electricity from the grid, if his demand is
not entirely satisfied. Further, rooftop PV and home battery
can inject excessive electricity into the grid, when feed-in
compensation is offered by utility operator. Let C+
g
be the
per-unit cost by the grid on electricity consumption, and
C−
g
be the per-unit compensation on electricity feed-in. Let
д+i (t) be the electricity consumption rate of user i at time
t , and д−i (t) be the electricity feed-in rate. Let дai (t) be the
consumption rate for demand satisfaction, and дbi (t) be the
consumption rate for charging battery.
Next, we will formulate the optimization problems that optimize
the feed-in rates, discharge rates, and consumption rates.
3.1.1 Standalone Optimization Problem.
First, we focus on a standalone optimization problem with a sin-
gle user, such that the user seeks to minimize the operational cost of
electricity incurred by the grid, by optimizing the rooftop PV feed-in
rates, battery charging/discharge rates, and grid consumption rates.
We consider discrete timeslots [1,T ]. The standalone optimization
problem is formulated in (P1). Cons. (2) states the state-of-charge
update of battery system. Cons. (3) restricts the state-of-charge
within the feasibility range of battery capacity, whereas Cons. (4)-
(5) restrict the charging and discharge rates. Cons. (6) states the
balance of energy for demand. There are some assumptions in (P1).
We assume that the demand and supply functions are known or
predicted in advance for a sufficiently long period [1,T ]. Let Ci be
the optimal operational cost in (P1).
(P1) Ci , min
T∑
t=1
(
C+
g
д+i (t) − C
−
g
д−i (t)
)
(1)
s.t. bi (t + 1) − bi (t) = ηc(r
b
i (t) + д
b
i (t))
− η
d
(dai (t) + d
g
i (t)), (2)
0 ≤ bi (t) ≤ Bi ,bi (0) = 0, (3)
дbi (t) + r
b
i (t) ≤ µc, (4)
dai (t) + d
g
i (t) ≤ µ
d
, (5)
dai (t) + д
a
i (t) + r
a
i (t) = ai (t), (6)
rai (t) + r
b
i (t) + r
g
i (t) = ri (t), (7)
дai (t) + д
b
i (t) = д
+
i (t), (8)
d
g
i (t) + r
g
i (t) = д
−
i (t), (9)
var. bi (t) ≥ 0,dai (t) ≥ 0,d
g
i (t) ≥ 0,
rai (t) ≥ 0, rbi (t) ≥ 0, r
g
i (t) ≥ 0,
дai (t) ≥ 0,дbi (t) ≥ 0,∀t ∈ [1,T ]
Remarks: In this formulation, the rooftop PV provides free
energy. Also, the feed-in tariff is assumed to be considerably less
than the consumption tariff: C−
g
≪ C+
g
. Hence, it will be more
economical to use PV supply for demand satisfaction or battery
charging, rather than exporting to the grid. Note that (P1) can be
solved by standard linear programming, as it involves only linear
constraints and a linear objective function.
3.1.2 Coalition-based Optimization Problem.
In this section, we study the problem of coalition-based opti-
mization. We consider a group of users G ⊆ N forming a coalition
to share their energy resources and minimize the total operational
cost. The coalition-based optimization problem will extend the stan-
dalone optimization problem with coordination on the operations
of energy management systems from multiple households.
We consider two P2P energy sharing scenarios as follows:
• (Cost-Sharing by Direct Connections): This scenario can be
reduced to the standalone optimization problem by substitut-
ing local demand function by an aggregate demand function
aG (t) =
∑
i ∈G ai (t) in (P1). Also, multiple PV supply func-
tions can be considered by an aggregate supply function
rG (t) =
∑
i ∈G ri (t). Multiple battery systems can be consid-
ered as multiple constraints of a single battery system.
• (Cost-Sharing by Grid Settlement): If a group of household
users choose to have settlement by the grid, there is per-unit
service fee Cs. We also add two more variables: let s+i (t) be
the consumption rate under grid settlement, and s−i (t) be
the feed-in rate under grid settlement for user i , respectively.
The coalition-based optimization problem is formulated in
(P2), which is similar to (P1). But there are more variables
from all the users in coalition G. Furthermore, Cons. (19)
describes the balance of grid settlement.
(P2) C(G) , min
T∑
t=1
∑
i ∈G
(
C+
g
д+i (t) − C
−
g
д−i (t) + Css
+
i (t)
)
(10)
s.t. bi (t + 1) − bi (t) = ηc(r
b
i (t) + д
b
i (t))
− η
d
(dai (t) + d
g
i (t)), (11)
0 ≤ bi (t) ≤ Bi ,bi (0) = 0, (12)
дbi (t) + r
b
i (t) ≤ µc, (13)
dai (t) + d
g
i (t) ≤ µ
d
, (14)
dai (t) + д
a
i (t) + r
a
i (t) = ai (t), (15)
rai (t) + r
b
i (t) + r
g
i (t) = ri (t), (16)
дai (t) + д
b
i (t) = д
+
i (t) + s
+
i (t), (17)
d
g
i (t) + r
g
i (t) = д
−
i (t) + s
−
i (t), (18)∑
i ∈G
s+i (t) =
∑
i ∈G
s−i (t) (19)
var. bi (t) ≥ 0,dai (t) ≥ 0,d
g
i (t) ≥ 0,
rai (t) ≥ 0, rbi (t) ≥, r
g
i (t) ≥ 0,
дai (t) ≥ 0,дbi (t) ≥ 0, s+i (t) ≥ 0, s−i (t) ≥ 0,∀t ∈ [1,T ],∀i ∈ G
Let C(G) be the optimal operational cost of coalition-based opti-
mization problem with respect to coalition G.
Remarks: Cost-sharing by direct connections can also be mod-
eled by (P2) by setting Cs = 0. In coalition-based optimization
problem, we assume that there are certain coordination and commu-
nication operations among multiple energy management systems
218
of the participating household users, such that battery charging and
discharging operations can be synchronized with the consumption
rates of different users. For example, it is possible to trigger the dis-
charging from the battery of one user, when there is demand from
another user. The coordination of separate energy management
systems will need a data communication network interconnecting
them. Note that there are commercial battery management systems
supporting remote control via Internet connection [3, 35].
Service fee Cs is an important factor to viability of coalition-
based optimization. High service fee Cs will deter coalition for-
mation in P2P energy sharing. As long as Cs < C+
g
− C−
g
, it is
still viable to transfer PV energy via grid settlement, because price
difference C+
g
− C−
g
that represents simultaneous importing and
exporting electricity, is still higher than grid settlement at the cost
Cs. Since C−g is sometimes very low in practice, even Cs ≥ C−
g
is
viable to coalition formation, as it pays more to grid operator for
grid settlement than exporting to the grid.
3.2 Coalition Formation Model and
Cost-Sharing Mechanisms
In this section, we adopt a general coalition formation model from
[14] to model P2P energy sharing, which is derived from hedonic
coalition formation games [10, 24]. Recall that a coalition of users for
sharing energy is a subsetG ⊆ N . A coalition structure is a partition
ofN denoted by P ⊂ 2
N
, such that
⋃
G ∈P G = N andG1∩G2 = ∅
for any pair G1,G2 ∈ P. A coalition structure represents a feasible
state of coalition formation. For example, P = {{1, 2}, {3}}, where
users 1 and 2 form a coalition and user 3 is alone.
Let the set of all partitions of N be P . Each element G ∈ P
is a coalition (or a group). The set of singleton coalitions, P
self
,
{{i} : i ∈ N}, is called the default coalition structure, wherein no
one forms a coalition with others. We consider arbitrary coalition
structures with at most K users per coalition. In practice, K is often
much less than n. Let PK , {P ∈ P : |G | ≤ K for each G ∈ P}
be the set of feasible coalition structures, such that each coalition
consists of at most K users. We restrict our attention to a small
value K , say K = 2, 3 because there will be high management
complexity involving many users per each cost-sharing agreement
to coordinate their energy management systems. Also, the grid
operator may not permit billing settlement among many users.
Recall that the cost function of each coalition G is noted by
C(G). In this paper, we assume that most households are customers,
rather than electricity exporters. Hence, Ci and C(G) from (P1)
and (P2) will be positive. There is an important property called
cost monotonicity:
C(H ) ≤ C(G), if H ⊆ G . (20)
Namely, larger coalition should incur a large cost. If Ci and C(G)
are positive, then cost monotonicity will hold. Otherwise, it will
violate the optimality of (P2).
When G = {i, j}, we also denote Ci, j , C({i, j}). We denote
Ci , C({i}) as the singleton cost for user i , when i does not form a
coalition with any other.
3.2.1 Cost-Sharing Mechanisms.
By agreeing to form a coalition G, the users are supposed to
share the cost C(G). A cost-sharing mechanism is characterized by
payment function pi (G), which is the shared cost of user i ∈ G , such
that
∑
i ∈G pi (G) = C(G). Cost-sharing mechanism pi (·) is called
budget balanced, if
∑
i ∈G pi (G) = C(G) for every G ⊆ N .
Given coalition G, let the utility of user i ∈ G (i.e., the saving of
joining coalition G) be
ui (G) , Ci − pi (G) (21)
In this paper, we consider the following simple cost-sharing
mechanisms (denoted by different superscripts):
(1) Equal-split Cost-Sharing: The cost is split equally among
all users: for i ∈ G,
p
eq
i (G) ,
C(G)
|G |
(22)
(2) Proportional-split Cost-Sharing: The cost is split propor-
tionally according to the users’ default costs: for i ∈ G,
p
pp
i (G) ,
Ci ·C(G)∑
j ∈G Cj
(23)
Namely, u
pp
i (G) = Ci ·
(
∑
j∈G Cj )−C(G)∑
j∈G Cj
.
(3) Bargaining-based Cost-Sharing: One can also formulate
the cost-sharing problem as a bargaining game with a fea-
sible set and a disagreement point. In this model, the fea-
sible set is the set of utilities (ûi )i ∈G , such that
∑
i ∈G ûi ≤∑
i ∈G ui (G) (namely,
∑
i ∈G pi ≥ C(G)), and the disagree-
ment point is (ûi = 0)i ∈G , such that each user pays only the
respective singleton cost. There are two common bargaining
solutions in the literature [37]:
(a) Egalitarian-split Cost-Sharing is given by:
p
ega
i (G) , Ci −
(
∑
j ∈G Cj ) −C(G)
|G |
(24)
Namely, every user in each coalition receives the same
utility: u
ega
i (G) =
(
∑
j∈G Cj )−C(G)
|G | for all i ∈ G.
(b) Nash Bargaining Solution is given by:(
pnsi (G)
)
i ∈G ∈ arg max
(p̂i )i∈G
∏
i ∈G
ui (p̂) (25)
subject to ∑
i ∈G
p̂ = C(G)
It can be shown that egalitarian-split cost-sharing is equiv-
alent to Nash bargaining solution in this model [14].
Other possible cost-sharing mechanisms include Shapely value,
which has a higher computational complexity. See [20, 22, 38].
Example: Considering G = {i, j}, we obtain:
• p
eq
i (G) =
Ci, j
2
and u
eq
i (G) =
2Ci−Ci, j
2
.
• p
pp
i (G) =
Ci ·Ci, j
Ci+Cj
and u
pp
i (G) =
Ci ·(Ci+Cj−Ci, j )
Ci+Cj
.
• p
ega
i (G) = p
ns
i (G) =
Ci, j+Ci−Cj
2
and
u
ega
i (G) = u
ns
i (G) =
Ci+Cj−Ci, j
2
.
While equal-split distributes the cost equally to every user re-
gardless their singleton costs, proportional-split and egalitarian-
split distributes the cost differently. When G = {i, j}, we plot
u
ega
i ({i, j}) and u
pp
i ({i, j}) according to Ci and Cj in Fig. 3, assum-
ing Ci, j = 1. If Cj ≥ Ci , then u
ega
i ({i, j}) ≥ u
pp
i ({i, j}). Otherwise,
219
Figure 3: Comparison of uegai ({i, j}) and u
pp
i ({i, j}). If Cj ≥ Ci ,
u
ega
i ({i, j}) ≥ u
pp
i ({i, j}). Otherwise, uppi ({i, j}) ≥ u
eqa
i ({i, j}).
u
pp
i ({i, j}) ≥ u
eqa
i ({i, j}). Namely, egalitarian-split favors smaller
singleton costs, whereas proportional-split favors larger ones.
Sec. 5.1 will present a case study of different cost-sharing mech-
anisms from a real-world P2P energy sharing project.
3.3 Stable Coalition & Strong Price of Anarchy
Because users are self-interested and incentive-driven, they will
join a coalition that maximizes his/her utility. Given certain costing-
sharing mechanism pi (·) and corresponding utility ui (·), a coalition
of users G is called a blocking coalition with respect to coalition
structure P if all users inG can strictly reduce their shared costs (or
increase their utilities) when they form a coalition G to share the
cost instead. A coalition structure is called stable coalition structure,
denoted by
ˆP ∈ PK , if there exists no blocking coalition with
respect to
ˆP. Note that a stable coalition structure is also a strong
Nash equilibrium
2
. In a stable coalition structure, the utility for
every user is always non-negative ui (G) ≥ 0. Otherwise, the user
will not join any coalition because of ui ({i}) = 0.
Example: Considering G = {i, j,k}, we assume the following:
ui ({i, j}) > ui ({i,k}) > ui ({i})
uj ({j,k}) > uj ({i, j}) > uj ({j})
uk ({k}) > uk ({j,k}) > uk ({i,k})
Then user k would prefer to stay to be alone in a singleton. Next,
users i and j will form a stable coalition {i, j}, since there is no
other better option.
There are efficient algorithms to find stable coalition structures
[10, 14, 24]. In particular, whenK = 2, it is known as the generalized
stable roommates problem, and Irving algorithm can find a stable
roommates configuration efficiently.
Given a coalition structureP, letu(G) ,
∑
i ∈G ui (G) andu(P) ,∑
G ∈P u(G). We call u(P) the social utility of P. A social optimum
is a coalition structure that minimizes the social utility of all users:
P∗ = argmaxP∈PK u(P). A social optimum is a social efficient
outcome. Define the utility-based Strong Price of Anarchy (SPoA) as
the worst-case ratio between the social utility of a stable coalition
2
A strong Nash equilibrium is a Nash equilibrium, in which no group of players can
cooperatively deviate in an allowable way that benefits all of its members.
structure and that of a social optimum:
SPoAuK , max
ˆP,C(·)
u(P∗)
u( ˆP)
(26)
Specifically, SPoA when using specific cost-sharing mechanisms
are denoted by SPoAu,eqK , SPoAu,ppK , SPoAu,egaK , respectively. SPoA
provides a natural metric of social efficiency.
Similarly, define cost-based SPoA as the worst-case ratio between
the cost of a stable coalition structure and that of a social optimum:
SPoACK , max
ˆP,C(·)
C( ˆP)
C(P∗)
(27)
Cost-based SPoA has been studied in prior work [14]. In this
paper, we will relate utility-based SPoA to cost-based SPoA, and
improve the extant results of cost-based SPoA in Sec. 6.
4 ONLINE OPTIMIZATION
In the previous section, coalition formation uses the historical (or
predicted) data to find the best possible coalitions. While offline
optimization can be used in a-priori planning stage, online opti-
mization is more useful in the operational stage, since predicted
data may suffer deviation from the actual data. The strategies of not
using future information are known as online algorithms [2, 11].
In this section, we present some heuristics for solving online
standalone and coalition-based optimization problems (P1)-(P2).
Evaluation studies comparing the performance of the online heuris-
tics with offline optimization solutions will be provided in Sec. 5.
4.1 Standalone Optimization
We present a heuristic for solving online standalone optimization
problem (P1) in Online-Standalone (Algorithm 1). Note that op-
erator [·]+ , max(·, 0) represents truncation of negative numbers.
Algorithm 1 Online-Standalone
Input:
(
ai (t), ri (t),bi (t − 1)
)
Output:
(
bi (t),d
a
i (t),d
g
i (t), r
a
i (t), r
b
i (t), r
g
i (t),д
a
i (t),д
b
i (t),д
+
i (t),д
−
i (t)
)
◃ Satisfy demand from PV first, then battery, and finally the grid
1: if ai (t) > 0 then
2: rai (t) ← [ai (t) − ri (t)]
+
3: end if
4: if rai (t) < ai (t) then
5: dai (t) ←
1
η
d
[bi (t − 1) −
(
ai (t) − r
a
i (t)
)
]+
6: end if
7: if rai (t) + d
a
i (t) < ai (t) then
8: дai (t) ← ai (t) − r
a
i (t) − r
g
i (t)
9: end if
◃ Charge battery from PV
10: rbi (t) ←
1
ηc [Bi − bi (t − 1) −
(
ri (t) − r
a
i (t)
)
]+
11: bi (t) ← bi (t − 1) + ηcr
b
i (t) − ηdd
a
i (t)
◃ Feed-in to the grid from PV
12: r
g
i (t) ← ri (t) − r
a
i (t) − r
b
i (t)
13: d
g
i (t) ← 0,дbi (t) ← 0,д+i (t) ← дai (t),д
−
i (t) ← r
g
i (t)
14: return
(
bi (t),d
a
i (t),d
g
i (t), r
a
i (t), r
b
i (t), r
g
i (t),д
a
i (t),д
b
i (t),д
+
i (t),д
−
i (t)
)
220
The basic idea of Online-Standalone is a greedy strategy,
whereby the available PV supply will be first used to satisfy de-
mand and charge battery as much as possible, before consuming
any electricity from the grid, due to the fact that the feed-in tariff
is well below the consumption tariff (namely, C−
g
≪ C+
g
). Unused
PV supply will then be used for exporting to the grid. Since greedy
strategy works without the knowledge of demand and supply func-
tions, it can be applied to online optimization. Therefore, Online-
Standalone is a good online algorithm that can approximate the
offline optimal solution. However, Online-Standalone is not op-
timal because it does not consider the boundary case, namely, near
the end of agreement period T . We will compare the performance
of Online-Standalone with the offline optimal solution by solv-
ing (P1) in the evaluation section. We note that if T is large, then
Online-Standalone is able to perform well as compared with the
offline optimal solution.
4.2 Coalition-based Optimization
Although one can use a similar greedy strategy asOnline-Standalone
independently at each household, this will suffer in performance
because of the lack of coordination among the households. A better
heuristic for solving online coalition-based optimization problem
(P2) is presented in Online-Coalition (Algorithm 2).
The coordination among households may involve multiple re-
mote energy resources by transferring the electricity from one
household to another by the following options:
(1) (Satisfy Demands from Remote PVs): One household can trans-
fer its electricity from its PVs, via grid settlement, to satisfy
the demand of another household. Through grid settlement,
the instantaneous consumption of electricity from one house-
hold can be offset by the instantaneous export of electricity
from another household. This operation is the most prefer-
able, particularly when one household runs out of local PV
supply or depleted the local battery.
(2) (Charging Batteries from Remote PVs): The electricity from
local PVs can charge the battery in another household, via
grid settlement. This allows storing the energy in another
household for its later consumption. Hence, one can maxi-
mize the benefits of excessive PV supply and overcoming the
limited battery capacity of one household by utilizing remote
batteries. However, there is a disadvantage to this operation.
Storing too much energy in battery from remote sources at
a settlement service fee Cs will reduce the opportunities of
taking advantage of the free energy from local PVs.
(3) (Satisfy Demand from Remote Batteries): Satisfying the de-
mand from another household’s battery can also save op-
erational cost, because the consumption tariff C+
g
is usu-
ally larger than settlement service fee Cs. However, if there
are significantly more demands in a particular household,
depleting the battery of such a household to satisfy other
households may incur higher operational cost.
(4) (Charging Batteries from Remote Batteries): This is the least
preferable operation. In general, it is not optimal, even if
there is excessive PV supply. Transferring energy among
batteries will incur loss in energy conversion.
Algorithm 2 Online-Coalition
Input:
(
ai (t), ri (t),bi (t − 1)
)
i ∈G
Output:
(
bi (t),d
a
i (t),d
g
i (t), r
a
i (t), r
b
i (t), r
g
i (t),д
a
i (t),д
b
i (t), s
+
i (t), s
−
i (t)
)
i ∈G
◃ Satisfy local demands and charge local batteries
1: for i ∈ G do
2: if ai (t) > 0 then
3: rai (t) ← [ai (t) − ri (t)]
+
4: end if
5: if rai (t) < ai (t) then
6: dai (t) ←
1
η
d
[bi (t − 1) −
(
ai (t) − r
a
i (t)
)
]+
7: end if
8: rbi (t) ←
1
ηc [Bi − bi (t − 1) −
(
ri (t) − r
a
i (t)
)
]+
9: bi (t) ← bi (t − 1) + ηcr
b
i (t) − ηdd
a
i (t)
10: end for
◃ Satisfy remote demands from PVs via grid settlement
11: for i ∈ G do
12: if rai (t) + d
a
i (t) < ai (t) then
13: if ∃j ∈ G\{i} such that r j (t) > raj (t)+r
b
j (t)+s
−
j (t) then
14: ∆1 ← r j (t) − r
a
j (t) − r
b
j (t) − s
−
j (t)
15: s−j (t) ← s−j (t) + [ai (t) − r
a
i (t) − d
a
i (t) − ∆1]
+
16: s+i (t) ← s+i (t) + [ai (t) − r
a
i (t) − d
a
i (t) − ∆1]
+
17: end if
18: end if
19: end for
◃ Charge remote batteries from PVs via grid settlement
20: for i ∈ G do
21: if bi (t) < θBi then
22: if ∃j ∈ G\{i} such that r j (t) > raj (t)+r
b
j (t)+s
−
j (t) then
23: ∆2 ← r j (t) − r
a
j (t) − r
b
j (t) − s
−
j (t)
24: дbi (t) ← дbi (t) + [
1
ηc
(
θBi − bi (t)
)
− ∆2]
+
25: s−j (t) ← s−j (t) + [
1
ηc
(
θBi − bi (t)
)
− ∆2]
+
26: s+i (t) ← s+i (t) + [
1
ηc
(
θBi − bi (t)
)
− ∆2]
+
27: bi (t) ← bi (t − 1) + ηc(r
b
i (t) + д
b
i (t)) − ηdd
a
i (t)
28: end if
29: end if
30: end for
31: for i ∈ G do
32: if rai (t) + d
a
i (t) < ai (t) then
33: дai (t) ← ai (t) − r
a
i (t) − r
g
i (t)
34: end if
35: r
g
i (t) ← ri (t) − r
a
i (t) − r
b
i (t), d
g
i (t) ← 0,дbi (t) ← 0
36: д+i (t) ← дai (t)+д
b
i (t) − s
+
i (t),д
−
i (t) ← d
g
i (t)+ r
g
i (t) − s
−
i (t),
37: end for
38: return
(
bi (t),d
a
i (t),d
g
i (t), r
a
i (t), r
b
i (t), r
g
i (t),д
a
i (t),д
b
i (t), s
+
i (t), s
−
i (t)
)
i ∈G
Online-Coalition will use the first two options. First, we will
satisfy local demands using PVs and batteries, and charge local
battery using PVs from the same households. Then we will use the
unused PV energy to satisfy remote demands. Next, we will use the
remaining unused PV energy to charge remote batteries, but only
up to a threshold θ ≤ 1. Restricting the amount of stored energy
221
Figure 4: (a) Map of Bruny Island, Tasmania in Australia. (b) Photo of typical households with rooftop PVs on Bruny Island.
(c) Photo of the battery system of a household on Bruny Island. (Source: [9])
from remote sources can take advantage of the potential future
energy from local PVs. In the following, we set θ = 1, when Cs = 0.
In Sec. 5, wewill present evaluation studies comparing the perfor-
mance of the online heuristics with offline optimization solutions.
5 EVALUATION STUDIES
In this section, we evaluate our mechanisms and algorithms us-
ing empirical data from a real-world project. A field trial has been
conducted on Bruny Island, Tasmania in Australia [9, 40], where
approximately 31 batteries were installed with solar PV systems
in the homes of selected residents of the island
3
. The batteries in-
clude customized management software that allows programmable
control of the battery management operations. The participating
households provide energy data for empirical studies. See Fig. 4 for
photos of Bruny Island.
5.1 Case Study
First, we present a case study using empirical data to illustrate the
effects of P2P energy sharing and cost-sharing mechanisms. We
consider two particular households on the island. We collected the
data of their winter consumption and PV supplies. Note that winter
season has higher consumption but lesser PV supply than summer
season. The battery capacity in the households was 9.8kWh. There
were 4 kW solar PVs systems installed. We assume zero settlement
service fee, or direct connections among the households.
In Fig. 6, we plot the data trace of the energymanagement system
at user 1 running online heuristics. Figs. 6 (a)-(c) are for standalone
optimization usingOnline-Standalone (Algorithm 1), while Fig. 6
(d)-(f) are for coalition-based optimization usingOnline-Coalition
(Algorithm 2).
Comparing Fig. 6 (a) and Fig. 6 (d), we observe that user 1 is able
to utilize the feed-in electricity from user 2 (i.e., s+
1
(t) ≥ 0), when a
coalition is formed between them. By leveraging the feed-in, user 1
can reduce electricity from the grid (i.e., дai (t) is lesser in Fig. 6 (d)).
As a result, the social utility due to coalition will be split between
users 1 and 2 according to different cost-sharing mechanisms.
3
Repost Power provided anonymised historical load and PV data for these systems in
a battery-coordination research trial on Bruny Island.
In Fig. 5 (a), we compare the utilities under different cost-sharing
mechanisms. The first bar is the social utility, that is how much
operational cost both users can save in a coalition from the total
of singleton costs without coalition. In equal-split, user 2 is given
negative utility, because he has a low singleton cost. Hence, user 2
will not participate in the coalition with user 1 under equal-split.
In both proportional-split and egalitarian-split, users 1 and 2 can
receive positive utilities. But user 2 is gaining an unfair proportion
close to 0, whereas egalitarian-split divides the social utility equally
among the users. In this case, users 1 and 2 are more likely to
participate in a coalition for P2P energy sharing.
Figure 5: (a) Comparison of cost-sharing mechanisms for a
pair of households. (b) Comparison of operational cost of
online heuristics and offline optimal solutions.
In Fig. 5 (b), we compare the operational cost between online
heuristics (i.e., Online-Standalone and Online-Coalition) and
offline optimal solutions by solving the linear programming prob-
lems of (P1)-(P2).We observe that in both standalone and coalition-
based optimization, the online heuristics are able to approximate
the offline optimal solutions well, and are effective in the practical
operations of energy management systems.
5.2 Coalition Structures & Utility Distribution
Next, we evaluate the outcomes of coalition formation and cost-
sharing mechanisms with 30 households. The evaluation is based
on the default parameters in Table 1. We consider coalitions with a
maximum size of two (i.e., K = 2).
222
Figure 6: Results of the data trace of the energy management system at user 1. (a)-(c): Standalone optimization using Online-
Standalone (Algorithm 1). (d)-(f) : Coalition based optimization using Online-Coalition (Algorithm 2).
Battery capacity (Bi ,) 9.8 kWh
Consumption tariff (C+
g
) $0.20/kWh
Feed-in tariff (C−
g
) $0.10/kWh
Settlement service fee (Cs) $0.00/kWh
Charging efficiency (ηc) 0.95
Discharging efficiency (η
d
) 1.05
Charge rate (µc) 5
Discharge rate (µ
d
) 5
Table 1: Default parameters used in evaluation.
The coalition structures are visualized in Fig. 7 (a)-(d). For exam-
ple, under the equal-split cost-sharing, users 1 and 14 will form a
coalition. Each of the mechanisms successfully form either 14 or 15
coalitions, but the structures differ. The structure is the primary rea-
son for differing total utilities. The total utility of a social optimum
is $558.02 and the egalitarian cost-sharing achieves $536.19, which
is very close to the social optimum. The distribution of utilities of
individual users are visualized by the histogram in Fig. 7 (e). This
identifies the number of households receiving different benefits.
The equal-split is clearly skewed towards lower individual utilities
while the egalitarian-split appears to favor most users by providing
a benefits of over $30 for more than half of the users.
5.3 Battery Capacity
Different battery capacities were considered to assess their effect on
utility. Results suggest that larger batteries can result in greater util-
ity. This analysis does not consider the investment cost of batteries
to assess economically viability over the long term. The two batter-
ies compared in Fig. 8 (a) have capacities of 13.2 kWh and 4.5 kWh,
respectively. Under egalitarian-split, use of the large battery results
in an aggregate utility of $515 whereas the small battery has a
utility of $367 - rather close to the social optima of $548 and $381.
Despite the larger battery having almost three times the capacity of
the smaller battery, it has less than twice the utility. This suggests
that battery capacity may not universally increase proportionally
with utility.
5.4 Consumption Tariff
The consumption tariff is the cost per kWh of energy imported
from the grid. The results suggest an increase in consumption
tariff causes a decrease in the utility. This is expected because an
increase in the cost of electricity will cause any potential savings to
diminish. Two consumption tariffs were considered: a constant rate
and time-of-use tariff. The constant rate assumed a consumption
tariff of $0.20/kWh and feed-in tariff of $0.09/kWh. The time-of-
use tariff was based on the battery trial with peak consumption
tariff of $0.2846/kWh, off-peak consumption tariff of $0.1325/kWh
and constant feed-in tariff of $0.09/kWh. Both tariffs assumed no
settlement service fee. From Fig. 8 (b), the constant tariff was much
less favorable than the time-of-use tariff. The constant tariff had a
utility of $893 and the time-of-use tariff had a utility of $481. This
is explained by the offline algorithm’s ability to schedule energy
usage, taking advantage of off-peak pricing to charge the battery
in preparation for its use during peak times.
223
Figure 7: Coalition structures under different cost-sharingmechanisms in (a)-(c) and social optimumin (d). (e) The distribution
of utilities of individual users.
Figure 8: Evaluation results under different settings
5.5 Feed-in Tariff
The feed-in tariff is the cost per kWh of energy exported to the
grid. Feed-in tariffs of $0.10 and $0.15 were used in the compar-
ison. Feed-in tariff appears in Fig. 8 (c) to have little effect with
egalitarian-split showing utilities of $160 and $154, respectively.
This is a positive result, demonstrating that electricity feed-in is
being minimized in favor of energy sharing. Under standalone op-
timization, greedy households would be inclined to maximize their
energy export and a higher feed-in tariff provides greater utility
to these households. Coalition forces are causing households to
extract benefits by mutually reducing each other’s consumption
rate costs, rather than maximizing feed-in.
5.6 Settlement Service Fee
The settlement service fee is the rate per kWh charged by the grid
operator in return for facilitating energy sharing over the grid. An
increase in settlement fee indicates a lower utility. Higher settle-
ment service fees act as a disincentive for frequent energy sharing
events and add to the electricity bill when they do occur. Fig. 8 (d)
demonstrates that egalitarian-split has a significant advantage over
the equal and proportional splitting mechanisms. When the settle-
ment service fee is $0.02/kWh, the utility in the egalitarian-split
is $236. When the settlement fee is $0.05/kWh, the utility is $140.
It reduces to approximately $0.00 when the settlement service fee
is too high at $0.10. This suggests that settlement service fee is a
critical factor to provide an incentive for energy sharing. In practice,
it must be balanced between being sufficient to cover operational
costs of the grid while not discouraging energy sharing.
6 THEORETICAL ANALYSIS
We complement the evaluation studies with theoretical analysis of
strong price of anarchy that can be applied to general settings. The
full proofs are deferred to the appendix of the technical report [16].
Theorem 6.1. Consider a budget balanced cost-sharing mecha-
nism pi (·). Denote the cost-based and utility-based strong prices of
anarchy by SPoACK and SPoAuK , respectively. Then
SPoAuK ≥
K − 1
K − SPoACK
SPoACK ≤ K −
K − 1
SPoAuK
(28)
Theorem 6.2. Consider proportional-split cost-sharing mecha-
nism. When K ≤ 6, we obtain
SPoAC,ppK ≤
K∑
s=1
1
s
(29)
For general K , we obtain
SPoAC,ppK ≤ logK + 2 (30)
Theorem 6.3. For egalitarian-split and Nash bargaining cost-
sharing mechanisms, the SPoA is upper bounded by
SPoAC,egaK = SPoAC,nsK = O(logK) (31)
Here we improve the known results in [14]. By comparison,
SPoAC,ppK = O(logK) and SPoAC,egaK = O(
√
K logK) were shown
in [14]. Our theorems show that SPoAC,ppK , SPoAC,egaK , SPoAC,nsK
are within the order of magnitude of logK . When K = 2, we obtain
SPoACK ≤
3
2
and SPoAuK ≤ 2 for these cost-sharing mechanisms,
which are mild. In the previous evaluation studies, we observe
that the empirical ratios between stable coalitions and a social
224
optimum are well below the theoretical bound. In particular, the
social utility under egalitarian-split cost-sharing is very close to
that of a social optimum. Therefore, egalitarian-split cost-sharing is
a highly socially efficient mechanism both in practice and in theory.
7 CONCLUSION
In a decentralised smart grid, energy prosumers will form coalitions
to share energy in a P2P fashion. But forming optimal coalitions
requires proper tools to cope with complexity of energy systems
and uncertainty of renewable energy. This paper sheds light on the
principles of cost-sharing mechanisms for P2P energy sharing. We
characterize the social efficiency of P2P energy sharing by the strong
price of anarchy that compares the worst-case stable coalitions and
a social optimum. We showed the strong price of anarchy is mild
by a data analysis of a real-world P2P energy sharing project and
by theoretical bounds. In particular, egalitarian-split is a highly
socially efficient cost-sharing mechanism in practice and in theory.
In future, we will study a proper threshold in online heuristics
for charging batteries from remote PVs, and its impact on the strong
price of anarchy. We will also study random arrivals of users. This
online decision problem shares certain similarity with ski rental
and one-way trading problems [2, 11]. We will leverage the recent
extensions of these problems in smart gridmanagement [15, 21, 30].
ACKNOWLEDGMENT
The authors would like to thank Daniel Gordon and Reposit Power
for sharing the data trace of Bruny Island field trial.
REFERENCES
[1] Susanne Albers. 2009. On the value of coordination in network design. SIAM J.
Comput. 38 (2009), 2273–2302. Issue 6.
[2] Susanne Albers and Stefano Leonardi. 1999. On-line algorithms. ACM Comput.
Surv 31, 3 (Sept. 1999).
[3] Alpha. 2018. Remote Battery Monitoring System Plus. (2018).
[4] Elliot Anshelevich, Onkar Bhardwaj, and Martin Hoefer. 2013. Friendship and
Stable Matching. In Algorithms - ESA. 49–60.
[5] Elliot Anshelevich, Sanmay Das, and Yonatan Naamad. 2009. Anarchy, Stability,
and Utopia: Creating Better Matchings. In Algorithmic Game Theory SAGT. 159–
170.
[6] Elliot Anshelevich, Anirban Dasgupta, , Jon Kleinberg, Eva Tardos, Tom Wexler,
and Tim Roughgarden. 2009. The price of stability for network design with fair
cost allocation. SIAM J. Comput. 38 (2009), 1602–1623. Issue 4.
[7] Elliot Anshelevich, Anirban Dasgupta, , Eva Tardos, and TomWexler. 2008. Near-
optimal network design with selfish agents. Theory of Computing 4 (2008), 77–109.
Issue 1.
[8] Andreas Antonopoulos and Gavin Wood. 2018. Mastering Ethereum: Building
Smart Contracts and DApps. O’Reilly Media.
[9] Australian National University, Reposit Power, TasNetworks, University
of Sydney, University of Tasmania. 2019. Bruny Island Battery Trial.
http://brunybatterytrial.org/. (2019).
[10] Haris Aziz and Florian Brandl. 2012. Existence of Stability in Hedonic Coalition
Formation Games. In Proc. of the International Conference on Autonomous Agents
and Multiagent Systems (AAMAS).
[11] A. Borodin and R El-Yaniv. 1998. Online computation and competitive analysis.
Cambridge University Press.
[12] T Carpenter, S Singla, P Azimzadeh, and S Keshav. 2012. The impact of electricity
pricing schemes on storage adoption in Ontario. In Proc. of ACM International
Conference on Future Energy Systems (e-Energy).
[13] Georgios Chalkiadakis, Edith Elkind, and Michael Wooldridge. 2011. Computa-
tional Aspects of Cooperative Game Theory. Morgan and Claypool Publishers.
[14] Chi-Kin Chau and Khaled Elbassioni. 2018. Quantifying Inefficiency of Fair
Cost-Sharing Mechanisms for Sharing Economy. IEEE Trans. Control of Network
System 5 (Dec 2018), 1809–1818. Issue 4. https://arxiv.org/abs/1511.05270.
[15] Chi-Kin Chau, Guanglin Zhang, and Minghua Chen. 2016. Cost Minimizing
Online Algorithms for Energy Storage Management with Worst-case Guarantee.
IEEE Transactions on Smart Grid 7, 6 (Nov 2016), 2691–2702.
[16] Sid Chi-Kin Chau, Jiajia Xu, Wilson Bow, and Khaled Elbassioni. 2019. Peer-
to-Peer Energy Sharing: Effective Cost-Sharing Mechanisms and Social Efficiency.
Technical Report. Australian National University.
[17] Sijie Chen and Chen-Ching Liu. 2017. From demand response to transactive
energy: state of the art. J. Mod. Power Syst. Clean Energy (2017).
[18] Entrepreneur. 2014. What’s Next for the Sharing Economy? (Magazine). (Dec.
2014).
[19] Amir Epsteina, Michal Feldmanb, and Yishay Mansour. 2009. Strong Equilibrium
in Cost Sharing Connection Games. Games and Economic Behavior 67 (2009),
51–68. Issue 1.
[20] Michal Feldman and Tom Ron. 2012. Capacitated Network Design Games. In
Algorithmic Game Theory, Lecture Notes in Computer Science. 132–143.
[21] Mohammad Hajiesmaili, Chi-Kin Chau, Minghua Chen, and Longbo Huang.
2016. Online Microgrid Energy Generation Scheduling Revisited: The Benefits
of Randomization and Interval Prediction. In ACM International Conference on
Future Energy Systems (e-Energy).
[22] Tobias Harks and Philipp von Falkenhausen. 2014. Optimal Cost Sharing for
Capacitated Facility Location Games. European Journal of Operational Research
239 (2014), 187–198. Issue 1.
[23] Martin Hoefer. 2013. Strategic cooperation in cost sharing games. International
Journal of Game Theory 42, 1 (2013), 29–53.
[24] Martin Hoefer, Daniel Vaz, and Lisa Wagner. 2015. Hedonic Coalition Formation
in Networks. In AAAI Conference on Artificial Intelligence. 929–935.
[25] D. Kalathil, K. Poolla C. Wu, and P. Varaiya. 2017. The sharing economy for the
electricity storage. IEEE Transactions on Smart Grid (2017).
[26] Max Klimm and Daniel Schmand. 2015. Sharing Non-anonymous Costs of Mul-
tiple Resources Optimally. In Proc. of Intl. Conf. on Algorithms and Complexity
(CIAC).
[27] Stephen Lee, Prashant Shenoy, Krithi Ramamritham, and David Irwin. 2018.
vSolar: Virtualizing Community Solar and Storage for Energy Sharing. In Proc. of
ACM International Conference on Future Energy Systems (e-Energy).
[28] W. Lee, L. Xiang, R. Schober, and V. W. S. Wong. 2014. Direct electricity trading
in smart grid: A coalitional game analysis. IEEE Journal of Selected Areas in
Communications 32 (Jul 2014), 1398–1411. Issue 7.
[29] J Liu, N Zhang, C Kang, D S Kirschen, and Q Xia. 2017. Decision-Making Models
for the Participants in Cloud Energy Storage. IEEE Transactions on Smart Grid 9
(Jul 2017). Issue 6.
[30] Lian Lu, Jinlong Tu, Chi-Kin Chau, Minghua Chen, and Xiaojun Lin. 2013. Online
Energy Generation Scheduling for Microgrids with Intermittent Energy Sources
and Co-Generation. In ACM Annual Conference of the Special Interest Group on
Computer Systems Performance Evaluation (SIGMETRICS).
[31] E. Mengelkamp, J. Garttner, K. Rock, S. Kessler, L. Orsini, and C. Weinhardt. 2018.
Designing microgrid energy marketsâĂŤA case study: The Brooklyn microgrid.
Applied Energy 210 (Jan 2018), 870–880.
[32] A Mnatsakanyan and S W Kennedy. 2015. A novel demand response model with
an application for a virtual power plan. IEEE Transactions on Smart Grid 6 (Jan
2015). Issue 1.
[33] C. Nguyen. 2017. Transactive Energy: An Overview. Technical Report. National
Institute of Standards and Technology.
[34] Noam Nisan, Tim Roughgarden, Eva Tardos, and Vijay V. Vazirani. 2007. Algo-
rithmic Game Theory. Cambridge University Press.
[35] Orion. 2018. BMS Connect. (2018).
[36] Bezalel Peleg and Peter SudhÃűlter. 2007. Introduction to the Theory of Cooperative
Games. Springer-Verlag.
[37] Alvin E. Roth. 2005. Game-Theoretic Models of Bargaining. Cambridge University
Press.
[38] Tim Roughgarden and Okke Schrijvers. 2014. Network cost sharing without
Anonymity. In Algorithmic Game Theory, Lecture Notes in Computer Science.
134–145.
[39] Tim Roughgarden and Mukund Sundararajan. 2009. Quantifying inefficiency in
cost sharing mechanisms. J. ACM 56, 4 (2009).
[40] Paul Scott, Dan Gordon, Evan Franklin, Laura Jones, and Sylvie ThiÃľbaux. 2019.
Network-Aware Coordination of Residential Distributed Energy Resources. To
appear in IEEE Transactions on Smart Grid (2019).
[41] The Economist. 2013. The rise of the sharing economy (Magazine). (9 March
2013).
[42] W. Tushar, B. Chai, C. Yuen, S. Huang, D. B. Smith, H. V. Poor, and Z. Yang. 2016.
Energy storage sharing in smart grid: A modified auction-based approach. IEEE
Transactions on Smart Grid 7 (May 2016). Issue 3.
[43] Wayes Tushar, Chau Yuen, Hamed Mohsenian-Rad, Tapan Saha, H. Vincent Poor,
and Kristin L. Wood. 2018. Transforming Energy Networks via Peer-to-Peer
Energy Trading. IEEE Signal Processing Magazine (Jul 2018).
[44] C Wu, D Kalathil, K Poolla, and P Varaiya. 2016. Sharing electricity storage. In
Proc. of Conference on Decision and Control (CDC).
[45] C. Zhang, J. Wu, M. Cheng, Y. Zhou, and C. Long. 2016. A bidding system for
peer-to-peer energy trading in a gridconnected microgrid. Energy Procedia 103
(Dec 2016), 147–152.
225
	Abstract
	1 Introduction
	2 Related Work
	3 Formulation and Models
	3.1 Energy Management System Model
	3.2 Coalition Formation Model and Cost-Sharing Mechanisms
	3.3 Stable Coalition & Strong Price of Anarchy
	4 Online Optimization
	4.1 Standalone Optimization
	4.2 Coalition-based Optimization
	5 Evaluation Studies
	5.1 Case Study
	5.2 Coalition Structures & Utility Distribution
	5.3 Battery Capacity
	5.4 Consumption Tariff
	5.5 Feed-in Tariff
	5.6 Settlement Service Fee
	6 Theoretical Analysis
	7 Conclusion
	References