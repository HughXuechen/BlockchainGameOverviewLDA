Reputation-Based Regional Federated Learning for Knowledge Trading in Blockchain-Enhanced IoV
Reputation-Based Regional Federated Learning for
Knowledge Trading in Blockchain-Enhanced IoV
Yue Zou∗†, Fei Shen∗, Feng Yan‡, Jing Lin§, Yunzhou Qiu∗
∗Key Laboratory of Wireless Sensor Network and Communications,
Shanghai Institute of Microsystem and Information Technology, Chinese Academy of Sciences, Shanghai, 200050, China
†University of Chinese Academy of Sciences, Beijing, 101408, China
‡National Mobile Communications Research Laboratory, Southeast University, Nanjing 210096, China
§School of Information Management, Shanghai Lixin University of Accounting and Finance, Shanghai 201209
Email: zy0515@mail.ustc.edu.cn, fei.shen@mail.sim.ac.cn, feng.yan@seu.edu.cn, linj@lixin.edu.cn
Abstract—The Internet of Vehicles (IoV) aims to perceive,
compute, and process environmental data in a collaborative
manner. Previous works focus on data sharing between vehicles,
but a large amount of data will lead to redundant transmission
and network congestion. In addition, security and privacy issues
prevent these nodes from participating in the sharing process.
Knowledge is extracted from data through machine learning
(ML) and shared in the form of small-scale well-trained model pa-
rameters, which improves collaborative learning more effectively
and relieves network pressure. While traditional ML algorithms
are not suitable for distributed IoV with local characteristics.
Based on this, this paper first divides the vehicles into multiple re-
gions and proposes a Regional Federated Learning (RFL) frame-
work, in which all regions maintain their own learning models,
i.e. knowledge. We design a reputation mechanism to measure
the reliability of vehicles participating in RFL. To address the
security challenges brought by the untrusted centralized trading
market, we propose a blockchain-enhanced knowledge trading
framework, in which an authorized market agency coordinates
the trading quickly. We model the optimal pricing mechanism
as a non-cooperative game, taking into account the competition
among all knowledge providers. Numerical simulation shows
that the proposed reputation mechanism improves the accuracy
of knowledge up to 18%, and the optimal knowledge pricing
mechanism effectively increases the utility of market.
Index Terms—Regional Federated Learning, reputation,
blockchain, Knowledge trading, pricing mechanism.
I. INTRODUCTION
Recently, Intelligent Transportation System (ITS) is de-
veloping rapidly. Resource-enhanced on-board units (OBU)
in the Internet of vehicles (IoV) can effectively help edge
nodes collect local data and extract local knowledge. The
service mode in IoV has gradually changed from ”data-as-
a-service” to ”knowledge-as-a-service” [1]. Knowledge is the
embodiment of data intelligence and represents the real value
of data. In multiple regions with the local characteristics of
IoV, vehicles learn road and environment data through machine
learning method, and share knowledge with each other [2],
This work is supported by National Key R&D Program of China under No.
2019YFE0120700, 2019YFB1803101; National Natural Science Foundation
of China under grant No. 61871370; Natural Science Foundation of Shanghai,
China under grant No. 18ZR1437500; Hundred Talent Program of Chinese
Academy of Sciences under grant No. Y86BRA1001; The Shanghai Sailing
Program under grant No. 18YF1427900.
Corresponding author: Fei Shen (Fei.shen@mail.sim.ac.cn)
which accelerates their learning process. This kind of sharing
is more suitable for complex vehicle network environment,
which is of great significance for future ITS applications.
Federated learning (FL) [3] is a type of distributed machine
learning, which is usually used for knowledge acquisition.
Each node does not need to upload the original data, but
only trains locally and uploads the model update parameters to
improve the global model in a cooperative way, which protects
the privacy of user data. Previous works focus more on the
performance improvement of the algorithm itself, but less on
the security. Unreliable workers may launch poison attacks and
send malicious updates [4]. Shayan et al. proposed the Reject
on Negative Impact (RONI) scheme to detect poisoning model
updates [5]. Three-valued subjective logic calculates reputation
to select honest workers according to the number and quality
of their interaction behaviors [6]. Workers less than a certain
threshold are not allowed to participate in the process of
message sharing [7]. The single point of failure often occurs in
traditional centralized structure for reputation calculation and
recording. In order to further ensure the security and reliability
of reputation management, reputation opinions are managed in
a decentralized way, relying on the tamper-proof and traceable
features of blockchain [8]. Inspired by these works, we select
honest vehicles based on reputation evaluation in each region,
which ensures knowledge reliability from data sources.
Sharing knowledge rather than redundant data greatly alle-
viates the burden of network transmission and local storage.
Thus, well-trained learning models can also be monetized and
traded as knowledge commodities [1]. Recently, blockchain
has been widely applied to trading market due to its secure,
anonymous and decentralized trust characteristics. It is a
completely transparent peer-to-peer (P2P) distributed ledger
[9]. In order to ensure the profit and fairness of both parties in
the trading, K. Liu et al. introduce an authorized market agent,
which has been pre-defined as a part of the smart contract
in the blockchain [10]. For the blockchain-enhanced trading
market, most works aim to design an efficient pricing model.
Zheng et al. proposed a profit-driven data acquisition scheme
by jointly considering profit maximization and payment min-
imization [11]. However, few works consider the effect of
multi-factor competitiveness among providers on pricing.
�����������	
����������	���	������������
�	��������
�����������
978-1-7281-9505-6/21/$31.00 ©2021 IEEE
2
0
2
1
 I
E
E
E
 W
ir
el
es
s 
C
o
m
m
u
n
ic
at
io
n
s 
an
d
 N
et
w
o
rk
in
g
 C
o
n
fe
re
n
ce
 (
W
C
N
C
) 
| 9
7
8
-1
-7
2
8
1
-9
5
0
5
-6
/2
0
/$
3
1
.0
0
 ©
2
0
2
1
 I
E
E
E
 | 
D
O
I:
 1
0
.1
1
0
9
/W
C
N
C
4
9
0
5
3
.2
0
2
1
.9
4
1
7
3
4
7
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 06:37:59 UTC from IEEE Xplore.  Restrictions apply. 
In this paper, the system model is presented in section II.
In section III, considering the local characteristics of IoV and
reliability of the vehicles, we propose a Reputation-Based
Regional Federated Learning (RFL) framework to prevent
unreliable model updating in training and generate high-
quality global model. Multiple factors, e.g. honesty degree,
accuracy and interaction timeliness, are considered in the repu-
tation mechanism. In section IV, we establish an inter-regional
blockchain-enhanced knowledge trading market, in which the
model parameters are traded. The optimal pricing process is
modeled as a non-cooperative game. Finally, the effectiveness
of proposed reputation mechanism and knowledge trading
market is evaluated in section V.
II. SYSTEM MODEL
The system model is shown in the Fig. 1, which is di-
vided into two modules: knowledge generation and knowledge
trading. There are three core components, including vehicles,
Road Side Units (RSUs) and Mobile Edge Computing (MEC)
servers. Assume that there are K vehicles in the vehicle set
V , |V| = K. System initialization divides these K vehicles
into N regions through local road and network character-
istics. The vehicles set of the j-th region is expressed as
Vj = {v(1)j , v
(2)
j , v
(3)
j , ..., v
(kj)
j }, |Vj | = kj , j ∈ [1, N ], and
k1+k2+···+kN = K. In the process of knowledge generation,
vehicles in each region participate in RFL with the collected
non-exchangeable road and environmental information. They
train the global model in their region in a collaborative way.
Fig. 1. System Model
Each region selects an RSU as the leader to aggregate
the local model until the loss of global model is less than
a certain threshold. We denote the set of leader RSUs as
R = {R1, R2, R3, ..., RN}. Taking the j-th region as an
example, the leader Rj , j ∈ [1, N ] detects the quality of
local model uploaded by vehicle v
(i)
j , i ∈ [1, kj ], j ∈ [1, N ]
and remove unreliable malicious updates before model ag-
gregation. Vehicles obtain different reputation according to
their training behaviors. The aggregated model parameters and
reputation will be encrypted and structured according to the
time sequence and added to the blockchain in each region.
Regional RSUs connect to the MEC servers through uplink
communication and connect to the vehicles within their range
through downlink communication. They trade their own model
parameters as knowledge with each other to train a more
robust model. In the process of knowledge trading, they act as
different roles based on their state of demands. Regional RSU
in a certain region that denoted as Rm, Rm ∈ R acts as the
knowledge requester and sends out a request packet to other
regional RSUs. Suppose multiple RSUs that act as knowledge
providers meet the demand respond to the resquest and we
denote them as H,H ⊂ R− {Rm}, |H| = n. As authorized
market agents in smart contract, MECs perform knowledge
negotiation and transaction processing automatically. They
select the optimal knowledge provider among the n providers,
and the selected provider sends the knowledge directly to the
requester. The transactions are recorded in the blockchain.
III. REPUTATION-BASED REGIONAL FEDERATED
LEARNING
By considering reducing the number of vehicles in and out
of each region, Mobility Based Metric for Clustering (MOBIC)
[12] proposes that due to environmental characteristics, the
change of signal transmission power between node pairs rep-
resents mobility better than physical distance. By calculating
the local mobility value of each vehicle, the vehicles are
then partitioned based on clustering. The topology in IoV is
unstable, so the dynamic impact on changes to the region
to which it belongs must be considered. When the vehicle
moves away from the current leader and there is another leader
within its communication range, it will submit a certification
application to the leader to become a legal entity and join the
new region. After the partition, these vehicles start to perform
RFL process with their leaders in each region.
Generally, leaders are reluctant to receive model updates
from vehicles that always spread false information. A typical
poisoning attack detection scheme is used to evaluate the
quality of local model update [5] before model aggregation.
If a vehicle participates in positive sharing (PS) with its
leader, the accuracy of global model will be improved and
its reputation will be improved simultaneously. Conversely,
negative sharing (NS) will lead to a decline in reputation. A
vehicle with a low reputation is disqualified from training.
We only discuss the impact of interactions on the reputation
between single vehicle and its leader in a certain region. For
simplicity, i and j are used to represent vehicle and its leader
respectively in this part. The leader j calculates the reputation
of vehicle i based on the following factors:
1) Honesty Degree (HD): A higher HD between vehicle and
leader means that they have more positive interactions. Ac-
cording to two ways to share the model in the interaction, i.e.
PS and NS, HD is divided into the following two categories,
and is calculated as:
HDPj→i
=
IAPj→i
IAj→i
, HDNj→i
=
IANj→i
IAj→i
, (1)
where IAj→i represents the total number of interactions
between vehicle i and leader j, and IAP /IAN is the number
of PS/NS interactions.
�����������	
����������	���	������������
�	��������
�����������
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 06:37:59 UTC from IEEE Xplore.  Restrictions apply. 
2) Accuracy contribution (Ac): the degree to which the
model accuracy is improved is taken as another factor affecting
the reputation. Assume that the loss of global model before
and after the t-th interaction between vehicle i and its leader
j are denoted as lt−1j→i
and ltj→i
respectively. Ac of vehicle
i at t-th interaction is calculated as:
Actj→i
= log2
[
1+
−(ltj→i
− lt−1j→i
)
lt−1j→i
]
. (2)
When the loss of global model reduces after the t-th interac-
tion, i.e. ltj→i
< lt−1j→i
, it means the updated model is useful
and Actj→i
> 0, and the greater the degree of loss reduction,
the greater the value of Actj→i
. On the contrary, if the loss
increases, then Actj→i
< 0. When the uploaded parameters
have no effect on the global model, Actj→i
= 0. The
contribution is divided into positive and negative contribution:
AcPtj→i
= log2
[
1+
−(lPtj→i
− lPt−1j→i
)
lPt−1j→i
]
,
AcNtj→i
= log2
[
1+
−(lNtj→i
− lNt−1j→i
)
lNt−1j→i
]
,
(3)
where AcPtj→i
> 0 and AcNtj→i
< 0.
3) Interaction timeliness: Vehicles are not always consistant
in sharing local models, so that recent events influence more
on accurate and reliable reputation calculation. Therefore, the
Interaction timeliness (It) of leader j to vehicle i is defined as:
Itj→i =
IAj→i∑
t=1
Actj→i
e−(Tc−Ttj→i
), (4)
where Tc is the current time and Ttj→i
is the time when the
vehicle i shares the local model for the t-th time. This is a
weighted function, where model contribution is regarded as a
weighting factor, jointly considering the importance of model
contribution and timeliness. Interaction timeliness function can
also be divided into positive and negative value:
ItPj→i
=
IAPj→i∑
t=1
AcPtj→i
e
−(Tc−TPtj→i
)
,
ItNj→i =
IANj→i∑
t=1
AcNtj→i
e
−(Tc−TNtj→i
)
,
(5)
where ItPj→i
> 0 and ItNj→i
< 0.
The reputation is used to evaluate the interaction behaviors
between vehicle i and its leader j. Thus, considering the factors
mentioned above, the reputation of vehicle i is defined as:
Rj→i = HDPj→i
ItPj→i
+HDNj→i
ItNj→i
, (6)
the PS behaviors of vehicle i will increase the value of
HDPj→iItPj→i , which is always not less than 0. On the
contrary, HDNj→i
ItNj→i
< 0, and the more NS behaviors,
the greater the absolute value of HDNj→i
ItNj→i
. The two
parts are combined to calculate the reputation of vehicle i.
We calculate the reputation values of all vehicles in the
region of leader j, and define the maximum reputation among
them as Rj→i
max
, i ∈ [1, kj ], j ∈ [1, N ]. The reputation threshold
is denoted as λ · Rj→i
max
, λ ∈ [0, 1). The vehicles higher than
the current threshold and located in the region at that time slot
are selected to participate in the next iteration. The value of
λ can be dynamically adjusted according to the requirements
of model training. The larger the value of λ is, the higher the
demand for model’s reliability, and more iterations are needed
to make the loss of global model meet certain conditions.
Based on the reputation mechanism, each region selects
vehicles to join FL and maintains its own trained model. These
well-trained models are traded as knowledge between regions.
How to automatically complete the trading in the knowledge
market based on smart contract is described in part IV.
IV. SMART CONTRACT-BASED KNOWLEDGE TRADING
MARKET
The models in each region have unique local characteristics.
Vehicles in different regions can learn external characteristics
by trading with others. They broadcast the knowledge requests
to the nearby RSUs. Multiple nodes that meet the demands will
all send knowledge to the requester, which may waste trans-
mission resources and cause broadcast storm, especially in
large-scale networks. We introduce a market agent authorized
in smart contracts, which can perform transaction negotiation
and act as finite state machines that automatically execute the
transaction-related protocols when a request occurs.
Blockchain is a slow process in terms of communication
and propagation of protocol. In the proposed framework, we
choose MEC servers with sufficient computing and commu-
nication resources to complete the consensus process. 51%
attack is another security problem. When most nodes have
malicious purposes, the stability of system will be damaged.
Assume that participants in the transaction are proactive and
honest on the basis of pursuing the highest utility of trading
and this can ensure the safety of the system.
The system requires each node to register as a legitimate
entity with a trusted authority. Each node obtains a unique
identity, digital signature and a wallet address. After initial-
ization, the trading is divided into the steps shown in Fig. 2:
1) Request: requester RSU sends specific demand packet,
including account, content of demand, deadline and budget.
2) Publish: market agent collects knowledge request packets
from RSUs in all regions and broadcast them.
3) Respond: provider RSUs send their responses message
to the market agent before the deadline.
4) Choose: market agent may receive multiple responses
from multiple providers for a certain knowledge request. It
chooses the knowledge provider with the highest priority.
5) Decide: knowledge requester compares its budget with
the price given, and decides whether the trading occurs.
6) Trade: market agent sends an order to the provider after
trading confirming. Before the coin is paid to provider’s wallet
address, the requester checks whether knowledge is valid.
�����������	
����������	���	������������
�	��������
�����������
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 06:37:59 UTC from IEEE Xplore.  Restrictions apply. 
Considering a scenario where there are single knowl-
edge requester and multiple providers in response. The re-
sponse messages of n providers are denoted as Msg =
[msg(1),msg(2), ...msg(j), ...msg(n)]. Taking provider j, j ∈
H as an example, the msg(j) is a quad 〈IDj , θj , βj , pj〉, repre-
senting individual accounts, the scale of dataset and parameter,
and knowledge pricing respectively. The dataset is proportional
to pricing. Let p Δ
= (p1, ..., pn) and p∗ Δ
= (p∗1, ..., p
∗
n) represent
the price profile and the optimal price profile of n providers
respectively. Knowledge requester has an acceptable maximum
price, which is denoted as pmax. Competitive Priority is
applied to each provider in response, which is calculated
by several factors, including knowledge value, transmission
quality, communication delay and knowledge pricing.
Fig. 2. Knowledge trading
1) Knowledge value: knowledge value function estimates
the gap between original data and knowledge, that is defined
by two principles [1]. It reflects the performance of edge
intelligent algorithms directly.
ϕj(θj ; η, γ) = 1− ηe−γ·θj , η, γ > 0, (7)
where η, γ are the economic parameters used to control the
degree to which the knowledge value increases. Generally
speaking, if θj increases equally continuously, the increment of
ϕj(θj ; η, γ) will decrease after increasing to a certain amount.
2) Transmission quality: we denote the transmission quality
of the link between requester m,m ∈ R and provider j, j ∈
H as Cj . According to the Shannon–Hartley theorem, Cj =
Blog2(1 + SNRj), where B is the bandwidth of the link.
3) Communication delay: Each knowledge provider has
predefined knowledge acquisition costs and communication
delay. For provider j, they are expressed as aj and cdj
respectively. Denote the cost of provider j as:
costj = aj + cdj . (8)
Assume that the cost of acquiring knowledge is the same
in each region, i.e. aj=a. cdj is defined as: cdj =
βj
Cj
+
dmj
v ,
where dmj , j ∈ H,m ∈ R denotes the distance between m
and j, v is the speed of electromagnetic wave propagation in
the channel. The communication delay is directly proportional
to the scale of transmitted parameter and physical distance, but
inversely proportional to the transmission quality.
We express the competitive priority of provider j, j ∈ H as:
CPj =
ϕj
pj · costj . (9)
For provider j, the lower the communication delay and
pricing, the higher the competitive priority. The value of CPj
is proportional to the knowledge value.
The competitiveness of knowledge provider j, j ∈ H is
defined as:
φj(pj) =
CPj
1
N
∑
k∈N
CPk
=
N(1− ηe−γ·θj )∑
k∈N
(1−ηe−γ·θj )·pj ·costj
pk·costk
. (10)
Therefore, the utility of knowledge provider j, j ∈ H is the
product of competitiveness and profit:
Uj(pj , p−j) = φj(pj)(pj − costj), (11)
where p−j is the price profile of other providers except j.
For the utility optimization problem, providers com-
pete with each other by setting their pricing strate-
gies, which is modeled as a non-cooperative game
G{H, {pj}j∈H, {Uj(pj , p−j)}j∈H}. Each provider j, j ∈ H
provides price pj to maximize revenue:
maximize
p
Uj(pj , p−j)
subject to pj ∈ [costj , pmax], ∀j ∈ H.
(12)
This optimal pricing mechanism is placed in smart contract
and automatically executes after any requester sends out a re-
quest from the system. The market agent chooses the provider
that satisfies the request with the greatest utility. The objective
of game G is to find the Nash equilibrium point in which the
utility of each provider is maximized.
Definition 1. The optimal price p∗j is the Nash equilibrium if
the following conditions U(p∗
j ) ≥ U(pj), j ∈ H are satisfied.
Theorem 1. A unique Nash equilibrium exists in
G{H, {pj}j∈H, {Uj(pj , p−j)}j∈H}.
Proof. We first prove the existence of the Nash equilibrium
point of G. We take the first- and second-order derivatives of
Uj(pj , p−j) with respect to pj to prove its concavity, which
are shown in (13) and (14),
∂Uj(pj)
∂pj
=
NΘ · (1− ϕj) · ln η
1−ϕj
· pj · (pj − costj)
[ϕj +Θ · pj ]2
− [1 +NΘ · (1− ϕj)] · costj +Nϕj
2
[ϕj +Θ · pj ]2
(13)
∂2Uj(pj)
∂p2j
= −
N ·Θ · ln η
1−ϕj
·
[
pj ·(pj−costj)
η(1−ϕj)
]
[ϕj +Θ · pj ]3
−
(1− ϕj)(pj − costj) ·N ·Θ · ln η
1−ϕj
[ϕj +Θ · pj ]4
−
2N ln η
1−ϕj
· ϕj
pj
+costj +N2ϕj
2
[ϕj +Θ · pj ]4
(14)
where ζ denotes the proportional coefficient between the
dataset and pricing and
Θ =
∑
k �=j
(1− η · e−γ·θk)
pkcostk
· costj .
�����������	
����������	���	������������
�	��������
�����������
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 06:37:59 UTC from IEEE Xplore.  Restrictions apply. 
For provider j, j ∈ H, Θ is a constant. We easily derive that[
∂2Uj
/
∂p2j
]
< 0. Therefore, we can prove that Uj(pj , p−j) is
strictly concave with respect to pj and that the unique Nash
equilibrium exists in game G.
Maximizing the utility of knowledge providers is a convex
optimization problem. In order to obtain the maximum utility,
a search algorithm 1 based on gradient descent is applied to
obtain an approximate Nash equilibrium point.
p
(t)
j = p
(t−1)
j +
1
x
(t−1)
m→j
· ∂Uj(p
(t−1)
j , p
(t−1)
−j )
∂pj
, (15)
Where x
(t−1)
m→j is the knowledge requester m’s purchasing
desire in combination with the current pricing given by j and
budget during the t−1 iteration, and x
(t−1)
m→j is used as the step
size of the price update in the algorithm, which is defined as:
x
(t)
m→j = e−(p
(t−1)
j −Bm), xm→j ∈ (0, 1]. (16)
Algorithm 1 Gradient Algorithm to Find the Nash Equilibrium
1: Initialization: input p(0) = {p(0)j }j∈H, where p(0) ∈
[costj , p
max], 1 ← t, 1 ← τ , a precision threshold ε 	 1;
2: while (τ > ε) do
3: for all knowledge providers j ∈ H do
4: The consumer decides the desire of purchasing from
knowledge provider j base on (16);
5: x
(t)
m→j = e−(p
(t−1)
j −Bm)
6: end for
7: for all knowledge providers j ∈ H do
8: They updates its auxiliary pricing strategy profile
using a gradient-assisted search algorithm:
9: p
(t)
j = p
(t−1)
j + 1
x
(t−1)
m→j
· ∂Uj(p
(t−1)
j ,p
(t−1)
−j )
∂pj
10: where x(t−1) is the step size of the price update.
11: end for
12: τ ←
∑
j∈N
∥
∥
∥p
(t)
j −p
(t−1)
j
∥
∥
∥
∑
j∈N
∥
∥
∥p
(t−1)
j
∥
∥
∥
, t ← t+ 1
13: end while
14: Search the optimal utility of knowledge providers:
15: U(p(t)) = Ul(p
(t)
l , p
(t)
−l),
16: where l = argmax
j
Uj(p
(t)
j , p
(t)
−j)
17: Output: l, p(t)l .
V. PERFORMANCE ANALYSIS
In this section, we first evaluate the reputation-based
RFL proposed in Section III. Then we analyze the secu-
rity, efficiency and profitability of knowledge trading mar-
ket blockchain-assisted. Compared with the performance of
independent pricing in which all providers only determine
the utility by price and cost locally without considering
the strategies of others, we perform numerical simulation to
analyze the proposed competitive optimal pricing mechanism.
A. Effectiveness of the reputation mechanism
We test the proposed reputation mechanism on MNIST
dataset [13]. The dataset is split into 50 shards that are
allocated to 50 vehicles. They train and share their results. The
CNN model is used as the local training model. The leader
of each region aggregats all local models and evaluates the
performance of the models on the testset.
We first compare and analyze the influence of RFL with or
without reputation selection on the accuracy of global model
under a fixed threshold λ = 0.6. The threshold here is the
best value selected in multiple experiments to balance accuracy
and convergence speed. The situation of λ=0 is a FL process
without reputation selection. We also consider the effect of the
number of vehicles participating in the training. Fig. 3 reflects
that compared to the general FL without selection, the model
with reputation evaluation can achieve higher accuracy, that
increased by up to 18%. The more participating vehicles, the
higher the accuracy of global model, because the more data to
be trained, the more thoroughly the model learns. When the
number of vehicles is less than 30, the system takes longer to
converge and the model accuracy rate is relatively low.
Fig. 3. The accuracy of global model with various numbers of vehicles under
reputation selection and non-reputation selection.
B. Evaluation of Knowledge Trading Market
1) Security: The blockchain-enhanced knowledge trading
market ensures security of transactions through encryption
primitives. Decentralization and digital signature can further
ensure that no malicious nodes can easily disrupt the network.
2) Efficiency: Through the collaboration of edge computing
and blockchain, knowledge tradings can be executed with
low latency and low energy consumption. The transaction
negotiation and pricing can be automatically and effectively
implemented by smart contracts to meet real-time requests,
avoiding network congestion and resource waste caused by
direct communication in transaction.
3) Profitability:In the optimal pricing mechanism based on
non-cooperative games, the market agent determines the best
knowledge provider by comprehensively considering factors
to ensure the highest utility for the whole system.
C. Performance Analysis of Competitive Pricing Mechanism
We study the performance of the competitive knowledge
pricing mechanism by numerical simulation. To illustrate the
impact of different parameters on performance, we only con-
sider a scene with single knowledge requester and Q providers.
The proposed competitive mechanism in this paper takes into
account many practical factors of inter-regional knowledge
�����������	
����������	���	������������
�	��������
�����������
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 06:37:59 UTC from IEEE Xplore.  Restrictions apply. 
Fig. 4. Convergence of knowledge price and impacts
brought by competition on the knowledge price.
Fig. 5. Impacts brought by competition on the utility
of the optimal provider.
Fig. 6. Impacts brought by competition on social
welfare under different utility of optimal provider
trading for the first time, thus the parameter settings adopted
in our simulation are all assumptions. The default parameter
values for numerical experiments are set as follows: pmax = 1
and a = 1. Assume that {θj}, j ∈ H, {βj}, j ∈ H and
{dmj}, j ∈ H,m ∈ R follow uniform distribution among
[1,3], [0.8,1] and [1,3] km respectively as the value of Q
changes. The parameter settings are consistent in multiple
comparison experiments, which is reasonable. We repeated all
the numerical analyses 100 times, taking the median as the
result. B represents the budget of the knowledge requester.
1) Convergence of knowledge pricing: Fig. 4 shows the con-
vergence of prices of algorithm 1. We give a certain requester
budget B = 0.8. Suppose Q = 3, and they participate in com-
petitive and independent pricing at different costs respectively.
In the former, the knowledge pricing of all providers quickly
converges and reaches equilibrium around 12 iterations. While
in the latter, they only set corresponding prices based on costs
and remain unchanged. In addition, competitive pricing after
convergence is lower, because competition between providers
has prompted them to lower prices to achieve more tradings.
2) Profitability of Knowledge provider: Fig. 5 shows the
effect of Q on the utility of optimal knowledge provider. Under
competitive pricing, although the price is lower, the provider
can still get more revenue. This difference occurs because
competition reduces the profits of all providers, but they can
sell more knowledge and gain more even at a lower price. In
addition, as B increases, the provider gains more utility.
3) Social Welfare (SW): SW is the global evaluation of the
knowledge market, influencing the system performance and
stability. We define the SW function as follows:
SW = ϕj · Cj − ξ · costj ,
where ξ is a parameter indicating the impact of energy
consumption on SW. We set ξ = 0.4. Fig. 6 shows that with
the increase of the utility of knowledge provider, the social
welfare under both schemes will increase to different degrees.
In addition, the social welfare in competitive pricing is higher
when the providers have the same utility. This is because
optimal providers are selected based on competitiveness and
comprehensively considers a few factors in (11).
VI. CONCLUSION
In this article, we first proposed the regional federated
learning in IoV as the process of knowledge generation. In
order to ensure the reliability of participating vehicles, we
proposed a reputation-based selection scheme. The selected
vehicles train the global model in a collaborative manner,
and each region maintains its own knowledge. We built a
knowledge trading market based on smart contract for safety
and efficiency. Finally, we designed an optimal competitive
pricing strategy based on non-cooperative game. Security anal-
ysis and numerical simulations show that reputation selection
can improve the accuracy of knowledge up to 18%, and in the
knowledge trading market, the competition pricing ensures the
best utility of knowledge providers and social welfare.
REFERENCES
[1] X. Lin, J. Li, J. Wu, H. Liang and W. Yang, ”Making Knowledge
Tradable in Edge-AI Enabled IoT: A Consortium Blockchain-Based
Efficient and Incentive Approach,” in IEEE Transactions on Industrial
Informatics, vol. 15, no. 12, pp. 6367-6378, Dec. 2019.
[2] Chai H , Leng S , Chen Y , et al. A Hierarchical Blockchain-Enabled
Federated Learning Algorithm for Knowledge Sharing in Internet of
Vehicles[J]. IEEE Transactions on Intelligent Transportation Systems,
2020, PP(99):1-12.
[3] J. Kang, Z. Xiong, D. Niyato, S. Xie and J. Zhang, ”Incentive mech-
anism for reliable federated learning: A joint optimization approach to
combining reputation and contract theory”, in IEEE Internet of Things
Journal, vol. 6, no. 6, pp. 10700-10714, Dec. 2019.
[4] Z. Yang, K. Yang, L. Lei, K. Zheng and V. C. M. Leung, ”Blockchain-
Based Decentralized Trust Management in Vehicular Networks,” in IEEE
Internet of Things Journal, vol. 6, no. 2, pp. 1495-1505, April 2019.
[5] M. Shayan et al. (2018). Biscotti: A Ledger for Private and
Secure Peer-to-Peer Machine Learning. [Online]. Available:
https://arxiv.org/abs/1811.09904
[6] T. Cheng, G. Liu, Q. Yang and J. Sun, ”Trust Assessment in Vehicular
Social Network Based on Three-Valued Subjective Logic,” in IEEE
Transactions on Multimedia, vol. 21, no. 3, pp. 652-663, March 2019.
[7] S. Guleng, C. Wu, X. Chen, X. Wang, T. Yoshinaga and Y. Ji,
”Decentralized Trust Evaluation in Vehicular Internet of Things,” in
IEEE Access, vol. 7, pp. 15980-15988, 2019.
[8] J. Kang, R. Yu, X. Huang and S. Maharjan, ”Enabling Localized Peer-
to-Peer Electricity Trading Among Plug-in Hybrid Electric Vehicles
Using Consortium Blockchains,” in IEEE Transactions on Industrial
Informatics, vol. 13, no. 6, pp. 3154-3164, Dec. 2017.
[9] O. Novo, ”Blockchain meets IoT: An architecture for scalable access
management in IoT,” IEEE Internet of Things Journal, vol. 5, no. 2, pp.
1184–1195, Apr. 2018.
[10] K. Liu, X. Qiu, W. Chen and X. Chen, ”Optimal Pricing Mechanism
for Data Market in Blockchain-Enhanced Internet of Things,” in IEEE
Internet of Things Journal, vol. 6, no. 6, pp. 9748-9761, Dec. 2019.
[11] Z. Zheng, Y. Peng, F. Wu, S. Tang, and G. Chen, ”Trading data in the
crowd: Profit-driven data acquisition for mobile crowdsensing,” IEEE J.
Sel. Areas Commun., vol. 35, no. 2, pp. 486–501, Feb. 2017.
[12] P. Basu, N. Khan and T. D. C. Little, ”A mobility based metric for
clustering in mobile ad hoc networks,” Proceedings 21st International
Conference on Distributed Computing Systems Workshops, Mesa, AZ,
USA, 2001, pp. 413-418.
[13] Y. Lecun, L. Bottou, Y. Bengio and P. Haffner, ”Gradient-based learning
applied to document recognition,” in Proceedings of the IEEE, vol. 86,
no. 11, pp. 2278-2324, Nov. 1998.
�����������	
����������	���	������������
�	��������
�����������
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 06:37:59 UTC from IEEE Xplore.  Restrictions apply.