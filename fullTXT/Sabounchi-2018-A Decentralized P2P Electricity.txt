A Decentralized P2P Electricity Market Model for Microgrids
A Decentralized P2P Electricity Market Model for Microgrids
Moein Sabounchi
Email: ms370@zips.uakron.edu
Jin Wei
Email: jwei1@uakron.edu
Abstract—Inspired by the online peer-to-peer (P2P) goods trading
that has become increasingly popular in the recent years, in this paper
we propose a decentralized P2P electricity marketing mechanism for
a microgrid (MG) consisting of networked prosumer (consumers with
distributed generation capability) clusters by incorporating Blockchain
technology and Smart Contracts (SC). Our proposed electricity market-
ing mechanism is a two-level hierarchical one: In the upper level, the
aggregators (AGGs) cooperate with each other and in the lower level, the
local PRs maximize their financial profits via P2P energy trading. This
mechanisms potentially results in price of anarchy instances in which
the targets of the two level players will be contradictory. To address this
issue, we assume that there exists a single universal cost function for
both levels of the game. In our simulations, we evaluate the performance
of our proposed P2P electricity marketing mechanism in maximizing the
self-sufficiency of the microgrid and minimizing the side effects of the
discriminatory pricing.
Index Terms—P2P Electricity Market, Price of Anarchy, Blockchain,
Electricity Market, Aggregator, Distributed Energy Resources (DERs)
I. INTRODUCTION
Various smart grid techniques have been developed to provide
novel analysis and operating tools by leveraging the potentials of the
Distributed Energy Resources (DERs) and enhancing the capabilities
of the modern power systems in addressing the dramatically increased
energy demand. In this manner, we propose a decentralized P2P
real-time electricity marketing mechanism for MGs by exploiting
Blockchain techniques. Considering the effectiveness of implement-
ing the P2P electricity marketing mechanism is dependent on the high
penetration of the DERs, in our paper we assume that the consumers
also have DERs such as solar photovoltaic (PV) panels and wind
turbines (WT). The authors believe that this assumption is consistent
with the evolution of the modern power systems. Prosumer(PR) is
used to refer to a consumer who owns the DER units. The Blockchain
technologies [1] have been developed to provide immutable, public,
and decentralized ledger that can be employed to securely record
the individual transaction in our P2P energy trading mechanism.
In our Blockchain-enabled mechanism, the valuable transactions are
determined by using a smart contract (SC) in which all PRs agree
to the general algorithm while they may differ in terms of pricing
strategies and levels. The cost of financial mining in the Blockchain
is carried out by PRs financial transactions’ taxation. Our main
contribution in this paper is to design an automated P2P direct
electricity trading mechansim on the Blockchain platform which
brings about various advantages; The decentralized P2P electricity
markets potentially reduce the transmission losses and dissipation
due to relative short and reduced transmission lines [2], support peak
shaving by enabling DG integration into the grid in large scale [3], [4]
and helps to dencentralize hierarchical control systems by distributing
the generation into a wider portfolio [5] while current centralized
algorithms limit DRM (Demand Response Management) programs
in the market due to centralized price-based algorithms [4]. The
control system in centralized markets is limited to hierarchical control
systems and (Very Limited) multi-agent ones [6] and the load profile
will always be subject to change from top to bottom. The power
outputs of DER units, such as PVs and WTs, can be extremely volatile
which introduce significant uncertainties that are unacceptable for
detailed financial planning. To address this issue, various solutions
have been proposed; Su et al. use reserve fast ramping spinning
generators to support the system in the times of power generation loss
[7]. Although this system is deemed to be reliable, its implementation
is expensive and costly. The utilization of load AGGs is proposed
in [8] in which load AGGs are market entities that own distributed
energy storage systems and sign long-term contracts with local PRs.
The incentivize completion of the contract varies from case to case.
Additionally, many market designers have been using the financial
compensation as the restitution tool for the said rights to incentivize
PRs to participate in these types of programs [8], and [9]. Chang et
al. in [9] proposed a different approach for developing load control
algorithms in which they used aggregated loads belonging to various
MGs as virtual power plants (VPPs). They also developed a method
to minimize the transmission loss to maximize financial gain.
In this paper, we propose a two-level hierarchical energy trading
mechanism. In the lower-level, we model the interactions between
the PRs within the same MGs by defining a competitive game
theoretical mechanism with price discrimination. The competitive
nature of the game theoretical model in the lower level automatically
solves the issue of lack of incentives for the PRs to take part in the
game. Considering that the PRs may lack either time or expertise to
constantly engage in the real-time energy transactions, in our model
we use Smart Contracts (SCs) for a network of PRs, where status
of each PR in the market and energy trading transactions they make
is recorded and updated in real time. It is well known that most
electricity markets use the uniform pricing for achieving the inherent
optimal load profile [10] and removing abnormal load harmonics
[11]. The decentralized and P2P nature of price discrimination led
us to develop a cooperative game between the AGGs in the upper
level of the market structure to minimize the effects of discriminatory
pricing and the load increase, and maximize the financial restitution
and profits of PRs in the lower-level game. The rest of the paper is
organized as follows. In Section II, we will introduce the structure of
the MG and the dynamics of the energy storage system. In Section
III, we will describe the electricity pricing method and the various
strategies of the PRs as well as electricity market trade and optimal
decision-making algorithm for an efficient dispatch. The simulation
results and the conclusions will be shown in Sections IV and V.
II. THE MICROGRID STRUCTURE
A. The Structure of the Microgrid
In our proposed mechanism, a cost-efficient load profile assessment
and planning for renewable energy systems is achieved by leveraging
the AGGs in the MG model. In our mechanism, we assume that the
AGGs have the following three rights: (1) controlling the interruptible
loads (ILs), (2) managing the distributed generations, and (3) taking
a pre-determined percentage of each financial transaction as taxation
over the associated cluster for maintaining the operations and man-
aging the P2P energy trading. Each AGG is the responsible party
for a group of geographically associated PRs that we call cluster.
Furthermore, we assume that an Automatic Metering Infrastructure
(AMI) is implemented in the MG and each PR is connected to
their respective AGG and other PRs via high-speed data connection.
The electricity consumption level and the cost of generating or
purchasing the energy of the individual PRs are announced via that
data system to the associated AGGs. One of the essential challenges
in designing the decentralized electricity markets is the extremely
high, complexity chain of actions that may occur. To tackle this
978-1-5386-7703-2/18/$31.00 ©2018 IEEE
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:06:17 UTC from IEEE Xplore.  Restrictions apply. 
challenge, we incorporate the concept of the cloud of energy proposed
in [12]. Each cluster of the PRs is equipped with a decentralized
Energy Storage System (ESS) that is shared among the PRs within the
cluster and, is utilized by the associated AGG for either transferring
the energy between local PRs or buying/selling energy to other
clusters. Each AGG owns a set of spinning generators whose costs
are supported by the taxation of lower-level financial transactions.
B. Dynamics of the ESS and P2P Energy Transfer
In our framework, we assume that each PR i of Cluster j has its
own energy storage unit. The overall ESS capacity of the cluster can
be calculated as:
ESSj =
Nj∑
i=1
ESSi,j (1)
where Nj is the number of PRs in Cluster j. Additionally, each PR
has three pre-defined possible actions regarding the energy storage
system: (1) charging it, (2) using its resources to supply their demand,
or (3) a hybrid status, in which the individual PRs can act according
to the following three essential rules:
I) If the level of local energy storage of PR i in the Cluster j is
larger than Xu(i, j) percent, then this PR must go to the local market
as a seller.
II) If the local energy storage unit has fallen below this second
threshold Xd(i, j), the PR i needs to go to the market to charge its
storage system. The system is defined in a manner which, if the level
of local storage gets close to the lower threshold, it means that its
demand has already surpassed its generation capability.
III) If the ESS charge is lesser than the upper threshold and larger
that lower bar, it will follow the following algorithm for its charge and
discharge, based on the finite difference of supply-demand function:
C
tn
i,j = lim
h→1
(
∆h
(
G
tn
i,j −D
tn
i,j
)
h
)
(2)
where Gtni,j is the generation level of PR i of Cluster j at the Time-
step tn and D
tn
i,j is the demand level of the said PR at the same
time period. We choose h as the difference duration to converge to
minimum difference possible which will be 1, in order to increase
the accuracy and speed of the system response to generation/demand
changes. The values of Xu(i, j) and Xd(i, j) which are the sharing
ratios are determined by the PRs based on their level of willingness
to share their resources with the market. The charge-discharge in the
hybrid mode is determined according to the following rules: (1) if
C
tn
i,j ≥ 0, the PR will start engaging in the market as a seller of
energy, (2) if Ctni,j < 0, the PR will continue storing the residential
local storage unit to prevent further discharge of the battery, and
(3) if Ctni,j = 0, (a subset of situation (1)), it means the market
has reached a balance over a certain price and trade will start to
occur. This specific situation will be discussed further in III-A, and
III-C. Furthermore, if there are not sufficient demand in the market
for excessive generation, the PRs can continue to charge their own
ESSs. The competition between the PRs is encouraged by leveraging
the resources in the local shared ESS. We name the energy storage,
momentarily level of each PR i of Cluster j which contains Nj PRs
at any given moment tn as Rtni,j , and we also denote the amount that
each PR brings to the market at any given period tn as Stni,j and it
can be calculated as:
S
tn
i,j =

[
1
2
(
1 − sgn
(
Xu(i, j) −R
tn
i,j
))
×(
R
tn
i,j −
(
Xu(i,j)ESSi
100
)) ]
+[
1
4
(
1 − sgn
(
R
tn
i,j −Xu(i, j)
))
×(
1 + sgn
(
C
tn
i,j
)) ((
Xu(i,j)ESSi
100
)
−R
tn
i,j
) ]

(3)
It should be noted that, if the PR is not sharing any resources with
the market which happens in the second situation, its contribution to
the market would obviously be zero and thus the inclusion of a third
term in Eq. (9), which is always zero, is not necessary. Also, the
total tradable, shared resources of Cluster j consisting of Nj PRs, is
denoted as Etnj and it can be calculated as:
E
tn
j =
k∑
i=1
S
tn
i,j (4)
III. THE ELECTRICITY MARKET MODEL
In our work, the AGG other than the aforementioned tasks, acts as
the auctioneer in each cluster and clears each financial transaction
at a distinct price according to price discrimination at the lower
level. Furthermore, the AGG of each cluster arranges the seller bids
from the least to the highest and buyer bids in reverse. The pricing
algorithm for individual PRs is as follows: We denote the maximum
value of buyers bids as Pm and the cost of generation is assumed to be
independent of each PR’s DER unit output level due to relative small
size, and is shown by Qtni,j . Since the bids for generation and demand
are made locally, the generation/demand prediction is not required. In
other words, even though the generation capabilities of PRs is subject
to volatility in future horizons due to inherent fluctuations in PV and
WT units power outputs, when the seller PR signs the contract for
a certain period in the future, he will always honor it one way or
another, either using their storage or buying from real-time market to
honor their pledge. The seller will fulfill its responsibility with regards
to the contract using either its DER unit, local storage unit or in the
worst-case scenario, reducing its demand. This enables us to have
deterministic values for trades at each energy trading period. Each
PR is trying to maximize its profit while its associated AGG targets at
supporting the total demand of the cluster at any given time iteration
(period). This interest conflict can result in a pure price of anarchy
situation in the auction for all PRs. The pricing of each PR is modeled
by using three strategies: withholding, predatory (undercutting) and
timid [11].
A. Pricing Strategies
1) Predatory Pricing: The objective of PR i in this strategy is to sell
at a lower price than other PRs in the market in order to either gain
power over the market by eliminating other competitors or to sell the
energy at a price to gain a risk-free moderate profit that is acceptable
to the PR but is not feasible to other competitors. The predatory price
Pp in our model it is determined based on the minimum costs of the
energy generation of PR i and the maximum buyer bids given by
the local PRs. The predatory pricing has the constraint defined as
follows:
Qtni,j ≤ Pp <
1
2
(
Pm +Qtni,j
)
(5)
Pm > Qtni,j (6)
Since the predatory pricing strategy achieves the lowest value
amongst all models of pricing, if no buyers’ bid is acceptable for
this strategy the PR i will not sell energy at that given time.
2) Withholding Pricing: In this strategy, PR i aims to maximize its
profit by suggesting a higher price comparing to other bids for their
energy. The goal of this strategy is to sell at a higher price to either
compensate the lower number of sales in case of being undercut by
other competitors or to gain maximum authority over market if no
other seller is active. The withholding price is defined as follows:
Pw ≥ Pm (7)
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:06:17 UTC from IEEE Xplore.  Restrictions apply. 
3) Timid Pricing: Timid Pricing refers to the strategy that achieves
the price between the predatory price and the maximum buying bid
and can be modeled as follows:
1
2
(
Pm +Qtni,j
)
≤ PT < Pm (8)
As mentioned earlier, the trade mechanism employed in this paper is
an automated one that occurs independent of momentary decisions
of the buyer and/or seller PRs in order to facilitate a trade system on
the SC. This mechanism is dependent only on the strategies, sharing
ratios as mentioned in section II-B as well as generation/demand
of the PRs and maximum price and individual cost of generation.
The decision-making procedure for individual seller PRs is described
in II-B. The pricing for seller PRs is dependent on parameters and
concepts introduced separately in II-A, II-B, and III-A, but in order
to present a unified vision for the price, we can write the price of
electricity as:
P
tn
i,j =

[
1
2
(
1− sgn
(
Pp(i, j)− 1
2
(
Pm+Qtni,j
)))
Pp(i, j)+
1
2
(1− sgn (Pm−Pw(i, j)))Pw(i, j)+
]
[
1
4
(
1 + sgn
(
PT (i, j)− 1
2
(
Pm+Qtni,j
)))
×
(1 + sgn (Pm − PT (i, j))))× PT (i, j))
]

(9)
The price for each individual PR depending on their strategy differs
and is pre-determined by the seller PR. The case for buyer PRs
is slightly different and works based on two main parameters,
availability of the resource and reputation of the seller and it can
be described in Fig. 1.
No
New Residential Local 
Demand
Can the 
Prosumer Generation 
Support it?
No
Yes
Use the Local 
Energy Storage to 
Supply the Demand.
Use the Local Generation to 
Supply the Demand.
Can the Generation 
and ESS Support it?
Yes
Use the Local Storage System 
to supply the Demand
No Go to the 
Local Market
Buy the Demand from the 
Local Market
Are There Enough 
Resources in the Local 
Cluster?  
Yes
Are the Local Prices 
Acceptable?
Yes
Next Iteration
Are the Upper Level 
Prices Acceptable?
Buy the Energy form the 
Upper Market to Support the 
Demand
Cut the Local Demand 
Accordingly 
Go to the Upper Level 
Market via Local 
Aggregator
Go to the Upper Level 
Market via Local 
Aggregator
Are the Upper Level 
Prices Acceptable?
Buy the Energy form the Upper 
Market to Support the Demand
Yes
Next Iteration
First Iteration
Ask the Local Aggregator to use 
the Cluster s Local Generator
No
No
No
No
Yes
Fig. 1: Buyer Prosumer Decision-making Process
B. Blockchain-Based Trade Mechanism
The Blockchain enables various functionalities that were not pos-
sible in the centralized markets or even coalitions such as robust
security of information, decentralized validation of transactions, mar-
ket decentralization, and etc. The Blockchains provide the possibility
of practical implementation of discrimination-based price market.
Furthermore, there is no need for a coalition of a cooperative pool of
PRs to take shape and the profit allocation will be completely fair and
intrinsic to the system. The pricing policies for each PR is defined as a
variable that they can simply choose in the SC, as well as announcing
and updating their sharing ratios and other information regarding
their participation. These information can easily be acquired and
announced in the market by using the SC. Based on their level of
electricity generation, their cost of generation, their selected policy,
and the sharing ratios that are announced in the SC, the PRs can
go to the market to either sell their excessive generation or to buy
energy to supply their demand in the future iterations based on the
following priorities: (1) Local PR generation, (2) Local PR ESS,
(3) Local cluster market (If the prices are acceptable and/or there is
enough resources in the local cluster), and (4) Upper-level market
by asking the AGG. The details of market mechanism including the
pricing algorithm and decision-making procedure of the individual
buyer PRs is shown in Fig. 1. At each iteration, each seller PR,
gives its excessive electricity to the AGG and receives a unit, which
is called coin and has the value proportional to the amount of the
shared energy, from the AGG. The authors would like to mention that
the concept of coin is equivalent to ”Renewable Energy Certificates”
proposed in [13] that refers to a pre-determined amount of energy.
In the market, PR acting as a buyer, called buyer PR, joins the pool
of local seller PRs and based on the required energy demand and
the reliability coefficients of each seller that are defined in the SC,
buys its required coins from any seller that it deems appropriate.
In the next stage, the buyer PR goes to the AGG with the bought
coins and demands energy for the coins. By leveraging the coins,
we effectively eliminate disparities in load balance, frequency, and
voltage that may raise in P2P electricity market mechanism. There
are issues that may occur during this transaction, most noticeable of
all is that the local pool of sellers pricing is not acceptable to buyers
which is the equivalent of:
Pm < Qtni,j (10)
To tackle this issue, there is another option for a buyer to go directly
to the AGG and ask for resources. Since the AGG owns nothing
other than the reserve generators and its rights, it cannot sell from
the shared ESS to the buyer (The shared pool of resources belongs
to the sellers and coin owners.), so it must go to the upper market
and ask for resources in the upper-level market between other AGGs
as a buyer AGG. The reserve generators only functionality is for the
conditions, where there aren’t sufficient resources in the both lower
and the upper levels. In our modeling, we name the generator output
power as λj . The cost of this generator should be compensated by
the taxation that is agreed upon earlier. The size of generation of this
reserve is proportional to the rate of taxation τj :
λj =
τj
m
(
tn+24∑
tn=t0
(
k∑
i=1
D
tn
i,j
))
(11)
where m is the financial efficiency ratio of the generator and is
assigned as a weight to the system. In our model simulation, we set
m as 2. Since the AGGs have no goal of financial profit, they only
sell the energy at the price that is based on their maximum local PRs
price. The market clears at distinct prices for each AGG and each
AGG has no strategy except the one that is enforced by its local PRs
via their local pricing algorithms. Moreover, the AGGs obviously
have no authority to sell the energy at a lower price than their clusters
maximum price. We believe this assumption is reasonable since: (1)
An AGG cannot enforce a price to its seller PRs. (2) The AGG cannot
impose any financial loss to its local cluster other than agreed upon,
tax rate. (3) Each AGG may not use its local seller PRs who sell at
lower prices to sell to other AGGs because the first priority for each
PR is the local cluster and inside the local cluster, there are local
buyers that may use that lower priced energy. The lower-level local
market and upper-level AGG market are both cleared simultaneously.
C. The Electricity Market Optimization Problem
Since our market uses price discrimination, the total cost of energy
for all PRs and their level of satisfaction will be different from
the optimized values [11] usually associated with uniform pricing.
To strike this issue, we introduce a social satisfaction factor for
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:06:17 UTC from IEEE Xplore.  Restrictions apply. 
the PRs in the system performance cost function which will also
include their total cost of energy. The social satisfaction index φi,j , is
dependent on the level of demand cuts that the cluster undergoes and
is different from perceived reputation of sellers which is a constant
value. The cost function for the performance of the system is defined
by also considering total power consumption in each iteration and the
individual financial gain of all PRs in the cluster. Since the market
uses a simultaneous method for price clearing, in both upper and
lower levels, we use a single cost function for both levels of the
market to optimize the system status at any given moment. We know
that the profit of each seller is determined by its strategy and its
generation supply curve, so for Cluster j, we have:
T
tn
i,j =
(
1 − τj
100
)
(S
tn
i,j)(P
tn
i,j) (12)
Using Eq. (12), we can determine the total sales of all PRs Yj , of
Cluster j:
Yj =
tf∑
tn=1
Nj∑
i=1
(Vi)
(
T
tn
i,j
)
(13)
where Vi is the perceived reputation coefficient of each PRs that each
buyer PR considers when selecting a seller. The value of Vi is fixed
for each seller PR and is used as a weight parameter in the decision-
making procedure for buyers. The total cost of energy for all PRs of
Cluster j, is dependent on their demand as well as the price that they
pay for energy which can be calculated as:
Wj =
tf∑
tn=1
[(
Nj∑
i=1
(
Dtn
i,j
) (
Pi
(
Ctnj = 0
)))]
(14)
where:
Ctnj =
Nj∑
i=1
C
tn
i,j (15)
As shown in Eq. (15), the total cost of demand is calculated by the
intersection price point of the demand and supply curves multiplied
by the total demand in all iterations. The demand and supply curves
for each PR may vary but we design them based on the maximum
price point of each buyer PR Pm and minimum generation cost of
seller PRs, Qtni,j in respectively linearized demand and supply curves.
The total cost of generation for a Cluster j, can be calculated as:
Zj =
tf∑
tn=1
Nj∑
i=1
(
Qtni,j
)
(16)
The PRs main goal is financial gain, so the following cost function,
which is utility function from the perspective of PRs of one cluster
j, should be maximized:
Uj = Yj − (Wj + Zj) (17)
As mentioned earlier, the AGGs mainly focus on maximizing the
feasibility of the grid and this comes through that maximum ratio
of the demand of the cluster is supported and the PRs have had
minimum demand cuts and since the reason behind the demand cuts
is the high price of energy, we can calculate the cost function from
the perspective of an AGG. First, the total cut needs to be calculated:
φtni,j =
1
2
[
1 − sgn
(
C
tn
i,j
)] [ tf∑
tn=1
(
C
tn
i,j
)]
(18)
φj =
tf∑
tn=1
Nj∑
i=1
(
φtni,j
)
(19)
The summation of all demand cuts are considered as the indexes of
the system reliability, where lower total demand cut points at a more
self-sufficient, feasible and reliable system and higher one shows a
less reliable system. The difference in the price and the cost of energy
that forced a buyer PR to cut its demand instead of buying it, can be
modeled as:
Oj =
(
φtni,j
)(
min
i
(
Qtni,j
)
− Pm
)
(20)
The main constraint of the utility function comes from self-sufficiency
of the MG. Therefore, based on Eqs. (17) and (20), we can derive
the final cost function for the PRs of cluster j and their associated
AGG:
Maximize :
τj
Uj −Oj (21)
Subject to : (Yj + λj) −
(
Nj∑
i=1
(
Dtn
i,j
))
≥ 0 (22)
As defined in Eqs. (21) and (22), if the total generation of the cluster
does not satisfy the total demand of it, the system will ask for
resources from other clusters and if that attempt is not successful,
finally it will go to its own reserve generators and in such situations,
obviously, an optimized dispatch is not the first priority for the
system. In the next section, the simulation results of the model and
general conclusions are presented.
IV. SIMULATION RESULTS
In this section, we evaluate our proposed mechanism by consid-
ering a MG consisting of ten PR clusters. In each cluster, there
are PRs that are equipped with small PV panels with a nominal
power output of 2.5 kWh. As stated in previous sections, the PRs are
in geographically close locations so they will face similar weather
and financial situations, but their load profiles are different. We use
the datasets from the day ahead forecasts of Solar PV panels for
the state of Ohio in the April of 2006, from National Renewable
Energy Laboratory (NREL) archive [14] to normalize and correctly
simulate (based on time of the day and the day in the month) power
outputs of each PR’s DER unit. The simulations are conducted for
a sample period of 24 hours that is divided to 24 time iterations
in the day ahead market. At the start of each period, PRs can go
to the market to buy their demand for the same period tomorrow
from the local pool of local cluster’s PRs, while the upper-level
market is an expensive real-time option. To achieve a context for
the actual price of energy and simulate the interactions within the
upper and lower levels of day-ahead and real-time market, we use
the PJM locational marginal pricing dataset in the same period (i.e.
April of 2006) for OhioHub. We simulate the average total costs of
each cluster for every 24 hours and compare the simulation results
to the values that are achieved via standard uniform pricing. In
our simulations, the system never shifts to emergency reserves ,
which illustrates the effectiveness of our mechanism in improving
the feasibility and reliability of the electricity market for distribution
power systems. From Fig. 2 (a), we can observe that the total costs of
energy of the PRs of the cluster, due to the demand rise for each PR,
have an increment with an average rate of 20.68 % compared with
centralized real-time uniform pricing which can be explained by price
discrimination. Discriminatory pricing reduces the total financial
optimality of the system at the price of nearly total freedom of PRs
in their functionality. In the next step, we compare the total average
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:06:17 UTC from IEEE Xplore.  Restrictions apply. 
1 2 3 4 5 6 7 8 9 10
Prosumers Clusters
0
0.5
1
1.5
2
2.5
3
Av
era
ge 
Mo
nth
ly 
Co
sts
 of
 th
e C
lus
ter
s P
ros
um
ers
105
Discrimiatory Pricing
Uniform Pricing
(a)
1 2 3 4 5 6 7 8 9 10
Prosumers Clusters
0
20
40
60
80
100
120
Av
era
ge 
To
tal
 D
em
and
s
Discriminatory Pricing
Uniform Pricing
(b)
1 2 3 4 5 6 7 8 9 10
Prosumers Clusters
0
5
10
15
Av
era
ge 
Cle
ari
ng
 Pr
ice
Discriminatory Pricing
Uniform Pricing
(c)
Fig. 2: The Average (a) Costs of a Clusters Prosumers for Ten Clusters,
(b) Total Demand for All Clusters, (c) Price for All Clusters Prosumers
per Hour
demand load of clusters in our decentralized discriminatory pricing
method versus uniform pricing. In our system,the individual PRs can
act as either buyers or sellers in the market. Furthermore, as shown
in Fig. 2 (b), the decentralized P2P marketing algorithm proposed in
our system modeling efficiently reduces the optimality of the demand
profile and will cause a surge in the electricity consumption rate
for relatively all of the PRs. From Fig. 2 (b), we can also see that
due to the price discrimination in our decentralized P2P marketing
model, the load peak for the cluster will increase as well but at a
rate of only 9.37 %. This result is reasonable since the inherent
price discrimination creates will create zones with PRs that, based
on their reputation, will engage only in mutual financial transaction
mostly with each other; This issue will result in increased demand in
the system during peak hours. The other parameter that is affected
by our modeling is the average price of electricity. In our model,
while the price discrimination might hint to increased price, it is
expected that the we witness lower average prices comparing to the
centralized markets which have to compensate for transmission losses
and infrastructural costs and it would also be compatible to individual
rationality and incentive compatibility principle for individual PRs. In
Fig. 2,(c) it can be seen in remotely all instances the average prices
for consumers is lower than that of central markets. It should be
noted that the individual prices for transactions is volatile and highly
dependent on the preferences of each PR and it might be higher or
lower than the average values of Fig. 2 (c).
In this paper, we propose a Blockchain-enabled mechanism for
decentralized P2P energy marketing, in which the price discrimina-
tion is determined based on the decision-making of the individual
residential PRs and the energy trading transactions are implemented
autonomously via smart contracts. As shown in the simulation results,
the main target of the upper-level of the market which is the self-
sufficiency of the MG is reached. The lower level’s PRs financial
turn over is also acceptable and total freedom for all PRs is ensured
but this comes at the cost of lower financial turnover, an increase
in demand and higher load peak. In the current context, as shown
in simulation results, the mechanism is capable of minimizing the
total cost and load peak increase, to a certain extent which both
the demand peak and costs are lower than centralized flat-priced
traditional markets and only lack behind real-time uniform markets.
This is an acceptable compromise for decentralization of the market.
In our ongoing work, we are extending the work in this paper by
considering including more practical measures and regulations in
the model and implementing P2P electricity marketing for a set of
residential MGs in urban environment with more restrictions and
constraints.
REFERENCES
[1] Melanie Swan. Blockchain: Blueprint for a new economy. ” O’Reilly
Media, Inc.”, 2015.
[2] W. Lee, L. Xiang, R. Schober, and V. W. S. Wong. Direct electricity
trading in smart grid: A coalitional game analysis. IEEE Journal on
Selected Areas in Communications, 32(7):1398–1411, July 2014.
[3] B. Hoseinzadeh, F. F. da Silva, and C. L. Bak. Decentralized coordination
of load shedding and plant protection considering high share of ress.
IEEE Transactions on Power Systems, 31(5):3607–3615, Sept 2016.
[4] Matteo Vasirani and Sascha Ossowski. Smart consumer load balancing:
state of the art and an empirical evaluation in the spanish electricity
market. Artificial Intelligence Review, 39(1):81–95, 2013.
[5] Wolfgang Ketter, John Collins, Prashant Reddy, Christoph Flath, and
Mathijs Weerdt. The power trading agent competition. 2011.
[6] R. G. Wandhare and V. Agarwal. Novel stability enhancing control
strategy for centralized pv-grid systems for smart grid applications. IEEE
Transactions on Smart Grid, 5(3):1389–1396, May 2014.
[7] H. I. Su and A. E. Gamal. Modeling and analysis of the role of fast-
response energy storage in the smart grid. In 2011 49th Annual Allerton
Conference on Communication, Control, and Computing (Allerton),
pages 719–726, Sept 2011.
[8] Z. LI, S. Wang, X. Zheng, F. De Leon, and T. Hong. Dynamic demand
response using customer coupons considering multiple load aggregators
to simultaneously achieve efficiency and fairness. IEEE Transactions on
Smart Grid, PP(99):1–1, 2016.
[9] C. L. Chang and J. C. H. Peng. A decision-making auction algorithm
for demand response in microgrids. IEEE Transactions on Smart Grid,
PP(99):1–1, 2016.
[10] Yuxin Chen and Tony Haitao Cui. The benefit of uniform price for
branded variants. Marketing Science, 32(1):36–50, 2013.
[11] I. Maity and S. Rao. Simulation and pricing mechanism analysis of
a solar-powered electrical microgrid. IEEE Systems Journal, 4(3):275–
284, Sept 2010.
[12] L. Sharifi, F. Freitag, and L. Veiga. Arta: An economic middleware
to exchange pervasive energy and computing resources. In 2016 IEEE
International Conference on Smart Grid Communications (SmartGrid-
Comm), pages 478–483, Nov 2016.
[13] Nick Johnstone, Ivan Haščič, and David Popp. Renewable energy
policies and technological innovation: evidence based on patent counts.
Environmental and resource economics, 45(1):133–155, 2010.
[14] Bri-Mathias Hodge. Solar Power Data for Integration Studies, 2017.
Authorized licensed use limited to: CITY UNIV OF HONG KONG. Downloaded on April 15,2023 at 07:06:17 UTC from IEEE Xplore.  Restrictions apply.