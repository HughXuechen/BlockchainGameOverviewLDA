Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
Received July 15, 2019, accepted September 3, 2019, date of publication September 5, 2019, date of current version September 20, 2019.
Digital Object Identifier 10.1109/ACCESS.2019.2939778
Two-Phase Cooperative Bargaining Game
Approach for Shard-Based Blockchain
Consensus Scheme
SUNGWOOK KIM
Department of Computer Science, Sogang University, Seoul 121-742, South Korea
e-mail: swkim01@sogang.ac.kr
This work was supported in part by the Ministry of Science (MSIT) and ICT, South Korea, under the Information Technology Research
Center (ITRC) support program, under Grant IITP-2019-2018-0-01799, supervised by the Institute for Information and Communications
Technology Planning and Evaluation (IITP), and in part by the Basic Science Research Program through the National Research Foundation
of Korea (NRF) funded by the Ministry of Education under Grant NRF-2018R1D1A1A09081759.
ABSTRACT In the last few years, blockchain technologies have come to the forefront of the research and
industrial communities as they bring potential benefits for many industries. Even though the blockchain
is a safe, reliable, and innovative mechanism, current blockchain solutions have fatal drawbacks of
non-supervision and huge computational overhead. Therefore, they cannot be directly applied for real world
operations. To resolve this problem, a novel model is presented in this study where the key idea is to split
the transactions among multiple shards while processing them in parallel. To achieve the maximum system
efficiency through the shard mechanism, we focus on the cooperative game theory. Based on the egalitarian
bargaining solution, total transactions per each time period are divided for each shard. According to the
proportional bargaining solution, assigned transactions in each individual shard are validated by blockchain
nodes in a distributed manner. The main advantage of our two-phase bargaining game model is to provide
an axiom-based strategic solution for the shard-based consensus problem while dynamically responding to
the current blockchain network conditions. The numerical simulation results show that the effectiveness
and efficiency of our game based approach by comparing the existing state-of-the-art blockchain control
schemes. In the conclusion, we present our conclusions and provide important future research directions
based on the combination of blockchain with other technologies.
INDEX TERMS Blockchain, shard-based consensus mechanism, cooperative game theory, egalitarian
bargaining solution, proportional bargaining solution.
I. INTRODUCTION
IN the past decade, with the popularity of digital cryptocur-
rencies, e.g., Bitcoin, blockchain technology has attracted
tremendous attention from both academia and industry. Since
then, blockchain has grown beyond cryptocurrencies to sup-
port many existing business and industrial processes. In addi-
tion, they enable the creation of new business models that
impact many industrial sectors such as finance, healthcare,
manufacturing, and logistics. A blockchain, also called dis-
tributed ledger, is essentially an append-only data structure
maintained through a set of regular blockchain nodes (BNs).
As the backbone of a public and distributed ledger system, the
blockchain technology guarantees the tamper-proof ledger,
The associate editor coordinating the review of this manuscript and
approving it for publication was Tawfik Al-Hadhrami.
transparent transactions, and trustless but secure trading in
a decentralized network [1], [2].
In the original design, BNs in the blockchain agree on
an ordered set of blocks, each containing multiple transac-
tions. Therefore, the blockchain can be viewed as a log of
ordered transactions. Usually, keeping records of transactions
is a core function of all businesses. A block is the current
part of a blockchain which records the recent information.
Once a block gets completed, it goes into the blockchain
as permanent database creating a new block. Blocks are
linked to each other like a chain in proper, chronological
order. In the database context, blockchain can be viewed
as a solution to distributed transaction management; BNs
keep replicas of the data and agree on an execution order
of transactions. While traditional database and blockchain
have some similarities, there is amajor difference. Traditional
127772 This work is licensed under a Creative Commons Attribution 4.0 License. For more information, see http://creativecommons.org/licenses/by/4.0/ VOLUME 7, 2019
https://orcid.org/0000-0003-1967-151X
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
database assumes a trusted environment and employs well
known concurrency control techniques to order transactions.
However, blockchain assumes that multiple BNs behave in
arbitrary manner to store, spread and preserve the blockchain
data. Therefore, it is necessary to offer a stronger security to
avoid system failure [3].
The blockchain is completely decentralized without any
supervision nor central management. Therefore, consensus
protocol is one of the most important and revolutionary
aspects of blockchain technology. As a term, consensus
means that the BNs on the network agree on the same state
of a blockchain, in a sense making it a self-auditing ecosys-
tem. This is an absolutely crucial aspect of the technology,
carrying out two key functions. First, consensus protocol
allows a blockchain to be updated while ensuring that every
block in the chain is true. Second, consensus protocol keeps
BNs participating in the consensus process while providing
incentives. The aim of consensus rules is to guarantee a
single chain is used and followed. The key requirement to
achieve a successful consensus is a unanimous acceptance
among BNs on the network for a single data value, even in
the event of some of BNs failing or being unreliable in any
way [4].
To ensure data consistency, speed of consensus finality,
robustness to arbitrarily behaving BNs and network scalabil-
ity, blockchain consensus protocols should offer the agree-
ment on the global blockchain data state among a large
number of trustless BNs with no identity authentication and
low messaging overhead. Most of the existing blockchain
consensus protocols attempt to satisfy this goal at the cost of
limited processing throughput. However, a number of existing
protocols incur the huge consumption of computing power to
achieve decentralized consensus among poorly synchronized,
trustless BNs. In addition, these existing consensus protocols
may impose high latency for transaction confirmation to
guarantee a consensus finality. Usually, the performance of
blockchain networks significantly relies on the performance
of adopted consensus algorithm. Therefore, a lot of attention
has been attracted to design an efficient consensus algo-
rithm for practical blockchain operations. However, in spite
of tremendous interests from the research communities, one
significant shortcoming of blockchain consensus protocols is
their low transaction throughput and poor scalability [5], [6].
Recently, there have been significant efforts to improve the
transaction throughput and scalability of blockchain consen-
sus protocols. One key outcome of this line of research is
sharding solution. Simply stated, sharding solution is a way
of partitioning; it fairly and randomly divides the blockchain
network into smaller committees, called a shard, and each
of which processes a disjoint set of transactions in parallel
with other shards. Each BN is not responsible for process-
ing the entire transactional load, but only maintains infor-
mation related to its corresponding shard. As each shard
is reasonably small, we can spread out the computational
and storage workload across the blockchain network while
increasing the overall transaction throughput of the system.
Therefore, the sharding solution is a key outcome to achieve
the scale-out throughput of blockchain system [6].
Although the idea of sharding solution is promising, most
existing sharding mechanisms fail to clarify i) how to fairly
distribute the entire transactional load amongmultiple shards,
and ii) how BNs will be incentivized to honestly participate
and discharge their shard duties. For the fair distribution of
entire transactions, a prior planning is necessary. If the con-
cept of fairness is not considered explicitly at the design stage
of entire transaction load division algorithm, it can result in
very unfair working load distribution among shards. In addi-
tion, to participate in sharding tasks, i.e., shard generation and
transaction validation, it imposes a cost on BNs. Therefore,
rational and selfish BNsmay not actively participate in shard-
ing tasks. In summary, one key research gap in the sharding
solution is a lack of understanding of the strategic behavior of
rational BNs and an intelligent load distribution strategy [6].
Such an understanding is critical for designing an appropriate
shard-based blockchain control algorithm, which will foster
the cooperation inter shards and the cooperation among BNs
within the same shard. Our goal in this paper is to address
this research gap. However, achieving this goal is difficult in
the distributed blockchain infrastructure whereas shards and
individual BNs are free to act in a selfish manner. Therefore,
we need a new control paradigm to address this problem.
Game theory is the discipline that studies how game
players make strategic decisions. It was initially developed
in economics to describe and analyze interactive decisions.
Specifically, a game model is the mathematical formalization
of conflict situations, and it is used to predict the outcome
of complex interaction among rational players. Classically,
there are two branches of game theory; non-cooperative
and cooperative games, which differ in how they formalize
interdependence among the players. In non-cooperative game
theory, a game is a detailed model of all the moves available
to the players. In contrast, cooperative game theory abstracts
away from this level of detail, and describes only the out-
comes that result when the players come together in different
combinations. Usually, cooperative game centers its interest
on particular sets of strategies known as solution concepts
based on what is required by norms of ideal rationality [7].
Therefore, it can make sense for players to work together
to mutual advantage. In this study, we focus on cooperative
game models to develop an efficient shard-based blockchain
consensus scheme.
A. MOTIVATION AND CONTRIBUTION
The aim of this study is to propose a novel shard-based
blockchain consensus scheme based on the cooperative game
paradigm. To tackle the transaction distribution problem,
we adopt the basic concept of Egalitarian Bargaining Solu-
tion (EBS). To foster participation in the consensus process,
we use the key idea of Proportional Bargaining Solution
(PBS). To investigate the hierarchical interactions between
shards and BNs, we formulate a new two-phase bargaining
game model, which is designed to strategically control the
VOLUME 7, 2019 127773
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
shard-based consensus process. Based on the cooperative
game solution guideline, shards and BNswork together coop-
eratively to guarantee fairness and efficiency while negotiat-
ing their conflict interests. The contributions of this study can
be briefly summarized as follows:
• Cooperative game approach: Depending on the coor-
dinated manner, multiple shards and individual BNs act
cooperatively and collaborate with each other to strike
an appropriate system performance among conflicting
interests. Therefore, control decisions are made intelli-
gently and rationally in a cooperative manner.
• The synergy of two bargaining solutions: we explore
the sequential interaction of two bargaining solutions,
and jointly design an integrated two-phase coopera-
tive game model. During the hierarchical interaction,
the synergy effect lies in its responsiveness to the recip-
rocal combination of different bargaining solutions.
• Dynamic interactive implementation: we implement
a novel shard-based consensus scheme to address the
transaction distribution and consensus process. By using
the self-adaptability, the proposed game is repeated
based on the step-by-step interactive process; it is
generic and applicable to iteratively adapt the dynamic
blockchain network situations.
• Axiom based fair-efficient solution: based on the
feasible combination of optimality and practicality,
we can achieve the axiom based fair-efficient solutions.
According to the reciprocal-negotiation, our solution
can provide mutual advantages including adaptability,
flexibility, and responsiveness to the current blockchain
network conditions.
• Performance analysis: we validate our two-phase bar-
gaining game approach by using the simulation analysis.
Numerical results can confirm the we can get a desirable
solution compared to the existing protocols under the
different transaction workload intensities.
B. ORGANIZATION
The roadmap for this paper is as follows. In Section II,
we discuss the state-of-the-art protocols for the shard-
based blockchain system. Section III provides an overview
on the protocol organization of blockchain networks, and
explains the necessary preliminaries of EBS and EBS. And
then, we design the two-phase cooperative game model to
develop our shard-based blockchain scheme aiming at the
fair-efficient system performance. We also provide the main
steps of the proposed scheme to enhance readability. Conse-
quently, Section IV shows the numerical simulation results
while providing comparison and discussion with existing
shard-based blockchain protocols. We conclude this study
in Section V as well as an outlook of the potential future
research directions in the context of blockchain networks.
II. RELATED WORK
The most related state-of-the-art researches to sharding pro-
tocols are summarized in this section. Briefly, we outline the
efforts in the literature towards improving the scalability and
transaction rate of consensus protocols in blockchain net-
works. TheGame Theoretic Shard-based Blockchain (GTSB)
scheme [6] comprehensively investigates the problem of self-
ishness in shard-based blockchains. To design a shard-based
protocol, this approach evaluates the strategic behavior of
BNs by employing concepts from game theory. In particu-
lar, the interactions among BNs are analyzed using a static
n-player non-cooperative game. The BN strategies in such a
game and resulting payoffs are systematically quantified, and
then, the Nash equilibria strategy profile is obtained under
different reward sharing scenarios; it is impossible to enforce
a cooperative Nash equilibrium in this setting unless certain
improbable conditions are met. In addition, theGTSB scheme
provides an incentive mechanism for shard-based blockchain
protocols, which would enforce cooperation among BNs by
guaranteeing optimal incentive distribution. By considering
the fair sharing of rewards, BNs receive benefits only if they
have cooperated within their shards. This work is the first
step towards a deeper understanding of the effects of non-
cooperative behavior in shard-based blockchain protocols [6].
The Normalized Autonomous Transaction Settlement
(NATS) scheme provides an autonomous and lightweight
transaction management platform, called NormaChain, for
Internet of Things (IoT)-based E-commerce [8]. To achieve
high transaction speed and scalability, this scheme replaces
the conventional single layer blockchain to a three-layer
sharding blockchain network, with each layer assigned to
different responsibilities. By designing a special three-layer
shard-based blockchain network, the NATS scheme can sig-
nificantly increase transaction efficiency and system scalabil-
ity. In addition, this scheme adopts a practical byzantine fault
tolerance consensus algorithm in replacement of proof-of-
work to minimize the overall mining liability of each process.
This approach eliminates the dependence of a trusted central
authority, and instead expands it to a fully decentralized
governance, which distributes the supervision power equally
among all parties. More importantly, NormaChain is secure
against malicious adversaries [8].
The Secure and Scale-out based Decentralized Sharding
(SSDS) scheme introduces the OmniLedger, which is the first
distributed ledger architecture that provides scale-out trans-
action processing capacity [9]. The OmniLedger i) chooses
representative groups of validators statistically and period-
ically, ii) ensures a negligible probability that any shard is
compromised across the long-term system lifetime via peri-
odically forming shards, and iii) correctly and atomically
handles cross-shard transactions, or transactions that affect
the ledger state held by two or more distinct shards. As a
novel scale-out distributed ledger, the OmniLedger enables
any user to transact safely with any other users regard-
less of the shard. With the introduction of a trust-but-verify
approach, users effectively process cross-shard transactions
as well as real-time validation. Therefore, the SSDS scheme
enables validators to securely and efficiently switch between
shards without stalling between reconfiguration events.
127774 VOLUME 7, 2019
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
Simulation results show that the SSDS scheme’s throughput
scales linearly in the number of active validators [9].
In summary, the GTSB scheme [6], the NATS scheme [8]
and the SSDS scheme [9] have introduced unique chal-
lenges to efficiently control the shard-based blockchain pro-
tocols. Therefore, they have attracted a lot of attentions,
recently. However, none of existing studies explore the coop-
erative game approach. In this paper, we consider a new
two-phase cooperative game model to handle the sharding
problem in blockchain networks. To the best of our knowl-
edge, our cooperative game approach is the first to investigate
the selfish behavior of BNs, and its effect, in shard-based
blockchain system. Compared to these existing schemes
in [6], [8], [9], we demonstrate the superiority of our two-
phase game model through the simulation analysis.
III. THE PROPOSED SHARD-BASED BLOCKCHAIN
CONTROL SCHEME
In this section, we demonstrate the problem formulation by
including the system overview of shard-based blockchain net-
works, cooperative bargaining solutions, and designing goals.
And then, we develop our shard-based blockchain scheme
based on the two-phase game model. Finally, we describe
concretely the proposed scheme in the eight-step procedures.
A. THE SHARD-BASED BLOCKCHAIN SYSTEM
INFRASTRUCTURE
A blockchain is an append-only, immutable distributed
database that records a time-sequenced history of transac-
tions. Transactions are typically grouped into blocks, and
each block cryptographically linked to the previous one,
forming a chain. The blockchain protocol enables the con-
struction and maintenance of consistent copies of blocks in
a distributed fashion [6]. In this study, we consider a simple
blockchain network infrastructure, which consists of multiple
BNs N = {BN1,BN 2, . . . ,BNm}; they may participate in the
blockchain system, and have different computation capabil-
ities. Further, we assume that BNs are honest and rational,
but selfish. Usually, the blockchain operation is implemented
in the time-driven approach, and the time is divided into a
fixed-sized period, called epochs. At the end of each epoch,
the blockchain accepts transactions in blocks and commits a
new block of transactions. The transaction set Tt is defined
as the total transactions generated at the t th time epoch [6].
The total transaction processing capacity of blockchain
system does not increase with added BNs. In fact, it gradually
decreases due to increased consensus overheads. To solve
the consensus overhead problem, the effective approach is
to build scale-out multiple databases, whose capacity scales
horizontally with the number of participating BNs. A sub-
set of BNs, which is a shard, can handle a part of T in
a parallel manner. Finally, a special shard, called adjusting
shard, combines all parts of T with confirmation. In our
blockchain infrastructure, we assume that there are k + 1
shards, i.e., S = {S1, S2, . . . ,Sk+1} where S1≤i≤k is a normal
shard and Sk+1 is an adjusting shard. The number of shards
(k + 1) is a variable quantity and can grow linearly with the
size of the blockchain network. According to the shard-based
consensus mechanism, T is divided into individual subblocks
B = {B1,B2, . . . ,Bk}; B is composed of k disjoint sets
of transactions where T =
⋃
1≤i≤k {Bi}. Each disjoint set
B1≤i≤k is assigned to a corresponding shard according to the
one-to-one mapping : B1≤i≤k → S1≤i≤k [6].
Sharding is a distributed consensus protocol executed
among a set of shards. At the end of each epoch, multiple
shards are randomly generated; each shard S1≤i≤k validates
and agrees on the separate subblock B1≤i≤k by BNs in the Si.
The adjusting shard, i.e., Sk+1, is a special consensus shard,
which is responsible for combining the all B1≤i≤k collected
from the S1≤i≤k . Therefore, the Sk+1 takes the consented
subblocks, merges them to form a final full block B, and
broadcasts it to the rest of the blockchain network. In each
epoch, the sharding protocol proceeds in the following steps
in consecutive order [6], [10];
i) shard formation: unbiased random numbers in the range
[1..k + 1] are generated to seed the BN-to-shard assign-
ment. Given by the number, BNs form their shards,
which are approximately equally-sized BNs’ groups.
And then, BNs in each individual shard identify other
BNs to fully connect with each other.
ii) shard-based consensus: BNs in the Si run a standard
byzantine agreement protocol to agree on the Bi. Each
S1≤i≤k sends its consented subblock B1≤i≤k to the
adjusting shard Sk+1.
iii) final block shaping: the adjusting shard Sk+1 create the
full block B by uniting the collected B1≤i≤k , and agrees
on the final result. And then, the Sk+1 broadcasts the B
to the blockchain network.
iv) process repetition: for the next epoch’s consensus, pro-
ceed to the step I.
In each time epoch, the consensus processing cost (CBN )
of each BN can be characterized by considering the sharding
steps. In this study, the CBN is abstractly quantified to analyze
the strategic behavior of BNs. In principle, theCBN consists of
two parts; i) forming a shard, and ii) shard-based consensus.
During the shard-forming phase, each BN identifies other
BNs in its corresponding shard. Therefore, the shard-forming
expense is generally dependent on the number (QS) of BNs in
the S. In the shard-based consensus phase, each BN validates
its respective subblock B and will reach an agreement with
other BN members. It is clear that the consensus cost is
strongly related to the size of B and QS. In addition, all BNs
pay amandatory cost (MC) for the shard-formation according
to randomness generation. Finally, in the Si, we can charac-
terize the BN j’s cost
(
C
Si
BN j
)
to participate in the sharding
protocol as follows;
C
Si
BN j
=
(
MC +
((
QSi − 1
)
× CI
))
+
((
CV × G (Bi)
)
+
((
QSi−1
)
× CC × G (Bi)
))
,
s.t., BN j ∈ Si (1)
VOLUME 7, 2019 127775
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
where CI and CV are the charges for each BN’s identification,
and for each transaction’s validation, respectively. QSi rep-
resents the number of BNs in the Si. CC is the charge to
reach a consensus for each transaction. G (Bi) is the func-
tion that outputs the number of transactions within the Bi.
In the equation (1), the first part is related to the shard-
forming, and the second part is associated with the consensus
process.
In this study, the interactions among BNs to verify transac-
tions and participate in the consensus process are formulated
as a two-phase game model. First, we formally define the
upper-game model Gup
=
{
P,T,WT,S,B1≤i≤k ,US,T
}
to
solve the transaction distribution problem.
• P = {S1, . . . ,Sk} is the finite set of upper-phase game
players, and they are normal shards where P = S\Sk+1.
• T is the total transactions generated to be confirmed at
the current epoch, and WT is the total payment for the
T verification in the shard-based process.
• S =
{
PS1 , . . .PSi . . . ,PSk
}
is a set of strate-
gies; PSi means the T’s division ratio for Si where∑
Si∈PPSi = 1.
• B1≤i≤k is the subblock, which is assigned to the Si; the
size of Bi is T ×PSi .
• US is the payoff received by the S.
• T denotes time, which is represented by a sequence of
epochs for the transaction distribution process in the
sharding protocol.
Second, we formally define the lower-game model
Glow
S1≤i≤k
=
{
PSi ,Bi,WBi ,S,UBN j
Si
,T
}
for the shard-based
consensus mechanism within the Si. With multiple shards
S1≤i≤k , total k Glow
Si
games are operated independently and
dispersively in a parallel manner.
• PSi = {. . .BN l . . .} is the finite set of game players in
theGlow
Si
where BN l ∈ N represents a BNmember in the
shard Si.
• Bi is a subblock, which is assigned to the Si at the Gup
game process.
• WBi is the payment for the Bi verification process where
WBi =WT
×PSi .
• S =
{
. . .R
Si
BN l
(Bi) . . .
}
is a set of strategies;
R
Si
BN l
(Bi) represents the given reward for the BN l where∑
BN l∈PSi R
Si
BN l
(Bi) =WBi .
• UBN j
Si
is the payoff received by the BN j at theGlow
Si
game
process.
• T denotes time, which is represented by a sequence of
epochs for the shard-based consensus process.
B. THE MAIN CONCEPT OF BARGAINING SOLUTIONS
To characterize the basic concepts of bargaining solutions,
we preliminarily define some mathematical expressions. N
will denote the set of positive integers and R (R+,R++)
denote the set of all (non-negative, positive) real num-
bers and Rn
(
Rn
+,Rn
++
)
be the n-fold Cartesian product
of R (R+,R++). Vector inequalities in Rn are denoted
by ≥, >,�. For x, y ∈ Rn, we write x ≥ y if xi ≥ yi
for all i, x > y if x ≥ y and x 6= y, and x � y if
xi > yi for all i. By Rn, n ∈ N, we denote the n-dimensional
Euclidean space, and by Rn
+ and Rn
++, we denote the set of
nonnegative and strictly positive vectors in Rn, respectively,
i.e., Rn
+ = {x ∈ Rn
| x ≥ 0} and Rn
++ = {x ∈ Rn
| x � 0}.
Let ‖·‖ be the Euclidian norm in Rn. The set N = {1, . . . , n},
n ∈ N, will denote the player set. A bargaining problem
is characterized by a set S of feasible utility allocations,
measured in vonNeumann-Morgenstern scales, and a point d ,
called threat point or disagreement point or status quo, which
is the outcome of the game if the players do not agree on a
utility allocation in the feasible set. Thus, the status quo d can
be unilaterally enforced by any player where d ∈ S ⊂ Rn. Let
6 be the class of all n-person bargaining problems. A solution
on a class of bargaining problems D ⊂ 6 is a mapping
F:D→ Rn such that F (S, d) ∈ S for all (S, d) ∈ D [11].
Consider now a bargaining situation in which the players
have claims that are not compatible with each other. Assume
that the claims are verifiable and that all players agree that
they should be taken into account by any fair solution to
the problem at issue. An n-person bargaining problem with
claims is a triple (S, d, c) where i) (S, d) ∈ 6, ii) c ∈ Rn
\ S
and c > d . Let 6c be the class of all n-person bargaining
problems with claims. A solution on a class of bargaining
problems with claims Dc
⊂ 6c is a mapping F : Dc
→ Rn
such that F(S, d, c) ∈ S for all (S, d, c)∈ Dc. Consider a
reference function given by a mapping g:6c
→ Rn. Based on
the reference function, a reference point will serve as an ori-
gin from which relative utility gains or losses are measured;
the reference point is not necessarily to be a feasible utility
allocation. Let e = (1, . . . , 1) ∈ Rn and define the diagonal
1 in Rn by 1 = {X |X = (λ · e) for some λ ∈ R}. The EBS
with respect to g (Eg(S, d, c)) equalizes the gains from the
reference point when G (S, d, r) ∈ S, and equalizes the losses
from the reference point when G (S, d, r) /∈ S. Formally,
Eg(S, d, c) is defined as follows [11];
EG (S, d, r) = G (S, d, r)+
(
λ̄ · e
)
s.t.,
{
λ̄ = max {λ ∈ R | (G (S, d, r)+ (λ · e)) ∈ S}
(S, d, r) ∈ 6c (2)
In order to characterize the PBS, we consider a different
kind of reference function: Let g:6c
→ Rn
× Rn
+ where
G (S, d, r) = (Gr (S, d, r) ,Gp (S, d, r)). The main feature
of PBS is that the G (S, d, r) assigns to any bargaining prob-
lem with claims not only a reference point Gr (S, d, r), but
also a vector of weights Gp (S, d, r). These weights can be
interpreted as relative bargaining powers of the game players.
Formally, the PBSwith respect to g (Pg(S, d, c)) is defined as
follows [11];
Pg (S, d, r) = Gr (S, d, r)+
(
λ̄ · Gp (S, d, r)
)
s.t.,
127776 VOLUME 7, 2019
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme

λ̄ = max {λ ∈ R | (Gr (S, d, r)+ (λ · Gp (S, d, r))) ∈ S}
‖Gp (S, d, r)‖ = 1
(S, d, r) ∈ 6̄c
g =
{
(S, d, r) ∈ 6c
|Gp (S, d, r) ∈ Rn
++
}
(3)
The axioms involved in the characterization of EBS and
PBS are stated below. The EBS satisfies the axioms ofWPO,
SYG, TRANS and RMONG. The PBS satisfies the axioms of
WPO, SYG, COV and RMONG [11].
• Weak Pareto optimality (WPO): A set A ⊂ Rn
is called comprehensive, if x ∈ A and x >
y imply that y ∈ A. For A ⊂ Rn, let
WPO (A) = {x ∈ A | y ∈ Rn, y� x H⇒ y /∈ A}. There-
fore, F (s, d, c) ∈ WPO (S) for all (S, d, c) ∈ Dc.
• Symmetry with respect to G (SYG): If π :N → N is a
permutation, then π defines the mapping π :Rn
→ Rn,
which we denote by the same symbol, via (π (x))i =
xπ−1(i), i ∈ N , x ∈ Rn. For a set A ⊂ Rn let π (A) =
{y | ∃x ∈ Awithy = π (x)}. We call A ⊂ Rnsymmetric
if π (A) = A for all permutations π . If (S, d, c) ∈ Dc
is such that S is symmetric and g (S, d, c) ∈ 1, then
F (S, d, c) ∈ 1.
• Covariance with respect to translations (TRANS): A
mapping L:Rn
→ Rn is called a positive affine trans-
formation if there exist a ∈ Rn
++ and b ∈ Rn such
that for all x ∈ Rn and all i, (L (x))i = aixi + bi.
Let L be the class of all positive affine transformations
on Rn. For a set A ⊂ Rn and L ∈ L, let L (A) =
{y | ∃x ∈ Awithy = L (x)}. For all (S, d, c) ∈ Dc if
L ∈ L is a translation and if L (S, d, c) ∈ Dc, then
F (L (S, d, c)) = L (F (S, d, c, )).
• Restricted monotonicity with respect to G (RMONG):
Let (S, d, c) ,
(
S ′, d ′, c′
)
∈ Dc with g
(
S ′, d ′, c′
)
=
g (S, d, c) and S ⊂ S′. Then F (S, d, c) ≤ F
(
S ′, d ′, c′
)
.
• Covariance with respect to positive affine transfor-
mations (COV): For all (S, d, c) ∈ Dc and L ∈
L, if L (S, d, c) ∈ Dc, then F (L (S, d, c)) =
L (F (S, d, c, )).
C. OUR TWO-PHASE GAME MODEL FOR THE SHARDING
ALGORITHM
In this study, rational BNs can decide against participa-
tion in the consensus execution by considering their given
rewards. The total payoff received by each BN is the dif-
ference between the obtained reward and the spent cost
in the epoch. Commonly, BNs bear some costs for fully
participating in the consensus process while attempting to
improve their benefits. In summary, the key point in the
shard-based consensus protocol is to find out the best way
for the reward allocation method. In our proposed scheme,
two bargaining games work together to design an appropriate
reward allocation method. In the upper game Gup at each
epoch, generated shards are game players, and their utility
functions are formulated according to the received payment(
OS
B
)
minus the incurred cost
(
CS
B
)
. For the shard Si, the utility
function
(
USi (Bi)
)
with the assigned subblock Bi is defined
as follows;
USi (Bi) = O
Si
Bi − C
Si
Bi
s.t.,

O
Si
Bi =
[[Bi]]
[[T]]
×WT, i.e., Bi = T ×PSi
C
Si
Bi =
∑
BN l∈Si
(
C
Si
BN l
×exp
(
TCBN l − CCBNl
TCBN l
)γ)
(4)
where [[Bi]], [[T]] are the total numbers of Bi’s and T’s transac-
tions, respectively. TCNl and CCNl are the total computation
capacity and the currently available computation capacity of
Nl , respectively. γ is a control parameter to adjust the incurred
cost. For the Si, the reference function G (Si) is decided using
the information of BNs in the Si; it is the expected gain
without participating in the consensus process at the current
time epoch. With respect to G (Si), our egalitarian bargaining
solution is given by;
EG
S
(
P,T,WT,S,US
)
= max
[Bs1,...Bsi...,Bsk]
 ∑
S1≤i≤k∈P
(
G (Si)+ USi (Bi)
)
s.t.,

G (Si) =
∑
BN l∈Si
(
T× exp
(
TCBN l − CCBNl
TCBN l
))
min
Si,Sj∈P
√((
G
(
Sj
)
+USj
(
Bj
))
−
(
G (Si)+USi (Bi)
))2
(5)
where T the BN’s gain profit to execute its currently working
task. For the lower-game Glow
Si
at each epoch, BNs in the Si,
i.e., BN l ∈ PSi , are game players, and their utility functions(
UBN (B)
)
are formulated as the same manner as the US (B).
For the BN l ∈ PSi , the utility function
(
UBN l (Bi)
)
with the
assigned subblock Bi is defined as follows;
UBN j
Si
(Bi) = R
Si
BN l
(Bi)− C
BNl
Si
(Bi)
s.t.,

R
Si
BN l
(Bi) , s.t.,
∑
BN l∈PSi
R
Si
BN l
(Bi) = O
Si
Bi
C
BN l
Si
(Bi) = C
Si
BN l
× exp
(
TCBN l − CCBNl
TCBN l
)γ
(6)
For the BN l , the reference function G (BN l) is also decided
as the samemanner as the G (Si). With respect to G (BN l), our
proportional bargaining solution is given by;
EG
Si,BN
(
PSi ,Bi,WBi ,S,UBNl
Si
)
=
∑
BN l∈PSi
G(BN l)+ max
[...RBNl ...]
 ∑
BN l∈PSi
(
ωBN l×U
BN l
Si
(Bi)
)
VOLUME 7, 2019 127777
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
s.t.,

G (BN l) = T× exp
(
TCBN l − CCBNl
TCBN l
)
ωBN l =
(
CCBN l
TCBN l
)/ ∑
BN k∈PSi
(
CCBN k
TCBN k
) (7)
D. MAIN STEPS OF PROPOSED SHARD-BASED
CONSENSUS SCHEME
To operate the shard-based consensus protocol, we face
two main control problems; transaction distribution and BN
incentivization. In this study, we focus on the key ideas of
egalitarian and proportional bargaining solutions; they are
mutually dependent on each other to resolve the above two
questions under widely different workload intensities. As we
have asserted throughout this paper, we design a novel two-
phase cooperative game model. Our game based approach
enables the judicious mixture of two different solution con-
cepts, and make control decisions to achieve a fair-efficient
solution while adapting the current blockchain network sit-
uations. Therefore, the principle novelties of our proposed
scheme is its adaptability, flexibility, and responsiveness to
current system conditions. The main steps of our proposed
scheme are described as follows.
Step 1: System factors and control parameters are deter-
mined by a simulation scenario (refer to simulation
assumptions and Table 1 in Section IV).
Step 2: At each time epoch, k + 1 shards are formed.
According to the unbiased random number genera-
tion, the size of each shard is generally similar.
Step 3: First, the upper-game Gup is executed. Each S is a
game player, and it’s payoff is calculated by using the
equation (4).
Step 4:Based on our egalitarian bargaining solution concept,
the strategies inPS1≤i≤k ∈ S are decided according to
(5).
Step 5: Second, the lower-games Glow
S1≤i≤k
are executed in a
parallel manner to reach the shard-based consensus.
Each BN is a game player, and it’s payoff is calculated
by using the equation (6). To reach a consensus, the
standard byzantine agreement protocol is adopted.
Step 6:Based on our proportional bargaining solution con-
cept, the strategies in RS
N ∈ S are decided according
to (7). To maximize the payoff, individual BNs in
each shard may decide whether to participate in the
consensus process or not.
Step 7:The adjusting shard Sk+1 create the full block B by
uniting the subblocks B1≤i≤k , which are validated by
S1≤i≤k . And then, the Sk+1 broadcasts theB to the rest
of blockchain network system.
Step 8: For the next epoch’s consensus process, proceed to
the Step 2.
IV. SIMULATION RESULTS AND DISCUSSION
In this section, we develop a simulation model and analyze
the blockchain system performance. Specifically, our analysis
focuses on three evaluation metrics: i) fairness among shards;
TABLE 1. System parameters used in the simulation experiments.
ii) fairness among BNs, and iii) participation ratio for the
consensus process. And then, we compare the effectiveness
of our proposed scheme with the existingGTSB [6],NATS [8]
and SSDS [9] schemes. The scenario setups of our simulation
are listed below, and simulation parameters are shown in
Table 1.
• Simulated blockchain network system is designed as
a hierarchical structure. Specifically, our blockchain
structure consists of five shards and one adjustment
shard.
• We assume that there are one hundred twenty BNs, and
they form their shards according to unbiased random
numbers.
• Simply, each BN has the same transaction conform cost(
CV
)
for each transaction validation process.
• Total computation capacity of each BN (TCN ) is nor-
malized, e.g., 1, and the current available computation
capacity (CCN ) follows the Poisson distribution with a
Poisson random variable (ρ = 0.8).
• In the shard-based consensus protocol, the workload for
1000 transaction verification is 0.05TCN . It increases
linearly with the number of transactions.
• The offered transaction numbers (T) are varied from
1000 to 7000.
• The total payment for the T
(
WT
)
for each epoch is 3M
per 1000 transactions, and the BN’s gain profit (T) for
the currently working task is 0.001M.
• All cost charges such asMC, CI , CC and CV are normal-
ized values; 0.1, 0.5, 0.5 and 1, respectively.
• The blockchain system performance measures obtained
on the basis of 100 simulation runs are plotted as func-
tions of the offered transaction workload.
127778 VOLUME 7, 2019
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
FIGURE 1. Workload fairness among shards.
FIGURE 2. Workload fairness among BNs.
According to the simulation metrics, the performance is
evaluated mainly to demonstrate the validity of the proposed
approach. The simulation parameters are presented in Table 1.
Each parameter has its own characteristics.
In Figure 1, we can see the workload fairness among
shards. Fairness is a prominent issue to operate the blockchain
network system. In this study, we follow the Jain’s fairness
index to characterize the fairness notion [12]; it has been
widely used to measure the fairness in network engineer-
ing. Based on the offered numbers of transactions, the rel-
ative workload fairness among shards is measured. In our
two-phase game approach, we distribute strategically and
intelligently the transaction set (T) per each epoch. During
theGup process, the idea of egalitarian bargaining solution is
applied to divide the T. By considering the reference point of
each individual shard, our proposed scheme can ensure the
workload fairness. The simulation results in Figure 1 can be
interpreted as our egalitarian bargaining solution effectively
exploits the load balance in the sharding protocol while the
existingGTSB,NATS and SSDS schemes cannot provide such
an attractive outcome.
In order to better understand why our two-phase game
model is effective to balance the working load in the
FIGURE 3. BN participation ratio for the consensus process.
blockchain network system, we also plotted the workload
fairness ratio among BNs in Figure 2. The trend of fair-
ness among BNs is similar to the trend of fairness among
shards. As can be observed, it is shown that our proposed
scheme holds significant dominance in the fairness issue than
the other existing protocols. The reason for the aforesaid is
that our lower-game Glow
S is formulated to force reasonably
light-workload BNs into the consensus process. Due to this
reason, we can maintain the better workload fairness among
BNs from low to high offered workload intensities.
Figure 3 depicts the BN participation ratio in the
shard-based consensus process. In our proposed scheme,
we develop a hierarchical two-phase bargaining game to
efficiently assign the reward for each individual BN by
considering the current workload. Through the proportional
bargaining method in the Glow
S process, we can adaptively
incentivize each BN to participate in the consensus process.
Therefore, in our proposed scheme, the actual outcome is
properly dealt out compared to the existing schemes. The
simulation results displayed in Figure 1 to Figure 3 justify
the advantages of the proposed scheme. By the reciprocal
combination of two different bargaining solutions, we jointly
design a novel two-phase gamemodel to provide an appropri-
ate workload balance while intelligently inducing selfish BNs
to participate in the blockchain consensus process. Therefore,
the numerical results validate that we can achieve an excellent
system performance than the existingGTSB, NATS and SSDS
schemes.
V. SUMMARY AND CONCLUSION
Blockchain popularity is gaining massive momentum in the
last few years. Recently, a novel blockchain technology,
called sharding, has been proposed to achieve scale-out
throughput by letting BNs only acquire a fraction of the
whole transaction set. However, the shard-based consensus
protocol faces essential some challenge - how to distribute
the transaction set, and how to share the reward among BNs.
In this study, we have addressed the above two questions by
considering the synergy of two bargaining solutions. Based
VOLUME 7, 2019 127779
S. Kim: Two-Phase Cooperative Bargaining Game Approach for Shard-Based Blockchain Consensus Scheme
on the two-phase cooperative game paradigm, we formulate
a new shard-based consensus scheme to provide scale-out
system performance. According to the idea of egalitarian
bargaining solution, we distribute the transaction set for each
shard. By using the main concept of proportional bargaining
solution, each individual BN can adaptively share the reward.
Our two-phase bargaining game approach can act collectively
to force BNs towards more and more collaborations within
each shard. To the best of our knowledge, this work is the
first step towards a deeper understanding of the effect of
cooperative behaviors in the shard-based blockchain network.
Finally, we analyze the blockchain system performance using
the simulation analysis. Numerical results have demonstrated
the feasibility and efficiency of our proposed scheme com-
pared with the existing state-of-the-art literature.
Further studies are still needed in the future.Wewill design
a deep-learning based strategy modification mechanism to
further improve the overall system efficiency. And, we would
like to jointly integrate more features, such as reputation
mechanisms, in order to establish a more sophisticated and
effective consensus solution. In addition, we plan to consider
other consensus approach from other aspects while including
a complete risk analysis. The security and real-time authen-
tication issues also need to be studied in detail. Last, we are
keen to implement our protocol to real test-bed and analyze
the system performance, which is hopeful to achieve valuable
experience for practitioners.
REFERENCES
[1] Z. Liu, N. C. Luong, W. Wang, D. Niyato, P. Wang, Y.-C. Liang, and
D. I. Kim, ‘‘A survey on blockchain: A game theoretical perspective,’’
IEEE Access, vol. 7, pp. 47615–47643, 2019.
[2] J. Al-Jaroodi and N. Mohamed, ‘‘Blockchain in industries: A survey,’’
IEEE Access, vol. 7, pp. 36500–36515, 2019.
[3] T. T. A. Dinh, R. Liu, M. Zhang, G. Chen, B. C. Ooi, and J. Wang,
‘‘Untangling blockchain: A data processing view of blockchain systems,’’
IEEE Trans. Knowl. Data Eng., vol. 30, no. 7, pp. 1366–1385, Jul. 2018.
[4] Y. Wang, S. Cai, C. Lin, Z. Chen, T. Wang, Z. Gao, and C. Zhou, ‘‘Study of
blockchains’s consensus mechanism based on credit,’’ IEEE Access, vol. 7,
pp. 10224–10231, 2019.
[5] W. Wang, D. T. Hoang, P. Hu, Z. Xiong, D. Niyato, P. Wang, Y. Wen,
and D. I. Kim, ‘‘A survey on consensus mechanisms and mining
strategy management in blockchain networks,’’ IEEE Access, vol. 7,
pp. 22328–22370, 2018.
[6] M. H. Manshaei, M. Jadliwala, A. Maiti, and M. Fooladgar, ‘‘A game-
theoretic analysis of shard-based permissionless blockchains,’’ IEEE
Access, vol. 6, pp. 78100–78112, 2018.
[7] S. Cano-Berlanga, J.-M. Giménez-Gómez, and C. Vilella, ‘‘Enjoying
cooperative games: The R package GameTheory,’’ Appl. Math. Comput.,
vol. 305, pp. 381–393, Jul. 2017.
[8] C. Liu, Y. Xiao, V. Javangula, Q. Hu, S. Wang, and X. Cheng, ‘‘Norma-
Chain: A blockchain-based normalized autonomous transaction settlement
system for IoT-based E-commerce,’’ IEEE Internet Things J., vol. 6, no. 3,
pp. 4680–4693, Jun. 2019.
[9] E. Kokoris-Kogias, P. Jovanovic, L. Gasser, N. Gailly, E. Syta, and B. Ford,
‘‘OmniLedger: A secure, scale-out, decentralized ledger via sharding,’’ in
Proc. IEEE Symp. Secur. Privacy, May 2018, pp. 583–598.
[10] L. Luu, V. Narayanan, C. Zheng, K. Baweja, S. Gilbert, and P. Saxena,
‘‘A secure sharding protocol for open blockchains,’’ inProc. ACMSIGSAC,
2016, pp. 17–30.
[11] A. Gerber, ‘‘Reference functions and solutions to bargaining problemswith
claims,’’ Social Choice Welfare, vol. 24, pp. 527–541, Jun. 2005.
[12] M. Dianati, X. Shen, and S. Naik, ‘‘A new fairness index for radio resource
allocation in wireless networks,’’ in Proc. IEEE WCNC, vol. 2, Mar. 2005,
pp. 712–715.
SUNGWOOK KIM received the B.S. and M.S.
degrees from Sogang University, Seoul, South
Korea, in 1993 and 1995, respectively, and
the Ph.D. degree from Syracuse University,
Syracuse, New York, in 2003, supervised by
Prof. Pramod K. Varshney, all in computer sci-
ence. He has held faculty positions with the
Department of Computer Science, Choongang
University, Seoul. In 2006, he was with Sogang
University, where he is currently a Professor with
the Department of Computer Science and Engineering and a Research
Director of the Network Research Laboratory. His research interests include
resource management, online algorithms, adaptive quality-of-service con-
trol, and game theory for network design.
127780 VOLUME 7, 2019
	INTRODUCTION
	MOTIVATION AND CONTRIBUTION
	ORGANIZATION
	RELATED WORK
	THE PROPOSED SHARD-BASED BLOCKCHAIN CONTROL SCHEME
	THE SHARD-BASED BLOCKCHAIN SYSTEM INFRASTRUCTURE
	THE MAIN CONCEPT OF BARGAINING SOLUTIONS
	OUR TWO-PHASE GAME MODEL FOR THE SHARDING ALGORITHM
	MAIN STEPS OF PROPOSED SHARD-BASED CONSENSUS SCHEME
	SIMULATION RESULTS AND DISCUSSION
	SUMMARY AND CONCLUSION
	REFERENCES
	Biographies
	SUNGWOOK KIM