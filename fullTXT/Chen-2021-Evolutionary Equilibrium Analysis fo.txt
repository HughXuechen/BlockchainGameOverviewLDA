Evolutionary Equilibrium Analysis for Decision on Block Size in Blockchain Systems
Evolutionary Equilibrium Analysis
for Decision on Block Size in Blockchain
Systems
Jinmian Chen, Yukun Cheng(B), Zhiqi Xu, and Yan Cao
School of Business, Suzhou University of Science and Technology,
Suzhou 215009, China
{jinmian chen,joisexu}@post.usts.edu.cn,
ykcheng@amss.ac.cn, cy@usts.edu.cn
Abstract. In a PoW-based blockchain network, mining pools (the solo
miner could be regarded as a mining pool containing one miner) compete
to successfully mine blocks to pursue rewards. Generally, the rewards
include the fixed block subsidies and time-varying transaction fees. The
transaction fees are offered by the senders whose transactions are pack-
aged into blocks and is positively correlated with the block size. However,
the larger size of a block brings the longer latency, resulting in a smaller
probability of successfully mining. Therefore, finding the optimal block
size to trade off these two factors is a complex and crucial problem for
the mining pools. In this paper, we model a repeated mining competi-
tion dynamics in blockchain system as an evolutionary game to study
the interactions among mining pools. In this game, each pool has two
strategies: to follow the default size B̄, i.e., the upper bound of a block
size, or not follow. Because of the bounded rationality, each mining pool
pursues its evolutionary stable block size (ESS) according to the min-
ing pools’ computing power and other factors by continuous learning and
adjustments during the whole mining process. A study framework is built
for the general evolutionary game, based on which we then theoretically
explore the existence and stability of the ESSs for a case of two mining
pools. Numerical experiments with real Bitcoin data are conducted to
show the evolutionary decisions of mining pools and to demonstrate the
theoretical findings in this paper.
Keywords: Blockchain · Block size · Transaction fee · Mining
competition · Evolutionary game
1 Introduction
Bitcoin is a decentralized payment system [11], based on a public transaction
ledger, which is called the blockchain. Generally, a block is composed of a block
header and a block body, which contains a certain amount of transactions. Each
transaction is composed of the digital signature of the sender, the transaction
c© Springer Nature Switzerland AG 2021
D.-Z. Du et al. (Eds.): COCOA 2021, LNCS 13135, pp. 180–194, 2021.
https://doi.org/10.1007/978-3-030-92681-6_15
http://crossmark.crossref.org/dialog/?doi=10.1007/978-3-030-92681-6_15&domain=pdf
https://doi.org/10.1007/978-3-030-92681-6_15
Decision on Block Size by Evolutionary Equilibrium Analysis 181
data, such as the value of digital tokens, the addresses of the sender and the
receiver, as well as the corresponding transaction fee. With the bitcoin system
developing, the number of transactions in the whole network increases quickly,
while the block size currently is limited to 1 MB. Such a bounded block size
results in the congestion of the blockchain network. To alleviate this situation,
Segregated Witness (SegWit) [10] is brought up and applied to segregate the
witness (digital signatures) from the transactions. Then the witness is put into
the “extended block”, which has no impact on the original block size. By SegWit,
a block is able to contain more transactions, enhancing the transaction processing
efficiency. This effect is equivalent to expanding the block size to 2 MB. Thus
the block size of a newly mining block may be more than 1 MB.
Proof-of-work (PoW) is the most popular consensus applied in bitcoin
blockchain system, which reaches a consensus based on miners computing power.
Under the PoW-based consensus protocol, the process of successfully mining
a block includes two steps, i.e., solving the PoW puzzle and propagating the
block to be verified. During the propagation, the block is likely to be discarded
because of long latency which depends on the size of the block. The larger size
of block brings the longer latency, leading to a higher chance that the block suf-
fers orphaned [6]. So, besides raising income from transaction fees by packaging
more transactions in a block, miners need to consider a suitable total size of the
block that would not deeply increase the probability to be orphaned. With the
incentive of transaction fees and the long latency resulting from large block size,
how to select transactions and decide the total block size for maximum payoff is
critical for every miner.
Game theory has been widely applied in mining management, such as com-
putational power allocation, fork chain selection, block size setting and pool
selection. In terms of block size setting, [14] analyzed the quantity setting of
block space with the effect of a transaction fee market, in which a block space
supply curve and a mempool demand curve were introduced to find the optimal
block space for the maximum payoff of miners. By proposing a Bitcoin-unlimited
scheme, [16] modeled a non-cooperative game to examine the interaction among
the miners, each of whom chooses its own upper bound of the block size while it
invalidates and discards the excessive block that is larger than its upper bound.
And the game was proved to exist an unique Nash equilibrium where all miners
choose the same upper bound. Given the limitation on the number of transac-
tions included in the block, the interaction on choosing transactions between the
miners and the users was modeled as a non-cooperative game by [2]. The unique
Nash equilibrium of this game can be obtained when satisfying certain condi-
tions, which is related to the number of miners, the hash rate, bitcoin value, the
transaction fees, the block subsidy and the cost of the mining. As for dynamic
evolutionary behaviors in blockchain, [9] respectively modeled the dynamics of
block mining selection among pools and pool selection among individual miners
as an evolutionary game in a proof-of-work (PoW) blockchain network. It identi-
fied the hash rate and the block propagation delay as two major factors resulting
in the mining competition outcome. Also, in [13], evolutionary game was applied
to examine the process dynamics of selecting super nodes for transaction veri-
fication in the Delegated proof of stake (DPoS) blockchain. The authors found
182 J. Chen et al.
that the strategy of candidates has to do with how much reward they can obtain
from the blockchain platform. Inspired by [7], we adopt its novel expected pay-
off function different with that of [9], to study the block size determination of
mining pools in a dynamic process.
In this work, we assume that the mining pools are bounded rational and can
adapt their strategy on different block sizes according to the received rewards.
Note that the total computing power of each mining pool and the long latency
also affect the choices of pools. Accordingly, we model the repeated mining com-
petition as an evolutionary game, where each pool controlling a certain amount
of computing power has to decide whether following the default size—2 MB or
not, for maximum payoffs. Evolutionary stable strategies are considered to be the
solutions of this game. Then we perform theoretical analysis on the existences
and corresponding conditions of the ESS for a special case of two mining pools.
Finally, simulations are performed to verify the proposed schemes. In addition,
we discuss the impact of the hash rate of pools, the unit transaction fee, the unit
propagation delay,’as well as the default block size on the strategy decision of
mining pools.
The rest of this paper is organized as follows. Section 2 introduces the system
model and the reward function of pools. In Sect. 3, we formulate an evolutionary
game model to study the block size selection problem, and particularly analyze
a case of two mining pools. Section 4 presents the numerical results and some
additional analysis on different factors, and concludes our study.
2 System Model and and Mining Pool’s Expected
Reward
In this paper, we consider the PoW-based blockchain system where there are n
mining pools, denoted by N = {1, 2, · · · , n}, and each contains several miners.
All mining pools compete to mine blocks by costing an amount of computing
power, and thus to pursue the corresponding rewards. Similar to [4] and [5], we
assume the whole system is in a quasi-static state, meaning no miners join in or
leave the system. Under this assumption, each miner keeps its state unchanged,
including which mining pool it is in, and how much computing power it has.
This leads to the mining pools’ constant scale and their total computing power.
By the consensus protocol of PoW, a mining pool, who obtains the reward,
must satisfy the following two conditions: it is the first one to solve a proof-
of-work puzzle by consuming an amount of computing power and it is also the
first one to make its mined block reach the consensus. The expected average
block arriving interval is about of T = 600 s, by adjusting the difficulty of the
proof-of-work puzzle. The whole mining process in a blockchain system consists
of a series of one-shot competitions, in each of which one block is mined. A one-
shot competition can be viewed as a non-cooperative game, in which all mining
pools are the players and they shall make decisions on the mined blocks’ size to
maximize their own rewards.
Decision on Block Size by Evolutionary Equilibrium Analysis 183
Similar to the model in [7], we compute the expected reward of each mining
pool i by regarding its block finding time in one-shot competition as a random
variable, denoted by Xi, which follows the exponential distribution. To be spe-
cific, let Bi be the block size decided by pool i. Denote hi (0 ≤ hi ≤ 1) to be
the relative computing power of pool i, that is the ratio of pool i’s comput-
ing power to the total computing power in blockchain system. The propagation
time of pool i’s block is linear with its size Bi, that is qi = ρBi. It is obvious
that pool i’s block cannot reach the consensus if the block finding time is less
than the propagation time qi. The mining rate of pool i is denoted by λi = hi
T ,
where T = 600 s is the average block arriving interval. By the definition of the
exponential distribution, the probability density function (PDF) of Xi is
fXi
(t;Bi, λi) =
{
0, t < qi;
λie
−λi(t−qi), t ≥ qi.
(1)
and the cumulative distribution function (CDF) of Xi is
FXi
(t;Bi, λi) = Pr(Xi ≤ t) =
{
0, t < qi;
1 − e−λi(t−qi), t ≥ qi.
So, the probability that block finding time of pool i is larger than t is
Pr(Xi > t) = 1 − FXi
(t;Bi, λi) =
{
1, t < qi;
e−λi(t−qi), t ≥ qi.
Define X to be the block finding time among all mining pools. Then X =
mini∈N{Xi}, i.e. the first time to find a block, and hence
Pr(X > t) = Πi=1,··· ,nPr(Xi > t) = Πi∈Active(t)Pr(Xi > t)
= e
∑
i∈Active(t)[−λi(t−qi)], (2)
where Active(t) = {i|qi ≤ t} is the pool set, each pool i in which has the prop-
agation time less than time t. For convenience, we call each pool i in Active(t)
an active pool at time t.
From the probability function of (2), it is not hard to derive the CDF and
PDF of random variable X as the follows
FX(t;B, λ) = 1 − Pr(X > t) = 1 − e
∑
i∈Active(t)[−λi(t−qi)]; (3)
fX(t;B, λ) = (
∑
i∈Active(t)
λi)e
∑
i∈Active(t)[−λi(t−qi)], (4)
where B = (B1, · · · , Bn) and λ = (λ1, · · · , λn).
As stated before, the reward of a mined block comes from two aspects: the
fixed subsidies R (e.g., 6.25 BTC for one block currently), and a variable amount
of transaction fees. Particularly, the transaction fees are more dependent on the
size of a block, since a block with a larger size contains more transactions. For
the sake of simplicity, we assume the total transaction fee is linearly dependent
184 J. Chen et al.
on the block size, i.e., αBi. This is similar to the suggested pricing standard of
transaction fee for users in some token wallets, such as 0.0005 BTC per KB [12].
So the total reward for a block mined by pool i is R + αBi. In addition, the
probability that a pool i solves the proof-of-work puzzle at time t is the ratio of
its computing power to all other active mining pools at time t. Then the reward
of mining pool i in expectation at time t is
E(rewardi|X = t) =
{
0, t < qi;
hi∑
j∈Active(t) hj
(R + αBi), t ≥ qi.
(5)
and then its reward in expectation is expressed as
Ui = E[E(rewardi|X = t)]
=
∫ +∞
−∞
E(rewardi|X = t) · fX(t;B, λ)dt
= λi(R + αBi)
n∑
l=i
e
∑
j λj(qj−ql) − e
∑
j λj(qj−ql+1)∑
j∈Active(ql)
λj
, (6)
where qn+1 = +∞.
3 Evolutionary Game Model for Decision on Block Size
In a PoW-based blockchain system, we suppose that there are n independent
mining pools, each pool i owning an amount of relative computing power hi.
The whole mining process is a series of one-shot competitions, and all mining
pools compete to mine a block to win the reward in each one-shot. In this
paper, we model the mining competition dynamics as an evolutionary game
to study the dynamic interactions among mining pools. In our evolutionary
game model, each pool has two kinds of strategies: to follow the default size B̄,
i.e., the upper bound of a block size, or to choose the block size less than B̄.
For simplicity, these two strategies is named as “following” strategy and “not
following” strategy, respectively. Because of the bounded rationality, each mining
pool pursues its evolutionary stable block size (ESS) through continuous learning
and adjustments.
In this section, we first propose the analysis scheme for general case, and
then theoretically analyze the existence and stability of the ESS for a case of
two mining pools.
3.1 Analysis Scheme
In our evolutionary game model, there is a crucial problem for each mining
pool i that is how to decide the optimal block size to maximize its payoff in
expectation. Note that each pool i has two kinds of strategies: one is to fix the
block to default size, e.g., B̄ = 2 MB, and the other is to choose a block size
Bi < B̄. So in the k-th shot, let us define two subsets,
Decision on Block Size by Evolutionary Equilibrium Analysis 185
N1(k) = {i ∈ N |Bi(k) < B̄} and N2(k) = N − N1(k) = {i ∈ N |Bi(k) = B̄},
and call (N1(k), N2(k)) a subset profile. Clearly, subset profile (N1(k), N2(k))
is determined after all mining pools making decisions on their block sizes. There
are 2n subset profiles totally in each one-shot, and hence we denote the collection
of subset profiles in the k-th slot by N (k) = {(N1(k), N2(k))}.
Suppose that a subset profile (N1(k), N2(k)) in the k-th shot is given. Each
pool i ∈ N1(k) selects the “not following” strategy. In addition, it continues to
decide the optimal block size B∗
i < B̄ by maximizing its expected payoff under
a given subset profile (N1(k), N2(k)).
B∗
i = arg πi
(N1(k),N2(k)) = arg max
Bi<B̄
Ui
= arg max
Bi<B̄
{
λi(R + αBi)
n∑
l=i
e
∑
j λj(qj−ql) − e
∑
j λj(qj−ql+1)∑
j∈Active(ql)
λj
}
. (7)
Each mining pool i ∈ N2(t) sets its block size as B̄ and has its payoff
πi
(N1(k),N2(k)) = λi(R + αB̄)
n∑
l=i
e
∑
j λj(qj−ql) − e
∑
j λj(qj−ql+1)∑
j∈Active(ql)
λj
. (8)
During the evolutionary game, the mining pools keep learning to adjust their
low-income strategies to a higher-income one dynamically. Until n mining pools
reach a stable strategy profile, at which no one would like to change its strategy,
an equilibrium state of block size (B∗
1 , B∗
2 , · · · , B∗
n) is obtained. Though all the
mining competitions are carried out during a series of discrete slots, we can view
each block generating slot as a very small interval with respect to the whole
mining process, and hence deal with it as a continuous version. It allows us to
apply the standard technique to study the evolutionary process for the decisions
on block size.
Let xi(k), 0 ≤ xi(k) ≤ 1, represent the probability of mining pool i ∈ N
to choose the “not following” strategy at the k-th slot. Correspondingly, the
probability of pool i to choose the default size is 1 − xi(k). If the choice of pool
i is not to follow the default size, then its conditional expected payoff is
E1
i (k) =
∑
(N1(k),N2(k))∈N (k),
i∈N1(k)
⎛
⎝
∏
l∈N1(k),l�=i
xl(k)
∏
l∈N2(k)
(1− xl(k)) · πi
(N1(k),N2(k))
⎞
⎠ . (9)
If mining pool i selects the “following default size” strategy, then its conditional
expected payoff is
E
2
i (k) =
∑
(N1(k),N2(k))∈N(k),
i∈N2(k)
⎛
⎝
∏
l∈N1(k)
xl(k)
∏
l∈N2(k),l �=i
(1 − xl(k)) · π
i
(N1(k),N2(k))
⎞
⎠ . (10)
Combining (9) and (10), the average payoff of mining pool i is
Ēi(k) = xi(k)E1
i (k) + (1 − xi(k))E2
i (k). (11)
186 J. Chen et al.
By [3], the growth rate of a strategy selected by a participant is just equal to
the difference between the payoff of this strategy and its average payoff. Then
the replicator dynamic equations for all mining pools are as follows:
fi(x) = ẋi(k) = xi(k)(E1
i (k) − Ēi(k)), ∀i ∈ N. (12)
According to the replicator dynamics (12), a mining pool would like to choose
a smaller block size, when its conditional payoff E1
i (k) is larger than the average
payoff Ei(k). Otherwise, it will set its block size as B̄. A state is stable if no mining
pool would like to change its strategy over time in the replicator dynamics, and
such a stable state is considered to be the evolutionary equilibrium [8]. The strate-
gies in this state are evolutionary stable, called ESS. Specifically speaking, when
the payoff of “not following” strategy is equal to the average payoff for each pool,
all mining pools reaches the ESS and no one has incentive to change its current
strategy. Therefore, the ESS can be obtained by solving ẋi(k) = 0 for all i ∈ N ,
whose solution is called the fixed equilibrium point of replicator dynamics.
3.2 A Case Study of Two Mining Pools
Based on the analysis scheme for general case in previous subsection, we con-
tinue to study the case of two mining pools (n = 2) to exemplify the equilibrium
analysis for the decision on block size. We normalize the whole computing power
in system, thus mining pool i’s relative computing power is hi ∈ h = {h1, h2}
and
∑2
i=1 hi = 1. The whole mining process contains a series of one-shot com-
petitions, and pool 1 and pool 2 need to decide their block sizes B1 and B2 to
pursue the optimal payoffs in each one-shot competition. Without loss of gen-
erality, we concentrate on the case of 0 ≤ h1 ≤ 1
2 ≤ h2 ≤ 1. The analysis for
the case of h2 ≤ h1 ≤ is symmetric, and thus we omit the discussion. As stated
in [7], “a miner with less mining power prefers a smaller block size in order to
optimize his payoff”. Thus the case of 0 ≤ h1 ≤ h2 ≤ 1 leads to B1 ≤ B2 in
one-shot competition and then the propagation time q1 = ρB1 ≤ q2 = ρB2. In a
one-shot mining competition, if B1 ≤ B2 ≤ B̄, then
U1 = λ1(R + αB1)
2∑
l=1
e
∑
λj(qj−ql) − e
∑
λj(qj−ql+1)
∑
j∈Active(ql)
λj
= (R + αB1)[1 − h2e
λ1ρ(B1−B2)]; (13)
U2 = λ2(R + αB2)
2∑
l=2
e
∑
λj(qj−ql) − e
∑
λj(qj−ql+1)
∑
j∈Active(ql)
λj
= (R + αB2)h2e
λ1ρ(B1−B2). (14)
Since each mining pool has two kinds of strategies, i.e., to follow the default
size B̄, and not to follow, in a one-shot competition, there are four strategy
profiles: (B1, B2), (B1, B̄), (B̄, B2), and (B̄, B̄). Note that (B̄, B2) either does
not exist, or equals to (B̄, B̄) under the condition of B1 ≤ B2 ≤ B̄. So we do
not discuss this strategy profile any more.
Decision on Block Size by Evolutionary Equilibrium Analysis 187
Clearly, each pool would receive different payoffs, under different strategy
profiles. For the strategy profile (B1, B2), meaning that both pools choose the
“not following” strategy, we define the payoffs of two pools π1
11 and π2
11 are
their optimal payoffs subject to the conditions of B1 < B̄ and B2 < B̄. The
corresponding optimal block sizes (B∗
1 , B∗
2) can be obtained by solving
∂U1(B1, B2)
∂B1
= 0, and
∂U2(B1, B2)
∂B2
= 0,
simultaneously. For the strategy profile (B1, B̄), showing that pool 1 would not
follow the default size and pool 2’s block size is B̄, π1
12 and π2
12 are denoted to be
the payoffs of pool 1 and 2. To be specific, π1
12 is defined to be the optimal payoff
of pool 1 under the condition of B1 < B̄ and the corresponding optimal block
size B∗
1 can be determined by solving dU1(B1,B̄)
dB1
= 0. For the strategy profile
of (B̄, B̄), both of two pools set their block sizes as B̄, then their payoffs are
denoted by π1
22 and π2
22. We illustrate the payoffs of two pools under different
strategy profiles in the following payoff matrix (Table 1).
Table 1. Payoff matrix of the case of two mining pools.
Mining pool 2
Mining pool 1 B2(x2) B̄(1 − x2)
B1(x1) (π1
11, π
2
11) (π1
12, π
2
12)
B̄(1 − x1) (\, \) (π1
22, π
2
22)
Lemma 1. In a one-shot mining competition, if B1 ≤ B2 ≤ B̄, then
1. For strategy profile (B1, B2) with 0 ≤ B1 < B2 < B̄, the optimal block size of
pool 2 is B∗
2 = 1
λ1ρ − R
α , if 0 < 1
λ1ρ − R
α < B̄. Let B̂∗
1 be the solution satisfying
dU1(B1,B∗
2 )
dB1
= 0. If 0 ≤ B̂∗
1 < B∗
2 , then the optimal block size of pool 1 is B̂∗
1 .
Then the payoffs are
π1
11 = (R + αB̂∗
1 )[1 − h2e
λ1ρ(B̂∗
1−B∗
2 )], π2
11 = [R + αB∗
2 ]h2e
λ1ρ(B̂∗
1−B∗
2 ). (15)
If B̂∗
1 < 0, then the best choice of pool 1 is to set its block size as zero and
the payoffs are
π1
11 = R[1 − h2e
−λ1ρB∗
2 ], π2
11 = (R + αB∗
2 )h2e
−λ1ρB∗
2 . (16)
2. For strategy profile (B1, B̄) with 0 < B1 < B2 = B̄, the block size of pool 2 is
B̄. Let B̃∗
1 be the solution satisfying dU1(B1,B̄)
dB1
= 0. If 0 ≤ B̃∗
1 < B̄, then the
optimal block size of pool 1 is B̃∗
1 . Then the payoffs are
π1
12 = (R + αB̃∗
1 )[1 − h2e
λ1ρ(B̃∗
1−B̄)], π2
12 = (R + αB̄)h2e
λ1ρ(B̃∗
1−B̄). (17)
188 J. Chen et al.
If B̃∗
1 < 0, then the best choice of pool 1 is to set its block size as zero and
the payoffs are
π1
12 = R[1 − h2e
−λ1ρB̄ ], π2
12 = (R + αB̄)h2e
−λ1ρB̄ . (18)
3. For strategy profile (B̄, B̄), the block sizes of two pools are both equal to B̄
and the corresponding payoffs are
π1
22 = h1(R + αB̄) and π2
22 = h2(R + αB̄). (19)
Remark 1: By Lemma 1-(1) and (2), the optimal block size of pool 1 depends
on the block size of pool 2 in strategy profiles (B̂∗
1 , B∗
2) and (B̃∗
1 , B̄), and can be
obtained from equations dU1(B1,B∗
2 )
dB1
= 0 and dU1(B1,B̄)
dB1
= 0, if 0 ≤ B̂∗
1 < B∗
2 and
0 ≤ B̃∗
1 < B̄, respectively. For convenience, we denote g(B2) to be the implicit
function, satisfying
dU1(B1, B2)
dB1
= α − [α + λ1ρ(R + αg(B2)]h2e
λ1ρ(g(B2)−B2) = 0,
Therefore, B̂∗
1 = g(B∗
2) = g( 1
λ1ρ − R
α ) and B̃∗
1 = g(B̄).
Lemma 2. Let g(B2) be the implicit function satisfying dU1(g(B2),B2)
dB1
= 0. Then
g(B2) is monotone increasing with B2 and g(B2) < B2 for all B2 ≥ 0.
We leave the proof of Lemma 2 in online full version [1]. Based on the mono-
tonicity of g(B2), we have B̂∗
1 < B̃∗
1 , if 1
λ1ρ − R
α < B̄. Moreover, the property of
g(B2) ≤ B2 ensures B̂∗
1 < 1
λ1ρ − R
α and B̃∗
1 < B̄.
In the following, we would analyze the strategy selections of two mining pools
by distinguishing two conditions: (1) 1
λ1ρ − R
α ≥ B̄; (2) 0 ≤ 1
λ1ρ − R
α < B̄; and
(3) 1
λ1ρ − R
α < 0, and then explore the equilibrium solutions in the evolutionary
game in the following.
Theorem 1. In a one-shot mining competition, if 0 ≤ B1 ≤ B2 ≤ B̄ and
1
λ1ρ − R
α ≥ B̄, then
1. (B̃∗
1 , B̄) is a strict Nash equilibrium, if 0 ≤ B̃∗
1 < B̄; or
2. (0, B̄) is a strict Nash equilibrium, if B̃∗
1 < 0; or
3. (B̄, B̄) is a strict Nash equilibrium, if B̃∗
1 ≥ B̄.
Theorem 1 illustrates that the dominant strategy of pool 2 is to follow the
default size B̄ when 1
λ1ρ − R
α ≥ B̄, while the optimal strategy of pool 1 depends
on the value of B̃∗
1 . The detailed proof is provided in online full version [1].
Next, we concentrate on the condition of 0 ≤ 1
λ1ρ − R
α < B̄, under which pool
2 may set its block size as B∗
2 = 1
λ1ρ − R
α or B̄.
Recall that xi(k), i = 1, 2, is the probability of mining pool i to adopt
the “following” strategy in the k-th slot competition, and thus 1 − xi(k) is the
probability of mining pool i to follow the default size. The expected payoffs of
Decision on Block Size by Evolutionary Equilibrium Analysis 189
mining pool 1 in the k-th slot competition, when it chooses “not following” or
“following” strategy, are
E1
1(k) = x2(k)π1
11 + (1 − x2(k))π1
12; E2
1(k) = (1 − x2(k))π1
22.
The average payoff of mining pool 1 is
E1(k) = x1(k)E1
1(k) + (1 − x1(k))E2
1(k).
Similarly, we can derive the expected payoffs of mining pool 2 as follows,
E1
2(k) = x1(k)π2
11; E2
2(k) = x1(k)π2
12 + (1 − x1(k))π2
22.
The average payoff of mining pool 2 is
E2(k) = x2(k)E1
2(k) + (1 − x2(k))E2
2(k).
Based on the analysis scheme (12) for the general case, the replicator dynamic
system of pool 1 and 2 for the case of two mining pools are:
⎧
⎨
⎩
f1(x) = ẋ1(k) = x1(1 − x1)(E
1
1 − E1) = x1(1 − x1)
[
(π1
11 − π1
12 + π1
22)x2 + (π1
12 − π1
22)
]
;
f2(x) = ẋ2(k) = x2(1 − x2)(E
1
2 − E2) = x2(1 − x2)
[
(π2
11 − π2
12 + π2
22)x1 − π2
22
]
.
(20)
Note that all the solutions satisfying f1(x) = ẋ1(k) = 0 and f2(x) = ẋ2(k) = 0
are the fixed equilibrium points of the replicator dynamic system. It is not hard
to see that there exist four fixed equilibrium points of this system under the
condition of B1 ≤ B2 ≤ B̄: (0, 0), (1, 0), (1, 1) and (x∗
1, x
∗
2), where
x∗
1 =
π2
22
π2
11 − π2
12 + π2
22
, x∗
2 =
π1
22 − π1
12
π1
11 − π1
12 + π1
22
. (21)
To fulfill the condition for probability vector x, x∗
1 and x∗
2 must be in [0, 1].
Theorem 2. For the evolutionary game between two mining pools, if 0 ≤ B1 ≤
B2 ≤ B̄ and 0 ≤ 1
λ1ρ − R
α < B̄, then
– (1, 0) is an ESS, when (1) 0 ≤ B̂∗
1 < B̃∗
1 < B̄ or (2) B̂∗
1 < 0 < B̃∗
1 <
B̄ and λ1ρ(R
α + B̄)eλ1ρ(B̃∗
1−B̄− R
α )+1 > 1;
– (1, 1) is an ESS, when (1) B̂∗
1 < B̃∗
1 < 0 or (2) B̂∗
1 < 0 < B̃∗
1 <
B̄ and λ1ρ(R
α + B̄)eλ1ρ(B̃∗
1−B̄− R
α )+1 < 1;
– (0, 0) and (x∗
1, x
∗
2) cannot be ESSs.
Proof. To obtain the ESS of the evolutionary game for block size selection, we
first compute the Jacobian matrix of the replicator dynamic system (20),
J =
[
∂f1(x)
∂x1
∂f2(x)
∂x1
∂f1(x)
∂x2
∂f2(x)
∂x2
]
,
190 J. Chen et al.
where
∂f1(x)
∂x1
= (1 − 2x1){[π1
11 − (π1
12 − π1
22)]x2 + (π1
12 − π1
22)};
∂f1(x)
∂x2
= x1(1 − x1)[π
1
11 − (π1
12 − π1
22)];
∂f2(x)
∂x1
= x2(1 − x2)[(π
2
11 − π2
12) + π2
22];
∂f2(x)
∂x2
= (1 − 2x2){[(π2
11 − π2
12) + π2
22)]x1 − π2
22}.
Table 2. The determinants and traces of Jacobian matrix J at fixed equilibrium points.
Det(J) Tr(J)
(0, 0) K · (−M) K − M
(1, 0) (−K) · N N − K
(1, 1) (−L) · (−N) −L − N
(x∗
1, x
∗
2)
KLMN
(L−K)(M+N)
0
By the results in [3], if a fixed equilibrium point (x1, x2) is an ESS, then the
Jacobian matrix of the replicator dynamic system is negative definite at (x1, x2),
equivalent to determinant Det(J(x1, x2)) > 0 and trace Tr(J(x1, x2)) < 0.
To simplify the discussion, let us denote K = π1
12 − π1
22, L = π1
11,M =
π2
22, N = π2
11 − π2
12. Table 2 shows the determinants and the traces of Jacobian
matrix at different fixed equilibrium points. Next we propose the fact, based on
which it is easy for us obtain this theorem.
Fact 1. Based on the expressions of πi
11, πi
12 and πi
22, i = 1, 2, in (15)–(19),
K = π1
12 − π1
22 > 0, L = π1
11 > 0, M = π2
22 > 0,
N = π2
11 − π2
12
=
⎧
⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎨
⎪⎪⎪⎪⎪⎪⎪⎪⎪⎪⎩
[
R + α( 1
λ1ρ
− R
α
)
]
h2e
λ1ρ(B̂∗
1− 1
λ1ρ
+ R
α
) − (R + αB̄)h2e
λ1ρ(B̃∗
1−B̄) < 0,
if 0 ≤ B̂∗
1 < B̃∗
1 < B̄;[
R + α( 1
λ1ρ
− R
α
)
]
h2e
λ1ρ(− 1
λ1ρ
+ R
α
) − (R + αB̄)h2e
λ1ρ(B̃∗
1−B̄) < 0(> 0),
if B̂∗
1 < 0 < B̃∗
1 < B̄ and λ1ρ(R
α
+ B̄)eλ1ρ(B̃∗
1−B̄− R
α
)+1 > 1(< 1);[
R + α( 1
λ1ρ
− R
α
)
]
h2e
λ1ρ(− 1
λ1ρ
+ R
α
) − (R + αB̄)h2e
−λ1ρB̄ > 0,
if B̃∗
1 < B̃∗
1 ≤ 0.
Because Tr(J(x∗
1, x
∗
2)) = 0 and Det(J(0, 0)) = −K · M < 0, (x∗
1, x
∗
2) and
(0, 0) cannot be ESS. Moreover, according to the results of Fact 1, we have
Det(J(1, 0)) > 0 and Tr(J(1, 0)) < 0 when 0 ≤ B̃∗
1 < B̄, and then the
fixed equilibrium points (1, 0) is an ESS. When B̃∗
1 < 0, Det(J(1, 1)) > 0 and
Tr(J(1, 1)) < 0. So the fixed equilibrium points (1, 1) is an ESS. ��
Decision on Block Size by Evolutionary Equilibrium Analysis 191
Corollary 1. For the evolutionary game between two mining pools, if 0 ≤ B1 ≤
B2 ≤ B̄ and 0 ≤ 1
λ1ρ − R
α < B̄, then
– (B̃∗
1 , B̄) is an evolutionary stable strategy profile, when 0 ≤ B̂∗
1 < B̃∗
1 < B̄, or
subject to λ1ρ(R
α + B̄)eλ1ρ(B̃∗
1−B̄− R
α )+1 > 1 when 0 ≤ B̂∗
1 < 0 < B̃∗
1 < B̄;
– (0, 1
λ1ρ − R
α ) is an evolutionary stable strategy profile, when B̂∗
1 < B̃∗
1 < 0, or
subject to λ1ρ(R
α + B̄)eλ1ρ(B̃∗
1−B̄− R
α )+1 < 1 when 0 ≤ B̂∗
1 < 0 < B̃∗
1 < B̄.
At last, let us discuss the case that 1
λ1ρ − R
α < 0.
Theorem 3. If 0 ≤ B1 ≤ B2 < B̄ and 1
λ1ρ − R
α < 0, then
– (0, 0) is a strict Nash equilibrium when B̃∗
1 ≤ 0;
– (B̄, B̄) is a strict Nash equilibrium when B̃∗
1 ≥ B̄.
– when 0 < B̃∗
1 < B̄, then
• (0, 0) is an evolutionary stable strategy profile if R > eλ1ρ(B̃∗
1−B̄)
1−eλ1ρ(B̃∗
1−B̄) αB̄;
• (B̃∗
1 , B̄) is an evolutionary stable strategy profile if R < eλ1ρ(B̃∗
1−B̄)
1−eλ1ρ(B̃∗
1−B̄) αB̄.
From the condition of 1
λ1ρ − R
α < 0, we can see that the fixed subsidy R is
quite high (> α
λ1ρ ). Under this condition, Theorem 3 states an possibility that
neither of pools would like to choose transactions into their blocks. It means
that the mining pools may give up the available transaction fees in hopes of
enhancing their chances to win the high fixed subsidy. The detailed proof can
be found in online full version [1].
4 Numerical Experiments and Conclusions
4.1 Numerical Experiments
In this section, we would analyze the case of two mining pools for the decision
on block size. Based on the statistic data about Bitcoin blockchain on [15], we
firstly consider the following setting to discuss the influence of default size on the
strategy selection of mining pools: the unit transaction fee α = 1 × 10−6 BTC,
the propagation speed ρ = 2.9 × 10−4 s/Byte, the block subsidy R = 6.25 BTC
and the average mining time T = 600 s, and three upper bounds of block size,
i.e., B̄ = 1 MB, 2 MB and 3 MB, as well as the relative computing power of each
pool is hi ∈ (0, 1) and h1+h2 = 1. Let us set h1 = 0.3 and h2 = 0.7 and take 0.2,
0.5 and 0.8 respectively as the initial values of xi, (i = 1, 2). Under the setting,
we get B̂∗
1 = −8.70 × 105, T
h1ρ − R
α = 6.47 × 105, and B̃∗
1 = −6.43 × 105, 6.95 ×
103, 6.69×105 corresponding to B̄ = 1×106, 2×106, 3×106, respectively. These
results satisfy the conditions of B̂∗
1 < B̄, B̃∗
1 < B̄ and T
h1ρ − R
α < B̄. Figure 1
illustrates the evolution processes of behaviors of two pools with different default
block sizes, verifying the result that (1, 0) is an ESS in Theorem 2. It is clear
that the speed of convergence to fixed equilibrium point (1, 0), i.e., the strategy
192 J. Chen et al.
profile (B̃∗
1 , B̄), becomes faster with the increasing of the maximum capacity of
a block. Hence larger upper bound B̄ brings pool 2 more payoff, stimulating the
speed of convergence to the strategy of B̄. At the same time, g′(B2) > 0 (shown
in Lemma 2) shows the optimal size of B1 increases with B2, and thus the rate
of convergence to B̂∗
1 is accelerated by the increasing of B̄.
(a) The evolutionary behavior of pool 1. (b) The evolutionary behavior of pool 2.
Fig. 1. The impact of the upper bound of block size B̄ on pool’s behaviors.
Next, we change the value of α and ρ, i.e., {α, ρ} = {0.8×10−6, 3×10−4}, and
take h1 = 0.24. Under this setting, 0 < B∗
2 = 1
λ1ρ − R
α < B̄ and B̂∗
1 < B̃∗
1 < 0.
Figure 2 illustrates the evolutionary behaviors of the two pools are shown, in
which the ESS is (1, 1), i.e., (0, 1
λ1ρ − R
α ) is the evolutionary stable strategy.
From Fig. 2(a), x1 converges to 1 in a relatively short time, while x2 takes much
longer time to converge to 1 shown in Fig. 2(b). In addition, when x2(0) ≤ 0.5,
pool 2 has a strong tendency to take B2 = B̄ initially, considering the small
mining rate of pool 1 and its own large winning probability. However, as time
(a) The evolutionary behavior of pool 1. (b) The evolutionary behavior of pool 2.
Fig. 2. The evolution of two pools when (1,1) is ESS.
Decision on Block Size by Evolutionary Equilibrium Analysis 193
goes by, pool 2 tends to realize the best response is just B∗
2 = 1
λ1ρ − R
α . This
explains the transition from x2 = 0 ��� x2 = 1 when x2(0) ≤ 0.5. Hence, if
B̂∗
1 < B̃∗
1 < 0, the best response of pool 1 is B1 = 0, meaning a block without
any transactions just for faster propagation process.
4.2 Conclusion
In this paper, the issue of selecting appropriate block sizes by mining pools in a
blockchain system is discussed. We model this block size determination problem
as an evolutionary game, in which each pool may follow the upper bound of
block size, i.e., the default size B̄, or not. In addition, if a mining pool chooses
not to follow B̄, then it shall continue to decide its optimal block size under
different strategy profile. In our evolutionary game model, all mining pools are
supposed to be bounded rational and each pool switches the low-payoff strategy
to a higher one on and on by learning others’ better strategies, until the whole
network reaches an evolutionary stable state (ESS). The theoretical analysis has
been done, particularly for a case of two mining pools, we prove the existence of
different ESS under different conditions. In addition to verify the results in our
work, several numerical experiments by using real Bitcoin data are conducted
to show the evolutionary decisions of mining pools.
Acknowledgments. This work is partially supported by the National Nature Sci-
ence Foundation of China (No. 11871366), Qing Lan Project of Jiangsu Province, the
Research Innovation Program for College Graduate Students of Jiangsu Province (No.
KYCX21-2998 and KYCX20-2790), and the project of the philosophy & social sciences
of higher education in Jiangsu province. (No. 2018SJA1347).
References
1. Chen, J., Cheng, Y., Xu, Z., Cao, Y.: Evolutionary equilibrium analysis for decision
on block size in blockchain systems (full version) (2021). https://arxiv.org/abs/
2110.09765
2. Easley, D., OHara, M., Basu, S.: From mining to markets: the evolution of bitcoin
transaction fees. J. Financ. Econ. 134, 91–109 (2019)
3. Friedman, D.: On economic applications of evolutionary game theory. J. Evol.
Econ. 8(1), 15–43 (1998)
4. Garay, J., Kiayias, A., Leonardos, N.: The bitcoin backbone protocol: analysis
and applications. In: Oswald, E., Fischlin, M. (eds.) EUROCRYPT 2015. LNCS,
vol. 9057, pp. 281–310. Springer, Heidelberg (2015). https://doi.org/10.1007/978-
3-662-46803-6 10
5. Gervais, A., Karame, G.O., Wüst, K., Glykantzis, V., Ritzdorf, H., Capkun, S.:
On the security and performance of proof of work blockchains. In: Proceedings of
the 2016 ACM SIGSAC Conference on Computer and Communications Security,
CCS 2016, p. 3C16. Association for Computing Machinery (2016)
6. Houy, N.: The bitcoin mining game. Lcloud/fogr J. 1(13), 53–68 (2016)
7. Jiang, S., Wu, J.: Bitcoin mining with transaction fees: a game on the block size.
In: 2019 IEEE International Conference on Blockchain (Blockchain), pp. 107–115
(2019)
https://arxiv.org/abs/2110.09765
https://arxiv.org/abs/2110.09765
https://doi.org/10.1007/978-3-662-46803-6_10
https://doi.org/10.1007/978-3-662-46803-6_10
194 J. Chen et al.
8. Li, J., Kendall, G., John, R.: Computing nash equilibria and evolutionarily stable
states of evolutionary games. IEEE Trans. Evol. Comput. 20(3), 460C469 (2016)
9. Liu, X., Wang, W., Niyato, D., Zhao, N., Wang, P.: Evolutionary game for mining
pool selection in blockchain networks. IEEE Wirel. Commun. Lett. 7(5), 760–763
(2018)
10. Lombrozo, E., Lau, J., Wuille, P.: Segregated witness (consensus layer) (2015).
https://github.com/bitcoin/bips/wiki/Comments:BIP-0141
11. Nakamoto, S.: Bitcoin: a peer-to-peer electronic cash system (2008). http://bitcoin.
org
12. NervosFans: Bitcoin transaction fee rules. https://zhuanlan.zhihu.com/p/38479785
13. Pan, D., Zhao, J.L., Fan, S., Zhang, Z.: Dividend or no dividend in delegated
blockchain governance: a game theoretic analysis. J. Syst. Sci. Syst. Eng. 30, 1861–
9576 (2021)
14. Rizun, P.R.: A transaction fee market exists without a block size limit, block Size
Limit Debate Working Paper (2015)
15. TOKENVIEW: Bitcoin browser. https://btc.tokenview.com/
16. Zhang, R., Preneel, B.: On the necessity of a prescribed block validity consensus:
analyzing bitcoin unlimited mining protocol. In: Proceedings of the 13th Inter-
national Conference on Emerging Networking Experiments and Technologies, p.
108C119. Association for Computing Machinery, New York (2017)
https://github.com/bitcoin/bips/wiki/Comments:BIP-0141
http://bitcoin.org
http://bitcoin.org
https://zhuanlan.zhihu.com/p/38479785
https://btc.tokenview.com/
	Evolutionary Equilibrium Analysis for Decision on Block Size in Blockchain Systems
	1 Introduction
	2 System Model and and Mining Pool's Expected Reward
	3 Evolutionary Game Model for Decision on Block Size
	3.1 Analysis Scheme
	3.2 A Case Study of Two Mining Pools
	4 Numerical Experiments and Conclusions
	4.1 Numerical Experiments
	4.2 Conclusion
	References