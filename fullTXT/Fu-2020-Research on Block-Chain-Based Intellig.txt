Received August 2, 2020, accepted August 13, 2020, date of publication August 18, 2020, date of current version August 28, 2020.
Digital Object Identifier 10.1109/ACCESS.2020.3017694
Research on Block-Chain-Based Intelligent
Transaction and Collaborative Scheduling
Strategies for Large Grid
XIAOLIN FU 1, HONG WANG2, AND ZHIJIE WANG1
1College of Electrical Engineering, Shanghai Dianji University, Shanghai 201306, China
2School of Economics and Management, Tongji University, Shanghai 200092, China
Corresponding author: Zhijie Wang (wangzj@sdju.edu.cn)
This work was supported by the Shanghai Natural Science Foundation Project under Grant 15ZR1417300.
ABSTRACT In view of the problems of large-grid-level centralized transactions and dispatch centers with
information asymmetry and high processing costs, a completely decentralized transaction architecture and a
weak centralized scheduling strategy based on block-chain are proposed. Firstly, the concepts of transaction
decentralization and scheduling decentralization are defined, and the reliability of distributed transaction
communication is studied. Built a blockchain transaction risk control model based on the communication
credit consensus mechanism. Secondly, under the weakly centralized scheduling architecture based on the
autonomous chain of substations, security checks are performed, and temporary central nodes are set up
to perform scheduling tasks. Finally, an improved evolutionary game algorithm is used to solve the above
model, and the optimal solution is obtained by dynamically updating the credibility.
INDEX TERMS Block-chain, large grid, intelligent trading, collaborative scheduling.
I. INTRODUCTION
With the continuous development of modern power systems,
a unified power trading and dispatching platform has prob-
lems of information asymmetry and low transaction relia-
bility, which does not meet the characteristics of openness,
equality and sharing in the power system. Therefore, The
State Grid Corporation has been proposed to build a smart
grid in China and has successfully developed a smart charg-
ing and feeding service monitoring system. At the same
time, it has achieved outstanding results in large-scale new
energy grid connection and operation control technology [1].
Northeast Asia signed the Memorandum of Cooperation in
Northeast Asia Power Interconnection in 2016 [2], [3]. Take
the Northeast Asian transnational power grid as an example
to analyze the feasibility of its dispatchmethod and long-term
transaction mode [4], [5]. The establishment of a maturity
evaluation model for cross-border power trading is conducive
to the further improvement of power trading and dispatch
mechanisms [6].
The associate editor coordinating the review of this manuscript and
approving it for publication was Zhouyang Ren .
As a new type of decentralized computing model,
blockchain can simplify operation procedures and reduce
execution costs, that makes the power system gradually
transition from partial decentralization to complete decen-
tralization [7]. Set up a weak central organization for
congestion management, and automatically execute the pro-
cess through smart contracts, saving transaction execution
time [8]. By proposing a heterogeneous block chain interac-
tion method, the interconnection between all levels of energy
layer are achieved [9]. To improve the adaptability of power
dispatch, the advantages of blockchain autonomous con-
sensus are introduced into demand management [10]–[12].
In fact, there are little works that systematically analyzes
trading and dispatching strategies in power systems. More-
over, some existing results in [7]–[12] cannot be verified by
simulation based on blockchain theory.
Motivated by discussion, in this paper, the influence of
distributed transactions on the stability of large power grids is
considered. By defining the proportion of decentralized and
quantified blockchain participation, a blockchain transaction
risk control model based on the communication credit con-
sensus mechanism is built. On the basis of the completion of
the transaction, a weakly centralized scheduling architecture
151866 This work is licensed under a Creative Commons Attribution 4.0 License. For more information, see https://creativecommons.org/licenses/by/4.0/ VOLUME 8, 2020
https://orcid.org/0000-0001-6652-9423
https://orcid.org/0000-0003-4177-8639
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
based on the autonomous chain of substations is designed for
security verification. At the same time, a temporary central
node is set to perform scheduling tasks, and a collabora-
tive optimization scheduling strategy is proposed. Finally,
an improved evolutionary game algorithm is used to solve
the problem, and a stable scheduling scheme is obtained by
dynamically updating the credibility.
The rest of this paper is organized as follows. Section 2 ana-
lyzes the feasibility of the integration of blockchain and large
power grids. Section 3 proposes distributed trading strate-
gies based on blockchain. Section 4 proposes the weakly
centralized scheduling strategy based on the blockchain, and
solves it through an improved evolutionary game algorithm.
A simulation example is given in Section 5, which is followed
by the conclusion in Section 6.
II. THE FEASIBILITY ANALYSIS OF THE INTEGRATION
OF LARGE POWER GRID AND BLOCK-CHAIN
A. LARGE-GRID AND BLOCK-CHAIN INTEGRATION
FUNCTION
The decentralized nature of the blockchain naturally corre-
sponds to the distributed nature of the main body in the power
grid, which can meet the demand for direct electricity trad-
ing. The data transparency, traceability and anti-tampering
characteristics of the blockchain can improve the security
and reliability of transactions. Blockchain provides solutions
for a number of problems that cannot be implemented in the
current smart grid [13]. It can be integrated with smart grid
functions as shown in Table 1.
TABLE 1. Microgrid and block-chain integration function.
B. SUBSTATION AUTONOMOUS CHAIN MODEL
The substation autonomous chain is composed of substations
at all levels. It is a partial decentralized structure with a trusted
center. Data access and reading are subject to strict rights
management. The privacy protection is better, and it is appli-
cable to the inside of the power grid. As shown in Figure 1, the
six substations in the center represent large power consumers
in each transaction dispatch layer, adopting direct power
FIGURE 1. Substation autonomous chain.
purchase to improve the overall operating efficiency. The four
small-capacity substations in the outer ring still use central-
ized power trading, which is conducive to maintaining the
stable operation of the platform. When this level of electric
energy does not meet the demand for electricity, the neigh-
boring substation submits a transaction application and the
transaction authority is obtained after the review is passed.
Since the optimization strategy in this paper is analyzed
under a decentralized structure, it prevents randomness and
volatility from affecting the safe and stable operation of the
power grid. Therefore, equation (1) is defined for the degree
of decentralization
Ddt =
Tbc
Ttc
× 100 (1)
where Tbc is the number of distributed transactions that the
block-chain participates in, Ttc is the number of dispatches
under the participation of a single center and Ddt = 100 is
fully decentralized. It is shown that all transaction executions
do not go through a third-party centralized agency, and all are
peer-to-peer(P2P) transactions, 50 < Ddt < 100 is weakly
centralized. It is shown that more than 50% of transactions are
executed as P2P transactions, and the representation of trans-
action centralization is weak and 0 < Ddt < 50 is weakly
decentralized. It is shown that more than 50% of transactions
are executed as centralized transactions. The decentralization
of transactions is weak, Ddt = 0 is fully centralized. It is
shown that all transactions are executed through a third-party
trading center.
III. DISTRIBUTED TRADING STRATEGY BASED
ON BLOCK-CHAIN
A. SMART CONTRACT MODEL
The core value of the block-chain is to achieve mutual trust
through multi-party co-governance. It can also ensure the
authenticity and reliability of information without the need
for a third party [14]. Its trustworthy features are character-
ized in the form of smart contracts, which can automatically
execute transaction settlement [15]. As shown in Figure 2,
the main implementation steps are as follows:
i) An electronic agreement is reached between the transac-
tion nodes on the signatures of the two parties, the transaction
VOLUME 8, 2020 151867
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
FIGURE 2. Model of smart contract.
amount, electronic currency, transaction rules, and the com-
plete state machine,
ii) After the P2P network spreads, the transaction informa-
tion verified by consensus is written to the block-chain,
iii) Check the oracle and its external data. Although the
smart contract itself does not have strategies the ability to
access the external data of the blockchain, it can pass through
the oracle. Using external adapters, the blockchain can safely
connect with the oracle API. Developers can easily con-
nect their smart contracts with the pre-written oracle API
suite to establish a complete off-chain oracle connection.
So as to get in touch with outside world and obtain reliable
external data.
iv) The conditions for triggering the smart contract can
be the state on the chain, such as whether the payment is
completed or there are marked electricity purchase and sale
prices (ie electricity demand), and external information (such
as weather conditions), etc. After the user gets the returned
contract address and contract interface information, the user
can call the contract by initiating a transaction. When the
transaction satisfies triggered condition, it is pushed to the
queue for verification, and the transaction is completed after
the verification is passed and recognized by more than half
of the nodes. When the transaction does not meet the trigger
condition, it will not be recorded in the block and return to
step (1) to find transaction data that meets the requirements
again.
Most power generation companies at the large power grid
level are traditional energy sources. It is necessary to give
priority to ensuring the safe and stable operation of the
power grid, and on this basis to improve corporate efficiency.
The fully distributed transaction framework based on the
blockchain designed in this paper is shown in Figure 3.
The red line in the figure connects power generation com-
panies, power users and grid companies. With the support
of blockchain technology, direct electric energy transactions
and electricity bill settlement are completed. The usage of
the block chain to automatically share and non-tamperable
FIGURE 3. Design of a fully distributed transaction framework based on
block-chain in large power grid.
is shown of recording information simplifies transaction set-
tlement, in addition, it improves the efficiency and settlement
efficiency of large-user enterprises [16].
In the transaction implementation stage, the smart meter
records the actual consumption or output of electricity over a
period of time. Broadcast to other nodes, and the bookkeeping
node records on the chain. The amount of change in the user’s
electronic currency is obtained through a smart contract. Each
transaction node in the power grid needs to reach a consensus
on the generation and consumption of electrical energy, and
the electronic money paid to the generator is related to the
amount of power generation and supply and demand. The cost
of electricity is:
f (x) = aele · pele (2)
where aele is actual power consumption by users and pele is
the price of unit electricity.
The balance fee is composed of the actual electricity cost
of the user and the penalty fee of the unfinished transaction
indicator. The former is sold at a lower transaction price, and
the latter needs to pay a higher actual electricity price. The
balance fee can be expressed as:
g (aele, ds, dr ) = aele · pele +
δ
e
(ds−dr )2
τ
· ppunish (3)
where ds is the power supply, dr is the power demand, δ and
τ are coefficients and ppunish is the unit of penalty electricity
price.
The fees payable by users are inversely related to supply
and demand:
l (dc, ds, dr ) =
dc · ε · dr
ds + dr
(4)
where dc is Power consumption, ε is the coefficient.
B. RELIABILITY RESEARCH OF DISTRIBUTED
TRANSACTION COMMUNICATION
Reliable communication is studied from two aspects of link
connectivity and transaction reciprocity. The link connectiv-
151868 VOLUME 8, 2020
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
ity considers the link connectivity probability of the commu-
nication network topology. On the premise of ensuring link
connectivity, nearby transactions can be realized, reducing
network loss and improving transaction efficiency. Com-
bined with the definition of the degree of dispersion above,
the link connectivity of a completely distributed structure is
defined as:
linkcon = 1−
Lp∑
q=1
(
1− epq · e2p
)
(5)
Under a fully centralized structure, that link connectivity
is defined as:
linknet =
1
M
m∑
p=1
linkcon (6)
where Lp is the number of links connected to node p, epq
is the extensibility of the qth link connected to node p, and
the extensibility is defined as the probability that link q is
connected to other nodes except node p; ep is the sum of scal-
ability of node p,Linknet is the link connectivity of system,
M is the total number of nodes.
The trade interdependence of the power trading commu-
nication network is shown that when the integrity of the
communication network is damaged, that is, when the line
is overhauled, the remaining nodes and links can still main-
tain the performance of real-time power trading. Transaction
interdependence can effectively reduce the negative impact
of unbalanced electricity on the power grid, as defined by
equation (7):
Aidele = senp ·
h∑
j=1
senpj ·
Lpj
mpj(M − 1)
(7)
where h is the shortest path length connecting two nodes,
senp is the communication response speed of node p, senpj is
the set of node communication response speed with the same
pitch as node p, Lpj is The number of links between the node
p and the equal-distance communication set, mpj is the total
number of nodes equidistant from node p.
Regarding the whole-network transaction interdependence
of the communication network, it is expressed as:
Aid =
1
M
M∑
p=1
∂p · Aidele (8)
In the equation (8):
∂p =
zp
zmax
(9)
where ∂p is the weighted coefficient of node p transaction
compatibility, zp is the number of nodes in the node p equal-
distance communication set, zmax is the maximum number of
nodes in a node’s equidistant communication set.
Assuming that the connectivity of the node and the link
is the same, take the extendable interval of the node and
the link as [0.91, 0.99]. Comparison of link connectivity
FIGURE 4. Comparison of link connectivity with a scalability of
[0.91, 0.99].
FIGURE 5. Comparison of transaction interdependence with a scalability
of [0.91, 0.99].
between fully centralized communication and fully decen-
tralized communication is shown in Figure 4. The transaction
reciprocity degree under the two communication methods is
shown in Figure 5.
It can be seen from Figures 4 that within the range of
extensibility [0.91, 0.99], the link connectivity of a fully
decentralized power communication based on block-chain
technology is superior to that of a fully centralized power
communication. The link connectivity of fully decentralized
communication networks is 1.9% to 2.4% higher than that of
fully centralized communication architectures, that is, on the
premise of ensuring link connectivity, it can effectively pro-
mote the nearby transaction of electrical energy and reduce
network loss.
It is shown that Figures 5 that the completely decentral-
ized power communication architecture based on block-chain
technology has better transaction interdependence than the
fully centralized architecture. Moreover, Figure 5 shows that
the latter’s transaction completion rate is only 16.4%∼20.7%
of the former. That is, when the completely decentralized
communication architecture network is damaged. Due to the
decentralized interconnected network structure, power trans-
actions can reach equal-distance transaction nodes through
other connected links to maintain the continued operation of
power transactions.
C. BLOCK-CHAIN TRANSACTION RISK MANAGEMENT
AND CONTROL MODEL BASED ON COMMUNICATION
CREDIT CONSENSUS MECHANISM
On the basis of the above reliability research, this section
improves the equity proof mechanism and proposes a
transaction risk management and control model based on
VOLUME 8, 2020 151869
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
the communicate Proof-of-Credit (cPoC). It incorporates
communication reliability and data transmission speed into
the credit scoring system as a competitive mechanism for
transaction nodes to obtain the right to keep accounts.
The consensus mechanism is important to agreement
reached by the nodes in the decentralized system [17]–[19].
In the process of distributed transactions, the speed and relia-
bility of data broadcasting should also be used as constraints
when nodes compete for bookkeeping rights, reflecting the
value provided by transaction entities participating in direct
transactions, which is an important right of market entities.
Therefore, this paper proposes a cPoC consensus mechanism,
which considers communication reliability and data trans-
mission speed in the setting of the difficulty coefficient. The
competition algorithm for the accounting rights of each node
in this mechanism is shown in equations (10) and (11):
H (Ri, k i) ≤ Ndiff · eci · trani (10)
Ndiff = Nba + N (trani, vi) (11)
where H (·) is the hash function, Ri is the root hash of all the
data packed into the block by node i, ki is the random number
that node i needs to find, ci is the credit score of node i,
Ndiff is the difficulty factor, Nba is the default basic difficulty
coefficient of the coefficient, N (·) is the data transmission
network function, trani is the reliability of data transmission
and vi is the data transmission speed (bits/sec).
According to the optimization strategy of accounting rights
proposed by Equations (10) and (11), the node can obtain the
accounting rights according to the flow of Figure 6.
FIGURE 6. Node competition accounting right rule.
Under the cPoC consensus mechanism, the function values
obtained by each node’s single-run hash function are evenly
distributed between 0 and 2256 − 1. Assume that there are
F transaction entities in the network, then the probability of
one of them gaining the block accounting right is as follows
equation (12) shows:
prblocki =
(Ndiff ·eci ·trani)
2256
F∑
j=1
{
(Ndiff ·e
cj ·tranj)
2256
} = eci · trani
F∑
j=1
ecj · tranj
(12)
where 2256 is the space size mapped by the SHA − 256
algorithm.
In the above equation, the numerator represents the prob-
ability that node i will successfully obtain the accounting
power in a hash function calculation. From(12), the difficulty
coefficient of node mining is related to its credit score and
communication reliability. The higher the credit score and the
higher the communication reliability, the lower the mining
difficulty and the greater the probability of obtaining account-
ing rights. It can reward highly credible subjects and punish
low credible subjects. Compared with the existing electricity
trading methods, the increased difficulty of selection can
control trading risks.
The cPOC algorithm reduces the attack success rate of
malicious nodes by increasing the difficulty of choosing the
transaction subject. Consequently, realizing the management
and control of distributed energy transaction risks, as shown
in Figure 7. When the system is attacked by malicious
nodes, it has a strong ability to maintain stable operation.
As shown in Figure 7, the number of malicious nodes grad-
ually increases from 0 to 40, with a step size of 2. It can
be seen from the figure that when the number of malicious
nodes is less than 62% of the total, the attack success rate is
0. Therefore, compared with the continuous double auction
mechanism, the use of blockchain technology to achieve
transaction authentication has higher security and reliability.
Figure 8 shows the comparison of throughput under dif-
ferent transaction strategies. Transaction throughput refers
to the number of transactions completed by the system in
a given time period. That is, the greater the throughput of
FIGURE 7. Success rate of malicious node attack.
FIGURE 8. Transaction throughput comparison.
151870 VOLUME 8, 2020
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
the system, the more user or system requests the system
completes in unit time, and the system resources are fully
utilized. Figure 8 takes the average value of different trans-
action states. When the number of nodes is less than 40,
the blockchain-based transaction strategy proposed in this
article has low transaction delay and high consensus speed,
and transaction settlement is completed through an automati-
cally executed smart contract. So it has obvious advantages in
throughput performance. When it exceeds 40, the throughput
under the strategy proposed in this article drops slightly, and
finally stabilizes at about 32 times, which still has better room
for improvement.
Figure 9 shows the effective supply rate of transactions in
each period. The effective supply rate refers to the ratio of the
number of transactions successfully completed according to
the transaction intention to the total transaction volume. The
higher the effective supply rate, the smaller the transaction
defaults and transaction adjustments, the more conducive to
improving transaction quality. As shown in Figure 9, although
the continuous double auction mechanism can maintain the
supply rate at a relatively high level, there is a significant
decline during the peak load period. In the blockchain trans-
action strategy proposed in this paper, the cPOC consen-
sus mechanism introduces credit scoring and communication
reliability to timely amend the entities that do not meet the
transaction needs, and has the effect of rewarding high-trust
entities and punishing low-trust entities. During the peak
transaction period from 18:00-20:00, the highest supply rate
can be increased by 11.7%, and the average effective supply
rate can be increased by 5.8%, effectively reducing the trans-
action default rate and adjustment volume.
FIGURE 9. Effective supply rate of transactions in each period.
As shown in Table 2 and Figure 10, the existing continuous
double auction mechanism has high requirements for local
servers. Thus, it is difficult to implement it in a decentralized
low-cost network. The block-chain-based transaction strat-
egy proposed in this paper can effectively reduce the daily
TABLE 2. Daily operating costs under different mechanisms.
FIGURE 10. Operating costs of microgrids at different times.
operating cost of the microgrid by 8.45%. It is because the
block-chain technology can break the information barrier
between the generator and the user, reduce the credit cost in
the transaction process and the third-party platform construc-
tion cost. 6:00p.m∼9:00p.m is the peak load period, and the
optimization effect is more obvious.
IV. WEAK CENTRALIZED SCHEDULING STRATEGY BASED
ON EVOLUTIONARY GAME ALGORITHM
A. WEAK CENTRALIZED ARCHITECTURE BASED
ON SUBSTATION AUTONOMOUS CHAIN
At present, electricity market transactions are mainly divided
into two types: annual transactions and monthly transactions.
This paper first uses the monthly transaction method of
centralized bidding as an example to illustrate the relation-
ship between the transaction center and the dispatch center,
as shown in Figure 11. The two are jointly responsible for
the electricity market. The former is mainly responsible for
declaration, clearance and settlement, and the latter is mainly
responsible for security check, congestion management and
FIGURE 11. Monthly centralized bidding process.
VOLUME 8, 2020 151871
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
transaction execution. All transaction intentions need to pass
the security check of the dispatch center to finally form a
transaction plan [20], [21].
Considering that there is still a dispatch center in the cur-
rent grid company system, this paper proposes the weak cen-
tralization idea of decentralization of dispatching part, which
retains the function of disatch center. A temporary scheduling
center is selected through the blockchain consensus mecha-
nism to perform scheduling tasks at all levels. At the same
time, the substation autonomous chain will approve transac-
tion scheduling information to provide safety supervision for
the stable operation of the power grid. The temporary center
node is affected by factors such as load location, power supply
location, power supply unit, network delay, etc. According to
the different transaction information, the selected temporary
center will change, as shown in Figure 12 and Figure 13.
FIGURE 12. Temporary central node at t1.
FIGURE 13. Temporary central node at t2.
Figure 12 shows the process of selecting the temporary
central point at time t1. The power plants that provide elec-
trical energy include three thermal power plants, one wind
power plant, and one photovoltaic power plant. The system
communication node broadcasts the random number that
needs to be solved in the round scheduling data, and each
node performs distributed storage of the transaction data
while updating the local transaction scheduling data. The
substation node that can calculate the correct random number
result as a priority. The temporary center of this round of
scheduling performs its own scheduling tasks and gets certain
rewards.
Figure 13 shows the selection process of the temporary
central point at time t2. The power plant that provides elec-
trical energy includes two thermal power plants, two wind
power plants, and one photovoltaic power plant, which are
different from the geographical location and power supply
situation at time t1. Therefore, re-select the temporary central
node and perform random number calculation. By uploading
the data, we can know the active power applied for in the
substation for this round of transactions. Using the stored
data in the block-chain network, we can know the maximum
load during the application period of the substation, so we
can obtain the available power and the total power required
to ensure the stable operation of the power grid.
According to the submitted address information, the sub-
station autonomous chain automatically recognizes the high-
est substation level of power purchaser A and power seller B
in this round of transactions:
f (A,B) = n n = 1, 2, 3, 4, 5 (13)
where 1, 2, 3, 4, and 5 represent 35kV substation, 110kV
substation, 220kV substation, 330kV substation, and 500kV
substation, respectively.
Assuming that the level of the substation directly con-
nected to the power purchaser A is m, and the level of the
substation directly connected to the power seller B is o, then
a total of Nstation level substations need to be passed:
Nstation = 2n− m− o+ 1 (14)
Assuming that A is connected to user B through 500kV,
330kV, 220kV, 110kV, 35kV substation, then n=5, m=5,
because A is directly connected to 500kV, B is the user,
directly connected to 35kV, o=1, then the number of passing
substations between the two is 5, which is in line with the real
situation.
B. SMART CONTRACT COLLABORATIVE
SCHEDULING MODEL
On the basis of traditional power grid economic dispatch,
block-chain technology is incorporated, which effectively
introduces the advantages of block-chain in data storage,
information security, and data interaction into the power grid
economic dispatch [22]–[25]. The economic dispatch plan of
the power grid is formed in a smart contract and is checked
and confirmed by the energy management system. Finally,
the reliable power supply from the power generation unit to
the power consumption unit is realized. The specific steps are
as follows:
i) Each power generation unit and power user access his-
torical data and current status information in the blockchain
network, receive existing transaction requests, and perform
data backup after authentication by the entire network.
ii) According to all the transaction information that has
passed the authentication, each node calls the smart contract
151872 VOLUME 8, 2020
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
to perform economic dispatch calculations. The information
format released by the power supply is:
GEN = (IDGEN ,HGEN ,RGEN , JGEN ,KGEN , 9GEN ) (15)
where GEN is controllable power information, IDGEN is the
unique identification obtained when the controllable power
supply joins the block-chain network, HGEN is output capac-
ity, RGEN is cost information, JGEN is the controllable energy
type, KGEN is the current start and stop status of the unit,
9GEN is the climbing rate.
iii) Integrate all the effective information received by the
smart contract to form an economic dispatch objective func-
tion and constraint conditions, thereby generating a dispatch
plan. The scheduling model in this paper is shown in equa-
tion (16) to equation (20). The scheduling scheme is prop-
agated through the P2P network, waiting for other nodes to
verify.
iv) If the scheduling plan is verified, it will be recorded
in the blockchain in the form of a smart contract, otherwise,
go back to step (3) to re-equationte the scheduling plan.
v) When the preset trigger conditions are met, each power
generation and consumption unit automatically executes the
scheduling plan in the smart contract, which is regarded as
the end of a scheduling task.
In the hierarchical scheduling, the main task of the national
survey is to equationte a cross-provincial tie-line plan, which
is determined by balancing large power distribution and
power trading. In the case of a known output curve, if the
power transaction situation needs to be adjusted due to secu-
rity constraints, consider establishing a tie-line model with
the goal of minimum adjustment cost. As shown in equa-
tion (16):
T∑
t=1
N∑
n=0
σiµn
∣∣Cn,t − Cs
n,t
∣∣ (16)
where Cn,t is the contribution of the inter-provincial power
supply at time t according to the original transaction plan,
Cs
n,t is the suggested contribution after the power supply
across the provinces does not meet the safety constraints at
time t,N is the total number of power supplies, σi is the power
distribution ratio of the power supply to the tie line i, and the
value is between [0, 1], µn is the adjustment cost of power
supply n.
The corresponding constraints under the objective function
are:
i) Tie line transmission constraints
Cn,t,min ≤ Cn,t ≤ Cn,t,max (17)
whereCn,t,min are theminimum andmaximumpower that can
be received or sent at time t , respectively.
ii) Control constraints of unit groups in the control area
χg,min ≤
∑
i∈g
Li,t ≤χg,max g ∈ G
LG,t =
∑
i∈g
Li,t − CG,t
(18)
where G is the large grid, g is the provincial power grid,
χg,min and χg,max are the minimum and maximum output of
the provincial grid unit respectively, LG,t is the load demand
of large power grid, CG,t is the large grid tie line plan to
contribute.
The first equation in equation (18) indicates that the total
output of units in the provincial grid meets the fluctuation in
the interval [χg,min, χg,max], and the second equation is used
to ensure load balance of large grid.
iii) Power flow check constraints
The following equations are power balance constraint,
node power constraint and node voltage constraint.
C t
e = V t
e
∑
f
(
V t
e − V
t
f
)
· ref e ∈ El (19)
s.t. Vmin ≤ V t
e ≤ Vmax,Cmin ≤ C t
e ≤ Cmax ∀e (20)
where f is all nodes connected to node e, C t
e is the power
of nodee at time t , the inflow is positive and the outflow
is negative, ref is the current value flowing through the two
nodes, the flow direction from e to f is positive, and the flow
direction from f to e is negative, El is a collection of system
nodes, Cmin and Cmax are the minimum and maximum values
of node power C t
e respectively, Vmin and Vmax are the mini-
mum and maximum values of node voltage V t
e respectively.
C. IMPROVED EVOLUTIONARY GAME ALGORITHM
Evolutionary game theory is based on individuals with lim-
ited rationality, and it well describes the trend of behav-
ior changes [26]. It makes up for the difficult problem of
complete rationality and Nash equilibrium in classical game
theory, and actively explores evolutionary stability strategies
and evolutionary processes [27], [28].
In the evolutionary game algorithm, large power grids and
provincial power grids as game participants generate two
populations denoted as P1 and P2 respectively, p1 and p2 are
the probability of population distribution in the initial popula-
tion. P1 and P2 take y1 and y2 as benefit targets respectively.
When two agents in the group compete for the same benefit,
a game will be triggered. Let the two agents x
(
x ∈ ÊPi
)
and x ′
(
x ′ ∈ ÊPj
)
play the game in the maximization benefit
game. When the relationship between i andj is different,
the scheduling function obtained by x is different.
when i and j are equal, the scheduling function is shown in
equation (21):
Dispatch (x) =
yi (x)− yi,min
yi.max − yi,min
(21)
when i and j are not equal, the scheduling function is shown
in equation (22):
Dispatch (x) =
(
yi (x)− yj
(
x ′
))
−
(
yi,min − yj,max
)(
yi,max − yj,min
)
−
(
yi,min − yj,max
) (22)
In each generation of the evolutionary algorithm, a pair of
agents is randomly selected to perform a number of repeated
games. Take the average scheduling value as the subject’s
VOLUME 8, 2020 151873
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
fitness value. The best dispatch decision is obtained by flexi-
bly adjusting the game status between large power grids and
provincial power grids.
Since the dispatch strategy in this paper is analyzed under
a partially decentralized structure, in order to prevent the ran-
domness and volatility of distributed dispatch from affecting
the operation of large power grids. Therefore, the Decen-
tralization of scheduling (Decentralization of scheduling) is
defined by equation (23). Considering the credibility of stable
decision-making due to distribution, the credibility repre-
sents the feasibility of a scheduling scheme that satisfies
the operational stability of the power grid. The definition is
shown in equation (24), so that the algorithm parameters are
dynamically adjusted when the game is evolved.
Dsc =
Sbc
ssc
× 100 (23)
where Sbc is the number of distributed schedules, Ssc is the
number of centralized scheduling, Dsc = 100 is completely
decentralized. It is shown that all scheduling executions do
not go through a third-party centralized agency, and all are
P2P schedules, 50 < Dsc < 100 is weakly centralized. It is
shown that more than 50% of schedules are executed as P2P
schedules, and the representation of scheduling centralization
is weak, 0 < Dsc < 50 is weakly decentralized. It is
shown that more than 50% of schedules are executed as
centralized schedules, and the decentralization of schedules
is weak,Dsc = 0 is completely centralized. It is shown that all
scheduling is executed through a third-party dispatch center.
Scred = 1uerror +1ferror (24)
where 1uerror is the voltage deviation value in the power
grid, 1ferror is the frequency deviation value in the power
grid. The credibility sets the constraint range according to the
allowable deviation under each voltage level.
It is known that the evolution of the ird generation dispatch-
ing decision of the large power grid and the provincial power
grid isMdec. In a variety of random scenarios, if the provincial
power grid cannot complete the dispatch task, the impact of
the generated electric energy fluctuation on the operation of
the large power grid can be calculated. Equationte a compen-
sation model corresponding to the impact of the provincial
power grid on the operation of the large power grid, and
express it as the penalty cost of the impact of the provincial
power grid output.
Scomp =
T∑
t=1
Q∑
q=1
�q · α ·1M2
diff · (1− Dsc) (25)
where �q is the probability weight corresponding to the
scene, Q is the total number of multiple random scenes,
1Mdiff is the gap between the actual output of the provincial
power grid and the dispatching decision output of Mdec, α is
the unit penalty cost.
Assuming that the provincial grid operation cost under
this dispatch decision is Spro and the minimum credibility is
Scred,min, the population distribution probability is adjusted
appropriately in the following two situations:
i) Scomp
Spro
> Scred,min, The impact of distributed dispatch on
the stability of large power grids is greater than the minimum
credibility, so the population distribution probability is not
adjusted,
ii) Scomp
Spro
≤ Scred,min, The effect of distributed dispatch on
the stability of the large power grid is less than the minimum
credibility. Starting from i + 1 evolutions, the population
distribution probability is adjusted so that the stability impact
of large power grid caused by the randomness of distributed
dispatch is within the tolerable range.
V. EXAMPLE ANALYSIS
In order to verify the effectiveness of the mechanism pro-
posed in this paper, a weak centralized scheduling model is
built onMATLAB. Smart contracts are written in C language.
web3 uses HTTP Provider as a connector to the database.
After the connection is completed, the scheduling model
can be called in the smart contract. In the decision-making
phase, the provincial power grid obtains the expected power
through the web3.eth.call interface. Complete the clearing
solution and optimization scheduling in MATLAB, and write
the optimization results into the smart contract through the
web3.eth.sendTransaction interface. The parameters of dif-
ferent capacity units are shown in Table 3.
Taking the provincial power grid as an example, simulation
calculation of the optimal dispatching problem of coal-fired
generating units in the province is carried out. The output plan
of the unit determined by the evolutionary game method is
shown in Figure 14, which is consistent with the load curve
change rule at various times of the day. The peak output
of different units is positively correlated with the installed
capacity. In the evolutionary game, each unit takes the min-
imum change in power on the contact line when the power
transaction adjustment is required as the objective function.
Through equation (25), the minimum credibility is used as
the basis for judgment, and the population distribution prob-
ability is dynamically adjusted, so that the output of the unit
can meet the requirements of safe and stable operation of the
large power grid.
As shown in Figure 15, setting different scheduling decen-
tralization degrees will affect the output of the unit. Under
weak centralization, the unit output is smoother, which can
FIGURE 14. Output curves of different coal-fired units.
151874 VOLUME 8, 2020
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
TABLE 3. Minimum stable combustion load and adjustment range of units with different capacity.
reduce peak and valley fluctuations, because the block-chain
technology is used by each unit to maintain the weak center.
Consensus scheme can realize information sharing andmulti-
party governance. The output curve of the unit is not only
affected by the dispatch center, but also by the remaining
power stations. To a certain extent, the output of the unit
can be optimized to make it smoother, and then the dispatch
efficiency of each power station is improved. However, due
to the impact of the block’s own storage efficiency, with the
increasing number of transactions and scheduling bodies, the
limited storage space will reduce the block’s response speed,
so further research on block management is needed.
FIGURE 15. Unit output curves under different dispatching
decentralization degrees.
The power deviation values under different optimization
strategies are shown in Figure 16. It can be seen from the
figure that before optimization, the power deviation value
in the grid is high and the power fluctuation is large, and
the system state is unstable. The blockchain-based optimiza-
tion strategy proposed in this paper is compared with the
optimization effect of genetic algorithm. Although genetic
FIGURE 16. Power deviation diagram under different optimization
strategies.
algorithm can find the optimal solution more effectively, the
power deviation after blockchain optimization is lower, which
reduces power fluctuation. Therefore, the blockchain-based
scheduling optimization strategy is more conducive to the
safe and stable operation of the power grid.
In order to verify the impact of power flow on the power
flow on the tie line under the weakly centralized dispatch
mode, a large power grid is used as a test case. Assume
that the initial conditions are: a certain province’s shortfall
of electricity-3385MW, consisting of 16 physical lines, and a
power adjustment space of ±10%. As shown in Figure 17,
after power adjustment under distributed scheduling, most
branch deviations are distributed around 15%, so the cal-
culation and operation costs are reduced at the expense of
power flow accuracy near the tie line. Based on the weak
centralization of the blockchain, trend data saves computing
memory and improves computing efficiency through multi-
party consensus.
FIGURE 17. Impact on tie line power under distributed scheduling.
In the evolutionary game algorithm, the dynamic cred-
ibility change trends of large power grids and provincial
power grids are shown in Figure 18. It can be seen from
the figure that large power grids and provincial power grids
undergo a dynamic evolutionary game process, which can
eventually make weak centralized dispatch to large power
grids. The degree of stability is maintained above the min-
imum confidence level, and the deviation of voltage and
frequency can meet the requirements of power grid opera-
tion. And minimize the penalty cost of the provincial grid
calculated by equation (25). Compared with the traditional
scheduling method, the two-way security system established
VOLUME 8, 2020 151875
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
FIGURE 18. Dynamic trend of dynamic credibility.
under the blockchain technology can maintain the continuous
stability of both parties and obtain better economic benefits.
VI. CONCLUSION
This paper focuses on the research of large grid-level trans-
action and collaborative scheduling strategies in smart grids,
and systematically analyzes the advantages of block-chain-
based transactions and scheduling. All the models and
strategy analysis described in this paper are based on the
substation autonomous chain. Compared with the existing
distributed transaction methods, although the robustness is
not significantly improved, it can significantly improve the
transaction throughput and calculation efficiency. Since the
storage efficiency of the block itself restricts the response
speed of the block under the main body of large-scale transac-
tions, further study on block congestion management should
be conducted as a more effective solution for scheduling
optimization.
ACKNOWLEDGMENT
Thanks to all the staff members of the Shanghai Natural
Science Foundation Project for their help and the staff of
Beijing Jin-Feng Energy Internet Park for providing the data
source.
REFERENCES
[1] N. C. Zhou, J. Q. Liao, Q. G. Wang, C. Y. Li, and Y. Li, ‘‘Analysis and
prospect of application status of deep learning in smart grid,’’ Automat.
Electr. Power Syst., vol. 43, no. 4, pp. 180–197, 2019.
[2] Z. Y. Liu, ‘‘Research and prospects on transnational and intercontinental
interconnection of global energy Internet,’’ Proc. CSEE, vol. 36, no. 19,
pp. 5103–5110, 2016.
[3] Y. H. Zhang, Y. T. Zhang, D. Zhang, P. Y. You, C. Gao, and Y. L. Jiang,
‘‘Preliminary study on transnational power interconnection model and
technical feasibility in Northeast Asia,’’ Global Energy Internet, vol. 1,
no. S1, pp. 213–221, 2018.
[4] Q. R. Yang, T. DingW. Q. Ma, H. M. Zhang, Z. Y. Jia, W. Tian, and Y. Cao,
‘‘Decentralized security-constrained economic dispatch for global energy
Internet and practice in Northeast Asia,’’ in Proc. IEEE Conf. Energy
Internet Energy Syst. Integr. (EI2), Nov. 2017, pp. 1–6.
[5] Y. Cao, T. Ding, Y. T. Hou, and M. H. Shan, ‘‘Design and simulation
of long-term trading mode of multinational electricity market under the
background of global energy Internet,’’ Global Energy Internet, vol. 1,
no. S1, pp. 242–248, 2018.
[6] X. L. Li, Y. M. Song, C. T. Tang, F. Z. Shan, J. Xu, and Y. W. Liu,
‘‘Research on maturity model of cross-border electricity trading market
based on global energy Internet,’’ Electr. Power Inf. Commun. Technol.,
vol. 15, no. 3, pp. 7–13, 2017.
[7] G. N. Wang, J. F. Yang, S. Wang, L. L. Duan, J. Zhang, and Y. T. Wu,
‘‘Distributed optimization of power grid considering EV swap station
scheduling and blockchain data storage,’’ Autom. Electr. Power Syst.,
vol. 43, no. 8, pp. 110–116, 2019.
[8] X. Tai, H. B. Sun, andQ. L. Guo, ‘‘Blockchain-based power transaction and
congestion management method in energy Internet,’’ Power Syst. Technol.,
vol. 40, no. 12, pp. 3630–3638, 2016.
[9] B. Li, W. Z. Cao, J. Zhang, S. S. Chen, B. Yang, Y. Sun, and B. Qi,
‘‘Multi-energy system transaction system and key technology based on
heterogeneous blockchain,’’ Autom. Electr. Power Syst., vol. 42, no. 4,
pp. 183–193, 2018.
[10] G.Wu, B. Zeng, R. Li, andM. Zeng, ‘‘Research on the application mode of
blockchain technology in comprehensive demand side response resource
trading,’’ Proc. Chin. Soc. Electr. Eng., vol. 37, no. 13, pp. 3717–3728,
2017.
[11] M. Zeng, J. Cheng, Y. Q. Wang, Y. F. Li, Y. Q. Yang, and J. Y. Dou, ‘‘A
preliminary study on the multi-module collaborative autonomy model of
the energy Internet under the blockchain framework,’’ Proc. CSEE, vol. 37,
no. 13, pp. 3672–3681, 2017.
[12] B. Li, C. Lu, W. Z. Cao, B. Qi, D. Z. Li, S. S. Chen, and G. Y. Ciu,
‘‘Application of automatic demand response system based on blockchain
technology,’’ Proc. CSEE, vol. 37, no. 13, pp. 3691–3702, 2017.
[13] Y. Yan, J. H. Zhao, F. S. Wen, and X. Y. Chen, ‘‘Blockchain in energy sys-
tem: Concept, application and outlook,’’ Electr. Power Construct., vol. 38,
no. 2, pp. 12–20, 2017.
[14] B. Meng, J. B. Liu, Q. Liu, X. X. Wang, X. R. Zheng, and D. B. Wang,
‘‘Survey of smart contract security,’’Chin. J. Netw. Inf. Secur., vol. 6, no. 3,
pp. 1–13, 2020.
[15] M. L. Fu, L. F. Wu, Z. Hong, and W. B. Feng, ‘‘Research on smart contract
security vulnerability mining technology,’’ J. Comput. Appl., vol. 39, no. 7,
pp. 1959–1966, 2019.
[16] J. Ping, S. J. Chen, and Z. Yan, ‘‘Energy blockchain underlying technology
suitable for convex optimization scenarios of power systems,’’Proc. CSEE,
vol. 40, no. 1, pp. 108–116, 2020.
[17] J. Wang, W. B. Liu, and L. L. Gong, ‘‘A consensus mechanism for
blockchain dynamic authorization,’’ J. Heilongjiang Univ. Sci. Technol.,
vol. 30, no. 2, pp. 193–199, 2020.
[18] Y. Yuan, X. C. Ni, S. Zeng, and F. Y. Wang, ‘‘The development status
and prospect of blockchain consensus algorithm,’’ Acta Automatica Sinica,
vol. 44, no. 11, pp. 2011–2022, 2018.
[19] J. Wang, T. Yang, and Y. Li, ‘‘Design of integer chaotic key generator for
wireless sensor network,’’ Int. J. Future Gener. Commun. Netw., vol. 9,
no. 11, pp. 327–336, Nov. 2016.
[20] L. J. He, S. Cheng, and Z. M. Chen, ‘‘Two-tier optimal dispatch of multi-
microgrids considering interactive power control and bilateral bidding
transactions,’’ Power Syst. Protection Control, vol. 48, no. 11, pp. 10–17,
2020.
[21] X. L. Li, F. Z. Shan, Y. M. Song, M. H. Zhou, C. Q. Liu, and C. T. Tang,
‘‘Optimal dispatch of multi-region integrated energy system considering
heating network constraints and carbon trading,’’ Autom. Electr. Power
Syst., vol. 43, no. 19, pp. 52–59, 2019.
[22] H. Y. Zhou, W. H. Qian, J. J. Bo, Z. N. Wei, G. Q. Sun, and H. X.
Zang, ‘‘Analysis of typical application scenarios and project practice of
energy blockchain,’’ Electr. Power Construct., vol. 41, no. 2, pp. 11–20,
2020.
[23] M. T. Yang, B. X. Zhou, S. Dong, N. Lin, Z. G. Li, and F. Y. He, ‘‘Design
and dispatch optimization of microgrid electricity market supported by
blockchain,’’ Electr. Power Autom. Equip., vol. 39, no. 12, pp. 155–161,
2019.
[24] B. X. Zhou, M. T. Yang, S. Q. Shi, J. X. Wei, Z. G. Li, and S. Dong,
‘‘Blockchain based potential game model of microgrid market,’’ Autom.
Electr. Power Syst., vol. 44, no. 7, pp. 15–22, 2020.
[25] Q. S. Li, X. Y. Tang, and Q. M. Zhao, ‘‘Analysis of applying weak central-
ized blockchain technology in energy trading system of energy Internet,’’
Power Syst. Big Data, vol. 22, no. 6, pp. 22–27, 2019.
[26] N. T. Huang, J. R. Q. Bao, G. W. Cai, S. Y. Zhao, D. B. Liu, J.
S. Wang, and P. P. Wang, ‘‘Multi-agent joint investment in microgrid
source-storagemulti-strategy bounded rational decision-making evolution-
ary game capacity planning,’’ Proc. CSEE, vol. 40, no. 4, pp. 1212–1224,
2020.
[27] C. H. Peng, K. Qian, and J. L. Yan, ‘‘Differential evolutionary game
bidding strategy on generation side under new energy grid-connected
environment,’’ Power Syst. Technol., vol. 43, no. 6, pp. 2002–2009,
2019.
[28] H. B. Cheng, T. Luo, C. Kang, X. Tian, Y. X. Guo, and X. Wang, ‘‘Multi-
layer game bidding model for electric vehicle aggregators participating
in demand response,’’ Adv. Technol. Electr. Eng. Energy, vol. 39, no. 2,
pp. 46–56, 2020.
151876 VOLUME 8, 2020
X. Fu et al.: Research on Block-Chain-Based Intelligent Transaction and Collaborative Scheduling Strategies for Large Grid
XIAOLIN FU was born in Jinan, China. She
received the bachelor’s degree, in 2018. She is cur-
rently pursuing the master’s degree with Shanghai
Dianji University.
She serves as the Head of the Academic Depart-
ment of the Graduate Association. She published
an article in an international journal and she
has participated in the compilation of a book.
Her research direction is a smart grid multi-layer
transaction and collaborative scheduling strategy
based on blockchain.
Dr. Fu participated in the Shanghai Green Motors and Intelligent Man-
ufacturing graduate academic forum and won the third prize, in 2018.
In 2019, she won a national scholarship. In October 2019, she went to
the French Higher School of Science, Technology and Economics and the
University of Applied Sciences, Kaiserslautern, Germany, and participated in
the 2019 Sino-German Intelligent Manufacturing Technology Postgraduate
Academic Forum, and won the first prize.
HONG WANG received the bachelor’s degree,
in 2017, and the master’s degree in electrical and
electrical engineering from Strathclyde Univer-
sity, in 2018. He is currently pursuing the MPacc
degree with Tongji University, studying account-
ing, auditing and financial management.
He has published two international conference
papers and participated in the compilation of a
book. He obtained a total of eight invention patents
and utility model patents. His research direction is
the application of blockchain in the power economy and power market.
ZHIJIE WANG was engaged in the research work
of power transmission and new energy power
generation technology in the postdoctoral mobile
station of electrical engineering of the China
University of Mining and Technology, in 2005,
an Academic Leader of the key disciplines of
power electronics and power transmission of
the Shanghai Institute of Electrical Engineering,
Shanghai Talent Development Fund Program, and
a Shanghai Electric Group Technology Leader.
He participated in the completion of the national 863 project sub-
project robot patrol system path planning optimal control strategy research,
the National Natural Science Foundation of China sub-project service robot
based on information fusion technology decision-making method research,
and presided over the Shanghai Natural Science Foundation more than ten
projects, such as the Shanghai Municipal Science and Technology Commis-
sion Project and the Shanghai Talent Development Fund Project. His main
research direction is the energy Internet collaborative optimization dispatch
control and active distribution network technology based on blockchain.
VOLUME 8, 2020 151877