a0e5675f-88bd-4ab1-8779-2c6b65675dff
第 45卷 第 17期 2021年 9月 10日 Vol. 45 No. 17 Sept. 10，2021
http：//www.aeps-info.com
基于区块链的微电网电力市场电价与电量动态博弈
李军祥，王宇倩，何建佳，朱李婷
（上海理工大学管理学院，上海市 200093）
摘要：建立合理、有效的微电网电力市场交易机制来激励分布式清洁能源并网，是实现微电网运营
多方共赢、经济环保的重要途径。针对微电网交易环境中的现有问题，提出了基于区块链技术的电
力交易模式以改进微电网电力市场。介绍了微电网电力交易模式及其数学模型，以量化区块链技
术对交易主体决策的影响。由于系统内部主体存在产权独立性，且市场中电价、电量竞标存在先后
行动次序，应用 Stackelberg博弈理论求解市场各主体在追求目标最优时电价和电量的交互策略。
仿真结果表明：微电网基于区块链技术整合利用了分布式资源和设备，促进能源结构清洁化转型；
供需双方都作为独立节点参与电力市场，区块链交易平台信息的公开透明提高了参与主体用电决
策的精准性和经济效益。
关键词：微电网；区块链；Stackelberg博弈；电价竞标；电量竞标
0 引言
电力市场的改革使风电、光伏等可再生能源接
入电网的条件降低，加大了区域电网在风光储等分
布式电源投资上的力度，具有发用电能力的产消者
在电网中的比例逐年提升。国家发改委、国家能源
局于 2017年 11月印发《关于开展分布式发电市场
化交易试点的通知》［1］，文件明确分布式电源与用户
作为独立的利益主体，可以直接进行电力交易并参
与市场竞争。分布式电源具有布点灵活、投资成本
低、距离负荷侧近等天然优势，将其引入微电网可以
提高系统运营的经济环保性。但分布式电源地理位
置分散，单独的分布式电源容量小，具有较大的随机
性、波动性和间歇性，传统的集中式优化方法难以进
行并网和调度。此外，微电网市场优化问题参数多、
变量多，对数据的传输、通信和处理能力要求高，且
难以保证各主体信息的隐私安全性。
区块链技术在众多互联网技术中脱颖而出，有
望解决这些难题。区块链为能源互联网提供了一套
分布式、可信任、防篡改的综合解决方案［2］，实现了
分布式参与者接入与能源交易功能。已有诸多学者
探索分析区块链技术应用于虚拟电厂［3］、储能［4］、电
力辅助服务［5］、大用户直购电［6］、需求侧响应［7］等方
面的可行性，验证了区块链与能源互联网的耦合
性［8］。文献［9］设计了基于区块链的分布式能源交
易架构及结算机制，文献［10］探讨了借助区块链技
术实现碳排放市场的信用管理［10］等。现有研究大
多将区块链理念应用于电力交易，而关于区块链技
术的应用对市场成员决策影响的量化研究较少。
此外，微电网市场参与个体隶属于不同的产权
所有者，有不同的利益诉求，常规地将微电网当成一
个整体参与竞标并不合理。同时，市场运行过程先
完成电价竞标，后完成电量竞标确定调度计划，符合
主从递阶结构动态博弈，因此，选择 Stackelberg博
弈解决电力市场竞标问题。文献［11］分析了市场主
体的行为特征，利用 Stackelberg博弈解决电力市场
的竞价与调度问题；文献［12-13］基于主从博弈分析
售电商和用户在电力市场中的互动机制，从不同角
度对实时电价制定方法进行研究。但上述研究仅限
于供给侧或需求侧之间的博弈行为，尚未涉及电网
系统中多元主体间的交互，且上述博弈模型中个体
决策大多假设获取全局信息，忽略了信息的非同
步性。
基于上述背景，本文提出以区块链技术为支撑
的微电网电力市场，以优化电力交易机制。建立基
于区块链的电力交易定价策略，量化区块链技术的
应用对市场主体决策的影响，并应用 Stackelberg博
弈理论对市场电价、电量竞标问题进行求解。通过
算例仿真验证了发展基于区块链的微电网电力市场
的经济性与环保性价值。
DOI：10. 7500/AEPS20201115001
收稿日期：2020-11-15；修回日期：2021-05-06。
上网日期：2021-06-23。
国家自然科学基金资助项目（71871144）。
11
2021，45（17） ·区块链技术在电力系统中的应用·
1 基于区块链的微电网电力市场
1. 1 基于区块链的微电网市场
市场是买卖双方聚集在一起互相交易并决定商
品价格和产量的机制。本节对基于区块链技术的微
电网电力市场架构进行说明。
微电网市场主体主要包括负责区块链智能平台
运营和监管的运营商，提供辅助服务、基础设施建设
的地方电网公司，以及分布式电源和负荷（用户）。
考虑到产消者存在电源、用户之间的转化，即部分时
间为电源、部分时间为用户，将一个电力交易周期划
分为 T个时隙，时隙 t ∈ { 1，2，⋯，T }，以一个时隙为
单位，根据供需关系对分布式主体的角色进行判
断。电源表示充分利用自身清洁能源后持有多余能
源的个体，而无法满足自身用电需求的视为负荷。
微电网传统的中心化机构管理分布式电源成本较
高，还会因信息滞后造成资源浪费。分布式主体布
点灵活及节点进出网络随机的特点恰好符合区块链
的点对点（peer to peer，P2P）网络接口［14］，参与主体
作为独立节点链入基于区块链的电力市场，实现了
大规模分布式电源及负荷接入微电网的有效管理，
促成了电力实时交易、就近消纳。传统电力交易依
赖于第三方，区块链去信任的特质使供需双方直接
交易［15］，可实现供需双方精准匹配，打破了市场主
体间的信息壁垒，实现了透明、公正的信息披露。
本文提出基于区块链的微电网电力市场［16］，如
图 1所示。
分布式电源和用户申请注册时，提交身份 ID、
能源形式、地理位置、装机容量等相关信息，用于区
块链准入机制认证和身份标识。对符合市场准入规
则的个体进行加密并将虚拟地址、信誉评分等信息
存储在相应区块。市场成员作为系统节点具有相同
的地位，通过移动端应用程序执行基本操作，向全网
广播购、售电信息，发出交易请求。交易采用集合竞
价模式撮合，规则为在时隙 t内最大交易量的买卖
申报信息集中撮合。区块链以固定频率生成撮合交
易的区块进行交易确认，区块生成时间间隔与交易
周期时隙 t相同。
基于区块链的微电网电力市场由能量流和信息
流连接互通，智能电表根据合约订单执行充放电能
的计量，构建防篡改的数据传输；能量路由器实现实
时能量传递；两者高度融合、快速运转。所有链上个
体均可获取微电网实时信息，各节点通过平台内部
信息挖掘，采用本文模型及算法进行电价、电量优
化，实现博弈均衡达成最终协议，并将账户状态、收
据等交易信息写入区块链数据库。微电网通过公共
耦合点与主网连接，内部电力交易电量不平衡时，与
外部大电网进行能量交互以充分发挥市场效益。
1. 2 分布式主体电力市场选择
分布式主体拥有自由选择电力市场的权利，即
选择与大电网交易或参与基于区块链的微电网
市场。
以用户电力市场的选择为例进行分析。用户作
为理性行为人，根据现实场景做出个人效益最优化
的选择。用户对电力市场的偏好影响决策，成为市
场需求变化的直接反应。大电网相比于微电网具有
更稳定的电力可靠性保证，而基于区块链的电力市
场信息公开透明、实时交互，可帮助用户更精确地掌
握电力信息（如电力来源、实时电价、交易对方信用、
历史数据等），从而更精准地调整用电行为，以增加
用户对其的偏好程度。同时，微电网基于区块链广
泛利用价格低且环保的清洁能源，没有第三方赚取
差价，能减少部分交易成本。当用户在该平台获得
的经济激励具备一定吸引力时，就倾向于选择微电
网进行电力交易。由此可见，用户对微电网的偏好
程度与信息互通程度和经济激励程度呈正相关关
系，而信息互通程度取决于区块链技术的覆盖率，经
济激励程度则取决于区块链交易中心的电价制定策
略，即用户偏好由区块链技术的覆盖率和电价制定
策略决定。
类似地，电源对电力市场的选择也取决于区块
链技术覆盖率和电价制定策略。
设定 s∈[ 0，1 ]为区块链技术覆盖率，即微电网
应用区块链技术的范围。当整个微电网都覆盖区块
链技术时 s= 1；s= 0.5可以理解为微电网 50%的
��"6F"�
�*4*���
���*#�B8
*#1
*#2
�
B81
B82
�
���J+�*4*�����>�
;�����M��?@�0 J�3�
��J
�6�	
��
*��
��
**L!
*��� ���6*=�
6FC*�
�����J ��J
���
�6	3
图 1 基于区块链的微电网电力市场
Fig. 1 Blockchain based microgrid electricity market
12
李军祥，等 基于区块链的微电网电力市场电价与电量动态博弈
http：//www.aeps-info.com
区域覆盖了区块链技术，剩余 50%并未涉及，会影
响信息交互，从而影响用户决策，即分布式主体随区
块链技术覆盖率的增加倾向于选择微电网市场。另
一方面，微电网运营商设定供给侧售电收入提高为
传统交易模式下的 γi ( 1< γi< 1.5 )倍以吸引电源
参与；降低需求侧售电支出为传统交易模式下的
γj ( 0.5< γj< 1 )以吸引用户参与。若 γi、γj 均取值
为 1，则表示参与微电网市场未能获得经济激励，较
难吸引分布式成员参与，因此数值 1不取等号。同
时，为避免市场出现混乱和不可控，限制经济调整程
度小于传统模式的 0.5。γi 取值越大、γj取值越小，
电源和用户则更倾向于选择微电网市场。
文献［17］以线性函数 η= a [ ( β s + βb ) /2+ b ]
表示电价优惠越大，产消者选择社区运营商作为电
力交易方的概率越大，其中 βb和 β s分别为社区运营
商购、售电价调整系数，a和 b为线性函数的参数。
类似该文献，采用经济激励影响决策的线性函数
ηγi= c ( γi- 1 )+d 和 ηγj= c ( 1- γj )+ d 表 示 电 价
优惠对电源和用户选择微电网市场概率的影响，其
中 c和 d为线性函数的参数。进行数值实验时，若
γi、γj 代入得 ηγi> 1、ηγj> 1，则以 ηγi= 1、ηγj= 1进
行后续运算，以避免概率值脱离实际；若 γi、γj代入
得 ηγi< 0、ηγj< 0，则 以 ηγi= 0、ηγj= 0 进 行 后 续
运算。
基于以上分析，电源 i和用户 j选择微电网的概
率 ηPi ( 0≤ ηPi≤ 1 )和 ηPj ( 0≤ ηPj≤ 1 )以及选择大电
网作为交易市场的概率 ηgi和 ηgj各自为：
ηPi= {θ1 s+(1- θ1 ) [ c ( γi- 1 )+ d ] s≠ 0
0 s= 0
（1）
ηPj= {θ2 s+(1- θ2 ) [ c ( 1- γj )+ d ] s≠ 0
0 s= 0
（2）
ηgi= 1- ηPi （3）
ηgj= 1- ηPj （4）
式中：θ1和 θ2分别为电源 i和用户 j关于信息互通因
素和经济激励因素影响决策的权重。
1. 3 基于区块链的节点信誉
电源和负荷作为独立的节点链入系统，节点
k∈ { 1，2，⋯，K }，K为系统节点总数。记录节点违
规行为，根据节点行为的动态改变引入节点信誉
值［18-19］。运营商和电力公司共同监督，惩罚违规节
点，取消恶意节点的名额以保证系统正常运转。电
力市场供需平衡最终由大电网进行结算，交易方案
在执行前由区块链交易中心进行网络安全校核。最
终监管部门、交易中心和市场主体共同验证校核结
果的公平性与可信性，以此完善微电网市场机制，促
进市场成员积极交易，保障参与主体利益。
为简化计算，本文节点违规行为仅考虑对电价、
电量优化过程造成密切影响的出力偏差，现实场景
中节点违规行为更加广泛，不予尽述。在实际应用
中，出力即输出功率，而出力偏差是指上报给区块链
交易中心的预计功率与实际功率的差值。节点 k在
时隙 t上报出力为 xk，t，其实际出力为 x1k，t，则出力偏
差程度为 |( x 1k，t- xk，t ) /xk，t |，当实际出力等于上报电
量时，出力偏差程度为 0。由于出力偏差程度为 0在
实际中几乎不存在，设 A为出力偏差程度的阈值，
若计算出力偏差程度不大于阈值 A，则将出力偏差
程度记作 0进行后续运算；若计算出力偏差程度大
于阈值 A，则该数值不作改动直接进行后续运算。
将节点出力偏差记一次违规，一个周期内节点 k无
违规行为交易次数为 hk，实际成交次数为 Hk，则诚
信交易比例为 hk/Hk，即当每笔交易都无违约操作
时，诚信交易比例为 1。节点信誉值由诚信交易比
例和出力偏差程度决定，一个周期内节点 k的信誉
值Vk为：
Vk=
hk
Hk
- ∑
t= 1
T |
|
||
|
|
||
x1k，t- xk，t
xk，t
（5）
为与各主体经济效益统一量纲，引入节点单位
信誉值违约成本系数 fV，将成员的违约行为折算到
经济维度。违约成本 CV，k计算式为：
CV，k= fV ( 1- Vk ) （6）
2 基于区块链的微电网主从博弈竞标框架
2. 1 基于区块链的微电网市场电价、电量竞标框架
微电网传统交易环境信息不完全公开，市场成
员为更好地决策需花费较大的成本搜集相关信息。
基于区块链的市场数据区块的动态特性适应电力交
易的动态变化，为个体提供完全信息的博弈环境。
现假设：微电网市场竞标过程通过区块链实时更新
供给侧电量、需求侧负荷和当前交易电价，信息全部
公开透明，各主体完全理性。采用清洁能源最大化
消纳原则；电力交易只存在于供需之间，电源之间无
电力交易。市场竞标过程分为电价竞标和电量竞标
两个阶段，存在先后行动次序，符合主从递阶结构，
将其视为 Stackelberg 博弈过程，竞标框架如图 2
所示。
电价竞标相当于 Stackelberg博弈中的领导者，
电量竞标相当于跟随者。电量处于主从博弈下层，
被动地接受市场电价，但电量调度计划最终会影响
交易价格。第 1阶段，在大电网电价信息的基础上，
13
2021，45（17） ·区块链技术在电力系统中的应用·
设定竞争均衡价格为交易初始电价，数值接近估算
范围内的高频率成交价格，保证各主体可以获得合
理收益。电源与负荷收到电价后以自身效益最优完
成电量竞标，制定下一时隙的电量计划反馈给区块
链交易中心。第 2阶段，根据电量竞标结果对电价
进行更新，因此，下层的最优决策可以看作是上层决
策变量的函数。交易中心通过密码模块、共识模块
对交易订单进行安全校核，若安全校核通过，则交易
信息记录上链；若校核不通过，则市场成员重新进行
博弈达成新协议，并再次进行安全校核。根据上述
过程循环迭代，生成符合市场成员意愿并满足电网
物理约束的交易协议。
该算法是完全分布的，本地个体与邻居节点交
换信息即可实现本地优化，获得与全局优化一致的
最优解。电价与电量反复博弈实现市场供需两端调
节，保障电力实时平衡。电能供求实时互动［20-22］使
零售电价真正反映电力成本的实时变化，有利于形
成合理的价格，实现供需风险共担、利益共享。
基于区块链的微电网市场以价格信号引导电力
响应，供求变化通过竞争引起价格上下自由波动，由
传统管制性调度走向市场化；以市场机制分散化决
策，优化用能行为，合理安排能源供应，确定能源传
输网络的多能流最优潮流分布，从而实现电力资源
合理优化配置。最终实现供给需求弹性化、交易决
策自主化、交易品种多元化、发用电调度一体化。
2. 2 微电网市场主从博弈系统
将上述 Stackelberg博弈系统表示为：
G={ N；p；{ x i，x j }；{ Ri，Rj，RO } } （7）
该博弈系统包含 3个要素：参与者、策略、效益，
具体表示如下。
1）参与者：电源 i、负荷 j和微电网运营商 O，表
示为集合N ={ i，j，O }。
2）策略：领导者电价的策略以向量的形式可以
表示为 p=[ p1，p2，⋯，pT ]；跟随者电量的策略为电
源 i各时隙的输出功率和负荷 j各时隙的电量需求，
分 别 表 示 为 向 量 x i=[ xi，1，xi，2，⋯，xi，T ] 和 x j=
[ xj，1，xj，2，⋯，xj，T ]。
3）效益：电源、负荷和微电网运营商在该博弈系
统中的效益分别为 Ri、Rj和 RO。
3 模型的建立及分析
基于区块链的交易平台实现买卖双方信息对
等、协同自治；利用公钥和私钥生成带有时间戳的认
证信息和传输地址，解决节点信任和数据开放问
题。交易清算时，智能合约根据实际发用电数据以
及事先协议自动完成资金转移，实现流程自动化，提
高市场运行效率，促进电力市场公平化和低成本发
展。区块链框架下的电量、电价优化决策如下。
3. 1 基于区块链的微电网市场电量竞标下层博弈
电源和用户读取链上信息，以自身效用最优完
成电量竞标。电量竞标博弈的策略考虑为电源的输
出功率和用户的电力需求，博弈过程中电源与用户
效益分析如下。
1）时隙 t电源 i实时出力 xi，t为清洁能源出力 x ci，t
与化石能源出力 x ri，t 之和，即 xi，t= x ci，t+ x ri，t。电源
效益与交易市场选择有关，以 ηPi为概率有 ηPi x i，t的
电源选择基于区块链的微电网市场，优化过程只考
虑选择微电网的电源，将这部分电源的出力记为
x̂ i，t= ηPi x i，t，x̂ ci，t= ηPi x ci，t和 x̂ ri，t= ηPi x ri，t。时隙 t微电
网购售电价为 pt，则电源售电收入 Bi，t= x̂ i，t p t；电源
发 电 成 本 以 二 次 函 数［16］表 示 为 Ci，t= ai x̂2i，t+
bi x̂ i，t+ ci，参数 ai、bi、ci为发电成本系数。为避免市
场中出现经济学中的搭便车行为，将发电的外部成
本内部化，将清洁能源的环境激励收益和化石能源
的环境治理成本考虑到电源个体，参考文献［17］，将
清洁能源环境收益表示为 B ci，t= fc x̂ ci，t，其中 fc为环境
收益系数；化石能源环境成本为 C r
i，t= f r x̂ ri，t，其中 f r
为环境成本系数。
电源博弈过程的效益即利润，利润函数 Ri定义
为收入减去成本，即
Ri= ∑
t= 1
T
( Bi，t- Ci，t+ B ci，t- C r
i，t )- CV，i （8）
式中：CV，i为一个交易周期电源 i区块链节点的违约
成本，通过式（6）计算为一个常数。
电源的电量竞标过程遵循以下约束条件。
电源出力约束：
xi，min ≤ xi，t≤ xi，max （9）
式中：xi，max和 xi，min分别为电源 i的出力上、下限。
��"6F"�
��J����
*# B8
(*�)
�A
��*�
*���
��
*F
��
*F
�N
*�
�N
*�
�*4*���
�*4*���
*4*� �4*�
* B*
*�
*F
����
Stackelberg
��
*���
����
图 2 基于区块链的微电网市场主从博弈竞标框架
Fig. 2 Blockchain-based bidding framework of
Stackelberg game in microgrid market
爬坡约束：
-r di Δℓ≤ xi，t+△ℓ- xi，t≤ r ui Δℓ （10）
式中：r di 和 r ui 分别为电源 i的下坡率和上坡率；
Δℓ∈ { 1，2，⋯，T }为时间间隔长度。
此外，化石能源出力还需满足启停约束，约束条
件见参考文献［23］。
2）时隙 t用户 j实时负荷为 xj，t，负荷效益与交易
市场选择有关，以 ηPj为概率有 ηPj x j，t的用户选择基
于区块链的微电网市场，优化过程只考虑选择微电
网的用户，将这部分用户的负荷记为 x̂ j，t= ηPj x j，t。
时隙 t用户购电支出 Cj，t= x̂ j，t p t；用户用能效用为函
数 Uj，t，用能效用是指用户消耗一定电量的满意程
度，表示为［24］：
Uj，t= β ln (ωx̂j，t+ 1 ) x̂ j，t> 0 （11）
式中：ω为用户参与需求侧管理的意愿，综合参考文
献［24-25］选取；β为预设参数，反映用户的效用递增
速率。
在实际情况中，用户类别众多，本文根据用户用
电量规模将用户分为负荷 1和负荷 2两类，取 β为不
同的值反映两种不同规模用户的效用递增速率。
用户博弈过程的效益即用户福利，福利函数 Rj
定义为用能效用减去购电支出，即
Rj= ∑
t= 1
T
(Uj，t- Cj，t )- CV，j （12）
式中：CV，j为一个交易周期负荷 j区块链节点的违约
成本，通过式（6）计算为一个常数。
负荷的电量竞标过程遵循以下约束条件：
xj，min ≤ xj，t≤ xj，max （13）
式中：xj，max为用户负荷上限；xj，min为用户维持基础活
动的负荷。
此外，电源和用户交易过程还需满足潮流约束
和网络节点电压约束，约束条件可参考文献［23］。
综上，微电网市场电量竞标阶段电源和负荷根
据电价调整竞标电量以最大化自身经济效益。竞标
过程中电源的策略空间由式（9）和式（10）确定，记为
Ω i；负荷的策略空间由式（13）确定，记为 Ω j。在各
自策略空间下，电源以最大化利润函数 Ri制定出力
计划；负荷以最大化福利函数 Rj制定用电计划。电
量竞标模型为：
ì
í
î
ï
ïï
ï
ï
ïï
ï
max
x i
R i
s.t. [ xi，1，xi，2，⋯，xi，T ]∈Ω i
max
x j
R j
s.t. [ xj，1，xj，2，⋯，xj，T ]∈Ω j
（14）
3. 2 基于区块链的微电网市场电价竞标上层博弈
微电网运营商读取链上信息，以自身效用最优
制定电价策略，电价竞标博弈的策略考虑为下一时
隙交易电价，博弈过程中微电网运营商效益分析
如下。
微电网运营商只为市场成员提供交易平台，按
一定比例收取市场成员服务费用，运营商博弈过程
的效益即运营收益，收益函数 RO计算为：
RO= γ (∑
i= 1
N1
Ri + ∑
j= 1
N2
Rj) （15）
式中：γ为区块链服务费用系数；N 1和 N 2分别为选
择微电网市场的电源和负荷数量。
由式（15）可知，在区块链服务费用系数一定的
情况下，运营商效益与参与主体效益一致，理论上依
据电量竞标博弈的结果即可求得运营商的最优经济
效益。因此，只需考虑对选择微电网市场的个体效
益求最优。电源和用户在微电网市场的效益与电价
有关，运营商通过调整电价策略中 γi和 γj的取值来
获得更高的自身经济效益。由于运营商如何制定电
价策略来获取更高的效益不是本文研究的重点，此
处不进行详细阐述。根据电量竞标结果，市场交易
电价更新过程如下。
若 x *i，t- 1 和 x *j，t- 1 为第 1阶段电量竞标博弈结
果，即电源上报出力 x *i，t- 1至区块链交易中心，用户
上报负荷为 x *j，t- 1。传统模式下电源以售电价 p s，t向
大电网出售电力获得收入 B 0i，t，选择微电网获得经济
激励的电源售电收入预期为 B 1i，t= γi B 0i，t ( 1< γi<
1.5 )，则 电 源 预 期 下 一 时 隙 交 易 电 价 为 pi，t=
B 1i，t/x *i，t- 1。设 pg，t为大电网分时电价，传统模式下用
户以购电价 pg，t从大电网购入电力支出费用为 C 0
j，t，
选择微电网获得经济激励的负荷购电支出预期为
C 1
j，t= γjC 0
j，t ( 0.5< γj< 1 )，则负荷预期下一时隙交
易电价为 pj，t= C 1
j，t/x *j，t- 1。其中，为避免个别时隙
电量落差巨大，导致电价过分调整，采用上一时隙竞
标电量和该时隙历史平均电量的综合值来计算以传
统模式电源售电收入 B 0i，t和负荷购电支出 C 0
j，t：
B 0i，t=[ θi x *i，t- 1 +(1- θi ) x̄ i，t ] p s，t （16）
C 0
j，t=[ θj x *j，t- 1 +(1- θj ) x̄ j，t ] pg，t （17）
式中：x̄ i，t 为电源以概率 ηPi 选择基于区块链的微电
网市场时隙 t的历史平均出力；x̄ j，t为用户以概率 ηPj
选择基于区块链的微电网市场时隙 t的历史用户平
均负荷；θi、θj为权重值。
供需两侧协调得到下一时隙交易电价以实现系
统平衡，计算式为：
14
李军祥，等 基于区块链的微电网电力市场电价与电量动态博弈
http：//www.aeps-info.com
爬坡约束：
-r di Δℓ≤ xi，t+△ℓ- xi，t≤ r ui Δℓ （10）
式中：r di 和 r ui 分别为电源 i的下坡率和上坡率；
Δℓ∈ { 1，2，⋯，T }为时间间隔长度。
此外，化石能源出力还需满足启停约束，约束条
件见参考文献［23］。
2）时隙 t用户 j实时负荷为 xj，t，负荷效益与交易
市场选择有关，以 ηPj为概率有 ηPj x j，t的用户选择基
于区块链的微电网市场，优化过程只考虑选择微电
网的用户，将这部分用户的负荷记为 x̂ j，t= ηPj x j，t。
时隙 t用户购电支出 Cj，t= x̂ j，t p t；用户用能效用为函
数 Uj，t，用能效用是指用户消耗一定电量的满意程
度，表示为［24］：
Uj，t= β ln (ωx̂j，t+ 1 ) x̂ j，t> 0 （11）
式中：ω为用户参与需求侧管理的意愿，综合参考文
献［24-25］选取；β为预设参数，反映用户的效用递增
速率。
在实际情况中，用户类别众多，本文根据用户用
电量规模将用户分为负荷 1和负荷 2两类，取 β为不
同的值反映两种不同规模用户的效用递增速率。
用户博弈过程的效益即用户福利，福利函数 Rj
定义为用能效用减去购电支出，即
Rj= ∑
t= 1
T
(Uj，t- Cj，t )- CV，j （12）
式中：CV，j为一个交易周期负荷 j区块链节点的违约
成本，通过式（6）计算为一个常数。
负荷的电量竞标过程遵循以下约束条件：
xj，min ≤ xj，t≤ xj，max （13）
式中：xj，max为用户负荷上限；xj，min为用户维持基础活
动的负荷。
此外，电源和用户交易过程还需满足潮流约束
和网络节点电压约束，约束条件可参考文献［23］。
综上，微电网市场电量竞标阶段电源和负荷根
据电价调整竞标电量以最大化自身经济效益。竞标
过程中电源的策略空间由式（9）和式（10）确定，记为
Ω i；负荷的策略空间由式（13）确定，记为 Ω j。在各
自策略空间下，电源以最大化利润函数 Ri制定出力
计划；负荷以最大化福利函数 Rj制定用电计划。电
量竞标模型为：
ì
í
î
ï
ïï
ï
ï
ïï
ï
max
x i
R i
s.t. [ xi，1，xi，2，⋯，xi，T ]∈Ω i
max
x j
R j
s.t. [ xj，1，xj，2，⋯，xj，T ]∈Ω j
（14）
3. 2 基于区块链的微电网市场电价竞标上层博弈
微电网运营商读取链上信息，以自身效用最优
制定电价策略，电价竞标博弈的策略考虑为下一时
隙交易电价，博弈过程中微电网运营商效益分析
如下。
微电网运营商只为市场成员提供交易平台，按
一定比例收取市场成员服务费用，运营商博弈过程
的效益即运营收益，收益函数 RO计算为：
RO= γ (∑
i= 1
N1
Ri + ∑
j= 1
N2
Rj) （15）
式中：γ为区块链服务费用系数；N 1和 N 2分别为选
择微电网市场的电源和负荷数量。
由式（15）可知，在区块链服务费用系数一定的
情况下，运营商效益与参与主体效益一致，理论上依
据电量竞标博弈的结果即可求得运营商的最优经济
效益。因此，只需考虑对选择微电网市场的个体效
益求最优。电源和用户在微电网市场的效益与电价
有关，运营商通过调整电价策略中 γi和 γj的取值来
获得更高的自身经济效益。由于运营商如何制定电
价策略来获取更高的效益不是本文研究的重点，此
处不进行详细阐述。根据电量竞标结果，市场交易
电价更新过程如下。
若 x *i，t- 1 和 x *j，t- 1 为第 1阶段电量竞标博弈结
果，即电源上报出力 x *i，t- 1至区块链交易中心，用户
上报负荷为 x *j，t- 1。传统模式下电源以售电价 p s，t向
大电网出售电力获得收入 B 0i，t，选择微电网获得经济
激励的电源售电收入预期为 B 1i，t= γi B 0i，t ( 1< γi<
1.5 )，则 电 源 预 期 下 一 时 隙 交 易 电 价 为 pi，t=
B 1i，t/x *i，t- 1。设 pg，t为大电网分时电价，传统模式下用
户以购电价 pg，t从大电网购入电力支出费用为 C 0
j，t，
选择微电网获得经济激励的负荷购电支出预期为
C 1
j，t= γjC 0
j，t ( 0.5< γj< 1 )，则负荷预期下一时隙交
易电价为 pj，t= C 1
j，t/x *j，t- 1。其中，为避免个别时隙
电量落差巨大，导致电价过分调整，采用上一时隙竞
标电量和该时隙历史平均电量的综合值来计算以传
统模式电源售电收入 B 0i，t和负荷购电支出 C 0
j，t：
B 0i，t=[ θi x *i，t- 1 +(1- θi ) x̄ i，t ] p s，t （16）
C 0
j，t=[ θj x *j，t- 1 +(1- θj ) x̄ j，t ] pg，t （17）
式中：x̄ i，t 为电源以概率 ηPi 选择基于区块链的微电
网市场时隙 t的历史平均出力；x̄ j，t为用户以概率 ηPj
选择基于区块链的微电网市场时隙 t的历史用户平
均负荷；θi、θj为权重值。
供需两侧协调得到下一时隙交易电价以实现系
统平衡，计算式为：
15
2021，45（17） ·区块链技术在电力系统中的应用·
pt=
pi，t+ pj，t
2 = 1
2 ( B 1i，tx *i，t- 1
+ C 1
j，t
x *j，t- 1 ) （18）
交易价格的调整遵循以下约束条件：
pmin ≤ pt≤ pmax （19）
式中：pmin和 pmax分别为电网所允许的市场竞标电价
下限和上限。
电价竞标阶段，微电网运营商依据电量竞标结
果调整电价策略以最大化自身经济效益。电价的策
略空间由式（19）确定，记为ΩO，电价竞标模型为：
{maxp RO
s.t. [ p1，p2，⋯，pT ]∈ΩO
（20）
3. 3 博弈均衡解的存在性与唯一性
在 Stackelberg均衡解中，任一参与方均不能通
过单方面改变策略来获得更大的利益。Stackelberg
均衡解存在性与唯一性的相关定理［26］和证明过程
详见附录A。
3. 4 博弈参与者实际经济效益更新
通过 3.1节和 3.2节主从博弈竞标过程求得理
论上最佳的电价与电量，而数值实验过程进行供需
两侧交易金额比较时，需要根据交易实况更新实际
经济效益。博弈参与者电源、用户和运营商的实际
经济效益更新过程详见附录 B。
4 数值实验
应用MATLAB软件进行数值仿真，基于区块
链的微电网市场 Stackelberg博弈两阶段竞标模型
算法过程见附录 C图 C1，参数设置见附录 D表 D1，
其他相关数据参见文献［27］。调整 γi、γj 和 s的取
值，使得 ηPi 和 ηPj 分别取值为（1，1），（0.5，0.5），（0，
0）的 3种场景，即市场中 100%分布式电源和负荷选
择微电网（此时微电网区块链全覆盖，s= 1），50%
分布式电源和负荷选择微电网（此时微电网区块链
半覆盖，s= 0.5）和 0%分布式电源和负荷选择微电
网（此时未覆盖区块链技术，s= 0即传统模式）为
3种对比场景，验证本文所提交易模型。。
首先，3种场景下逐时电价曲线的求解结果如
图 3所示。
微电网市场优化运行的最终结果是在当地电网
提供的分时电价和上网电价（即传统模式购售电价
曲线）的包络线内完成价格竞标，为供需两侧提供与
电网相比更优的交易价格。微电网内部交易价格变
化趋势与电网分时电价类似，随着分时电价的上升
而上升，保证购售电一定的利润。对比 100%主体
和 50%主体参与微电网的电价曲线可知，区块链技
术覆盖率越高，则微电网市场电价优化效果越明显。
其次，需求侧电量优化结果如图 4、图 5所示。
需要说明的是，传统模式下的总负荷曲线已经
是用户在原电力市场机制下的较优选择，即已经是
分时电价机制引起的负荷转移后的结果。因此，本
*
F
/(k
W
·h
)
1 5 9 13 17 21 24
� 
20
25
30
35
40
45
50
55
60
100%B81� 50%B81� 100%B82� 50%B82
图 4 基于区块链的微电网市场电量竞标曲线
Fig. 4 Blockchain-based power bidding curves of
microgrid market
*
F
/(k
W
·h
)
1 5 9 13 17 21 24
� 
100%�B8� 50%�B8� �4����B8
100
150
50
200
250
300
图 5 3种场景下的总电量曲线对比
Fig. 5 Comparison of total power curves in
three scenarios
1 5 9 13 17 21 24
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1.0
1.1
*
�
/(�
·(k
W
·h
)-1
)
� 
�4*�� 100%����*�
*4��*�50%����*��
图 3 逐时电价曲线对比
Fig. 3 Comparison of hourly electricity price curves
文将基于区块链的微电网机制与传统模式的曲线进
行对比，而对比产生的优化效果一定是采用区块链
后带来的优势。在微电网市场机制的电价激励下，
负荷曲线表现出削峰填谷。由图 4可知，用户 50%
选择微电网、50%选择大电网分时电价交易时，微
电网市场内部交易电量确实约为 100%用户选择时
的一半。在微电网市场售电价较低时，负荷增加用
能需求以提升自身效益；相反，在电价峰时段下调负
荷需求以减少用能支出。由图 5中 3种场景下用户
总负荷曲线可知，传统模式下电力交易的负荷特性
呈现两头低、中间高，而当 100%用户选择微电网市
场时，负荷峰谷差显著减小。在实际应用中，可以体
现为用电量大的科技园、工业区和产业基地等工厂
选择在凌晨和夜晚开启消耗大功率的机器设备。对
比 100%用户和 50%用户曲线可知，参与微电网市
场用户数量越多、用电量越大，需求侧负荷曲线优化
效果越明显。基于区块链的市场负荷曲线相较于传
统模式更为平稳，说明优化后的市场机制可指导用
户科学用电，优化系统负荷特性。此外，当大电网处
于负荷高峰时，微电网可以配合参与外部电网削峰，
有利于电网安全稳定运行，实现微电网与大电网的
友好互动。
同时，供给侧电量优化结果如图 6所示。
当微电网区块链全覆盖时（此时 100%分布式
电源选择基于区块链的微电网市场），高比例清洁能
源入网减少了对化石能源的需求，化石能源出力峰
值下降，环境污染减少。对比市场内 100%电源和
50%电源曲线可知，区块链覆盖率越广，越多的清
洁能源参与微电网交易，供给侧电量优化效果越明
显。在新能源发电补贴减少的趋势下，利用微电网
建立基于区块链的电力交易平台可大幅降低分布式
电源对国家政策性补贴的依赖，有效促进清洁能源
就地消纳，提升可再生能源利用比例和使用效率。
此外，电力就近消纳减少了电能的实际传输距离和
传输损耗，降低了输配电成本；节省了输配电基础设
施对土地和空间的占用，节约了自然资源。
最后，供需两侧经济效益对比结果见附录 E图
E1、图 E2、图 E3。当分布式主体 100%选择微电网
市场时，电力交易由供需双方直接促成。由图 E1、
图 E3可见，相比于传统模式，用户用能成本降低，用
户福利却上升。同时，电源售电收入增加，净利润也
增加。当 50%主体选择微电网而剩余 50%选择大
电网作为电力交易市场时，相较于 100%的场景，供
给侧售电收入降低，需求侧购能成本增加，用户福利
减少。这是因为基于区块链的微电网广泛利用价格
低且环保的清洁能源，不存在第三方赚取差价，运营
商给予电源、用户可观的经济激励，只收取部分服务
费用，体现了区块链降低电力交易成本的优势。同
时，基于区块链的交易机制实现了利益及时结算，提
升交易效率和用户体验。相比于传统交易模式，电
源电力由电网收购时，上网电价明显低于基于区块
链的微电网内部电价；而用户从电网购电满足需求
时，分时电价又显然高于微电网内部电价，说明基于
区块链的电力交易显著提升了供需两侧的经济
效益。
仿真结果表明：基于区块链的微电网市场给予
分布式主体充分选择权，增加了市场自由度。以时
变的节点电价信号引导电源在时间尺度优化配置，
引导电网潮流更加均衡；引导负荷在时间尺度的转
移，改善了系统负荷特性。通过市场发现最佳价格
和交易量，以更灵活的电价策略平衡和优化各方利
益，提升电力商品效用，最大化社会效益。基于区块
链分布式入网提高清洁能源并网比例和电力设备利
用率，落实节能减排政策；实现电力短距离互动，降
低传输成本。整个系统将有限的资源转化为最大的
价值，运行更加灵活、安全、经济和高效。
5 结语
本文以拥有丰富分布式发用电主体的微电网为
研究对象，基于区块链技术建立电力市场以适应当
前能源生产、消费的分布式结构。提出市场电价和
电量协同的 Stackelberg动态博弈，通过优化算法求
出均衡时的交易电价和电量计划。基于区块链的微
电网市场机制可成为实现区域自治运行的一种辅助
方式，有效提升电力市场的竞争性和便利性，对中国
电力市场机制的完善具有一定的借鉴意义。目前，
文中尚未涉及储能装置，在未来的研究中需进一步
考虑储能装置的影响。
*
F
/(k
W
·h
)
1 5 9 13 17 21 24
� 
100%#"6#������ 50%#"6#�����
100%�-6#������ 50%�-6#�����
0
50
100
150
200
250
图 6 微电网市场电源出力曲线
Fig. 6 Power output curves of microgrid market
16
李军祥，等 基于区块链的微电网电力市场电价与电量动态博弈
http：//www.aeps-info.com
文将基于区块链的微电网机制与传统模式的曲线进
行对比，而对比产生的优化效果一定是采用区块链
后带来的优势。在微电网市场机制的电价激励下，
负荷曲线表现出削峰填谷。由图 4可知，用户 50%
选择微电网、50%选择大电网分时电价交易时，微
电网市场内部交易电量确实约为 100%用户选择时
的一半。在微电网市场售电价较低时，负荷增加用
能需求以提升自身效益；相反，在电价峰时段下调负
荷需求以减少用能支出。由图 5中 3种场景下用户
总负荷曲线可知，传统模式下电力交易的负荷特性
呈现两头低、中间高，而当 100%用户选择微电网市
场时，负荷峰谷差显著减小。在实际应用中，可以体
现为用电量大的科技园、工业区和产业基地等工厂
选择在凌晨和夜晚开启消耗大功率的机器设备。对
比 100%用户和 50%用户曲线可知，参与微电网市
场用户数量越多、用电量越大，需求侧负荷曲线优化
效果越明显。基于区块链的市场负荷曲线相较于传
统模式更为平稳，说明优化后的市场机制可指导用
户科学用电，优化系统负荷特性。此外，当大电网处
于负荷高峰时，微电网可以配合参与外部电网削峰，
有利于电网安全稳定运行，实现微电网与大电网的
友好互动。
同时，供给侧电量优化结果如图 6所示。
当微电网区块链全覆盖时（此时 100%分布式
电源选择基于区块链的微电网市场），高比例清洁能
源入网减少了对化石能源的需求，化石能源出力峰
值下降，环境污染减少。对比市场内 100%电源和
50%电源曲线可知，区块链覆盖率越广，越多的清
洁能源参与微电网交易，供给侧电量优化效果越明
显。在新能源发电补贴减少的趋势下，利用微电网
建立基于区块链的电力交易平台可大幅降低分布式
电源对国家政策性补贴的依赖，有效促进清洁能源
就地消纳，提升可再生能源利用比例和使用效率。
此外，电力就近消纳减少了电能的实际传输距离和
传输损耗，降低了输配电成本；节省了输配电基础设
施对土地和空间的占用，节约了自然资源。
最后，供需两侧经济效益对比结果见附录 E图
E1、图 E2、图 E3。当分布式主体 100%选择微电网
市场时，电力交易由供需双方直接促成。由图 E1、
图 E3可见，相比于传统模式，用户用能成本降低，用
户福利却上升。同时，电源售电收入增加，净利润也
增加。当 50%主体选择微电网而剩余 50%选择大
电网作为电力交易市场时，相较于 100%的场景，供
给侧售电收入降低，需求侧购能成本增加，用户福利
减少。这是因为基于区块链的微电网广泛利用价格
低且环保的清洁能源，不存在第三方赚取差价，运营
商给予电源、用户可观的经济激励，只收取部分服务
费用，体现了区块链降低电力交易成本的优势。同
时，基于区块链的交易机制实现了利益及时结算，提
升交易效率和用户体验。相比于传统交易模式，电
源电力由电网收购时，上网电价明显低于基于区块
链的微电网内部电价；而用户从电网购电满足需求
时，分时电价又显然高于微电网内部电价，说明基于
区块链的电力交易显著提升了供需两侧的经济
效益。
仿真结果表明：基于区块链的微电网市场给予
分布式主体充分选择权，增加了市场自由度。以时
变的节点电价信号引导电源在时间尺度优化配置，
引导电网潮流更加均衡；引导负荷在时间尺度的转
移，改善了系统负荷特性。通过市场发现最佳价格
和交易量，以更灵活的电价策略平衡和优化各方利
益，提升电力商品效用，最大化社会效益。基于区块
链分布式入网提高清洁能源并网比例和电力设备利
用率，落实节能减排政策；实现电力短距离互动，降
低传输成本。整个系统将有限的资源转化为最大的
价值，运行更加灵活、安全、经济和高效。
5 结语
本文以拥有丰富分布式发用电主体的微电网为
研究对象，基于区块链技术建立电力市场以适应当
前能源生产、消费的分布式结构。提出市场电价和
电量协同的 Stackelberg动态博弈，通过优化算法求
出均衡时的交易电价和电量计划。基于区块链的微
电网市场机制可成为实现区域自治运行的一种辅助
方式，有效提升电力市场的竞争性和便利性，对中国
电力市场机制的完善具有一定的借鉴意义。目前，
文中尚未涉及储能装置，在未来的研究中需进一步
考虑储能装置的影响。
*
F
/(k
W
·h
)
1 5 9 13 17 21 24
� 
100%#"6#������ 50%#"6#�����
100%�-6#������ 50%�-6#�����
0
50
100
150
200
250
图 6 微电网市场电源出力曲线
Fig. 6 Power output curves of microgrid market
17
2021，45（17） ·区块链技术在电力系统中的应用·
本文研究得到国家自然科学基金（71572113）
的 配 套 项 目（1P16303003，2020KJFZ034，
2019KJFZ048，2018KJFZ035）及上海理工大学大
学生创新训练计划项目（XJ2021150，XJ2021160，
XJ2021165，XJ2021191，XJ2021206）的资助，特此
感谢！
附录见本刊网络版（http：//www.aeps-info.com/
aeps/ch/index.aspx），扫英文摘要后二维码可以阅读
网络全文。
参 考 文 献
［1］国家能源局 .关于开展分布式发电市场化交易试点的通知［EB/
OL］.［2017-10-30］. http：//zfxxgk. nea. gov. cn/auto87/201711/
t20171113_3055.htm.
National Energy Administration. Notice on launching pilot
market-oriented trading of distributed power generation［EB/
OL］.［2017-10-30］. http：//zfxxgk. nea. gov. cn/auto87/201711/
t20171113_3055.htm.
［2］NAKAMOTO S. Bitcoin：a peer-to-peer electronic cash system
［EB/OL］.［2020-10-20］. https：//courses. cs. washington. edu/
courses/csep552/18wi/papers/nakamoto-bitcoin.pdf.
［3］CIOARA T， ANTAL M， MIHAILESCU V T， et al.
Blockchain-based decentralized virtual power plants of small
prosumers［J］. IEEE Access，2021，9（1）：29490-29504.
［4］WANG Yiting， QIU Weiqiang， LING Dong， et al. Proxy
signature-based management model of sharing energy storage in
blockchain environment［J］. Applied Sciences，2020，10（21）：
7502.
［5］李彬，曹望璋，祁兵，等 .区块链技术在电力辅助服务领域的应
用综述［J］.电网技术，2017，41（3）：736-744.
LI Bin， CAO Wangzhang， QI Bing， et al. Overview of
application of block chain technology in ancillary service market
［J］. Power System Technology，2017，41（3）：736-744.
［6］欧阳旭，朱向前，叶伦，等 .区块链技术在大用户直购电中的应
用初探［J］.中国电机工程学报，2017，37（13）：3737-3745.
OUYANG Xu，ZHU Xiangqian，YE Lun，et al. Preliminary
applications of blockchain technique in large consumers direct
power trading［J］. Proceedings of the CSEE，2017，37（13）：
3737-3745.
［7］WEN Shifan， XIONG Wenjun， TAN Junming， et al.
Blockchain enhanced price incentive demand response for building
user energy network in sustainable society［J］. Sustainable Cities
and Society，2021，68（2）：102748.
［8］宁晓静，张毅，林湘宁，等 .基于物理-信息-价值的能源区块链分
析［J］.电网技术，2018，42（7）：2312-2323.
NING Xiaojing，ZHANG Yi，LIN Xiangning，et al. Block chain
analysis of energy based on physics-information-value［J］. Power
System Technology，2018，42（7）：2312-2323.
［9］XIN Lu，SHI Linyun，CHEN Zhenyu，et al. Blockchain-based
distributed energy trading in energy internet：an SDN approach
［J］. IEEE Access，2019，7（1）：173817-173826.
［10］FELVER T，SALATIELLO C. A distributed carbon ledger：
using blockchain for emissions trading［J］. The International
Journal of Sustainability Policy and Practice，2020，16（1）：
37-50.
［11］顾洁，白凯峰，时亚军 .基于多主体主从博弈优化交互机制的
区域综合能源系统优化运行［J］.电网技术，2019，43（9）：3119-
3134.
GU Jie，BAI Kaifeng，SHI Yajun. Optimized operation of
regional integrated energy system based on multi-agent master-
slave game optimization interaction mechanism［J］. Power
System Technology，2019，43（9）：3119-3134.
［12］LIU Nian， YU Xinghuo， WANG Cheng， et al. Energy
sharing management for microgrids with PV prosumers： a
Stackelberg game approach ［J］. IEEE Transactions on
Industrial Informatics，2017，13（3）：1088-1098.
［13］代业明，高红伟，高岩，等 .具有电力需求预测更新的智能电网
实时定价机制［J］.电力系统自动化，2018，42（12）：58-63.
DAI Yeming，GAO Hongwei，GAO Yan，et al. Real-time
pricing mechanism in smart grid with forecasting update of
power demand［J］. Automation of Electric Power Systems，
2018，42（12）：58-63.
［14］ABDELLA J， SHUAIB K. Peer to peer distributed energy
trading in smart grids：a survey［J］. Energies，2018，11（6）：
1560-1581.
［15］KANG Jiawen，RONG Yu，HUANG Xumin，et al. Enabling
localized peer-to-peer electricity trading among plug-in hybrid
electric vehicles using consortium blockchains ［J］. IEEE
Transactions on Industrial Informatics，2017，13（6）：3154-
3164.
［16］方燕琼，甘霖，艾芊，等 .基于主从博弈的虚拟电厂双层竞标策
略［J］.电力系统自动化，2017，41（14）：61-69.
FANG Yanqiong，GAN Lin，AI Qian，et al. Stackelberg game
based bi-level bidding strategy for virtual power plant［J］.
Automation of Electric Power Systems，2017，41（14）：61-69.
［17］马丽，刘念，张建华，等 .基于主从博弈策略的社区能源互联网
分布式能量管理［J］.电网技术，2016，40（12）：3655-3662.
MA Li，LIU Nian，ZHANG Jianhua，et al. Distributed energy
management of community energy internet based on leader-
followers game［J］. Power System Technology，2016，40（12）：
3655-3662.
［18］李彬，覃秋悦，祁兵，等 .基于区块链的分布式能源交易方案设
计综述［J］.电网技术，2019，43（3）：961-972.
LI Bin，QIN Qiuyue，QI Bing，et al. Design of distributed
energy trading scheme based on blockchain［J］. Power System
Technology，2019，43（3）：961-972.
［19］ZACHARIA G， MOUKAS A， MAES P. Collaborative
reputation mechanisms for electronic marketplaces［J］. Decision
Support Systems，1999，29（4）：371-388.
［20］代业明，高岩，高红伟，等 .智能住宅小区的需求响应主从博弈
模型［J］.电力系统自动化，2017，41（15）：88-94.
DAI Yeming，GAO Yan，GAO Hongwei， et al. Leader-
follower game model for demand response in smart residential
grid［J］. Automation of Electric Power Systems， 2017， 41
（15）：88-94.
［21］许志宏，高岩，程潘红 .马尔科夫决策过程下含可再生能源的
18
李军祥，等 基于区块链的微电网电力市场电价与电量动态博弈
http：//www.aeps-info.com
实时电价策略［J］.上海理工大学学报，2020，42（5）：467-478.
XU Zhihong，GAO Yan，CHENG Panhong. Real-time pricing
strategy in consideration of renewable energy sources by using
Markov decision process for its uncertainty［J］. Journal of
University of Shanghai for Science and Technology，2020，42
（5）：467-478.
［22］高岩 .智能电网实时电价社会福利最大化模型的研究［J］.中国
管理科学，2020，28（10）：201-209.
GAO Yan. The social welfare maximization model of real-time
pricing for smart grid［J］. Chinese Journal of Management
Science，2020，28（10）：201-209.
［23］王冠，李鹏，焦扬，等 .计及风光不确定性的虚拟电厂多目标随
机调度优化模型［J］.中国电力，2017，50（5）：107-113.
WANG Guan，LI Peng，JIAO Yang，et al. Multi-objective
stochastic scheduling optimization model for virtual power plant
considering uncertainty of wind and photovoltaic power［J］.
Electric Power，2017，50（5）：107-113.
［24］刘博，李军祥，高岩 .智能电网分类用户实时电价算法研究［J］.
计算机应用研究，2017，34（9）：2605-2609.
LIU Bo，LI Junxiang，GAO Yan. Research on real-time pricing
algorithm for classified subscribers on smart grid［J］. Application
Research of Computers，2017，34（9）：2605-2609.
［25］代业明，高岩，朱红波，等 .考虑消费者激励因素的智能电网多
零售商多用户实时定价策略［J］.工业工程，2017，20（1）：12-19.
DAI Yeming，GAO Yan， ZHU Hongbo， et al. Real-time
pricing scheme considering incentive factor between multi-
retailers and multi-users in smart grid［J］. Industrial Engineering
Journal，2017，20（1）：12-19.
［26］BELGANA A， RIMAL B P， MAIER M. Open energy
market strategies in microgrids：a Stackelberg game approach
based on a hybrid multi-objective evolutionary algorithm［J］.
IEEE Transactions on Smart Grid，2015，6（3）：1243-1252.
［27］SU W，HUANG A Q. A game theoretic framework for a next-
generation retail electricity market with high penetration of
distributed residential electricity suppliers［J］. Applied Energy，
2014，119（4）：341-350.
李军祥 (1971—)，男，博士，教授，博士生导师，主要研究
方向：管理科学与工程、系统科学。E-mail：lijx@usst.edu.cn
王宇倩 (1996—)，女，硕士研究生，主 要 研 究 方 向 ：智能
电网。E-mail：yuqian_w@163.com
何建佳 (1981—)，男，通信作者，博士，副教授，博士生导
师，主要研究方向：管理科学与工程。E-mail：hejianjiayan@
163.com
（编辑 章黎）
Blockchain-based Dynamic Game of Electricity Price and Power for Microgrid Electricity Market
LI Junxiang，WANG Yuqian，HE Jianjia，ZHU Liting
(Business School, University of Shanghai for Science and Technology, Shanghai 200093, China)
Abstract: Establishing a reasonable and effective trading mechanism for microgrid electricity market to encourage the integration of
distributed clean energy is an important way to achieve the multi-party win-win, economy and environmental protection in
microgrid operation. In view of the existing problems in the microgrid trading environment, a power trading mode based on the
blockchain technology is proposed to improve the microgrid electricity market. The microgrid power trading mode and its
mathematical model are introduced to quantify the impact of blockchain technology on the decision-making of trading entities. Due
to the independence of property rights of the system internal entities, and the existing order of action in the electricity price and
power bidding in the market, the Stackelberg game theory is used to solve the interactive strategy of electricity price and power
when the market entities pursue the optimal target. The simulation results show that the microgrid integrates and utilizes distributed
resources and equipment based on blockchain technology to promote the clean transformation of the energy structure, both the
supply and demand parties participate in the electricity market as independent nodes, and the open and transparent information of
the blockchain trading platform improves the accuracy and economic benefits of the electricity decision-making by the participating
entities.
This work is supported by National Natural Science Foundation of China (No. 71871144).
Key words: microgrid; blockchain; Stackelberg game; electricity price bidding; power bidding
19